!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Xt=e():t.Xt=e()}(window,function(){return function(l){function t(t){for(var e,n,r=t[0],i=t[1],o=t[2],a=0,s=[];a<r.length;a++)n=r[a],Object.prototype.hasOwnProperty.call(c,n)&&c[n]&&s.push(c[n][0]),c[n]=0;for(e in i)Object.prototype.hasOwnProperty.call(i,e)&&(l[e]=i[e]);for(h&&h(t);s.length;)s.shift()();return p.push.apply(p,o||[]),u()}function u(){for(var t,e=0;e<p.length;e++){for(var n=p[e],r=!0,i=1;i<n.length;i++){var o=n[i];0!==c[o]&&(r=!1)}r&&(p.splice(e--,1),t=a(a.s=n[0]))}return t}var n={},c={1:0},p=[];function a(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return l[t].call(e.exports,e,e.exports,a),e.l=!0,e.exports}a.m=l,a.c=n,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var e=window.webpackJsonpXt=window.webpackJsonpXt||[],r=e.push.bind(e);e.push=t,e=e.slice();for(var i=0;i<e.length;i++)t(e[i]);var h=r;return p.push([251,0,2,3]),u()}([,,,,,,,,,function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(t){return typeof t}:e.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}e.exports=n},,function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).VERTEX="vertex",i.TILESET="tileset",i.ARTIFICIAL_MODEL_TILESET="artificial_model_tileset",i.REAL_SCENCE_MODEL_TILESET="real_scence_model_tileset",i.FEATURE_MODEL_TILESET="feature_model_tileset",i.IMAGERY_LAYER="imagery_layer",i.HEAT_MAP="heat_map",i.GEOJSON="geo_json",i.COMPOSITE_APPEARANCE="composite_appearance",i.POINT_PRIMITIVE_COLLECTION="point_primitive_collection",i.POLYLINE_PRIMITIVE_COLLECTION="polyline_primitive_collection",i.BILLBOARD_PRIMITIVE_COLLECTION="billboard_primitive_collection",i.LABEL_PRIMITIVE_COLLECTION="label_primitive_collection",i.MODEL_PRIMITIVE_COLLECTION="model_primitive_collection",i.BILLBOARD="billboard",i.POINT="point",i.POLYLINE="polyline",i.POLYGON="polygon",i.POLYLINE_GLOW="polyline_glow",i.POLYLINE_ARROW="polyline_arrow",i.POLYLINE_DASH="polyline_dash",i.POLYLINE_OUTLINE="polyline_outline",i.MODEL="model",i.LABEL="label",i.WALL="wall",i.BOX="box",i.CORRIDOR="corridor",i.CYLINDER="cylinder",i.ELLIPSE="ellipse",i.ELLIPSOID="ellipsoid",i.PLANE="plane",i.POLYLINE_VOLUME="polyline_volume",i.RECTANGLE="rectangle",i.PIN="pin",i.STRAIGHT_ARROW="straight_arrow",i.ATTACK_ARROW="attact_arrow",i.PINCER_ARROW="pincer_arrow",i.OD_LINE="o_d_line",i.CIRCLE_SPREAD="circle_spread",i.RADAR_SCAN="radar_scan",i.DYNAMIC_POINT="dynamic_point",i.DYNAMIC_WATER_SURFACE="dynamic_water_surface",i.DYNAMIC_WALL="dynamic_wall",i.DYNAMIC_ELLIPSOID="dynamic_ellipsoid",i.DYNAMIC_ELLIPSE="dynamic_ellipse",i.DYNAMIC_TETRAHEDRON="dynamic_tetrahedron",i.DYNAMIC_RADAR="dynamic_radar",i.DYNAMIC_CYLINDER_PARTICLE="dynamic_cylinder_particle",i.DYNAMIC_FLICKER_CYLINDER="dynamic_flicker_cylinder",i.DYNAMIC_SPREAD_CYLINDER="dynamic_spread_cylinder",i.DYNAMIC_ROTATE_CYLINDER="dynamic_rotate_cylinder",i.WAVE_POINT="WAVE_POINT",i.DIV_POINT="div_point",i.FLY_LINE="fly_line",e.default=r},function(t,r,e){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isAbsolute=r.typeOf=r.isString=r.isNumber=r.isBoolean=r.isFunction=r.isArray=r.isObject=void 0,r.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)&&"Object"===t.constructor.name},r.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},r.isFunction=function(t){return"[object Function]"===Object.prototype.toString.call(t)},r.isBoolean=function(t){return"[object Boolean]"===Object.prototype.toString.call(t)},r.isNumber=function(t){return"[object Number]"===Object.prototype.toString.call(t)},r.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},r.typeOf=function(t){var e=Object.prototype.toString.call(t);if(e){var n=e.split(" ");if(r.isArray(n)&&n[1])return n[1].slice(0,n[1].length-1).toLowerCase()}},r.isAbsolute=function(t){return/(^[\/\\].*)|(.*:.*)/.test(t)}},,,,function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).PRIMITIVE="primitive",i.IMAGERY_LAYER="imagery_layer",i.ENTITY="entity",i.DATA_SOURCE="data_source",i.PRIMITIVE_COLLECTION="primitive_collection",e.default=r},,,function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(129),s=(o=a.default,i(l,o),l.prototype.fromJSON=function(t){o.prototype.fromJSON.call(this,t||{})},l.prototype.toJSON=function(){return o.prototype.toJSON.call(this)},l);function l(){return o.call(this)||this}e.default=s},function(t,d,e){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.getFullOptions=d.getPerOptions=d.definedProperties=d.getConvertParams=d.returnAvailableValue=void 0;function a(t,e,n){return y.isFunction(t["_"+e])?t["_"+e](n):d.returnAvailableValue(t["_"+e],n[""+e])}var y=e(12),r=e(27);d.returnAvailableValue=function(t,e){return y.isBoolean(t)||y.isNumber(t)||y.isString(t)?t:t||e},d.getConvertParams=function(e,t,n,r,i){if(t){var o={};return t.forEach(function(t){o[t]=a(e,t,r)}),o.target=i,o}return a(e,n,r)},d.definedProperties=function(h,o,f,a){var t=Object.getOwnPropertyNames(o);f=f||{},t.forEach(function(l){h["_"+l]=d.returnAvailableValue(f[l],o[l].value);var t=o[l].readonly,e=o[l].convert,u=e||function(t){return t},i=o[l].target||l,c=o[l].convertParams,p=o[l].required,n={configurable:!0,get:function(){var t=o[l].value,e=h["_"+l];return y.isBoolean(e)?e:d.returnAvailableValue(h["_"+l],t)}};t||(n.set=function(t){var e,n=o[l].type,r=y.typeOf(t);(0<=n.indexOf(r)||"function"===r)&&(h["_"+l]=t,e=y.isArray(i)?i:[i],a?a({name:l,value:t,convert:u,convertParams:c,target:e}):e.forEach(function(t){for(var e,n,r=t.split("."),i=h.getBaseValue?h.getBaseValue():h.value,o=0,a=r.length;o<a;o++)if(o===a-1){var s=u(d.getConvertParams(h,c,l,f,t));e=s,n=i[r[o]],e._value?(JSON.stringify(n._value),JSON.stringify(e._value)):e.getValue?(JSON.stringify(n.getValue()),JSON.stringify(e.getValue())):(JSON.stringify(n._value),JSON.stringify(e));if(!s&&!1!==s&&p)break;i[r[o]]=s}else i=i[r[o]]}))}),Object.defineProperty(h,l,n)})},d.getPerOptions=function(l,e,t){var n=Object.getOwnPropertyNames(e);t=t||{};var u=d.getFullOptions(e,r.default(t)),c={};return n.forEach(function(o){e[o].type;var a=e[o].convert,t=y.isArray(e[o].target)?e[o].target:e[o].target?[e[o].target]:[o],s=e[o].convertParams;t.forEach(function(t){for(var e=t.split("."),n=c,r=0,i=e.length;r<i;r++)r!==i-1?(n[e[r]]||(n[e[r]]={}),n=n[e[r]]):n[e[r]]=a?a(d.getConvertParams(l,s,o,u,t)):d.getConvertParams(l,s,o,u,t)})}),c},d.getFullOptions=function(e,n){return Object.getOwnPropertyNames(e).forEach(function(t){n[t]=d.returnAvailableValue(n[t],e[t].value)}),n}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function s(t,e){return t<72.004||137.8347<t||e<.8293||55.8271<e||!1}function l(t,e){var n=2*t-100+3*e+.2*e*e+.1*t*e+.2*window.Math.sqrt(window.Math.abs(t));return n+=2*(20*window.Math.sin(6*t*c)+20*window.Math.sin(2*t*c))/3,n+=2*(20*window.Math.sin(e*c)+40*window.Math.sin(e/3*c))/3,n+=2*(160*window.Math.sin(e/12*c)+320*window.Math.sin(e*c/30))/3}function u(t,e){var n=300+t+2*e+.1*t*t+.1*t*e+.1*window.Math.sqrt(window.Math.abs(t));return n+=2*(20*window.Math.sin(6*t*c)+20*window.Math.sin(2*t*c))/3,n+=2*(20*window.Math.sin(t*c)+40*window.Math.sin(t/3*c))/3,n+=2*(150*window.Math.sin(t/12*c)+300*window.Math.sin(t/30*c))/3}var i=n(8),a=52.35987755982988,c=3.141592653589793,p=6378245,h=.006693421622965943,o={cartesianToDegrees:function(t){var e=i.Cartographic.fromCartesian(t);return[i.Math.toDegrees(e.longitude),i.Math.toDegrees(e.latitude),e.height]},cartographicToDegrees:function(t){return[i.Math.toDegrees(t.longitude),i.Math.toDegrees(t.latitude),t.height]},degreesToCartesian:function(t){return i.Cartesian3.fromDegrees(t[0],t[1],t[2]||0)},coordinateArrayToPositions:function(t){return 2<t[0].length?i.Cartesian3.fromDegreesArrayHeights([].concat.apply([],t)):i.Cartesian3.fromDegreesArray([].concat.apply([],t))},wgs84ToGcj02:function(t,e){if(s(t,e))return[t,e];var n=l(t-105,e-35),r=u(t-105,e-35),i=e/180*c,o=window.Math.sin(i),o=1-h*o*o,a=window.Math.sqrt(o),n=180*n/(p*(1-h)/(o*a)*c);return[t+(r=180*r/(p/a*window.Math.cos(i)*c)),e+n]},gcj02ToWgs84:function(t,e){if(s(t,e))return[t,e];var n=l(t-105,e-35),r=u(t-105,e-35),i=e/180*c,o=window.Math.sin(i),o=1-h*o*o,a=window.Math.sqrt(o),n=180*n/(p*(1-h)/(o*a)*c);return[2*t-(t+(r=180*r/(p/a*window.Math.cos(i)*c))),2*e-(e+n)]},bd09ToGcj02:function(t,e){var n=(t=+t)-.0065,r=(e=+e)-.006,i=window.Math.sqrt(n*n+r*r)-2e-5*window.Math.sin(r*a),o=window.Math.atan2(r,n)-3e-6*window.Math.cos(n*a);return[i*window.Math.cos(o),i*window.Math.sin(o)]},gcj02ToBd09:function(t,e){e=+e,t=+t;var n=window.Math.sqrt(t*t+e*e)+2e-5*window.Math.sin(e*a),r=window.Math.atan2(e,t)+3e-6*window.Math.cos(t*a);return[n*window.Math.cos(r)+.0065,n*window.Math.sin(r)+.006]},wgs84ToBd09:function(t,e){var n=o.wgs84ToGcj02(t,e);return o.gcj02ToBd09(n[0],n[1])},bd09ToWgs84:function(t,e){var n=o.bd09ToGcj02(t,e);return o.gcj02ToWgs84(n[0],n[1])},distanceByDegrees:function(t,e){var n=o.degreesToCartesian(t),r=o.degreesToCartesian(e);return i.Cartesian3.distance(n,r)}};e.default=o},,,,function(t,e,n){"use strict";var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0}),e.numberToRadis=e.arrayToCartesian3=e.arrayToCartesian2=e.arrayToNearFarScalar=e.arrayToDistanceDisplayCondition=e.arrayToCartesianPositions=e.arrayToCartesianPosition=e.stringToColor=void 0;var i=n(8);e.stringToColor=function(t){return i.Color.fromCssColorString(t)},e.arrayToCartesianPosition=function(t){return i.Cartesian3.fromDegrees(t[0],t[1],t[2]||0)},e.arrayToCartesianPositions=function(t){return 2<t[0].length?i.Cartesian3.fromDegreesArrayHeights([].concat.apply([],t)):i.Cartesian3.fromDegreesArray([].concat.apply([],t))},e.arrayToDistanceDisplayCondition=function(t){return new i.DistanceDisplayCondition(t[0],t[1])},e.arrayToNearFarScalar=function(t){return new(i.NearFarScalar.bind.apply(i.NearFarScalar,r([void 0],t)))},e.arrayToCartesian2=function(t){return new i.Cartesian2(t[0],t[1])},e.arrayToCartesian3=function(t){return new i.Cartesian3(t[0],t[1],t[2])},e.numberToRadis=function(t){return i.Math.toRadians(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return JSON.parse(JSON.stringify(t))}},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).NONE="none",i.ADD="add",i.EDIT="edit",e.default=r},,,,,,,,,,,,,,,,function(t,e,n){var r=n(9),i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"===("undefined"==typeof window?"undefined":r(window))&&(i=window)}t.exports=i},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).NODE="node",i.GROUP="group",i.TREE="tree",e.default=r},,,,,,function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).CENTER="center",i.BOTTOM="bottom",i.TOP="top",i.BASELINE="baseline",e.default=r},,,,function(t,N,M){"use strict";(function(t){var s=M(253),o=M(158),a=M(159);function n(){return p.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(t,e){if(n()<e)throw new RangeError("Invalid typed array length");return p.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=p.prototype:(null===t&&(t=new p(e)),t.length=e),t}function p(t,e,n){if(!(p.TYPED_ARRAY_SUPPORT||this instanceof p))return new p(t,e,n);if("number"!=typeof t)return r(this,t,e,n);if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return i(this,t)}function r(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r);p.TYPED_ARRAY_SUPPORT?(t=e).__proto__=p.prototype:t=c(t,e);return t}(t,e,n,r):"string"==typeof e?function(t,e,n){"string"==typeof n&&""!==n||(n="utf8");if(!p.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|f(e,n),i=(t=l(t,r)).write(e,n);i!==r&&(t=t.slice(0,i));return t}(t,e,n):function(t,e){if(p.isBuffer(e)){var n=0|h(e.length);return 0===(t=l(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||function(t){return t!=t}(e.length)?l(t,0):c(t,e);if("Buffer"===e.type&&a(e.data))return c(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function u(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function i(t,e){if(u(e),t=l(t,e<0?0:0|h(e)),!p.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function c(t,e){var n=e.length<0?0:0|h(e.length);t=l(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=n())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n().toString(16)+" bytes");return 0|t}function f(t,e){if(p.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return I(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return A(t).length;default:if(r)return I(t).length;e=(""+e).toLowerCase(),r=!0}}function e(t,e,n){var r,i,o,a=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t=t||"utf8";;)switch(t){case"hex":return function(t,e,n){var r=t.length;(!e||e<0)&&(e=0);(!n||n<0||r<n)&&(n=r);for(var i="",o=e;o<n;++o)i+=function(t){return t<16?"0"+t.toString(16):t.toString(16)}(t[o]);return i}(this,e,n);case"utf8":case"utf-8":return v(this,e,n);case"ascii":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}(this,e,n);case"latin1":case"binary":return function(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}(this,e,n);case"base64":return r=this,o=n,0===(i=e)&&o===r.length?s.fromByteArray(r):s.fromByteArray(r.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}(this,e,n);default:if(a)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),a=!0}}function d(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):2147483647<n?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=p.from(e,r)),p.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,p.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o=1,a=t.length,s=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a/=o=2,s/=2,n/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i)for(var u=-1,c=n;c<a;c++)if(l(t,c)===l(e,-1===u?0:c-u)){if(-1===u&&(u=c),c-u+1===s)return u*o}else-1!==u&&(c-=c-u),u=-1;else for(a<n+s&&(n=a-s),c=n;0<=c;c--){for(var p=!0,h=0;h<s;h++)if(l(t,c+h)!==l(e,h)){p=!1;break}if(p)return c}return-1}function _(t,e,n,r){return L(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function m(t,e,n,r){return L(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function v(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,l,u=t[i],c=null,p=239<u?4:223<u?3:191<u?2:1;if(i+p<=n)switch(p){case 1:u<128&&(c=u);break;case 2:128==(192&(o=t[i+1]))&&127<(l=(31&u)<<6|63&o)&&(c=l);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&2047<(l=(15&u)<<12|(63&o)<<6|63&a)&&(l<55296||57343<l)&&(c=l);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&65535<(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)&&l<1114112&&(c=l)}null===c?(c=65533,p=1):65535<c&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=p}return function(t){var e=t.length;if(e<=b)return String.fromCharCode.apply(String,t);var n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=b));return n}(r)}N.Buffer=p,N.SlowBuffer=function(t){+t!=t&&(t=0);return p.alloc(+t)},N.INSPECT_MAX_BYTES=50,p.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),N.kMaxLength=n(),p.poolSize=8192,p._augment=function(t){return t.__proto__=p.prototype,t},p.from=function(t,e,n){return r(null,t,e,n)},p.TYPED_ARRAY_SUPPORT&&(p.prototype.__proto__=Uint8Array.prototype,p.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&p[Symbol.species]===p&&Object.defineProperty(p,Symbol.species,{value:null,configurable:!0})),p.alloc=function(t,e,n){return r=null,o=e,a=n,u(i=t),!(i<=0)&&void 0!==o?"string"==typeof a?l(r,i).fill(o,a):l(r,i).fill(o):l(r,i);var r,i,o,a},p.allocUnsafe=function(t){return i(null,t)},p.allocUnsafeSlow=function(t){return i(null,t)},p.isBuffer=function(t){return!(null==t||!t._isBuffer)},p.compare=function(t,e){if(!p.isBuffer(t)||!p.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},p.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},p.concat=function(t,e){if(!a(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return p.alloc(0);if(void 0===e)for(i=e=0;i<t.length;++i)e+=t[i].length;for(var n=p.allocUnsafe(e),r=0,i=0;i<t.length;++i){var o=t[i];if(!p.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(n,r),r+=o.length}return n},p.byteLength=f,p.prototype._isBuffer=!0,p.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)d(this,e,e+1);return this},p.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)d(this,e,e+3),d(this,e+1,e+2);return this},p.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)d(this,e,e+7),d(this,e+1,e+6),d(this,e+2,e+5),d(this,e+3,e+4);return this},p.prototype.toString=function(){var t=0|this.length;return 0==t?"":0===arguments.length?v(this,0,t):e.apply(this,arguments)},p.prototype.equals=function(t){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===p.compare(this,t)},p.prototype.inspect=function(){var t="",e=N.INSPECT_MAX_BYTES;return 0<this.length&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},p.prototype.compare=function(t,e,n,r,i){if(!p.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(i<=r&&n<=e)return 0;if(i<=r)return-1;if(n<=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(r,i),u=t.slice(e,n),c=0;c<s;++c)if(l[c]!==u[c]){o=l[c],a=u[c];break}return o<a?-1:a<o?1:0},p.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},p.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},p.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},p.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||i<n)&&(n=i),0<t.length&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r=r||"utf8";for(var o,a,s,l,u,c,p=!1;;)switch(r){case"hex":return function(t,e,n,r){n=Number(n)||0;var i=t.length-n;(!r||i<(r=Number(r)))&&(r=i);var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");o/2<r&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}(this,t,e,n);case"utf8":case"utf-8":return u=e,c=n,L(I(t,(l=this).length-u),l,u,c);case"ascii":return _(this,t,e,n);case"latin1":case"binary":return _(this,t,e,n);case"base64":return o=this,a=e,s=n,L(A(t),o,a,s);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return m(this,t,e,n);default:if(p)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),p=!0}},p.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var b=4096;function w(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(n<t+e)throw new RangeError("Trying to access beyond buffer length")}function x(t,e,n,r,i,o){if(!p.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(i<e||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function C(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function E(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function P(t,e,n,r){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function O(t,e,n,r,i){return i||P(t,0,n,4),o.write(t,e,n,r,23,4),n+4}function T(t,e,n,r,i){return i||P(t,0,n,8),o.write(t,e,n,r,52,8),n+8}p.prototype.slice=function(t,e){var n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):n<t&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):n<e&&(e=n),e<t&&(e=t),p.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=p.prototype;else for(var r=e-t,i=new p(r,void 0),o=0;o<r;++o)i[o]=this[o+t];return i},p.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||w(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},p.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||w(t,e,this.length);for(var r=this[t+--e],i=1;0<e&&(i*=256);)r+=this[t+--e]*i;return r},p.prototype.readUInt8=function(t,e){return e||w(t,1,this.length),this[t]},p.prototype.readUInt16LE=function(t,e){return e||w(t,2,this.length),this[t]|this[t+1]<<8},p.prototype.readUInt16BE=function(t,e){return e||w(t,2,this.length),this[t]<<8|this[t+1]},p.prototype.readUInt32LE=function(t,e){return e||w(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},p.prototype.readUInt32BE=function(t,e){return e||w(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},p.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||w(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return(i*=128)<=r&&(r-=Math.pow(2,8*e)),r},p.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||w(t,e,this.length);for(var r=e,i=1,o=this[t+--r];0<r&&(i*=256);)o+=this[t+--r]*i;return(i*=128)<=o&&(o-=Math.pow(2,8*e)),o},p.prototype.readInt8=function(t,e){return e||w(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},p.prototype.readInt16LE=function(t,e){e||w(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt16BE=function(t,e){e||w(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},p.prototype.readInt32LE=function(t,e){return e||w(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},p.prototype.readInt32BE=function(t,e){return e||w(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},p.prototype.readFloatLE=function(t,e){return e||w(t,4,this.length),o.read(this,t,!0,23,4)},p.prototype.readFloatBE=function(t,e){return e||w(t,4,this.length),o.read(this,t,!1,23,4)},p.prototype.readDoubleLE=function(t,e){return e||w(t,8,this.length),o.read(this,t,!0,52,8)},p.prototype.readDoubleBE=function(t,e){return e||w(t,8,this.length),o.read(this,t,!1,52,8)},p.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||x(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},p.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||x(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;0<=--i&&(o*=256);)this[e+i]=t/o&255;return e+n},p.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,1,255,0),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},p.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},p.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,65535,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},p.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):E(this,t,e,!0),e+4},p.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,4294967295,0),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):E(this,t,e,!1),e+4},p.prototype.writeIntLE=function(t,e,n,r){var i;t=+t,e|=0,r||x(this,t,e,n,(i=Math.pow(2,8*n-1))-1,-i);var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},p.prototype.writeIntBE=function(t,e,n,r){var i;t=+t,e|=0,r||x(this,t,e,n,(i=Math.pow(2,8*n-1))-1,-i);var o=n-1,a=1,s=0;for(this[e+o]=255&t;0<=--o&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},p.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,1,127,-128),p.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},p.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):C(this,t,e,!0),e+2},p.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,2,32767,-32768),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):C(this,t,e,!1),e+2},p.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,2147483647,-2147483648),p.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):E(this,t,e,!0),e+4},p.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||x(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),p.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):E(this,t,e,!1),e+4},p.prototype.writeFloatLE=function(t,e,n){return O(this,t,e,!0,n)},p.prototype.writeFloatBE=function(t,e,n){return O(this,t,e,!1,n)},p.prototype.writeDoubleLE=function(t,e,n){return T(this,t,e,!0,n)},p.prototype.writeDoubleBE=function(t,e,n){return T(this,t,e,!1,n)},p.prototype.copy=function(t,e,n,r){if(n=n||0,r||0===r||(r=this.length),e>=t.length&&(e=t.length),e=e||0,0<r&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;0<=i;--i)t[i+e]=this[i+n];else if(o<1e3||!p.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},p.prototype.fill=function(t,e,n,r){if("string"==typeof t){var i;if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1!==t.length||(i=t.charCodeAt(0))<256&&(t=i),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!p.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;if(e>>>=0,n=void 0===n?this.length:n>>>0,"number"==typeof(t=t||0))for(s=e;s<n;++s)this[s]=t;else for(var o=p.isBuffer(t)?t:I(new p(t,r).toString()),a=o.length,s=0;s<n-e;++s)this[s+e]=o[s%a];return this};var S=/[^+\/0-9A-Za-z-_]/g;function I(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if(55295<(n=t.charCodeAt(a))&&n<57344){if(!i){if(56319<n){-1<(e-=3)&&o.push(239,191,189);continue}if(a+1===r){-1<(e-=3)&&o.push(239,191,189);continue}i=n;continue}if(n<56320){-1<(e-=3)&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&-1<(e-=3)&&o.push(239,191,189);if(i=null,n<128){if(--e<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function A(t){return s.toByteArray(function(t){var e;if((t=((e=t).trim?e.trim():e.replace(/^\s+|\s+$/g,"")).replace(S,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function L(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,M(44))},,,,,function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var l,u=[],c=!1,p=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):p=-1,u.length&&f())}function f(){if(!c){var t=s(h);c=!0;for(var e=u.length;e;){for(l=u,u=[];++p<e;)l&&l[p].run();p=-1,e=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||c||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){var n;e&&(t.super_=e,(n=function(){}).prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t)}},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).CENTER="center",i.LEFT="left",i.RIGHT="right",e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(Object.defineProperty(i.prototype,"west",{get:function(){return this._west},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"south",{get:function(){return this._south},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"east",{get:function(){return this._east},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"north",{get:function(){return this._north},enumerable:!1,configurable:!0}),i);function i(t,e,n,r){this._west=0,this._south=0,this._east=0,this._north=0,this._west=t,this._south=e,this._east=n,this._north=r}e.default=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(28),s=n(8),l=n(77),u=n(22),c=n(78),p=n(11),h=n(95),f=(o=l.default,i(d,o),d.prototype.destory=function(){o.prototype.destory.call(this),this._drag=!1,this._drawMode=a.default.NONE,this._vertexCollection.removeAll(),this._destroyed(this._selectedEntity)},d.prototype._initMouseHandlers=function(){this._eventHandler=new s.ScreenSpaceEventHandler(this._earth.getViewer().scene.canvas),this._onLeftClick(this._eventHandler),this._onRightClick(this._eventHandler),this._onLeftDown(this._eventHandler),this._onMouseMove(this._eventHandler),this._onLeftUp(this._eventHandler),this._onDoubleClick(this._eventHandler)},d.prototype._onLeftClick=function(t){var i=this;t.setInputAction(function(t){if(i._drawMode===a.default.ADD){var e=i._earth.pickGloble(t.position,i._selectedEntity?[i._selectedEntity.value]:void 0);if(!e)return;var n=u.default.cartesianToDegrees(e);i._vertexCollection.add(new c.default({position:n}));var r=i._addVertex(n);r&&(i.selectedEntity=r)}},s.ScreenSpaceEventType.LEFT_CLICK)},d.prototype._onRightClick=function(t){var n=this;t.setInputAction(function(t){var e=n._earth.pickGloble(t.position);e&&u.default.cartesianToDegrees(e)},s.ScreenSpaceEventType.RIGHT_CLICK)},d.prototype._onDoubleClick=function(t){var n=this;t.setInputAction(function(t){if(n._drawMode===a.default.ADD&&!n._drag&&n._selectedEntity){var e=n._earth.pickGloble(t.position);if(!e)return;u.default.cartesianToDegrees(e);n._vertexCollection.removeByIndex(n._vertexCollection.length-1),n._drawMode=a.default.EDIT,n._endAdd()}},s.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},d.prototype._onMouseMove=function(t){var i=this;t.setInputAction(function(t){if(i._drawMode===a.default.ADD&&!i._drag&&i._selectedEntity){if(!(r=i._earth.pickGloble(t.endPosition,[i._selectedEntity.value])))return;var e=u.default.cartesianToDegrees(r),n=i._selectedEntity.positions;n.pop(),n.push(e)}var r;i._drawMode===a.default.EDIT&&i._drag&&i._selectedEntity&&i._selectedVertex&&(r=i._earth.pickGloble(t.endPosition,[]),e=u.default.cartesianToDegrees(r),i._selectedVertex.position=r,i._editVertex(e,i._selectedVertex.index))},s.ScreenSpaceEventType.MOUSE_MOVE)},d.prototype._onLeftDown=function(t){var r=this;t.setInputAction(function(t){if(r._drawMode===a.default.EDIT&&r._selectedEntity){var e=r._earth.getViewer().scene.pick(t.position);if(!e)return;var n=e.primitive;n&&n.type===p.default.VERTEX&&(r._selectedVertex=n,r._drag=!0,r._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!1)}},s.ScreenSpaceEventType.LEFT_DOWN)},d.prototype._onLeftUp=function(t){var e=this;t.setInputAction(function(t){e._selectedVertex=null,e._drag=!1,e._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!0},s.ScreenSpaceEventType.LEFT_UP)},Object.defineProperty(d.prototype,"drawMode",{get:function(){return this._drawMode},set:function(t){this._drawMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"selectedEntity",{get:function(){return this._selectedEntity},set:function(t){this._selectedEntity=t},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"drag",{get:function(){return this._drag},set:function(t){this._drag=t},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"vertexCollection",{get:function(){return this._vertexCollection},enumerable:!1,configurable:!0}),d);function d(t,e){var n=o.call(this)||this;n._vertexCollection=new h.default,n._drawMode=a.default.NONE,n._drag=!1,n._earth=t,n._earth.getViewer().scene.primitives.add(n._vertexCollection.value);var r=e||{};return n._addVertex=r.addVertex,n._editVertex=r.editVertex,n._endAdd=r.endAdd,n._destroyed=r.destroyed,n._initMouseHandlers(),n}e.default=f},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).ICON_LAYER="icon_layer",i.POINT_LAYER="point_layer",i.GEOJSON_LAYER="geojson_layer",i.DYNAMIC_POINT_LAYER="dynamic_point_layer",i.OD_LINE_LAYER="od_line_layer",i.HEAT_MAP_LAYER="heat_map_layer",i.WAVE_POINT_LAYER="wave_point_layer",e.default=r},,function(t,e,n){"use strict";var r=n(101),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=p;var o=Object.create(n(90));o.inherits=n(61);var a=n(164),s=n(127);o.inherits(p,a);for(var l=i(s.prototype),u=0;u<l.length;u++){var c=l[u];p.prototype[c]||(p.prototype[c]=s.prototype[c])}function p(t){if(!(this instanceof p))return new p(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",h)}function h(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(p.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(p.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),p.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),i=n(8),o=n(104),a=n(105),s=n(45),l={id:{type:"string",value:a.default(),readonly:!0},show:{type:"function|boolean",value:!0},showByDistance:{type:"function|array",value:[0,Number.MAX_VALUE]}},u=(c.prototype.destory=function(){this._destoryClickEvent(),this._destoryHoverEvent(),this._collection=void 0},Object.defineProperty(c.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"onDoubleClick",{get:function(){return this._onDoubleClick},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"hoverEnabled",{get:function(){return this._hoverEnabled},set:function(t){this._hoverEnabled=t,this._interactionEvent.enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"clickEnabled",{get:function(){return this._clickEnabled},set:function(t){this._clickEnabled=t,this._interactionEvent.enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"doubleClickEnabled",{get:function(){return this._doubleClickEnabled},set:function(t){this._doubleClickEnabled=t,this._interactionEvent.enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"clickInteractionEvent",{get:function(){return this._clickInteractionEvent},set:function(t){this._clickInteractionEvent=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"doubleClickInteractionEvent",{get:function(){return this._doubleClickInteractionEvent},set:function(t){this._doubleClickInteractionEvent=t},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"hoverInteractionEvent",{get:function(){return this._hoverInteractionEvent},set:function(t){this._hoverInteractionEvent=t},enumerable:!1,configurable:!0}),c.prototype._destoryHoverEvent=function(){var t=this._onHover._listeners;if(t&&r.isArray(t))for(var e=this._onHover.numberOfListeners-1;0<=e;e--)this._onHover.removeEventListener(t[e])},c.prototype._destoryClickEvent=function(){var t=this._onClick._listeners;if(t&&r.isArray(t))for(var e=this._onClick.numberOfListeners-1;0<=e;e--)this._onClick.removeEventListener(t[e]);var n=this._onDoubleClick._listeners;if(n&&r.isArray(n))for(e=this._onDoubleClick.numberOfListeners-1;0<=e;e--)this._onDoubleClick.removeEventListener(n[e])},c);function c(t){try{if(!r.isObject(t))throw"The options is not a Object.";this._onHover=new i.Event,this._onClick=new i.Event,this._onDoubleClick=new i.Event,this._collection=new o.default({id:this._id,type:s.default.GROUP,name:this._id,children:[]}),this._clickEnabled=!r.isBoolean(t.clickEnabled)||t.clickEnabled,this._doubleClickEnabled=!r.isBoolean(t.doubleClickEnabled)||t.doubleClickEnabled,this._hoverEnabled=!r.isBoolean(t.clickEnabled)||t.hoverEnabled}catch(t){}}u.defaultProps=l,e.default=u},function(t,f,e){"use strict";Object.defineProperty(f,"__esModule",{value:!0}),f.distanceBetween2Points=f.arrayUnique3d=f.arrayUnique2d=f.getListCenter=f.getCenter=f.calculateBearing=f.calculateAngle=f.calculateDistance=f.calculateSpaceArea=f.calculateSpaceDistance=f.DegreesPerRadian=f.RadiansPerDegree=void 0;var s=e(8);f.RadiansPerDegree=Math.PI/180,f.DegreesPerRadian=180/Math.PI,f.calculateSpaceDistance=function(t){for(var e=0,n=0;n<t.length-1;n++){var r=s.Cartographic.fromDegrees(t[n][0],t[n][1],t[n][2]),i=s.Cartographic.fromDegrees(t[n+1][0],t[n+1][1],t[n+1][2]),o=new s.EllipsoidGeodesic;o.setEndPoints(r,i);var a=o.surfaceDistance;e+=a=Math.sqrt(Math.pow(a,2)+Math.pow(i.height-r.height,2))}return e},f.calculateSpaceArea=function(t,e){for(var n=0,r=0;r<t.length-2;r++){var i=(r+1)%t.length,o=(r+2)%t.length,a=f.calculateAngle(t[0],t[i],t[o]);n+=f.calculateDistance(e[i],e[0])*f.calculateDistance(e[o],e[0])*Math.sin(a)/2}return Math.abs(Number(n.toFixed(4)))},f.calculateDistance=function(t,e){var n=s.Cartographic.fromCartesian(t),r=s.Cartographic.fromCartesian(e),i=new s.EllipsoidGeodesic;i.setEndPoints(n,r);var o=i.surfaceDistance;return o=Math.sqrt(Math.pow(o,2)+Math.pow(r.height-n.height,2))},f.calculateAngle=function(t,e,n){var r=f.calculateBearing(t,e)-f.calculateBearing(t,n);return r<0?r=Math.abs(r):180<r&&(r-=180),r*f.RadiansPerDegree},f.calculateBearing=function(t,e){var n=t.lat*f.RadiansPerDegree,r=t.lon*f.RadiansPerDegree,i=e.lat*f.RadiansPerDegree,o=e.lon*f.RadiansPerDegree,a=-Math.atan2(Math.sin(r-o)*Math.cos(i),Math.cos(n)*Math.sin(i)-Math.sin(n)*Math.cos(i)*Math.cos(r-o));return a<0&&(a+=2*Math.PI),a*=f.DegreesPerRadian},f.getCenter=function(t,e){var n=(t.x+e.x)/2,r=(t.y+e.y)/2,i=(t.z+e.z)/2;return new s.Cartesian3(n,r,i)},f.getListCenter=function(t){if(!(0<t.length))return!1;for(var e=t.length,n=0,r=0,i=0,o=0;o<t.length;o++){var a=t[o].lon*f.RadiansPerDegree,s=t[o].lat*f.RadiansPerDegree;n+=Math.cos(s)*Math.cos(a),r+=Math.cos(s)*Math.sin(a),i+=Math.sin(s)}n/=e,r/=e,i/=e;var l=Math.atan2(r,n),u=Math.sqrt(n*n+r*r),c=Math.atan2(i,u),p=l*f.DegreesPerRadian,h=c*f.DegreesPerRadian;return new Array(p,h)},f.arrayUnique2d=function(t){var e=new Map;return t.forEach(function(t){t=[Number(t[0].toFixed(9)),Number(t[1].toFixed(9))],e.set(t.join(),t)}),Array.from(e.values())},f.arrayUnique3d=function(t){var e=new Map;return t.forEach(function(t){t=[Number(t[0].toFixed(9)),Number(t[1].toFixed(9)),Number(t[2].toFixed(6))],e.set(t.join(),t)}),Array.from(e.values())},f.distanceBetween2Points=function(t,e){var n=new s.EllipsoidGeodesic;n.setEndPoints(t,e);var r=n.surfaceDistance;return r=Math.sqrt(Math.pow(r,2)+Math.pow(t.height-e.height,2))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(i.prototype.finish=function(){this._eventHandler&&!this._eventHandler.isDestroyed()&&this._eventHandler&&this._eventHandler.destroy()},i);function i(){}e.default=r},,function(t,Rn,jn){"use strict";(function(t,e){jn.d(Rn,"a",function(){return R}),jn.d(Rn,"b",function(){return Mn}),jn.d(Rn,"c",function(){return Ze}),jn.d(Rn,"d",function(){return Dn});var n=jn(9),M=jn.n(n),r={$version:8,$root:{version:{required:!0,type:"enum",values:[8],doc:"Style specification version number. Must be 8.",example:8},name:{type:"string",doc:"A human-readable name for the style.",example:"Bright"},metadata:{type:"*",doc:"Arbitrary properties useful to track with the stylesheet, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},center:{type:"array",value:"number",doc:"Default map center in longitude and latitude.  The style center will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:[-73.9749,40.7736]},zoom:{type:"number",doc:"Default zoom level.  The style zoom will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:12.5},bearing:{type:"number",default:0,period:360,units:"degrees",doc:'Default bearing, in degrees. The bearing is the compass direction that is "up"; for example, a bearing of 90° orients the map so that east is up. This value will be used only if the map has not been positioned by other means (e.g. map options or user interaction).',example:29},pitch:{type:"number",default:0,units:"degrees",doc:"Default pitch, in degrees. Zero is perpendicular to the surface, for a look straight down at the map, while a greater value like 60 looks ahead towards the horizon. The style pitch will be used only if the map has not been positioned by other means (e.g. map options or user interaction).",example:50},light:{type:"light",doc:"The global light source.",example:{anchor:"viewport",color:"white",intensity:.4}},sources:{required:!0,type:"sources",doc:"Data source specifications.",example:{"mapbox-streets":{type:"vector",url:"mapbox://mapbox.mapbox-streets-v6"}}},sprite:{type:"string",doc:"A base URL for retrieving the sprite image and metadata. The extensions `.png`, `.json` and scale factor `@2x.png` will be automatically appended. This property is required if any layer uses the `background-pattern`, `fill-pattern`, `line-pattern`, `fill-extrusion-pattern`, or `icon-image` properties. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://sprites/mapbox/bright-v8"},glyphs:{type:"string",doc:"A URL template for loading signed-distance-field glyph sets in PBF format. The URL must include `{fontstack}` and `{range}` tokens. This property is required if any layer uses the `text-field` layout property. The URL must be absolute, containing the [scheme, authority and path components](https://en.wikipedia.org/wiki/URL#Syntax).",example:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},transition:{type:"transition",doc:"A global transition definition to use as a default across properties, to be used for timing transitions between one value and the next when no property-specific transition is set. Collision-based symbol fading is controlled independently of the style's `transition` property.",example:{duration:300,delay:0}},layers:{required:!0,type:"array",value:"layer",doc:"Layers will be drawn in the order of this array.",example:[{id:"water",source:"mapbox-streets","source-layer":"water",type:"fill",paint:{"fill-color":"#00ffff"}}]}},sources:{"*":{type:"source",doc:"Specification of a data source. For vector and raster sources, either TileJSON or a URL to a TileJSON must be provided. For image and video sources, a URL must be provided. For GeoJSON sources, a URL or inline GeoJSON must be provided."}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{doc:"A vector tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`. If specified as a string for a vector tile source, the same property is used across all its source layers."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster:{type:{required:!0,type:"enum",values:{raster:{doc:"A raster tile source."}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},scheme:{type:"enum",values:{xyz:{doc:"Slippy map tilenames scheme."},tms:{doc:"OSGeo spec scheme."}},default:"xyz",doc:"Influences the y direction of the tile coordinates. The global-mercator (aka Spherical Mercator) profile is assumed."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{doc:"A RGB-encoded raster DEM source"}},doc:"The type of the source."},url:{type:"string",doc:"A URL to a TileJSON resource. Supported protocols are `http:`, `https:`, and `mapbox://<Tileset ID>`."},tiles:{type:"array",value:"string",doc:"An array of one or more tile source URLs, as in the TileJSON spec."},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129],doc:"An array containing the longitude and latitude of the southwest and northeast corners of the source's bounding box in the following order: `[sw.lng, sw.lat, ne.lng, ne.lat]`. When this property is included in a source, no tiles outside of the given bounds are requested by Mapbox GL."},minzoom:{type:"number",default:0,doc:"Minimum zoom level for which tiles are available, as in the TileJSON spec."},maxzoom:{type:"number",default:22,doc:"Maximum zoom level for which tiles are available, as in the TileJSON spec. Data from tiles at the maxzoom are used when displaying the map at higher zoom levels."},tileSize:{type:"number",default:512,units:"pixels",doc:"The minimum visual size to display tiles for this layer. Only configurable for raster layers."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},encoding:{type:"enum",values:{terrarium:{doc:"Terrarium format PNG tiles. See https://aws.amazon.com/es/public-datasets/terrain/ for more info."},mapbox:{doc:"Mapbox Terrain RGB tiles. See https://www.mapbox.com/help/access-elevation-data/#mapbox-terrain-rgb for more info."}},default:"mapbox",doc:"The encoding used by this source. Mapbox Terrain RGB is used by default"},volatile:{type:"boolean",default:!1,doc:"A setting to determine whether a source's tiles are cached locally.","sdk-support":{"basic functionality":{android:"9.3.0",ios:"5.10.0"}}},"*":{type:"*",doc:"Other keys to configure the data source."}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{doc:"A GeoJSON data source."}},doc:"The data type of the GeoJSON source."},data:{type:"*",doc:"A URL to a GeoJSON file, or inline GeoJSON."},maxzoom:{type:"number",default:18,doc:"Maximum zoom level at which to create vector tiles (higher means greater detail at high zoom levels)."},attribution:{type:"string",doc:"Contains an attribution to be displayed when the map is shown to a user."},buffer:{type:"number",default:128,maximum:512,minimum:0,doc:"Size of the tile buffer on each side. A value of 0 produces no buffer. A value of 512 produces a buffer as wide as the tile itself. Larger values produce fewer rendering artifacts near tile edges and slower performance."},filter:{type:"*",doc:"An expression for filtering features prior to processing them for rendering."},tolerance:{type:"number",default:.375,doc:"Douglas-Peucker simplification tolerance (higher means simpler geometries and faster performance)."},cluster:{type:"boolean",default:!1,doc:"If the data is a collection of point features, setting this to true clusters the points by radius into groups. Cluster groups become new `Point` features in the source with additional properties:\n * `cluster` Is `true` if the point is a cluster \n * `cluster_id` A unqiue id for the cluster to be used in conjunction with the [cluster inspection methods](https://www.mapbox.com/mapbox-gl-js/api/#geojsonsource#getclusterexpansionzoom)\n * `point_count` Number of original points grouped into this cluster\n * `point_count_abbreviated` An abbreviated point count"},clusterRadius:{type:"number",default:50,minimum:0,doc:"Radius of each cluster if clustering is enabled. A value of 512 indicates a radius equal to the width of a tile."},clusterMaxZoom:{type:"number",doc:"Max zoom on which to cluster points if clustering is enabled. Defaults to one zoom less than maxzoom (so that last zoom features are not clustered). Clusters are re-evaluated at integer zoom levels so setting clusterMaxZoom to 14 means the clusters will be displayed until z15."},clusterMinPoints:{type:"number",doc:"Minimum number of points necessary to form a cluster if clustering is enabled. Defaults to `2`."},clusterProperties:{type:"*",doc:'An object defining custom properties on the generated clusters if clustering is enabled, aggregating values from clustered points. Has the form `{"property_name": [operator, map_expression]}`. `operator` is any expression function that accepts at least 2 operands (e.g. `"+"` or `"max"`) — it accumulates the property value from clusters/points the cluster contains; `map_expression` produces the value of a single point.\n\nExample: `{"sum": ["+", ["get", "scalerank"]]}`.\n\nFor more advanced use cases, in place of `operator`, you can use a custom reduce expression that references a special `["accumulated"]` value, e.g.:\n`{"sum": [["+", ["accumulated"], ["get", "sum"]], ["get", "scalerank"]]}`'},lineMetrics:{type:"boolean",default:!1,doc:"Whether to calculate line distance metrics. This is required for line layers that specify `line-gradient` values."},generateId:{type:"boolean",default:!1,doc:"Whether to generate ids for the geojson features. When enabled, the `feature.id` property will be auto assigned based on its index in the `features` array, over-writing any previous values."},promoteId:{type:"promoteId",doc:"A property to use as a feature id (for feature state). Either a property name, or an object of the form `{<sourceLayer>: <propertyName>}`."}},source_video:{type:{required:!0,type:"enum",values:{video:{doc:"A video data source."}},doc:"The data type of the video source."},urls:{required:!0,type:"array",value:"string",doc:"URLs to video content in order of preferred format."},coordinates:{required:!0,doc:"Corners of video specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},source_image:{type:{required:!0,type:"enum",values:{image:{doc:"An image data source."}},doc:"The data type of the image source."},url:{required:!0,type:"string",doc:"URL that points to an image."},coordinates:{required:!0,doc:"Corners of image specified in longitude, latitude pairs.",type:"array",length:4,value:{type:"array",length:2,value:"number",doc:"A single longitude, latitude pair."}}},layer:{id:{type:"string",doc:"Unique layer name.",required:!0},type:{type:"enum",values:{fill:{doc:"A filled polygon with an optional stroked border.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},line:{doc:"A stroked line.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},symbol:{doc:"An icon or a text label.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},circle:{doc:"A filled circle.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},heatmap:{doc:"A heatmap.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"fill-extrusion":{doc:"An extruded (3D) polygon.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},raster:{doc:"Raster map textures such as satellite imagery.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}},hillshade:{doc:"Client-side hillshading visualization based on DEM data. Currently, the implementation only supports Mapbox Terrain RGB and Mapzen Terrarium tiles.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},background:{doc:"The background color or pattern of the map.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}}}},doc:"Rendering type of this layer.",required:!0},metadata:{type:"*",doc:"Arbitrary properties useful to track with the layer, but do not influence rendering. Properties should be prefixed to avoid collisions, like 'mapbox:'."},source:{type:"string",doc:"Name of a source description to be used for this layer. Required for all layer types except `background`."},"source-layer":{type:"string",doc:"Layer to use from a vector tile source. Required for vector tile sources; prohibited for all other source types, including GeoJSON sources."},minzoom:{type:"number",minimum:0,maximum:24,doc:"The minimum zoom level for the layer. At zoom levels less than the minzoom, the layer will be hidden."},maxzoom:{type:"number",minimum:0,maximum:24,doc:"The maximum zoom level for the layer. At zoom levels equal to or greater than the maxzoom, the layer will be hidden."},filter:{type:"filter",doc:"A expression specifying conditions on source features. Only features that match the filter are displayed. Zoom expressions in filters are only evaluated at integer zoom levels. The `feature-state` expression is not supported in filter expressions."},layout:{type:"layout",doc:"Layout properties for the layer."},paint:{type:"paint",doc:"Default paint properties for this layer."}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"},"data-driven styling":{js:"1.2.0",android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{doc:"A cap with a squared-off end which is drawn to the exact endpoint of the line."},round:{doc:"A cap with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},square:{doc:"A cap with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."}},default:"butt",doc:"The display of line endings.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{doc:"A join with a squared-off end which is drawn beyond the endpoint of the line at a distance of one-half of the line's width."},round:{doc:"A join with a rounded end which is drawn beyond the endpoint of the line at a radius of one-half of the line's width and centered on the endpoint of the line."},miter:{doc:"A join with a sharp, angled corner which is drawn with the outer sides beyond the endpoint of the path until they meet."}},default:"miter",doc:"The display of lines when joining.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,doc:"Used to automatically convert miter joins to bevel joins for sharp angles.",requires:[{"line-join":"miter"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,doc:"Used to automatically convert round joins to miter joins for shallow angles.",requires:[{"line-join":"round"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with a higher sort key will appear above features with a lower sort key.","sdk-support":{"basic functionality":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"},"data-driven styling":{js:"1.2.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{doc:"The label is placed at the point where the geometry is located."},line:{doc:"The label is placed along the line of the geometry. Can only be used on `LineString` and `Polygon` geometries."},"line-center":{doc:"The label is placed at the center of the line of the geometry. Can only be used on `LineString` and `Polygon` geometries. Note that a single feature in a vector tile may contain multiple line geometries."}},default:"point",doc:"Label placement relative to its geometry.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`line-center` value":{js:"0.47.0",android:"6.4.0",ios:"4.3.0",macos:"0.10.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",doc:"Distance between two symbol anchors.",requires:[{"symbol-placement":"line"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,doc:"If true, the symbols will not cross tile edges to avoid mutual collisions. Recommended in layers that don't have enough padding in the vector tile to prevent collisions, or if it is a point symbol layer placed after a line symbol layer. When using a client that supports global collision detection, like Mapbox GL JS version 0.42.0 or greater, enabling this property is not needed to prevent clipped labels at tile boundaries.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",doc:"Sorts features in ascending order based on this value. Features with lower sort keys are drawn and placed first.  When `icon-allow-overlap` or `text-allow-overlap` is `false`, features with a lower sort key will have priority during placement. When `icon-allow-overlap` or `text-allow-overlap` is set to `true`, features with a higher sort key will overlap over features with a lower sort key.","sdk-support":{"basic functionality":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"},"data-driven styling":{js:"0.53.0",android:"7.4.0",ios:"4.11.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},"viewport-y":{doc:"Sorts symbols by their y-position relative to the viewport if `icon-allow-overlap` or `text-allow-overlap` is set to `true` or `icon-ignore-placement` or `text-ignore-placement` is `false`."},source:{doc:"Sorts symbols by `symbol-sort-key` if set. Otherwise, no sorting is applied; symbols are rendered in the same order as the source data."}},default:"auto",doc:"Determines whether overlapping symbols in the same layer are rendered in the order that they appear in the data source or by their y-position relative to the viewport. To control the order and prioritization of symbols otherwise, use `symbol-sort-key`.","sdk-support":{"basic functionality":{js:"0.49.0",android:"6.6.0",ios:"4.5.0",macos:"0.12.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,doc:"If true, the icon will be visible even if it collides with other previously drawn symbols.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the icon.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,doc:"If true, text will display without their corresponding icons when the icon collides with other symbols and the text does not.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns icons east-west. When `symbol-placement` is set to `line` or `line-center`, aligns icon x-axes with the line."},viewport:{doc:"Produces icons whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",doc:"Scales the original size of the icon by the provided factor. The new pixel size of the image will be the original pixel size multiplied by `icon-size`. 1 is the original size; 3 triples the size of the image.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{doc:"The icon is displayed at its intrinsic aspect ratio."},width:{doc:"The icon is scaled in the x-dimension to fit the width of the text."},height:{doc:"The icon is scaled in the y-dimension to fit the height of the text."},both:{doc:"The icon is scaled in both x- and y-dimensions."}},default:"none",doc:"Scales the icon to fit around the associated text.",requires:["icon-image","text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"stretchable icons":{js:"1.6.0",android:"9.2.0",ios:"5.8.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",doc:"Size of the additional area added to dimensions determined by `icon-text-fit`, in clockwise order: top, right, bottom, left.",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",doc:"Name of image in sprite to use for drawing an image background.",tokens:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the icon clockwise.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the icon bounding box used for detecting symbol collisions.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,doc:"If true, the icon may be flipped to prevent it from being rendered upside-down.",requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],doc:"Offset distance of icon from its anchor. Positive values indicate right and down, while negative values indicate left and up. Each component is multiplied by the value of `icon-size` to obtain the final offset in pixels. When combined with `icon-rotate` the offset will be as if the rotated direction was up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{doc:"The center of the icon is placed closest to the anchor."},left:{doc:"The left side of the icon is placed closest to the anchor."},right:{doc:"The right side of the icon is placed closest to the anchor."},top:{doc:"The top of the icon is placed closest to the anchor."},bottom:{doc:"The bottom of the icon is placed closest to the anchor."},"top-left":{doc:"The top left corner of the icon is placed closest to the anchor."},"top-right":{doc:"The top right corner of the icon is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the icon is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the icon is placed closest to the anchor."}},default:"center",doc:"Part of the icon placed closest to the anchor.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{doc:"The icon is aligned to the plane of the map."},viewport:{doc:"The icon is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `icon-rotation-alignment`."}},default:"auto",doc:"Orientation of icon when map is pitched.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{doc:"The text is aligned to the plane of the map."},viewport:{doc:"The text is aligned to the plane of the viewport."},auto:{doc:"Automatically matches the value of `text-rotation-alignment`."}},default:"auto",doc:"Orientation of text when map is pitched.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{doc:"When `symbol-placement` is set to `point`, aligns text east-west. When `symbol-placement` is set to `line` or `line-center`, aligns text x-axes with the line."},viewport:{doc:"Produces glyphs whose x-axes are aligned with the x-axis of the viewport, regardless of the value of `symbol-placement`."},auto:{doc:"When `symbol-placement` is set to `point`, this is equivalent to `viewport`. When `symbol-placement` is set to `line` or `line-center`, this is equivalent to `map`."}},default:"auto",doc:"In combination with `symbol-placement`, determines the rotation behavior of the individual glyphs forming the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"`auto` value":{js:"0.25.0",android:"4.2.0",ios:"3.4.0",macos:"0.3.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,doc:"Value to use for a text label. If a plain `string` is provided, it will be treated as a `formatted` with default/inherited formatting options.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],doc:"Font stack to use for displaying text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",doc:"Font size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",doc:"The maximum line width for text wrapping.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",doc:"Text leading value for multi-line text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",doc:"Text tracking amount.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.40.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{doc:"The text is aligned towards the anchor position."},left:{doc:"The text is aligned to the left."},center:{doc:"The text is centered."},right:{doc:"The text is aligned to the right."}},default:"center",doc:"Text justification options.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"},auto:{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,doc:"Radial offset of text, in the direction of the symbol's anchor. Useful in combination with `text-variable-anchor`, which defaults to using the two-dimensional `text-offset` if present.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"},"data-driven styling":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},requires:["text-field",{"symbol-placement":["point"]}],doc:"To increase the chance of placing high-priority labels on the map, you can provide an array of `text-anchor` locations: the renderer will attempt to place the label at each location, in order, before moving onto the next label. Use `text-justify: auto` to choose justification based on anchor position. To apply an offset, use the `text-radial-offset` or the two-dimensional `text-offset`.","sdk-support":{"basic functionality":{js:"0.54.0",android:"7.4.0",ios:"4.10.0",macos:"0.14.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{doc:"The center of the text is placed closest to the anchor."},left:{doc:"The left side of the text is placed closest to the anchor."},right:{doc:"The right side of the text is placed closest to the anchor."},top:{doc:"The top of the text is placed closest to the anchor."},bottom:{doc:"The bottom of the text is placed closest to the anchor."},"top-left":{doc:"The top left corner of the text is placed closest to the anchor."},"top-right":{doc:"The top right corner of the text is placed closest to the anchor."},"bottom-left":{doc:"The bottom left corner of the text is placed closest to the anchor."},"bottom-right":{doc:"The bottom right corner of the text is placed closest to the anchor."}},default:"center",doc:"Part of the text placed closest to the anchor.",requires:["text-field",{"!":"text-variable-anchor"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",doc:"Maximum angle change between adjacent characters.",requires:["text-field",{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{doc:"If a text's language supports horizontal writing mode, symbols with point placement would be laid out horizontally."},vertical:{doc:"If a text's language supports vertical writing mode, symbols with point placement would be laid out vertically."}},doc:"The property allows control over a symbol's orientation. Note that the property values act as a hint, so that a symbol whose language doesn’t support the provided orientation will be laid out in its natural orientation. Example: English point symbol will be rendered horizontally even if array value contains single 'vertical' enum value. The order of elements in an array define priority order for the placement of an orientation variant.",requires:["text-field",{"symbol-placement":["point"]}],"sdk-support":{"basic functionality":{js:"1.3.0",android:"8.3.0",ios:"5.3.0",macos:"0.15.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",doc:"Rotates the text clockwise.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",doc:"Size of the additional area around the text bounding box used for detecting symbol collisions.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,doc:"If true, the text may be flipped vertically to prevent it from being rendered upside-down.",requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{doc:"The text is not altered."},uppercase:{doc:"Forces all letters to be displayed in uppercase."},lowercase:{doc:"Forces all letters to be displayed in lowercase."}},default:"none",doc:"Specifies how to capitalize text, similar to the CSS `text-transform` property.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",doc:"Offset distance of text from its anchor. Positive values indicate right and down, while negative values indicate left and up. If used with text-variable-anchor, input values will be taken as absolute values. Offsets along the x- and y-axis will be applied automatically based on the anchor position.",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.35.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,doc:"If true, the text will be visible even if it collides with other previously drawn symbols.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,doc:"If true, other symbols can be visible even if they collide with the text.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,doc:"If true, icons will display without their corresponding text when the text collides with other symbols and the icon does not.",requires:["text-field","icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},"property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{doc:"The layer is shown."},none:{doc:"The layer is not shown."}},default:"visible",doc:"Whether this layer is displayed.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},"property-type":"constant"}},filter:{type:"array",value:"*",doc:"A filter selects specific features from a layer."},filter_operator:{type:"enum",values:{"==":{doc:'`["==", key, value]` equality: `feature[key] = value`'},"!=":{doc:'`["!=", key, value]` inequality: `feature[key] ≠ value`'},">":{doc:'`[">", key, value]` greater than: `feature[key] > value`'},">=":{doc:'`[">=", key, value]` greater than or equal: `feature[key] ≥ value`'},"<":{doc:'`["<", key, value]` less than: `feature[key] < value`'},"<=":{doc:'`["<=", key, value]` less than or equal: `feature[key] ≤ value`'},in:{doc:'`["in", key, v0, ..., vn]` set inclusion: `feature[key] ∈ {v0, ..., vn}`'},"!in":{doc:'`["!in", key, v0, ..., vn]` set exclusion: `feature[key] ∉ {v0, ..., vn}`'},all:{doc:'`["all", f0, ..., fn]` logical `AND`: `f0 ∧ ... ∧ fn`'},any:{doc:'`["any", f0, ..., fn]` logical `OR`: `f0 ∨ ... ∨ fn`'},none:{doc:'`["none", f0, ..., fn]` logical `NOR`: `¬f0 ∧ ... ∧ ¬fn`'},has:{doc:'`["has", key]` `feature[key]` exists'},"!has":{doc:'`["!has", key]` `feature[key]` does not exist'},within:{doc:'`["within", object]` feature geometry is within object geometry'}},doc:"The filter operator."},geometry_type:{type:"enum",values:{Point:{doc:"Filter to point geometries."},LineString:{doc:"Filter to line geometries."},Polygon:{doc:"Filter to polygon geometries."}},doc:"The geometry type for the filter to select."},function:{expression:{type:"expression",doc:"An expression."},stops:{type:"array",doc:"An array of stops.",value:"function_stop"},base:{type:"number",default:1,minimum:0,doc:"The exponential base of the interpolation curve. It controls the rate at which the result increases. Higher values make the result increase more towards the high end of the range. With `1` the stops are interpolated linearly."},property:{type:"string",doc:"The name of a feature property to use as the function input.",default:"$zoom"},type:{type:"enum",values:{identity:{doc:"Return the input value as the output value."},exponential:{doc:"Generate an output by interpolating between stops just less than and just greater than the function input."},interval:{doc:"Return the output value of the stop just less than the function input."},categorical:{doc:"Return the output value of the stop equal to the function input."}},doc:"The interpolation strategy to use in function evaluation.",default:"exponential"},colorSpace:{type:"enum",values:{rgb:{doc:"Use the RGB color space to interpolate color values"},lab:{doc:"Use the LAB color space to interpolate color values."},hcl:{doc:"Use the HCL color space to interpolate color values, interpolating the Hue, Chroma, and Luminance channels individually."}},doc:"The color space in which colors interpolated. Interpolating colors in perceptual color spaces like LAB and HCL tend to produce color ramps that look more consistent and produce colors that can be differentiated more easily than those interpolated in RGB space.",default:"rgb"},default:{type:"*",required:!1,doc:"A value to serve as a fallback function result when a value isn't otherwise available. It is used in the following circumstances:\n* In categorical functions, when the feature value does not match any of the stop domain values.\n* In property and zoom-and-property functions, when a feature does not contain a value for the specified property.\n* In identity functions, when the feature value is not valid for the style property (for example, if the function is being used for a `circle-color` property but the feature property value is not a string or not a valid color).\n* In interval or exponential property and zoom-and-property functions, when the feature value is not numeric.\nIf no default is provided, the style property's default is used in these circumstances."}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2,doc:"Zoom level and value pair."},expression:{type:"array",value:"*",minimum:1,doc:"An expression defines a function that can be used for data-driven style properties or feature filters."},expression_name:{doc:"",type:"enum",values:{let:{doc:'Binds expressions to named variables, which can then be referenced in the result expression using ["var", "variable_name"].',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},var:{doc:'References variable bound using "let".',group:"Variable binding","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},literal:{doc:"Provides a literal array or object value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},array:{doc:"Asserts that the input is an array (optionally with a specific item type and length).  If, when the input expression is evaluated, it is not of the asserted type, then this assertion will cause the whole expression to be aborted.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},at:{doc:"Retrieves an item from an array.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},in:{doc:"Determines whether an item exists in an array or a substring exists in a string.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.6.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"index-of":{doc:"Returns the first position at which an item can be found in an array or a substring can be found in a string, or `-1` if the input cannot be found. Accepts an optional index from where to begin the search.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},slice:{doc:"Returns an item from an array or a substring from a string from a specified start index, or between a start index and an end index if set. The return value is inclusive of the start index but not of the end index.",group:"Lookup","sdk-support":{"basic functionality":{js:"1.10.0"}}},case:{doc:"Selects the first output whose corresponding test condition evaluates to true, or the fallback value otherwise.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},match:{doc:'Selects the output whose label value matches the input value, or the fallback value if no match is found. The input can be any expression (e.g. `["get", "building_type"]`). Each label must be either:\n - a single literal value; or\n - an array of literal values, whose values must be all strings or all numbers (e.g. `[100, 101]` or `["c", "b"]`). The input matches if any of the values in the array matches, similar to the `"in"` operator.\nEach label must be unique. If the input type does not match the type of the labels, the result will be the fallback value.',group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},coalesce:{doc:"Evaluates each expression in turn until the first non-null value is obtained, and returns that value.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},step:{doc:'Produces discrete, stepped results by evaluating a piecewise-constant function defined by pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. Returns the output value of the stop just less than the input, or the first output if the input is less than the first stop.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},interpolate:{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). The `input` may be any numeric expression (e.g., `["get", "population"]`). Stop inputs must be numeric literals in strictly ascending order. The output type must be `number`, `array<number>`, or `color`.\n\nInterpolation types:\n- `["linear"]`: Interpolates linearly between the pair of stops just less than and just greater than the input.\n- `["exponential", base]`: Interpolates exponentially between the stops just less than and just greater than the input. `base` controls the rate at which the output increases: higher values make the output increase more towards the high end of the range. With values close to 1 the output increases linearly.\n- `["cubic-bezier", x1, y1, x2, y2]`: Interpolates using the cubic bezier curve defined by the given control points.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"interpolate-hcl":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the Hue-Chroma-Luminance color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},"interpolate-lab":{doc:'Produces continuous, smooth results by interpolating between pairs of input and output values ("stops"). Works like `interpolate`, but the output type must be `color`, and the interpolation is performed in the CIELAB color space.',group:"Ramps, scales, curves","sdk-support":{"basic functionality":{js:"0.49.0"}}},ln2:{doc:"Returns mathematical constant ln(2).",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},pi:{doc:"Returns the mathematical constant pi.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},e:{doc:"Returns the mathematical constant e.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},typeof:{doc:"Returns a string describing the type of the given value.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},string:{doc:"Asserts that the input value is a string. If multiple values are provided, each one is evaluated in order until a string is obtained. If none of the inputs are strings, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},number:{doc:"Asserts that the input value is a number. If multiple values are provided, each one is evaluated in order until a number is obtained. If none of the inputs are numbers, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},boolean:{doc:"Asserts that the input value is a boolean. If multiple values are provided, each one is evaluated in order until a boolean is obtained. If none of the inputs are booleans, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},object:{doc:"Asserts that the input value is an object. If multiple values are provided, each one is evaluated in order until an object is obtained. If none of the inputs are objects, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},collator:{doc:"Returns a `collator` for use in locale-dependent comparison operations. The `case-sensitive` and `diacritic-sensitive` options default to `false`. The `locale` argument specifies the IETF language tag of the locale to use. If none is provided, the default locale is used. If the requested locale is not available, the `collator` will use a system-defined fallback locale. Use `resolved-locale` to test the results of locale fallback behavior.",group:"Types","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},format:{doc:'Returns a `formatted` string for displaying mixed-format text in the `text-field` property. The input may contain a string literal or expression, including an [`\'image\'`](#types-image) expression. Strings may be followed by a style override object that supports the following properties:\n- `"text-font"`: Overrides the font stack specified by the root layout property.\n- `"text-color"`: Overrides the color specified by the root paint property.\n- `"font-scale"`: Applies a scaling factor on `text-size` as specified by the root layout property.',group:"Types","sdk-support":{"basic functionality":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-font":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"font-scale":{js:"0.48.0",android:"6.7.0",ios:"4.6.0",macos:"0.12.0"},"text-color":{js:"1.3.0",android:"7.3.0",ios:"4.10.0",macos:"0.14.0"},image:{js:"1.6.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},image:{doc:"Returns an `image` type for use in `icon-image`, `*-pattern` entries and as a section in the `format` expression. If set, the `image` argument will check that the requested image exists in the style and will return either the resolved image name or `null`, depending on whether or not the image is currently in the style. This validation process is synchronous and requires the image to have been added to the style before requesting it in the `image` argument.",group:"Types","sdk-support":{"basic functionality":{js:"1.4.0",android:"8.6.0",ios:"5.7.0",macos:"0.15.0"}}},"number-format":{doc:"Converts the input number into a string representation using the providing formatting rules. If set, the `locale` argument specifies the locale to use, as a BCP 47 language tag. If set, the `currency` argument specifies an ISO 4217 code to use for currency-style formatting. If set, the `min-fraction-digits` and `max-fraction-digits` arguments specify the minimum and maximum number of fractional digits to include.",group:"Types","sdk-support":{"basic functionality":{js:"0.54.0"}}},"to-string":{doc:'Converts the input value to a string. If the input is `null`, the result is `""`. If the input is a boolean, the result is `"true"` or `"false"`. If the input is a number, it is converted to a string as specified by the ["NumberToString" algorithm](https://tc39.github.io/ecma262/#sec-tostring-applied-to-the-number-type) of the ECMAScript Language Specification. If the input is a color, it is converted to a string of the form `"rgba(r,g,b,a)"`, where `r`, `g`, and `b` are numerals ranging from 0 to 255, and `a` ranges from 0 to 1. Otherwise, the input is converted to a string in the format specified by the [`JSON.stringify`](https://tc39.github.io/ecma262/#sec-json.stringify) function of the ECMAScript Language Specification.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-number":{doc:'Converts the input value to a number, if possible. If the input is `null` or `false`, the result is 0. If the input is `true`, the result is 1. If the input is a string, it is converted to a number as specified by the ["ToNumber Applied to the String Type" algorithm](https://tc39.github.io/ecma262/#sec-tonumber-applied-to-the-string-type) of the ECMAScript Language Specification. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.',group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-boolean":{doc:"Converts the input value to a boolean. The result is `false` when then input is an empty string, 0, `false`, `null`, or `NaN`; otherwise it is `true`.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-rgba":{doc:"Returns a four-element array containing the input color's red, green, blue, and alpha components, in that order.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"to-color":{doc:"Converts the input value to a color. If multiple values are provided, each one is evaluated in order until the first successful conversion is obtained. If none of the inputs can be converted, the expression is an error.",group:"Types","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgb:{doc:"Creates a color value from red, green, and blue components, which must range between 0 and 255, and an alpha component of 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},rgba:{doc:"Creates a color value from red, green, blue components, which must range between 0 and 255, and an alpha component which must range between 0 and 1. If any component is out of range, the expression is an error.",group:"Color","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},get:{doc:"Retrieves a property value from the current feature's properties, or from another object if a second argument is provided. Returns null if the requested property is missing.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},has:{doc:"Tests for the presence of an property value in the current feature's properties, or from another object if a second argument is provided.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},length:{doc:"Gets the length of an array or string.",group:"Lookup","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},properties:{doc:'Gets the feature properties object.  Note that in some cases, it may be more efficient to use ["get", "property_name"] directly.',group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"feature-state":{doc:"Retrieves a property value from the current feature's state. Returns null if the requested property is not present on the feature's state. A feature's state is not part of the GeoJSON or vector tile data, and must be set programmatically on each feature. Features are identified by their `id` attribute, which must be an integer or a string that can be cast to an integer. Note that [\"feature-state\"] can only be used with paint properties that support data-driven styling.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.46.0"}}},"geometry-type":{doc:"Gets the feature's geometry type: `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},id:{doc:"Gets the feature's id, if it has one.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},zoom:{doc:'Gets the current zoom level.  Note that in style layout and paint properties, ["zoom"] may only appear as the input to a top-level "step" or "interpolate" expression.',group:"Zoom","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"heatmap-density":{doc:"Gets the kernel density estimation of a pixel in a heatmap layer, which is a relative measure of how many data points are crowded around a particular pixel. Can only be used in the `heatmap-color` property.",group:"Heatmap","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"line-progress":{doc:"Gets the progress along a gradient line. Can only be used in the `line-gradient` property.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.6.0",macos:"0.12.0"}}},accumulated:{doc:"Gets the value of a cluster property accumulated so far. Can only be used in the `clusterProperties` option of a clustered GeoJSON source.",group:"Feature data","sdk-support":{"basic functionality":{js:"0.53.0"}}},"+":{doc:"Returns the sum of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"*":{doc:"Returns the product of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"-":{doc:"For two inputs, returns the result of subtracting the second input from the first. For a single input, returns the result of subtracting it from 0.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"/":{doc:"Returns the result of floating point division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"%":{doc:"Returns the remainder after integer division of the first input by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"^":{doc:"Returns the result of raising the first input to the power specified by the second.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sqrt:{doc:"Returns the square root of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.42.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log10:{doc:"Returns the base-ten logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ln:{doc:"Returns the natural logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},log2:{doc:"Returns the base-two logarithm of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},sin:{doc:"Returns the sine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},cos:{doc:"Returns the cosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},tan:{doc:"Returns the tangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},asin:{doc:"Returns the arcsine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},acos:{doc:"Returns the arccosine of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},atan:{doc:"Returns the arctangent of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},min:{doc:"Returns the minimum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},max:{doc:"Returns the maximum value of the inputs.",group:"Math","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},round:{doc:'Rounds the input to the nearest integer. Halfway values are rounded away from zero. For example, `["round", -1.5]` evaluates to -2.',group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},abs:{doc:"Returns the absolute value of the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},ceil:{doc:"Returns the smallest integer that is greater than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},floor:{doc:"Returns the largest integer that is less than or equal to the input.",group:"Math","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},distance:{doc:"Returns the shortest distance in meters between the evaluated feature and the input geometry. The input value can be a valid GeoJSON of type `Point`, `MultiPoint`, `LineString`, `MultiLineString`, `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Distance values returned may vary in precision due to loss in precision from encoding geometries, particularly below zoom level 13.",group:"Math","sdk-support":{"basic functionality":{android:"9.2.0",ios:"5.9.0",macos:"0.16.0"}}},"==":{doc:"Returns `true` if the input values are equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"!=":{doc:"Returns `true` if the input values are not equal, `false` otherwise. The comparison is strictly typed: values of different runtime types are always considered unequal. Cases where the types are known to be different at parse time are considered invalid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">":{doc:"Returns `true` if the first input is strictly greater than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<":{doc:"Returns `true` if the first input is strictly less than the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},">=":{doc:"Returns `true` if the first input is greater than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},"<=":{doc:"Returns `true` if the first input is less than or equal to the second, `false` otherwise. The arguments are required to be either both strings or both numbers; if during evaluation they are not, expression evaluation produces an error. Cases where this constraint is known not to hold at parse time are considered in valid and will produce a parse error. Accepts an optional `collator` argument to control locale-dependent string comparisons.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},collator:{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}},all:{doc:"Returns `true` if all the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `false`, the result is `false` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},any:{doc:"Returns `true` if any of the inputs are `true`, `false` otherwise. The inputs are evaluated in order, and evaluation is short-circuiting: once an input expression evaluates to `true`, the result is `true` and no further input expressions are evaluated.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"!":{doc:"Logical negation. Returns `true` if the input is `false`, and `false` if the input is `true`.",group:"Decision","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},within:{doc:"Returns `true` if the evaluated feature is fully contained inside a boundary of the input geometry, `false` otherwise. The input value can be a valid GeoJSON of type `Polygon`, `MultiPolygon`, `Feature`, or `FeatureCollection`. Supported features for evaluation:\n- `Point`: Returns `false` if a point is on the boundary or falls outside the boundary.\n- `LineString`: Returns `false` if any part of a line falls outside the boundary, the line intersects the boundary, or a line's endpoint is on the boundary.",group:"Decision","sdk-support":{"basic functionality":{js:"1.9.0",android:"9.1.0",ios:"5.8.0",macos:"0.15.0"}}},"is-supported-script":{doc:"Returns `true` if the input string is expected to render legibly. Returns `false` if the input string contains sections that cannot be rendered without potential loss of meaning (e.g. Indic scripts that require complex text shaping, or right-to-left scripts if the the `mapbox-gl-rtl-text` plugin is not in use in Mapbox GL JS).",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.6.0"}}},upcase:{doc:"Returns the input string converted to uppercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},downcase:{doc:"Returns the input string converted to lowercase. Follows the Unicode Default Case Conversion algorithm and the locale-insensitive case mappings in the Unicode Character Database.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},concat:{doc:"Returns a `string` consisting of the concatenation of the inputs. Each input is converted to a string as if by `to-string`.",group:"String","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}}},"resolved-locale":{doc:"Returns the IETF language tag of the locale being used by the provided `collator`. This can be used to determine the default system locale, or to determine if a requested locale was successfully loaded.",group:"String","sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.2.0",macos:"0.9.0"}}}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{doc:"The position of the light source is aligned to the rotation of the map."},viewport:{doc:"The position of the light source is aligned to the rotation of the viewport."}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},doc:"Whether extruded geometries are lit relative to the map or viewport.",example:"map","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},doc:"Position of the light source relative to lit (extruded) geometries, in [r radial coordinate, a azimuthal angle, p polar angle] where r indicates the distance from the center of the base of an object to its light, a indicates the position of the light relative to 0° (0° when `light.anchor` is set to `viewport` corresponds to the top of the viewport, or 0° when `light.anchor` is set to `map` corresponds to due north, and degrees proceed clockwise), and p indicates the height of the light (from 0°, directly above, to 180°, directly below).",example:[1.5,90,80],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Color tint for lighting extruded geometries.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,doc:"Intensity of lighting (on a scale from 0 to 1). Higher numbers will present as more extreme contrast.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,doc:"Whether or not the fill should be antialiased.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill layer. In contrast to the `fill-color`, this value will also affect the 1px stroke around the fill, if the stroke is used.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.21.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",doc:"The color of the filled part of this layer. This color can be specified as `rgba` with an alpha component and the color's opacity will not affect the opacity of the 1px stroke, if it is used.",transition:!0,requires:[{"!":"fill-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",doc:"The outline color of the fill. Matches the value of `fill-color` if unspecified.",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.19.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{doc:"The fill is translated relative to the map."},viewport:{doc:"The fill is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-translate`.",default:"map",requires:["fill-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity of the entire fill extrusion layer. This is rendered on a per-layer, not per-feature, basis, and data-driven styling is not available.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",doc:"The base color of the extruded fill. The extrusion's surfaces will be shaded differently based on this color in combination with the root `light` settings. If this color is specified as `rgba` with an alpha component, the alpha component will be ignored; use `fill-extrusion-opacity` to set layer opacity.",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up (on the flat plane), respectively.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{doc:"The fill extrusion is translated relative to the map."},viewport:{doc:"The fill extrusion is translated relative to the viewport."}},doc:"Controls the frame of reference for `fill-extrusion-translate`.",default:"map",requires:["fill-extrusion-translate"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing images on extruded fills. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude this layer.",transition:!0,"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",doc:"The height with which to extrude the base of this layer. Must be less than or equal to `fill-extrusion-height`.",transition:!0,requires:["fill-extrusion-height"],"sdk-support":{"basic functionality":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"},"data-driven styling":{js:"0.27.0",android:"5.1.0",ios:"3.6.0",macos:"0.5.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,doc:"Whether to apply a vertical gradient to the sides of a fill-extrusion layer. If true, sides will be shaded slightly darker farther down.",transition:!1,"sdk-support":{"basic functionality":{js:"0.50.0",ios:"4.7.0",macos:"0.13.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",doc:"The opacity at which the line will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",doc:"The color with which the line will be drawn.",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.23.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{doc:"The line is translated relative to the map."},viewport:{doc:"The line is translated relative to the viewport."}},doc:"Controls the frame of reference for `line-translate`.",default:"map",requires:["line-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",doc:"Stroke thickness.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,doc:"Draws a line casing outside of a line's actual path. Value indicates the width of the inner gap.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,doc:"The line's offset. For linear features, a positive value offsets the line to the right, relative to the direction of the line, and a negative value to the left. For polygon features, a positive value results in an inset, and a negative value results in an outset.",transition:!0,units:"pixels","sdk-support":{"basic functionality":{js:"0.12.1",android:"3.0.0",ios:"3.1.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Blur applied to the line, in pixels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",doc:"Specifies the lengths of the alternating dashes and gaps that form the dash pattern. The lengths are later scaled by the line width. To convert a dash length to pixels, multiply the length by the current line width. Note that GeoJSON sources with `lineMetrics: true` specified won't render dashed lines to the expected scale. Also note that zoom-dependent expressions will be evaluated only at integer zoom levels.",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing image lines. For seamless patterns, image width must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.49.0",android:"6.5.0",macos:"0.11.0",ios:"4.4.0"}},expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",doc:'Defines a gradient with which to color a line feature. Can only be used with GeoJSON sources that specify `"lineMetrics": true`.',transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],"sdk-support":{"basic functionality":{js:"0.45.0",android:"6.5.0",ios:"4.4.0",macos:"0.11.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",doc:"Circle radius.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",doc:"The fill color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.18.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,doc:"Amount to blur the circle. 1 blurs the circle such that only the centerpoint is full opacity.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",doc:"The opacity at which the circle will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.20.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"The geometry's offset. Values are [x, y] where negatives indicate left and up, respectively.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{doc:"The circle is translated relative to the map."},viewport:{doc:"The circle is translated relative to the viewport."}},doc:"Controls the frame of reference for `circle-translate`.",default:"map",requires:["circle-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{doc:"Circles are scaled according to their apparent distance to the camera."},viewport:{doc:"Circles are not scaled."}},default:"map",doc:"Controls the scaling behavior of the circle when the map is pitched.","sdk-support":{"basic functionality":{js:"0.21.0",android:"4.2.0",ios:"3.4.0",macos:"0.2.1"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{doc:"The circle is aligned to the plane of the map."},viewport:{doc:"The circle is aligned to the plane of the viewport."}},default:"viewport",doc:"Orientation of circle when map is pitched.","sdk-support":{"basic functionality":{js:"0.39.0",android:"5.2.0",ios:"3.7.0",macos:"0.6.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The width of the circle's stroke. Strokes are placed outside of the `circle-radius`.","sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",doc:"The stroke color of the circle.",transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",doc:"The opacity of the circle's stroke.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"},"data-driven styling":{js:"0.29.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",doc:"Radius of influence of one heatmap point in pixels. Increasing the value makes the heatmap smoother, but less detailed.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,doc:"A measure of how much an individual point contributes to the heatmap. A value of 10 would be equivalent to having 10 points of weight 1 in the same spot. Especially useful when combined with clustering.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,doc:"Similar to `heatmap-weight` but controls the intensity of the heatmap globally. Primarily used for adjusting the heatmap based on zoom level.","sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],doc:'Defines the color of each pixel based on its density value in a heatmap.  Should be an expression that uses `["heatmap-density"]` as input.',transition:!1,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"},"data-driven styling":{}},expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",doc:"The global opacity at which the heatmap layer will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.41.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{doc:"The opacity at which the icon will be drawn.",type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,doc:"The color of the icon. This can only be used with sdf icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the icon's halo. Icon halos can only be used with SDF icons.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the icon outline.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Fade out the halo towards the outside.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the icon's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["icon-image"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{doc:"Icons are translated relative to the map."},viewport:{doc:"Icons are translated relative to the viewport."}},doc:"Controls the frame of reference for `icon-translate`.",default:"map",requires:["icon-image","icon-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",doc:"The opacity at which the text will be drawn.",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",doc:"The color with which the text will be drawn.",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,doc:"The color of the text's halo, which helps it stand out from backgrounds.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"Distance of halo to the font outline. Max text halo width is 1/4 of the font-size.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",doc:"The halo's fadeout distance towards the outside.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{js:"0.33.0",android:"5.0.0",ios:"3.5.0",macos:"0.4.0"}},expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",doc:"Distance that the text's anchor is moved from its original placement. Positive values indicate right and down, while negative values indicate left and up.",requires:["text-field"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{doc:"The text is translated relative to the map."},viewport:{doc:"The text is translated relative to the viewport."}},doc:"Controls the frame of reference for `text-translate`.",default:"map",requires:["text-field","text-translate"],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",doc:"The opacity at which the image will be drawn.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",doc:"Rotates hues around the color wheel.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the minimum brightness.",default:0,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",doc:"Increase or reduce the brightness of the image. The value is the maximum brightness.",default:1,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",doc:"Increase or reduce the saturation of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",doc:"Increase or reduce the contrast of the image.",default:0,minimum:-1,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",doc:"The resampling/interpolation method to use for overscaling, also known as texture magnification filter",values:{linear:{doc:"(Bi)linear filtering interpolates pixel values using the weighted average of the four closest original source pixels creating a smooth but blurry look when overscaled"},nearest:{doc:"Nearest neighbor filtering interpolates pixel values using the nearest original source pixel creating a sharp but pixelated look when overscaled"}},default:"linear","sdk-support":{"basic functionality":{js:"0.47.0",android:"6.3.0",ios:"4.2.0",macos:"0.9.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",doc:"Fade duration when a new tile is added.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,doc:"The direction of the light source used to generate the hillshading with 0 as the top of the viewport if `hillshade-illumination-anchor` is set to `viewport` and due north if `hillshade-illumination-anchor` is set to `map`.",transition:!1,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{doc:"The hillshade illumination is relative to the north direction."},viewport:{doc:"The hillshade illumination is relative to the top of the viewport."}},default:"viewport",doc:"Direction of light source when map is rotated.","sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",doc:"Intensity of the hillshade",default:.5,minimum:0,maximum:1,transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",doc:"The shading color of areas that face away from the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",doc:"The shading color of areas that faces towards the light source.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",doc:"The shading color used to accentuate rugged terrain like sharp cliffs and gorges.",transition:!0,"sdk-support":{"basic functionality":{js:"0.43.0",android:"6.0.0",ios:"4.0.0",macos:"0.7.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",doc:"The color with which the background will be drawn.",transition:!0,requires:[{"!":"background-pattern"}],"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,doc:"Name of image in sprite to use for drawing an image background. For seamless patterns, image width and height must be a factor of two (2, 4, 8, ..., 512). Note that zoom-dependent expressions will be evaluated only at integer zoom levels.","sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"},"data-driven styling":{}},expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,doc:"The opacity at which the background will be drawn.",transition:!0,"sdk-support":{"basic functionality":{js:"0.10.0",android:"2.0.1",ios:"2.0.0",macos:"0.1.0"}},expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds",doc:"Time allotted for transitions to complete."},delay:{type:"number",default:0,minimum:0,units:"milliseconds",doc:"Length of time before a transition begins."}},"property-type":{"data-driven":{type:"property-type",doc:"Property is interpolable and can be represented using a property expression."},"cross-faded":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms."},"cross-faded-data-driven":{type:"property-type",doc:"Property is non-interpolable; rather, its values will be cross-faded to smoothly transition between integer zooms. It can be represented using a property expression."},"color-ramp":{type:"property-type",doc:"Property should be specified using a color ramp from which the output color can be sampled based on a property calculation."},"data-constant":{type:"property-type",doc:"Property is interpolable but cannot be represented using a property expression."},constant:{type:"property-type",doc:"Property is constant across all zoom levels and property values."}},promoteId:{"*":{type:"string",doc:"A name of a feature property to use as ID for feature state."}}};var D="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};function i(t,e){return t(e={exports:{}},e.exports),e.exports}i(function(L,N){!function(t){var e=N&&!N.nodeType&&N,n=L&&!L.nodeType&&L,r="object"==M()(D)&&D;r.global!==r&&r.window!==r&&r.self!==r||(t=r);var i,o,_=2147483647,m=36,v=1,b=26,a=38,s=700,w=72,x=128,C="-",l=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=m-v,E=Math.floor,P=String.fromCharCode;function O(t){throw RangeError(p[t])}function f(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function d(t,e){var n=t.split("@"),r="";return 1<n.length&&(r=n[0]+"@",t=n[1]),r+f((t=t.replace(c,".")).split("."),e).join(".")}function T(t){for(var e,n,r=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function S(t){return f(t,function(t){var e="";return 65535<t&&(e+=P((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=P(t)}).join("")}function I(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function A(t,e,n){var r=0;for(t=n?E(t/s):t>>1,t+=E(t/e);h*b>>1<t;r+=m)t=E(t/h);return E(r+(h+1)*t/(t+a))}function y(t){var e,n,r,i,o,a,s,l,u,c,p=[],h=t.length,f=0,d=x,y=w,g=t.lastIndexOf(C);for(g<0&&(g=0),n=0;n<g;++n)128<=t.charCodeAt(n)&&O("not-basic"),p.push(t.charCodeAt(n));for(r=0<g?g+1:0;r<h;){for(i=f,o=1,a=m;h<=r&&O("invalid-input"),c=t.charCodeAt(r++),(m<=(s=c-48<10?c-22:c-65<26?c-65:c-97<26?c-97:m)||s>E((_-f)/o))&&O("overflow"),f+=s*o,!(s<(l=a<=y?v:y+b<=a?b:a-y));a+=m)o>E(_/(u=m-l))&&O("overflow"),o*=u;y=A(f-i,e=p.length+1,0==i),E(f/e)>_-d&&O("overflow"),d+=E(f/e),f%=e,p.splice(f++,0,d)}return S(p)}function g(t){for(var e,n,r,i,o,a,s,l,u,c,p,h=[],f=(t=T(t)).length,d=x,y=w,g=e=0;g<f;++g)(l=t[g])<128&&h.push(P(l));for(n=r=h.length,r&&h.push(C);n<f;){for(i=_,g=0;g<f;++g)d<=(l=t[g])&&l<i&&(i=l);for(i-d>E((_-e)/(u=n+1))&&O("overflow"),e+=(i-d)*u,d=i,g=0;g<f;++g)if((l=t[g])<d&&++e>_&&O("overflow"),l==d){for(o=e,a=m;!(o<(s=a<=y?v:y+b<=a?b:a-y));a+=m)p=o-s,c=m-s,h.push(P(I(s+p%c,0))),o=E(p/c);h.push(P(I(o,0))),y=A(e,u,n==r),e=0,++n}++e,++d}return h.join("")}if(i={version:"1.3.2",ucs2:{decode:T,encode:S},decode:y,encode:g,toASCII:function(t){return d(t,function(t){return u.test(t)?"xn--"+g(t):t})},toUnicode:function(t){return d(t,function(t){return l.test(t)?y(t.slice(4).toLowerCase()):t})}},e&&n)if(L.exports==e)n.exports=i;else for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);else t.punycode=i}(D)});function o(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=t.length;0<a&&a<s&&(s=a);for(var l,u,c=0;c<s;++c){var p,h=t[c].replace(o,"%20"),f=h.indexOf(n),d=0<=f?(p=h.substr(0,f),h.substr(f+1)):(p=h,""),y=decodeURIComponent(p),g=decodeURIComponent(d);l=i,u=y,Object.prototype.hasOwnProperty.call(l,u)?Array.isArray(i[y])?i[y].push(g):i[y]=[i[y],g]:i[y]=g}return i}function a(t){switch(M()(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}function s(n,r,i,t){return r=r||"&",i=i||"=",null===n&&(n=void 0),"object"===M()(n)?Object.keys(n).map(function(t){var e=encodeURIComponent(a(t))+i;return Array.isArray(n[t])?n[t].map(function(t){return e+encodeURIComponent(a(t))}).join(r):e+encodeURIComponent(a(n[t]))}).join(r):t?encodeURIComponent(a(t))+i+encodeURIComponent(a(n)):""}var l=i(function(t,e){e.decode=e.parse=o,e.encode=e.stringify=s});l.decode,l.parse,l.encode,l.stringify;var u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u);["%","/","?",";","#"].concat(c);function E(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];for(var r=0,i=e;r<i.length;r+=1){var o=i[r];for(var a in o)t[a]=o[a]}return t}var p,h=((p=Error)&&(f.__proto__=p),(f.prototype=Object.create(p&&p.prototype)).constructor=f);function f(t,e){p.call(this,e),this.message=e,this.key=t}function d(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var n=0,r=e;n<r.length;n+=1){var i=r[n],o=i[0],a=i[1];this.bindings[o]=a}}d.prototype.concat=function(t){return new d(this,t)},d.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(t+" not found in scope.")},d.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var y={kind:"null"},g={kind:"number"},_={kind:"string"},m={kind:"boolean"},v={kind:"color"},b={kind:"object"},w={kind:"value"},x={kind:"collator"},C={kind:"formatted"},P={kind:"resolvedImage"};function O(t,e){return{kind:"array",itemType:t,N:e}}function T(t){if("array"!==t.kind)return t.kind;var e=T(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}var S=[y,g,_,m,v,C,b,O(w),P];function I(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!I(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(var n=0,r=S;n<r.length;n+=1){if(!I(r[n],e))return null}}return"Expected "+T(t)+" but found "+T(e)+" instead."}function A(e,t){return t.some(function(t){return t.kind===e.kind})}function L(e,t){return t.some(function(t){return"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"===M()(e):t===M()(e)})}var N=i(function(t,e){var f={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function d(t){return(t=Math.round(t))<0?0:255<t?255:t}function n(t){return t<0?0:1<t?1:t}function y(t){return"%"===t[t.length-1]?d(parseFloat(t)/100*255):d(parseInt(t))}function g(t){return"%"===t[t.length-1]?n(parseFloat(t)/100):n(parseFloat(t))}function _(t,e,n){return n<0?n+=1:1<n&&--n,6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}try{e.parseCSSColor=function(t){var e,n=t.replace(/ /g,"").toLowerCase();if(n in f)return f[n].slice();if("#"===n[0])return 4===n.length?0<=(e=parseInt(n.substr(1),16))&&e<=4095?[(3840&e)>>4|(3840&e)>>8,240&e|(240&e)>>4,15&e|(15&e)<<4,1]:null:7===n.length&&0<=(e=parseInt(n.substr(1),16))&&e<=16777215?[(16711680&e)>>16,(65280&e)>>8,255&e,1]:null;var r=n.indexOf("("),i=n.indexOf(")");if(-1!==r&&i+1===n.length){var o=n.substr(0,r),a=n.substr(r+1,i-(r+1)).split(","),s=1;switch(o){case"rgba":if(4!==a.length)return null;s=g(a.pop());case"rgb":return 3!==a.length?null:[y(a[0]),y(a[1]),y(a[2]),s];case"hsla":if(4!==a.length)return null;s=g(a.pop());case"hsl":if(3!==a.length)return null;var l=(parseFloat(a[0])%360+360)%360/360,u=g(a[1]),c=g(a[2]),p=c<=.5?c*(u+1):c+u-c*u,h=2*c-p;return[d(255*_(h,p,l+1/3)),d(255*_(h,p,l)),d(255*_(h,p,l-1/3)),s];default:return null}}return null}}catch(t){}}).parseCSSColor,R=function(t,e,n,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=n,this.a=r};R.parse=function(t){if(t){if(t instanceof R)return t;if("string"==typeof t){var e=N(t);if(e)return new R(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},R.prototype.toString=function(){var t=this.toArray(),e=t[0],n=t[1],r=t[2],i=t[3];return"rgba("+Math.round(e)+","+Math.round(n)+","+Math.round(r)+","+i+")"},R.prototype.toArray=function(){var t=this.r,e=this.g,n=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*n/r,r]},R.black=new R(0,0,0,1),R.white=new R(1,1,1,1),R.transparent=new R(0,0,0,0),R.red=new R(1,0,0,1);var j=function(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};j.prototype.compare=function(t,e){return this.collator.compare(t,e)},j.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};function k(t,e,n,r,i){this.text=t,this.image=e,this.scale=n,this.fontStack=r,this.textColor=i}var F=function(t){this.sections=t};F.fromString=function(t){return new F([new k(t,null,null,null,null)])},F.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},F.factory=function(t){return t instanceof F?t:F.fromString(t)},F.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},F.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r,i=n[e];i.image?t.push(["image",i.image.name]):(t.push(i.text),r={},i.fontStack&&(r["text-font"]=["literal",i.fontStack.split(",")]),i.scale&&(r["font-scale"]=i.scale),i.textColor&&(r["text-color"]=["rgba"].concat(i.textColor.toArray())),t.push(r))}return t};var B=function(t){this.name=t.name,this.available=t.available};function G(t,e,n,r){return"number"==typeof t&&0<=t&&t<=255&&"number"==typeof e&&0<=e&&e<=255&&"number"==typeof n&&0<=n&&n<=255?void 0===r||"number"==typeof r&&0<=r&&r<=1?null:"Invalid rgba value ["+[t,e,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,n,r]:[t,e,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function z(t){if(null===t)return 1;if("string"==typeof t)return 1;if("boolean"==typeof t)return 1;if("number"==typeof t)return 1;if(t instanceof R)return 1;if(t instanceof j)return 1;if(t instanceof F)return 1;if(t instanceof B)return 1;if(Array.isArray(t)){for(var e=0,n=t;e<n.length;e+=1){if(!z(n[e]))return}return 1}if("object"===M()(t)){for(var r in t)if(!z(t[r]))return;return 1}}function U(t){if(null===t)return y;if("string"==typeof t)return _;if("boolean"==typeof t)return m;if("number"==typeof t)return g;if(t instanceof R)return v;if(t instanceof j)return x;if(t instanceof F)return C;if(t instanceof B)return P;if(Array.isArray(t)){for(var e,n=t.length,r=0,i=t;r<i.length;r+=1){var o=U(i[r]);if(e){if(e===o)continue;e=w;break}e=o}return O(e||w,n)}return b}function V(t){var e=M()(t);return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof R||t instanceof F||t instanceof B?t.toString():JSON.stringify(t)}B.prototype.toString=function(){return this.name},B.fromString=function(t){return t?new B({name:t,available:!1}):null},B.prototype.serialize=function(){return["image",this.name]};var H=function(t,e){this.type=t,this.value=e};H.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!z(t[1]))return e.error("invalid value");var n=t[1],r=U(n),i=e.expectedType;return"array"!==r.kind||0!==r.N||!i||"array"!==i.kind||"number"==typeof i.N&&0!==i.N||(r=i),new H(r,n)},H.prototype.evaluate=function(){return this.value},H.prototype.eachChild=function(){},H.prototype.outputDefined=function(){return!0},H.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof R?["rgba"].concat(this.value.toArray()):this.value instanceof F?this.value.serialize():this.value};var q=function(t){this.name="ExpressionEvaluationError",this.message=t};q.prototype.toJSON=function(){return this.message};var W={string:_,number:g,boolean:m,object:b},Y=function(t,e){this.type=t,this.args=e};Y.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n,r,i,o=1,a=t[0];if("array"===a){if(2<t.length){var s=t[1];if("string"!=typeof s||!(s in W)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=W[s],o++}else r=w;if(3<t.length){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);i=t[2],o++}n=O(r,i)}else n=W[a];for(var l=[];o<t.length;o++){var u=e.parse(t[o],o,w);if(!u)return null;l.push(u)}return new Y(n,l)},Y.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var n=this.args[e].evaluate(t);if(!I(this.type,U(n)))return n;if(e===this.args.length-1)throw new q("Expected value to be of type "+T(this.type)+", but found "+T(U(n))+" instead.")}return null},Y.prototype.eachChild=function(t){this.args.forEach(t)},Y.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Y.prototype.serialize=function(){var t,e,n=this.type,r=[n.kind];return"array"===n.kind&&("string"!==(t=n.itemType).kind&&"number"!==t.kind&&"boolean"!==t.kind||(r.push(t.kind),("number"==typeof(e=n.N)||1<this.args.length)&&r.push(e))),r.concat(this.args.map(function(t){return t.serialize()}))};function X(t){this.type=C,this.sections=t}X.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[1];if(!Array.isArray(n)&&"object"===M()(n))return e.error("First argument must be an image or text section.");for(var r=[],i=!1,o=1;o<=t.length-1;++o){var a=t[o];if(i&&"object"===M()(a)&&!Array.isArray(a)){i=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,g)))return null;var l=null;if(a["text-font"]&&!(l=e.parse(a["text-font"],1,O(_))))return null;var u=null;if(a["text-color"]&&!(u=e.parse(a["text-color"],1,v)))return null;var c=r[r.length-1];c.scale=s,c.font=l,c.textColor=u}else{var p=e.parse(t[o],1,w);if(!p)return null;var h=p.type.kind;if("string"!==h&&"value"!==h&&"null"!==h&&"resolvedImage"!==h)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");i=!0,r.push({content:p,scale:null,font:null,textColor:null})}}return new X(r)},X.prototype.evaluate=function(n){return new F(this.sections.map(function(t){var e=t.content.evaluate(n);return U(e)===P?new k("",e,null,null,null):new k(V(e),null,t.scale?t.scale.evaluate(n):null,t.font?t.font.evaluate(n).join(","):null,t.textColor?t.textColor.evaluate(n):null)}))},X.prototype.eachChild=function(t){for(var e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},X.prototype.outputDefined=function(){return!1},X.prototype.serialize=function(){for(var t=["format"],e=0,n=this.sections;e<n.length;e+=1){var r=n[e];t.push(r.content.serialize());var i={};r.scale&&(i["font-scale"]=r.scale.serialize()),r.font&&(i["text-font"]=r.font.serialize()),r.textColor&&(i["text-color"]=r.textColor.serialize()),t.push(i)}return t};function J(t){this.type=P,this.input=t}J.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,_);return n?new J(n):e.error("No image name provided.")},J.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=B.fromString(e);return n&&t.availableImages&&(n.available=-1<t.availableImages.indexOf(e)),n},J.prototype.eachChild=function(t){t(this.input)},J.prototype.outputDefined=function(){return!1},J.prototype.serialize=function(){return["image",this.input.serialize()]};var Z={"to-boolean":m,"to-color":v,"to-number":g,"to-string":_},K=function(t,e){this.type=t,this.args=e};K.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var n=t[0];if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");for(var r=Z[n],i=[],o=1;o<t.length;o++){var a=e.parse(t[o],o,w);if(!a)return null;i.push(a)}return new K(r,i)},K.prototype.evaluate=function(t){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(t));if("color"===this.type.kind){for(var e=0,n=this.args;e<n.length;e+=1){var r,i=null;if((r=n[e].evaluate(t))instanceof R)return r;if("string"==typeof r){var o=t.parseColor(r);if(o)return o}else if(Array.isArray(r)&&!(i=r.length<3||4<r.length?"Invalid rbga value "+JSON.stringify(r)+": expected an array containing either three or four numeric values.":G(r[0],r[1],r[2],r[3])))return new R(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new q(i||"Could not parse color from value '"+("string"==typeof r?r:String(JSON.stringify(r)))+"'")}if("number"!==this.type.kind)return"formatted"===this.type.kind?F.fromString(V(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?B.fromString(V(this.args[0].evaluate(t))):V(this.args[0].evaluate(t));for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(t)))return 0;var u=Number(a);if(!isNaN(u))return u}throw new q("Could not convert "+JSON.stringify(a)+" to number.")},K.prototype.eachChild=function(t){this.args.forEach(t)},K.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},K.prototype.serialize=function(){if("formatted"===this.type.kind)return new X([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new J(this.args[0]).serialize();var e=["to-"+this.type.kind];return this.eachChild(function(t){e.push(t.serialize())}),e};function $(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}var Q=["Unknown","Point","LineString","Polygon"];$.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},$.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Q[this.feature.type]:this.feature.type:null},$.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},$.prototype.canonicalID=function(){return this.canonical},$.prototype.properties=function(){return this.feature&&this.feature.properties||{}},$.prototype.parseColor=function(t){return this._parseColorCache[t]||(this._parseColorCache[t]=R.parse(t))};var tt=function(t,e,n,r){this.name=t,this.type=e,this._evaluate=n,this.args=r};tt.prototype.evaluate=function(t){return this._evaluate(t,this.args)},tt.prototype.eachChild=function(t){this.args.forEach(t)},tt.prototype.outputDefined=function(){return!1},tt.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},tt.parse=function(n,t){var e,r=n[0],i=tt.definitions[r];if(!i)return t.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var o=Array.isArray(i)?i[0]:i.type,a=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,s=a.filter(function(t){var e=t[0];return!Array.isArray(e)||e.length===n.length-1}),l=null,u=0,c=s;u<c.length;u+=1){for(var p=c[u],h=p[0],f=p[1],l=new xt(t.registry,t.path,null,t.scope),d=[],y=!1,g=1;g<n.length;g++){var _=n[g],m=Array.isArray(h)?h[g-1]:h.type,v=l.parse(_,1+d.length,m);if(!v){y=!0;break}d.push(v)}if(!y)if(Array.isArray(h)&&h.length!==d.length)l.error("Expected "+h.length+" arguments, but found "+d.length+" instead.");else{for(var b=0;b<d.length;b++){var w=Array.isArray(h)?h[b]:h.type,x=d[b];l.concat(b+1).checkSubtype(w,x.type)}if(0===l.errors.length)return new tt(r,o,f,d)}}if(1===s.length)(e=t.errors).push.apply(e,l.errors);else{for(var C=(s.length?s:a).map(function(t){var e,n=t[0];return e=n,Array.isArray(e)?"("+e.map(T).join(", ")+")":"("+T(e.type)+"...)"}).join(" | "),E=[],P=1;P<n.length;P++){var O=t.parse(n[P],1+E.length);if(!O)return null;E.push(T(O.type))}t.error("Expected arguments of type "+C+", but found ("+E.join(", ")+") instead.")}return null},tt.register=function(t,e){for(var n in tt.definitions=e)t[n]=tt};var et=function(t,e,n){this.type=x,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e};et.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var n=t[1];if("object"!==M()(n)||Array.isArray(n))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,m);if(!r)return null;var i=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,m);if(!i)return null;var o=null;return n.locale&&!(o=e.parse(n.locale,1,_))?null:new et(r,i,o)},et.prototype.evaluate=function(t){return new j(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},et.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},et.prototype.outputDefined=function(){return!1},et.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var nt=8192;function rt(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function it(t,e){return!(t[0]<=e[0]||t[2]>=e[2]||t[1]<=e[1]||t[3]>=e[3])}function ot(t,e){var n,r=(180+t[0])/360,i=(n=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360),o=Math.pow(2,e.z);return[Math.round(r*o*nt),Math.round(i*o*nt)]}function at(t,e){for(var n,r,i,o,a,s,l,u,c,p,h=!1,f=0,d=e.length;f<d;f++)for(var y=e[f],g=0,_=y.length;g<_-1;g++){if(o=t,a=y[g],s=y[g+1],p=c=u=l=void 0,l=o[0]-a[0],u=o[1]-a[1],c=o[0]-s[0],p=o[1]-s[1],l*p-c*u==0&&l*c<=0&&u*p<=0)return;n=t,r=y[g],i=y[g+1],r[1]>n[1]!=i[1]>n[1]&&n[0]<(i[0]-r[0])*(n[1]-r[1])/(i[1]-r[1])+r[0]&&(h=!h)}return h}function st(t,e,n,r){var i=t[0]-n[0],o=t[1]-n[1],a=e[0]-n[0],s=e[1]-n[1],l=r[0]-n[0],u=r[1]-n[1],c=i*u-l*o,p=a*u-l*s;return 0<c&&p<0||c<0&&0<p}function lt(t,e,n){for(var r,i,o,a,s,l,u,c,p=0,h=n;p<h.length;p+=1)for(var f=h[p],d=0;d<f.length-1;++d)if(r=t,i=e,o=f[d],a=f[d+1],c=u=l=s=void 0,u=[i[0]-r[0],i[1]-r[1]],c=[a[0]-o[0],a[1]-o[1]],0!=(s=c)[0]*(l=u)[1]-s[1]*l[0]&&!(!st(r,i,o,a)||!st(o,a,r,i)))return 1}function ut(t,e){for(var n=0;n<t.length;++n)if(!at(t[n],e))return;for(var r=0;r<t.length-1;++r)if(lt(t[r],t[r+1],e))return;return 1}function ct(t,e,n){for(var r=[],i=0;i<t.length;i++){for(var o=[],a=0;a<t[i].length;a++){var s=ot(t[i][a],n);rt(e,s),o.push(s)}r.push(o)}return r}function pt(t,e,n){for(var r=[],i=0;i<t.length;i++){var o=ct(t[i],e,n);r.push(o)}return r}function ht(t,e,n,r){var i,o;(t[0]<n[0]||t[0]>n[2])&&(i=.5*r,0===(o=t[0]-n[0]>i?-r:n[0]-t[0]>i?r:0)&&(o=t[0]-n[2]>i?-r:n[2]-t[0]>i?r:0),t[0]+=o),rt(e,t)}function ft(t,e,n,r){for(var i=Math.pow(2,r.z)*nt,o=[r.x*nt,r.y*nt],a=[],s=0,l=t;s<l.length;s+=1)for(var u=0,c=l[s];u<c.length;u+=1){var p=c[u],h=[p.x+o[0],p.y+o[1]];ht(h,e,n,i),a.push(h)}return a}function dt(t,e,n,r){for(var i,o=Math.pow(2,r.z)*nt,a=[r.x*nt,r.y*nt],s=[],l=0,u=t;l<u.length;l+=1){for(var c=[],p=0,h=u[l];p<h.length;p+=1){var f=h[p],d=[f.x+a[0],f.y+a[1]];rt(e,d),c.push(d)}s.push(c)}if(e[2]-e[0]<=o/2){(i=e)[0]=i[1]=1/0,i[2]=i[3]=-1/0;for(var y=0,g=s;y<g.length;y+=1)for(var _=0,m=g[y];_<m.length;_+=1){ht(m[_],e,n,o)}}return s}function yt(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=ct(e.coordinates,r,i),a=ft(t.geometry(),n,r,i);if(!it(n,r))return!1;for(var s=0,l=a;s<l.length;s+=1){if(!at(l[s],o))return!1}}if("MultiPolygon"===e.type){var u=pt(e.coordinates,r,i),c=ft(t.geometry(),n,r,i);if(!it(n,r))return!1;for(var p=0,h=c;p<h.length;p+=1){if(!function(t,e){for(var n=0;n<e.length;n++)if(at(t,e[n]))return 1}(h[p],u))return!1}}return!0}function gt(t,e){var n=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],i=t.canonicalID();if("Polygon"===e.type){var o=ct(e.coordinates,r,i),a=dt(t.geometry(),n,r,i);if(!it(n,r))return!1;for(var s=0,l=a;s<l.length;s+=1){if(!ut(l[s],o))return!1}}if("MultiPolygon"===e.type){var u=pt(e.coordinates,r,i),c=dt(t.geometry(),n,r,i);if(!it(n,r))return!1;for(var p=0,h=c;p<h.length;p+=1){if(!function(t,e){for(var n=0;n<e.length;n++)if(ut(t,e[n]))return 1}(h[p],u))return!1}}return!0}var _t=function(t,e){this.type=m,this.geojson=t,this.geometries=e};function mt(t){if(t instanceof tt){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof _t)return!1;var e=!0;return t.eachChild(function(t){e&&!mt(t)&&(e=!1)}),e}function vt(t){if(!(t instanceof tt&&"feature-state"===t.name)){var e=!0;return t.eachChild(function(t){e&&!vt(t)&&(e=!1)}),e}}function bt(t,e){if(t instanceof tt&&0<=e.indexOf(t.name))return!1;var n=!0;return t.eachChild(function(t){n&&!bt(t,e)&&(n=!1)}),n}_t.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(z(t[1])){var n=t[1];if("FeatureCollection"===n.type)for(var r=0;r<n.features.length;++r){var i=n.features[r].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new _t(n,n.features[r].geometry)}else if("Feature"===n.type){var o=n.geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new _t(n,n.geometry)}else if("Polygon"===n.type||"MultiPolygon"===n.type)return new _t(n,n)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},_t.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return yt(t,this.geometries);if("LineString"===t.geometryType())return gt(t,this.geometries)}return!1},_t.prototype.eachChild=function(){},_t.prototype.outputDefined=function(){return!0},_t.prototype.serialize=function(){return["within",this.geojson]};var wt=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};wt.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var n=t[1];return e.scope.has(n)?new wt(n,e.scope.get(n)):e.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},wt.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},wt.prototype.eachChild=function(){},wt.prototype.outputDefined=function(){return!1},wt.prototype.serialize=function(){return["var",this.name]};var xt=function(t,e,n,r,i){void 0===e&&(e=[]),void 0===r&&(r=new d),void 0===i&&(i=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=i,this.expectedType=n};function Ct(t,e){for(var n,r,i,o=t.length-1,a=0,s=o;a<=s;)if(r=t[n=Math.floor((a+s)/2)],i=t[n+1],r<=e){if(n===o||e<i)return n;a=n+1}else{if(!(e<r))throw new q("Input is not a number.");s=n-1}return 0}xt.prototype.parse=function(t,e,n,r,i){return void 0===i&&(i={}),e?this.concat(e,n,r)._parse(t,i):this._parse(t,i)},xt.prototype._parse=function(t,e){function n(t,e,n){return"assert"===n?new Y(e,[t]):"coerce"===n?new K(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+M()(r)+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var i=this.registry[r];if(i){var o=i.parse(t,this);if(!o)return null;if(this.expectedType){var a=this.expectedType,s=o.type;if("string"!==a.kind&&"number"!==a.kind&&"boolean"!==a.kind&&"object"!==a.kind&&"array"!==a.kind||"value"!==s.kind)if("color"!==a.kind&&"formatted"!==a.kind&&"resolvedImage"!==a.kind||"value"!==s.kind&&"string"!==s.kind){if(this.checkSubtype(a,s))return null}else o=n(o,a,e.typeAnnotation||"coerce");else o=n(o,a,e.typeAnnotation||"assert")}if(!(o instanceof H)&&"resolvedImage"!==o.type.kind&&function e(t){{if(t instanceof wt)return e(t.boundExpression);if(t instanceof tt&&"error"===t.name)return!1;if(t instanceof et)return!1;if(t instanceof _t)return!1}var n=t instanceof K||t instanceof Y;var r=!0;t.eachChild(function(t){r=n?r&&e(t):r&&t instanceof H});if(!r)return!1;return mt(t)&&bt(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(o)){var l=new $;try{o=new H(o.type,o.evaluate(l))}catch(t){return this.error(t.message),null}}return o}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"===M()(t)?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+M()(t)+" instead.")},xt.prototype.concat=function(t,e,n){var r="number"==typeof t?this.path.concat(t):this.path,i=n?this.scope.concat(n):this.scope;return new xt(this.registry,r,e||null,i,this.errors)},xt.prototype.error=function(t){for(var e=[],n=arguments.length-1;0<n--;)e[n]=arguments[n+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new h(r,t))},xt.prototype.checkSubtype=function(t,e){var n=I(t,e);return n&&this.error(n),n};var Et=function(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0,i=n;r<i.length;r+=1){var o=i[r],a=o[0],s=o[1];this.labels.push(a),this.outputs.push(s)}};Et.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var n=e.parse(t[1],1,g);if(!n)return null;var r=[],i=null;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var o=1;o<t.length;o+=2){var a=1===o?-1/0:t[o],s=t[o+1],l=o,u=o+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(r.length&&r[r.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var c=e.parse(s,u,i);if(!c)return null;i=i||c.type,r.push([a,c])}return new Et(i,n,r)},Et.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;return r>=e[i-1]?n[i-1].evaluate(t):n[Ct(e,r)].evaluate(t)},Et.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1){t(n[e])}},Et.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},Et.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)0<e&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t};var Pt=Ot;function Ot(t,e,n,r){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=n,this.p2y=r}function Tt(t,e,n){return t*(1-n)+e*n}Ot.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},Ot.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},Ot.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},Ot.prototype.solveCurveX=function(t,e){var n,r,i,o,a;for(void 0===e&&(e=1e-6),i=t,a=0;a<8;a++){if(o=this.sampleCurveX(i)-t,Math.abs(o)<e)return i;var s=this.sampleCurveDerivativeX(i);if(Math.abs(s)<1e-6)break;i-=o/s}if((i=t)<(n=0))return n;if((r=1)<i)return r;for(;n<r;){if(o=this.sampleCurveX(i),Math.abs(o-t)<e)return i;o<t?n=i:r=i,i=.5*(r-n)+n}return i},Ot.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var St=Object.freeze({__proto__:null,number:Tt,color:function(t,e,n){return new R(Tt(t.r,e.r,n),Tt(t.g,e.g,n),Tt(t.b,e.b,n),Tt(t.a,e.a,n))},array:function(t,n,r){return t.map(function(t,e){return Tt(t,n[e],r)})}}),It=.95047,At=1,Lt=1.08883,Nt=4/29,Mt=6/29,Dt=3*Mt*Mt,Rt=Mt*Mt*Mt,jt=Math.PI/180,kt=180/Math.PI;function Ft(t){return Rt<t?Math.pow(t,1/3):t/Dt+Nt}function Bt(t){return Mt<t?t*t*t:Dt*(t-Nt)}function Gt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function zt(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Ut(t){var e=zt(t.r),n=zt(t.g),r=zt(t.b),i=Ft((.4124564*e+.3575761*n+.1804375*r)/It),o=Ft((.2126729*e+.7151522*n+.072175*r)/At);return{l:116*o-16,a:500*(i-o),b:200*(o-Ft((.0193339*e+.119192*n+.9503041*r)/Lt)),alpha:t.a}}function Vt(t){var e=(t.l+16)/116,n=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200,e=At*Bt(e),n=It*Bt(n),r=Lt*Bt(r);return new R(Gt(3.2404542*n-1.5371385*e-.4985314*r),Gt(-.969266*n+1.8760108*e+.041556*r),Gt(.0556434*n-.2040259*e+1.0572252*r),t.alpha)}var Ht={forward:Ut,reverse:Vt,interpolate:function(t,e,n){return{l:Tt(t.l,e.l,n),a:Tt(t.a,e.a,n),b:Tt(t.b,e.b,n),alpha:Tt(t.alpha,e.alpha,n)}}},qt={forward:function(t){var e=Ut(t),n=e.l,r=e.a,i=e.b,o=Math.atan2(i,r)*kt;return{h:o<0?360+o:o,c:Math.sqrt(r*r+i*i),l:n,alpha:t.a}},reverse:function(t){var e=t.h*jt,n=t.c;return Vt({l:t.l,a:Math.cos(e)*n,b:Math.sin(e)*n,alpha:t.alpha})},interpolate:function(t,e,n){return{h:(r=t.h,i=e.h,r+n*(180<(o=i-r)||o<-180?o-360*Math.round(o/360):o)),c:Tt(t.c,e.c,n),l:Tt(t.l,e.l,n),alpha:Tt(t.alpha,e.alpha,n)};var r,i,o}},Wt=Object.freeze({__proto__:null,lab:Ht,hcl:qt}),Yt=function(t,e,n,r,i){this.type=t,this.operator=e,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(var o=0,a=i;o<a.length;o+=1){var s=a[o],l=s[0],u=s[1];this.labels.push(l),this.outputs.push(u)}};function Xt(t,e,n,r){var i=r-n,o=t-n;return 0==i?0:1===e?o/i:(Math.pow(e,o)-1)/(Math.pow(e,i)-1)}Yt.interpolationFactor=function(t,e,n,r){var i,o=0;return"exponential"===t.name?o=Xt(e,t.base,n,r):"linear"===t.name?o=Xt(e,1,n,r):"cubic-bezier"===t.name&&(i=t.controlPoints,o=new Pt(i[0],i[1],i[2],i[3]).solve(Xt(e,1,n,r))),o},Yt.parse=function(t,e){var n=t[0],r=t[1],i=t[2],o=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||1<t}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(i=e.parse(i,2,g)))return null;var l=[],u=null;"interpolate-hcl"===n||"interpolate-lab"===n?u=v:e.expectedType&&"value"!==e.expectedType.kind&&(u=e.expectedType);for(var c=0;c<o.length;c+=2){var p=o[c],h=o[c+1],f=c+3,d=c+4;if("number"!=typeof p)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',f);if(l.length&&l[l.length-1][0]>=p)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',f);var y=e.parse(h,d,u);if(!y)return null;u=u||y.type,l.push([p,y])}return"number"===u.kind||"color"===u.kind||"array"===u.kind&&"number"===u.itemType.kind&&"number"==typeof u.N?new Yt(u,n,r,i,l):e.error("Type "+T(u)+" is not interpolatable.")},Yt.prototype.evaluate=function(t){var e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return n[0].evaluate(t);var i=e.length;if(r>=e[i-1])return n[i-1].evaluate(t);var o=Ct(e,r),a=e[o],s=e[o+1],l=Yt.interpolationFactor(this.interpolation,r,a,s),u=n[o].evaluate(t),c=n[o+1].evaluate(t);return"interpolate"===this.operator?St[this.type.kind.toLowerCase()](u,c,l):"interpolate-hcl"===this.operator?qt.reverse(qt.interpolate(qt.forward(u),qt.forward(c),l)):Ht.reverse(Ht.interpolate(Ht.forward(u),Ht.forward(c),l))},Yt.prototype.eachChild=function(t){t(this.input);for(var e=0,n=this.outputs;e<n.length;e+=1){t(n[e])}},Yt.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},Yt.prototype.serialize=function(){for(var t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints),e=[this.operator,t,this.input.serialize()],n=0;n<this.labels.length;n++)e.push(this.labels[n],this.outputs[n].serialize());return e};var Jt=function(t,e){this.type=t,this.args=e};Jt.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var n=null,r=e.expectedType;r&&"value"!==r.kind&&(n=r);for(var i=[],o=0,a=t.slice(1);o<a.length;o+=1){var s=a[o],l=e.parse(s,1+i.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,i.push(l)}var u=r&&i.some(function(t){return I(r,t.type)});return new Jt(u?w:n,i)},Jt.prototype.evaluate=function(t){for(var e,n=null,r=0,i=0,o=this.args;i<o.length;i+=1){if(r++,(n=o[i].evaluate(t))&&n instanceof B&&!n.available&&(e=e||n.name,n=null,r===this.args.length&&(n=e)),null!==n)break}return n},Jt.prototype.eachChild=function(t){this.args.forEach(t)},Jt.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},Jt.prototype.serialize=function(){var e=["coalesce"];return this.eachChild(function(t){e.push(t.serialize())}),e};var Zt=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};Zt.prototype.evaluate=function(t){return this.result.evaluate(t)},Zt.prototype.eachChild=function(t){for(var e=0,n=this.bindings;e<n.length;e+=1){t(n[e][1])}t(this.result)},Zt.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var n=[],r=1;r<t.length-1;r+=2){var i=t[r];if("string"!=typeof i)return e.error("Expected string, but found "+M()(i)+" instead.",r);if(/[^a-zA-Z0-9_]/.test(i))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var o=e.parse(t[r+1],r+1);if(!o)return null;n.push([i,o])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return a?new Zt(n,a):null},Zt.prototype.outputDefined=function(){return this.result.outputDefined()},Zt.prototype.serialize=function(){for(var t=["let"],e=0,n=this.bindings;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t.push(i,o.serialize())}return t.push(this.result.serialize()),t};function Kt(t,e,n){this.type=t,this.index=e,this.input=n}Kt.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,g),r=e.parse(t[2],2,O(e.expectedType||w));if(!n||!r)return null;var i=r.type;return new Kt(i.itemType,n,r)},Kt.prototype.evaluate=function(t){var e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new q("Array index out of bounds: "+e+" < 0.");if(e>=n.length)throw new q("Array index out of bounds: "+e+" > "+(n.length-1)+".");if(e!==Math.floor(e))throw new q("Array index must be an integer, but found "+e+" instead.");return n[e]},Kt.prototype.eachChild=function(t){t(this.index),t(this.input)},Kt.prototype.outputDefined=function(){return!1},Kt.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};function $t(t,e){this.type=m,this.needle=t,this.haystack=e}$t.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,w),r=e.parse(t[2],2,w);return n&&r?A(n.type,[m,_,g,y,w])?new $t(n,r):e.error("Expected first argument to be of type boolean, string, number or null, but found "+T(n.type)+" instead"):null},$t.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!L(e,["boolean","string","number","null"]))throw new q("Expected first argument to be of type boolean, string, number or null, but found "+T(U(e))+" instead.");if(!L(n,["string","array"]))throw new q("Expected second argument to be of type array or string, but found "+T(U(n))+" instead.");return 0<=n.indexOf(e)},$t.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},$t.prototype.outputDefined=function(){return!0},$t.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};function Qt(t,e,n){this.type=g,this.needle=t,this.haystack=e,this.fromIndex=n}Qt.parse=function(t,e){if(t.length<=2||5<=t.length)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,w),r=e.parse(t[2],2,w);if(!n||!r)return null;if(!A(n.type,[m,_,g,y,w]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+T(n.type)+" instead");if(4!==t.length)return new Qt(n,r);var i=e.parse(t[3],3,g);return i?new Qt(n,r,i):null},Qt.prototype.evaluate=function(t){var e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!L(e,["boolean","string","number","null"]))throw new q("Expected first argument to be of type boolean, string, number or null, but found "+T(U(e))+" instead.");if(!L(n,["string","array"]))throw new q("Expected second argument to be of type array or string, but found "+T(U(n))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return n.indexOf(e,r)}return n.indexOf(e)},Qt.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},Qt.prototype.outputDefined=function(){return!1},Qt.prototype.serialize=function(){if(null==this.fromIndex||void 0===this.fromIndex)return["index-of",this.needle.serialize(),this.haystack.serialize()];var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]};function te(t,e,n,r,i,o){this.inputType=t,this.type=e,this.input=n,this.cases=r,this.outputs=i,this.otherwise=o}te.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");var n,r;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i={},o=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var u=e.concat(a);if(0===s.length)return u.error("Expected at least one branch label.");for(var c=0,p=s;c<p.length;c+=1){var h=p[c];if("number"!=typeof h&&"string"!=typeof h)return u.error("Branch labels must be numbers or strings.");if("number"==typeof h&&Math.abs(h)>Number.MAX_SAFE_INTEGER)return u.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof h&&Math.floor(h)!==h)return u.error("Numeric branch labels must be integer values.");if(n){if(u.checkSubtype(n,U(h)))return null}else n=U(h);if(void 0!==i[String(h)])return u.error("Branch labels must be unique.");i[String(h)]=o.length}var f=e.parse(l,a,r);if(!f)return null;r=r||f.type,o.push(f)}var d=e.parse(t[1],1,w);if(!d)return null;var y=e.parse(t[t.length-1],t.length-1,r);return!y||"value"!==d.type.kind&&e.concat(1).checkSubtype(n,d.type)?null:new te(n,r,d,i,o,y)},te.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(U(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},te.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},te.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})&&this.otherwise.outputDefined()},te.prototype.serialize=function(){for(var e=this,t=["match",this.input.serialize()],n=[],r={},i=0,o=Object.keys(this.cases).sort();i<o.length;i+=1){var a=o[i];void 0===(p=r[this.cases[a]])?(r[this.cases[a]]=n.length,n.push([this.cases[a],[a]])):n[p][1].push(a)}for(var s=function(t){return"number"===e.inputType.kind?Number(t):t},l=0,u=n;l<u.length;l+=1){var c=u[l],p=c[0],h=c[1];1===h.length?t.push(s(h[0])):t.push(h.map(s)),t.push(this.outputs[outputIndex$1].serialize())}return t.push(this.otherwise.serialize()),t};function ee(t,e,n){this.type=t,this.branches=e,this.otherwise=n}ee.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");var n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);for(var r=[],i=1;i<t.length-1;i+=2){var o=e.parse(t[i],i,m);if(!o)return null;var a=e.parse(t[i+1],i+1,n);if(!a)return null;r.push([o,a]),n=n||a.type}var s=e.parse(t[t.length-1],t.length-1,n);return s?new ee(n,r,s):null},ee.prototype.evaluate=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];if(i.evaluate(t))return o.evaluate(t)}return this.otherwise.evaluate(t)},ee.prototype.eachChild=function(t){for(var e=0,n=this.branches;e<n.length;e+=1){var r=n[e],i=r[0],o=r[1];t(i),t(o)}t(this.otherwise)},ee.prototype.outputDefined=function(){return this.branches.every(function(t){t[0];return t[1].outputDefined()})&&this.otherwise.outputDefined()},ee.prototype.serialize=function(){var e=["case"];return this.eachChild(function(t){e.push(t.serialize())}),e};function ne(t,e,n,r){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=r}function re(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function ie(t,e,n,r){return 0===r.compare(e,n)}function oe(s,l,u){var c="=="!==s&&"!="!==s;return a.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var n=t[0],r=e.parse(t[1],1,w);if(!r)return null;if(!re(n,r.type))return e.concat(1).error('"'+n+"\" comparisons are not supported for type '"+T(r.type)+"'.");var i=e.parse(t[2],2,w);if(!i)return null;if(!re(n,i.type))return e.concat(2).error('"'+n+"\" comparisons are not supported for type '"+T(i.type)+"'.");if(r.type.kind!==i.type.kind&&"value"!==r.type.kind&&"value"!==i.type.kind)return e.error("Cannot compare types '"+T(r.type)+"' and '"+T(i.type)+"'.");c&&("value"===r.type.kind&&"value"!==i.type.kind?r=new Y(i.type,[r]):"value"!==r.type.kind&&"value"===i.type.kind&&(i=new Y(r.type,[i])));var o=null;if(4===t.length){if("string"!==r.type.kind&&"string"!==i.type.kind&&"value"!==r.type.kind&&"value"!==i.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(o=e.parse(t[3],3,x)))return null}return new a(r,i,o)},a.prototype.evaluate=function(t){var e=this.lhs.evaluate(t),n=this.rhs.evaluate(t);if(c&&this.hasUntypedArgument){var r=U(e),i=U(n);if(r.kind!==i.kind||"string"!==r.kind&&"number"!==r.kind)throw new q('Expected arguments for "'+s+'" to be (string, string) or (number, number), but found ('+r.kind+", "+i.kind+") instead.")}if(this.collator&&!c&&this.hasUntypedArgument){var o=U(e),a=U(n);if("string"!==o.kind||"string"!==a.kind)return l(t,e,n)}return this.collator?u(t,e,n,this.collator.evaluate(t)):l(t,e,n)},a.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},a.prototype.outputDefined=function(){return!0},a.prototype.serialize=function(){var e=[s];return this.eachChild(function(t){e.push(t.serialize())}),e},a;function a(t,e,n){this.type=m,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}}ne.parse=function(t,e){if(t.length<=2||5<=t.length)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1,w),r=e.parse(t[2],2,g);if(!n||!r)return null;if(!A(n.type,[O(w),_,w]))return e.error("Expected first argument to be of type array or string, but found "+T(n.type)+" instead");if(4!==t.length)return new ne(n.type,n,r);var i=e.parse(t[3],3,g);return i?new ne(n.type,n,r,i):null},ne.prototype.evaluate=function(t){var e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);if(!L(e,["string","array"]))throw new q("Expected first argument to be of type array or string, but found "+T(U(e))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(n,r)}return e.slice(n)},ne.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},ne.prototype.outputDefined=function(){return!1},ne.prototype.serialize=function(){if(null==this.endIndex||void 0===this.endIndex)return["slice",this.input.serialize(),this.beginIndex.serialize()];var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]};function ae(t,e,n,r,i){this.type=_,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=r,this.maxFractionDigits=i}var se=oe("==",function(t,e,n){return e===n},ie),le=oe("!=",function(t,e,n){return e!==n},function(t,e,n,r){return!ie(0,e,n,r)}),ue=oe("<",function(t,e,n){return e<n},function(t,e,n,r){return r.compare(e,n)<0}),ce=oe(">",function(t,e,n){return n<e},function(t,e,n,r){return 0<r.compare(e,n)}),pe=oe("<=",function(t,e,n){return e<=n},function(t,e,n,r){return r.compare(e,n)<=0}),he=oe(">=",function(t,e,n){return n<=e},function(t,e,n,r){return 0<=r.compare(e,n)});ae.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var n=e.parse(t[1],1,g);if(!n)return null;var r=t[2];if("object"!==M()(r)||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var i=null;if(r.locale&&!(i=e.parse(r.locale,1,_)))return null;var o=null;if(r.currency&&!(o=e.parse(r.currency,1,_)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,g)))return null;var s=null;return r["max-fraction-digits"]&&!(s=e.parse(r["max-fraction-digits"],1,g))?null:new ae(n,i,o,a,s)},ae.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},ae.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},ae.prototype.outputDefined=function(){return!1},ae.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};function fe(t){this.type=g,this.input=t}fe.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error("Expected argument of type string or array, but found "+T(n.type)+" instead."):new fe(n):null},fe.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e)return e.length;if(Array.isArray(e))return e.length;throw new q("Expected value to be of type string or array, but found "+T(U(e))+" instead.")},fe.prototype.eachChild=function(t){t(this.input)},fe.prototype.outputDefined=function(){return!1},fe.prototype.serialize=function(){var e=["length"];return this.eachChild(function(t){e.push(t.serialize())}),e};var de={"==":se,"!=":le,">":ce,"<":ue,">=":he,"<=":pe,array:Y,at:Kt,boolean:Y,case:ee,coalesce:Jt,collator:et,format:X,image:J,in:$t,"index-of":Qt,interpolate:Yt,"interpolate-hcl":Yt,"interpolate-lab":Yt,length:fe,let:Zt,literal:H,match:te,number:Y,"number-format":ae,object:Y,slice:ne,step:Et,string:Y,"to-boolean":K,"to-color":K,"to-number":K,"to-string":K,var:wt,within:_t};function ye(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],n=n.evaluate(t),r=r.evaluate(t),i=i.evaluate(t),a=o?o.evaluate(t):1,s=G(n,r,i,a);if(s)throw new q(s);return new R(n/255*a,r/255*a,i/255*a,a)}function ge(t,e){var n=e[t];return void 0===n?null:n}function _e(t){return{type:t}}function me(t){return{result:"success",value:t}}function ve(t){return{result:"error",value:t}}function be(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function we(t){return t.expression&&-1<t.expression.parameters.indexOf("zoom")}function xe(t){return t.expression&&t.expression.interpolated}function Ce(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":M()(t)}function Ee(t){return"object"===M()(t)&&null!==t&&!Array.isArray(t)}function Pe(t){return t}function Oe(r,i){var o,a,s,t="color"===i.type,e=r.stops&&"object"===M()(r.stops[0][0]),n=e||void 0!==r.property,l=e||!n,u=r.type||(xe(i)?"exponential":"interval");if(t&&((r=E({},r)).stops&&(r.stops=r.stops.map(function(t){return[t[0],R.parse(t[1])]})),r.default?r.default=R.parse(r.default):r.default=R.parse(i.default)),r.colorSpace&&"rgb"!==r.colorSpace&&!Wt[r.colorSpace])throw new Error("Unknown color space: "+r.colorSpace);if("exponential"===u)o=Ae;else if("interval"===u)o=Ie;else if("categorical"===u){o=Se,a=Object.create(null);for(var c=0,p=r.stops;c<p.length;c+=1){var h=p[c];a[h[0]]=h[1]}s=M()(r.stops[0][0])}else{if("identity"!==u)throw new Error('Unknown function type "'+u+'"');o=Le}if(e){for(var f={},d=[],y=0;y<r.stops.length;y++){var g=r.stops[y],_=g[0].zoom;void 0===f[_]&&(f[_]={zoom:_,type:r.type,property:r.property,default:r.default,stops:[]},d.push(_)),f[_].stops.push([g[0].value,g[1]])}for(var m=[],v=0,b=d;v<b.length;v+=1){var w=b[v];m.push([f[w].zoom,Oe(f[w],i)])}var x={name:"linear"};return{kind:"composite",interpolationType:x,interpolationFactor:Yt.interpolationFactor.bind(void 0,x),zoomStops:m.map(function(t){return t[0]}),evaluate:function(t,e){var n=t.zoom;return Ae({stops:m,base:r.base},i,n).evaluate(n,e)}}}if(l){var C="exponential"===u?{name:"exponential",base:void 0!==r.base?r.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:Yt.interpolationFactor.bind(void 0,C),zoomStops:r.stops.map(function(t){return t[0]}),evaluate:function(t){var e=t.zoom;return o(r,i,e,a,s)}}}return{kind:"source",evaluate:function(t,e){var n=e&&e.properties?e.properties[r.property]:void 0;return void 0===n?Te(r.default,i.default):o(r,i,n,a,s)}}}function Te(t,e,n){return void 0!==t?t:void 0!==e?e:void 0!==n?n:void 0}function Se(t,e,n,r,i){return Te(M()(n)===i?r[n]:void 0,t.default,e.default)}function Ie(t,e,n){if("number"!==Ce(n))return Te(t.default,e.default);var r=t.stops.length;if(1===r)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[r-1][0])return t.stops[r-1][1];var i=Ct(t.stops.map(function(t){return t[0]}),n);return t.stops[i][1]}function Ae(t,e,n){var r=void 0!==t.base?t.base:1;if("number"!==Ce(n))return Te(t.default,e.default);var i=t.stops.length;if(1===i)return t.stops[0][1];if(n<=t.stops[0][0])return t.stops[0][1];if(n>=t.stops[i-1][0])return t.stops[i-1][1];var o,a,s,l,u,c,p,h=Ct(t.stops.map(function(t){return t[0]}),n),f=(o=n,a=r,s=t.stops[h][0],l=t.stops[h+1][0],c=o-s,0==(u=l-s)?0:1===a?c/u:(Math.pow(a,c)-1)/(Math.pow(a,u)-1)),d=t.stops[h][1],y=t.stops[h+1][1],g=St[e.type]||Pe;return t.colorSpace&&"rgb"!==t.colorSpace&&(p=Wt[t.colorSpace],g=function(t,e){return p.reverse(p.interpolate(p.forward(t),p.forward(e),f))}),"function"==typeof d.evaluate?{evaluate:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=d.evaluate.apply(void 0,t),r=y.evaluate.apply(void 0,t);if(void 0!==n&&void 0!==r)return g(n,r,f)}}:g(d,y,f)}function Le(t,e,n){return"color"===e.type?n=R.parse(n):"formatted"===e.type?n=F.fromString(n.toString()):"resolvedImage"===e.type?n=B.fromString(n.toString()):Ce(n)===e.type||"enum"===e.type&&e.values[n]||(n=void 0),Te(n,t.default,e.default)}tt.register(de,{error:[{kind:"error"},[_],function(t,e){var n=e[0];throw new q(n.evaluate(t))}],typeof:[_,[w],function(t,e){return T(U(e[0].evaluate(t)))}],"to-rgba":[O(g,4),[v],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[v,[g,g,g],ye],rgba:[v,[g,g,g,g],ye],has:{type:m,overloads:[[[_],function(t,e){return e[0].evaluate(t)in t.properties()}],[[_,b],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)in r.evaluate(t)}]]},get:{type:w,overloads:[[[_],function(t,e){return ge(e[0].evaluate(t),t.properties())}],[[_,b],function(t,e){var n=e[0],r=e[1];return ge(n.evaluate(t),r.evaluate(t))}]]},"feature-state":[w,[_],function(t,e){return ge(e[0].evaluate(t),t.featureState||{})}],properties:[b,[],function(t){return t.properties()}],"geometry-type":[_,[],function(t){return t.geometryType()}],id:[w,[],function(t){return t.id()}],zoom:[g,[],function(t){return t.globals.zoom}],"heatmap-density":[g,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[g,[],function(t){return t.globals.lineProgress||0}],accumulated:[w,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[g,_e(g),function(t,e){for(var n=0,r=0,i=e;r<i.length;r+=1){n+=i[r].evaluate(t)}return n}],"*":[g,_e(g),function(t,e){for(var n=1,r=0,i=e;r<i.length;r+=1){n*=i[r].evaluate(t)}return n}],"-":{type:g,overloads:[[[g,g],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)-r.evaluate(t)}],[[g],function(t,e){return-e[0].evaluate(t)}]]},"/":[g,[g,g],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)/r.evaluate(t)}],"%":[g,[g,g],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)%r.evaluate(t)}],ln2:[g,[],function(){return Math.LN2}],pi:[g,[],function(){return Math.PI}],e:[g,[],function(){return Math.E}],"^":[g,[g,g],function(t,e){var n=e[0],r=e[1];return Math.pow(n.evaluate(t),r.evaluate(t))}],sqrt:[g,[g],function(t,e){var n=e[0];return Math.sqrt(n.evaluate(t))}],log10:[g,[g],function(t,e){var n=e[0];return Math.log(n.evaluate(t))/Math.LN10}],ln:[g,[g],function(t,e){var n=e[0];return Math.log(n.evaluate(t))}],log2:[g,[g],function(t,e){var n=e[0];return Math.log(n.evaluate(t))/Math.LN2}],sin:[g,[g],function(t,e){var n=e[0];return Math.sin(n.evaluate(t))}],cos:[g,[g],function(t,e){var n=e[0];return Math.cos(n.evaluate(t))}],tan:[g,[g],function(t,e){var n=e[0];return Math.tan(n.evaluate(t))}],asin:[g,[g],function(t,e){var n=e[0];return Math.asin(n.evaluate(t))}],acos:[g,[g],function(t,e){var n=e[0];return Math.acos(n.evaluate(t))}],atan:[g,[g],function(t,e){var n=e[0];return Math.atan(n.evaluate(t))}],min:[g,_e(g),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[g,_e(g),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],abs:[g,[g],function(t,e){var n=e[0];return Math.abs(n.evaluate(t))}],round:[g,[g],function(t,e){var n=e[0].evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[g,[g],function(t,e){var n=e[0];return Math.floor(n.evaluate(t))}],ceil:[g,[g],function(t,e){var n=e[0];return Math.ceil(n.evaluate(t))}],"filter-==":[m,[_,w],function(t,e){var n=e[0],r=e[1];return t.properties()[n.value]===r.value}],"filter-id-==":[m,[w],function(t,e){var n=e[0];return t.id()===n.value}],"filter-type-==":[m,[_],function(t,e){var n=e[0];return t.geometryType()===n.value}],"filter-<":[m,[_,w],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return M()(i)===M()(o)&&i<o}],"filter-id-<":[m,[w],function(t,e){var n=e[0],r=t.id(),i=n.value;return M()(r)===M()(i)&&r<i}],"filter->":[m,[_,w],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return M()(i)===M()(o)&&o<i}],"filter-id->":[m,[w],function(t,e){var n=e[0],r=t.id(),i=n.value;return M()(r)===M()(i)&&i<r}],"filter-<=":[m,[_,w],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return M()(i)===M()(o)&&i<=o}],"filter-id-<=":[m,[w],function(t,e){var n=e[0],r=t.id(),i=n.value;return M()(r)===M()(i)&&r<=i}],"filter->=":[m,[_,w],function(t,e){var n=e[0],r=e[1],i=t.properties()[n.value],o=r.value;return M()(i)===M()(o)&&o<=i}],"filter-id->=":[m,[w],function(t,e){var n=e[0],r=t.id(),i=n.value;return M()(r)===M()(i)&&i<=r}],"filter-has":[m,[w],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[m,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[m,[O(_)],function(t,e){return 0<=e[0].value.indexOf(t.geometryType())}],"filter-id-in":[m,[O(w)],function(t,e){return 0<=e[0].value.indexOf(t.id())}],"filter-in-small":[m,[_,O(w)],function(t,e){var n=e[0];return 0<=e[1].value.indexOf(t.properties()[n.value])}],"filter-in-large":[m,[_,O(w)],function(t,e){var n=e[0],r=e[1];return function(t,e,n,r){for(;n<=r;){var i=n+r>>1;if(e[i]===t)return!0;e[i]>t?r=i-1:n=1+i}return!1}(t.properties()[n.value],r.value,0,r.value.length-1)}],all:{type:m,overloads:[[[m,m],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)&&r.evaluate(t)}],[_e(m),function(t,e){for(var n=0,r=e;n<r.length;n+=1){if(!r[n].evaluate(t))return!1}return!0}]]},any:{type:m,overloads:[[[m,m],function(t,e){var n=e[0],r=e[1];return n.evaluate(t)||r.evaluate(t)}],[_e(m),function(t,e){for(var n=0,r=e;n<r.length;n+=1){if(r[n].evaluate(t))return!0}return!1}]]},"!":[m,[m],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[m,[_],function(t,e){var n=e[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(n.evaluate(t))}],upcase:[_,[_],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[_,[_],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[_,_e(w),function(e,t){return t.map(function(t){return V(t.evaluate(e))}).join("")}],"resolved-locale":[_,[x],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var Ne=function(t,e){var n;this.expression=t,this._warningHistory={},this._evaluator=new $,this._defaultValue=e?"color"===(n=e).type&&Ee(n.default)?new R(0,0,0,0):"color"===n.type?R.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function Me(t){return Array.isArray(t)&&0<t.length&&"string"==typeof t[0]&&t[0]in de}function De(t,e){var n,r,i=new xt(de,[],e?(r={color:v,string:_,number:g,enum:_,boolean:m,formatted:C,resolvedImage:P},"array"!==(n=e).type?r[n.type]:O(r[n.value]||w,n.length)):void 0),o=i.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return o?me(new Ne(o,e)):ve(i.errors)}Ne.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o,this.expression.evaluate(this._evaluator)},Ne.prototype.evaluate=function(t,e,n,r,i,o){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r,this._evaluator.availableImages=i||null,this._evaluator.formattedSection=o||null;try{var a=this.expression.evaluate(this._evaluator);if(null==a||"number"==typeof a&&a!=a)return this._defaultValue;if(this._enumValues&&!(a in this._enumValues))throw new q("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(a)+" instead.");return a}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0),this._defaultValue}};var Re=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!vt(e.expression)};Re.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},Re.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)};var je=function(t,e,n,r){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!vt(e.expression),this.interpolationType=r};function ke(t,e){if("error"===(t=De(t,e)).result)return t;var n=t.value.expression,r=mt(n);if(!r&&!be(e))return ve([new h("","data expressions not supported")]);var i=bt(n,["zoom"]);if(!i&&!we(e))return ve([new h("","zoom expressions not supported")]);var o=function n(t){var r=null;if(t instanceof Zt)r=n(t.result);else if(t instanceof Jt)for(var e=0,i=t.args;e<i.length;e+=1){var o=i[e];if(r=n(o))break}else(t instanceof Et||t instanceof Yt)&&t.input instanceof tt&&"zoom"===t.input.name&&(r=t);if(r instanceof h)return r;t.eachChild(function(t){var e=n(t);e instanceof h?r=e:!r&&e?r=new h("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&e&&r!==e&&(r=new h("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))});return r}(n);if(!o&&!i)return ve([new h("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof h)return ve([o]);if(o instanceof Yt&&!xe(e))return ve([new h("",'"interpolate" expressions cannot be used with this property')]);if(!o)return me(new Re(r?"constant":"source",t.value));var a=o instanceof Yt?o.interpolation:void 0;return me(new je(r?"camera":"composite",t.value,o.labels,a))}je.prototype.evaluateWithoutErrorHandling=function(t,e,n,r,i,o){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,r,i,o)},je.prototype.evaluate=function(t,e,n,r,i,o){return this._styleExpression.evaluate(t,e,n,r,i,o)},je.prototype.interpolationFactor=function(t,e,n){return this.interpolationType?Yt.interpolationFactor(this.interpolationType,t,e,n):0};function Fe(t,e){this._parameters=t,this._specification=e,E(this,Oe(this._parameters,this._specification))}function Be(t){return"object"===M()(t)?["literal",t]:t}function Ge(t,e){if(!(o=t.stops))return function(t,e){var n=["get",t.property];{if(void 0===t.default)return"string"===e.type?["string",n]:n;if("enum"===e.type)return["match",n,Object.keys(e.values),n,t.default];var r=["color"===e.type?"to-color":e.type,n,Be(t.default)];return"array"===e.type&&r.splice(1,0,e.value,e.length||null),r}}(t,e);var n=o&&"object"===M()(o[0][0]),r=n||void 0!==t.property,i=n||!r,o=o.map(function(t){return!r&&e.tokens&&"string"==typeof t[1]?[t[0],Ye(t[1])]:[t[0],Be(t[1])]});return(n?function(t,e,n){for(var r={},i={},o=[],a=0;a<n.length;a++){var s=n[a],l=s[0].zoom;void 0===r[l]&&(r[l]={zoom:l,type:t.type,property:t.property,default:t.default},i[l]=[],o.push(l)),i[l].push([s[0].value,s[1]])}{if("exponential"===We({},e)){for(var u=[ze(t),["linear"],["zoom"]],c=0,p=o;c<p.length;c+=1){var h=p[c],f=Ve(r[h],e,i[h]);qe(u,h,f,!1)}return u}for(var d=["step",["zoom"]],y=0,g=o;y<g.length;y+=1){var _=g[y],m=Ve(r[_],e,i[_]);qe(d,_,m,!0)}return He(d),d}}:i?function(t,e,n,r){void 0===r&&(r=["zoom"]);var i,o=We(t,e),a=!1;if("interval"===o)i=["step",r],a=!0;else{if("exponential"!==o)throw new Error('Unknown zoom function type "'+o+'"');var s=void 0!==t.base?t.base:1;i=[ze(t),1===s?["linear"]:["exponential",s],r]}for(var l=0,u=n;l<u.length;l+=1){var c=u[l];qe(i,c[0],c[1],a)}return He(i),i}:Ve)(t,e,o)}function ze(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function Ue(t,e){return void 0!==t?t:void 0!==e?e:void 0}function Ve(t,e,n){var r=We(t,e),i=["get",t.property];if("categorical"===r&&"boolean"==typeof n[0][0]){for(var o=["case"],a=0,s=n;a<s.length;a+=1){var l=s[a];o.push(["==",i,l[0]],l[1])}return o.push(Be(Ue(t.default,e.default))),o}if("categorical"===r){for(var u=["match",i],c=0,p=n;c<p.length;c+=1){var h=p[c];qe(u,h[0],h[1],!1)}return u.push(Be(Ue(t.default,e.default))),u}if("interval"===r){for(var f=["step",["number",i]],d=0,y=n;d<y.length;d+=1){var g=y[d];qe(f,g[0],g[1],!0)}return He(f),void 0===t.default?f:["case",["==",["typeof",i],"number"],f,Be(t.default)]}if("exponential"!==r)throw new Error("Unknown property function type "+r);for(var _=void 0!==t.base?t.base:1,m=[ze(t),1===_?["linear"]:["exponential",_],["number",i]],v=0,b=n;v<b.length;v+=1){var w=b[v];qe(m,w[0],w[1],!1)}return void 0===t.default?m:["case",["==",["typeof",i],"number"],m,Be(t.default)]}function He(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function qe(t,e,n,r){3<t.length&&e===t[t.length-2]||(r&&2===t.length||t.push(e),t.push(n))}function We(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function Ye(t){for(var e=["concat"],n=/{([^{}]+)}/g,r=0,i=n.exec(t);null!==i;i=n.exec(t)){var o=t.slice(r,n.lastIndex-i[0].length),r=n.lastIndex;0<o.length&&e.push(o),e.push(["get",i[1]])}if(1===e.length)return t;if(r<t.length)e.push(t.slice(r));else if(2===e.length)return["to-string",e[1]];return e}function Xe(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return 2<=t.length&&"$id"!==t[1]&&"$type"!==t[1];case"in":return 3<=t.length&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(var e=0,n=t.slice(1);e<n.length;e+=1){var r=n[e];if(!Xe(r)&&"boolean"!=typeof r)return!1}return!0;default:return!0}}Fe.deserialize=function(t){return new Fe(t._parameters,t._specification)};var Je={type:"boolean",default:!(Fe.serialize=function(t){return{_parameters:t._parameters,_specification:t._specification}}),transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ze(t){if(null==t)return{filter:function(){return!0},needGeometry:!1};Xe(t)||(t=$e(t));var r=De(t,Je);if("error"===r.result)throw new Error(r.value.map(function(t){return t.key+": "+t.message}).join(", "));return{filter:function(t,e,n){return r.value.evaluate(t,e,{},n)},needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var n=1;n<e.length;n++)if(t(e[n]))return!0;return!1}(t)}}function Ke(t,e){return t<e?-1:e<t?1:0}function $e(t){if(!t)return!0;var e,n=t[0];return t.length<=1?"any"!==n:"=="===n?Qe(t[1],t[2],"=="):"!="===n?nn(Qe(t[1],t[2],"==")):"<"===n||">"===n||"<="===n||">="===n?Qe(t[1],t[2],n):"any"===n?(e=t.slice(1),["any"].concat(e.map($e))):"all"===n?["all"].concat(t.slice(1).map($e)):"none"===n?["all"].concat(t.slice(1).map($e).map(nn)):"in"===n?tn(t[1],t.slice(2)):"!in"===n?nn(tn(t[1],t.slice(2))):"has"===n?en(t[1]):"!has"===n?nn(en(t[1])):"within"!==n||t}function Qe(t,e,n){switch(t){case"$type":return["filter-type-"+n,e];case"$id":return["filter-id-"+n,e];default:return["filter-"+n,t,e]}}function tn(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return 200<e.length&&!e.some(function(t){return M()(t)!==M()(e[0])})?["filter-in-large",t,["literal",e.sort(Ke)]]:["filter-in-small",t,["literal",e]]}}function en(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function nn(t){return["!",t]}var rn=function(t,e,n,r){this.message=(t?t+": ":"")+n,r&&(this.identifier=r),null!=e&&e.__line__&&(this.line=e.__line__)},on=function(t){this.error=t,this.message=t.message;var e=t.message.match(/line (\d+)/);this.line=e?parseInt(e[1],10):0};function an(t){var e=t.key,n=t.value;return n?[new rn(e,n,"constants have been deprecated as of v8")]:[]}function sn(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function ln(t){if(Array.isArray(t))return t.map(ln);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){var e={};for(var n in t)e[n]=ln(t[n]);return e}return sn(t)}function un(t){var e=t.key,n=t.value,r=t.valueSpec||{},i=t.objectElementValidators||{},o=t.style,a=t.styleSpec,s=[],l=Ce(n);if("object"!==l)return[new rn(e,n,"object expected, "+l+" found")];for(var u in n){var c=u.split(".")[0],p=r[c]||r["*"],h=void 0;if(i[c])h=i[c];else if(r[c])h=Pn;else if(i["*"])h=i["*"];else{if(!r["*"]){s.push(new rn(e,n[u],'unknown property "'+u+'"'));continue}h=Pn}s=s.concat(h({key:(e?e+".":e)+u,value:n[u],valueSpec:p,style:o,styleSpec:a,object:n,objectKey:u},n))}for(var f in r)i[f]||r[f].required&&void 0===r[f].default&&void 0===n[f]&&s.push(new rn(e,n,'missing required property "'+f+'"'));return s}function cn(t){var e=t.value,n=t.valueSpec,r=t.style,i=t.styleSpec,o=t.key,a=t.arrayElementValidator||Pn;if("array"!==Ce(e))return[new rn(o,e,"array expected, "+Ce(e)+" found")];if(n.length&&e.length!==n.length)return[new rn(o,e,"array length "+n.length+" expected, length "+e.length+" found")];if(n["min-length"]&&e.length<n["min-length"])return[new rn(o,e,"array length at least "+n["min-length"]+" expected, length "+e.length+" found")];var s={type:n.value,values:n.values};i.$version<7&&(s.function=n.function),"object"===Ce(n.value)&&(s=n.value);for(var l=[],u=0;u<e.length;u++)l=l.concat(a({array:e,arrayIndex:u,value:e[u],valueSpec:s,style:r,styleSpec:i,key:o+"["+u+"]"}));return l}function pn(t){var e=t.key,n=t.value,r=t.valueSpec,i=Ce(n);return"number"===i&&n!=n&&(i="NaN"),"number"!==i?[new rn(e,n,"number expected, "+i+" found")]:"minimum"in r&&n<r.minimum?[new rn(e,n,n+" is less than the minimum value "+r.minimum)]:"maximum"in r&&n>r.maximum?[new rn(e,n,n+" is greater than the maximum value "+r.maximum)]:[]}function hn(t){var a,s,i,l=t.valueSpec,u=sn(t.value.type),c={},e="categorical"!==u&&void 0===t.value.property,n=!e,o="array"===Ce(t.value.stops)&&"array"===Ce(t.value.stops[0])&&"object"===Ce(t.value.stops[0][0]),r=un({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===u)return[new rn(t.key,t.value,'identity function may not have a "stops" property')];var e=[],n=t.value;e=e.concat(cn({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:p})),"array"===Ce(n)&&0===n.length&&e.push(new rn(t.key,n,"array must have at least one stop"));return e},default:function(t){return Pn({key:t.key,value:t.value,valueSpec:l,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===u&&e&&r.push(new rn(t.key,t.value,'missing required property "property"')),"identity"===u||t.value.stops||r.push(new rn(t.key,t.value,'missing required property "stops"')),"exponential"===u&&t.valueSpec.expression&&!xe(t.valueSpec)&&r.push(new rn(t.key,t.value,"exponential functions not supported")),8<=t.styleSpec.$version&&(n&&!be(t.valueSpec)?r.push(new rn(t.key,t.value,"property functions not supported")):e&&!we(t.valueSpec)&&r.push(new rn(t.key,t.value,"zoom functions not supported"))),"categorical"!==u&&!o||void 0!==t.value.property||r.push(new rn(t.key,t.value,'"property" property is required')),r;function p(t){var e=[],n=t.value,r=t.key;if("array"!==Ce(n))return[new rn(r,n,"array expected, "+Ce(n)+" found")];if(2!==n.length)return[new rn(r,n,"array length 2 expected, length "+n.length+" found")];if(o){if("object"!==Ce(n[0]))return[new rn(r,n,"object expected, "+Ce(n[0])+" found")];if(void 0===n[0].zoom)return[new rn(r,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new rn(r,n,"object stop key must have value")];if(i&&i>sn(n[0].zoom))return[new rn(r,n[0].zoom,"stop zoom values must appear in ascending order")];sn(n[0].zoom)!==i&&(i=sn(n[0].zoom),s=void 0,c={}),e=e.concat(un({key:r+"[0]",value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:pn,value:h}}))}else e=e.concat(h({key:r+"[0]",value:n[0],valueSpec:{},style:t.style,styleSpec:t.styleSpec},n));return Me(ln(n[1]))?e.concat([new rn(r+"[1]",n[1],"expressions are not allowed in function stops.")]):e.concat(Pn({key:r+"[1]",value:n[1],valueSpec:l,style:t.style,styleSpec:t.styleSpec}))}function h(t,e){var n=Ce(t.value),r=sn(t.value),i=null!==t.value?t.value:e;if(a){if(n!==a)return[new rn(t.key,i,n+" stop domain type must match previous stop domain type "+a)]}else a=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new rn(t.key,i,"stop domain value must be a number, string, or boolean")];if("number"===n||"categorical"===u)return"categorical"!==u||"number"!==n||isFinite(r)&&Math.floor(r)===r?"categorical"!==u&&"number"===n&&void 0!==s&&r<s?[new rn(t.key,i,"stop domain values must appear in ascending order")]:(s=r,"categorical"===u&&r in c?[new rn(t.key,i,"stop domain values must be unique")]:(c[r]=!0,[])):[new rn(t.key,i,"integer expected, found "+r)];var o="number expected, "+n+" found";return be(l)&&void 0===u&&(o+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new rn(t.key,i,o)]}}function fn(e){var t=("property"===e.expressionContext?ke:De)(ln(e.value),e.valueSpec);if("error"===t.result)return t.value.map(function(t){return new rn(""+e.key+t.key,e.value,t.message)});var n=t.value.expression||t.value._styleExpression.expression;if("property"===e.expressionContext&&"text-font"===e.propertyKey&&!n.outputDefined())return[new rn(e.key,e.value,'Invalid data expression for "'+e.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===e.expressionContext&&"layout"===e.propertyType&&!vt(n))return[new rn(e.key,e.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===e.expressionContext&&!vt(n))return[new rn(e.key,e.value,'"feature-state" data expressions are not supported with filters.')];if(e.expressionContext&&0===e.expressionContext.indexOf("cluster")){if(!bt(n,["zoom","feature-state"]))return[new rn(e.key,e.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===e.expressionContext&&!mt(n))return[new rn(e.key,e.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function dn(t){var e=t.key,n=t.value,r=t.valueSpec,i=[];return Array.isArray(r.values)?-1===r.values.indexOf(sn(n))&&i.push(new rn(e,n,"expected one of ["+r.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(r.values).indexOf(sn(n))&&i.push(new rn(e,n,"expected one of ["+Object.keys(r.values).join(", ")+"], "+JSON.stringify(n)+" found")),i}function yn(t){return Xe(ln(t.value))?fn(E({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function t(e){var n=e.value;var r=e.key;if("array"!==Ce(n))return[new rn(r,n,"array expected, "+Ce(n)+" found")];var i=e.styleSpec;var o;var a=[];if(n.length<1)return[new rn(r,n,"filter array must have at least 1 element")];a=a.concat(dn({key:r+"[0]",value:n[0],valueSpec:i.filter_operator,style:e.style,styleSpec:e.styleSpec}));switch(sn(n[0])){case"<":case"<=":case">":case">=":2<=n.length&&"$type"===sn(n[1])&&a.push(new rn(r,n,'"$type" cannot be use with operator "'+n[0]+'"'));case"==":case"!=":3!==n.length&&a.push(new rn(r,n,'filter array for operator "'+n[0]+'" must have 3 elements'));case"in":case"!in":2<=n.length&&"string"!==(o=Ce(n[1]))&&a.push(new rn(r+"[1]",n[1],"string expected, "+o+" found"));for(var s=2;s<n.length;s++)o=Ce(n[s]),"$type"===sn(n[1])?a=a.concat(dn({key:r+"["+s+"]",value:n[s],valueSpec:i.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&a.push(new rn(r+"["+s+"]",n[s],"string, number, or boolean expected, "+o+" found"));break;case"any":case"all":case"none":for(var l=1;l<n.length;l++)a=a.concat(t({key:r+"["+l+"]",value:n[l],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":o=Ce(n[1]),2!==n.length?a.push(new rn(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"string"!==o&&a.push(new rn(r+"[1]",n[1],"string expected, "+o+" found"));break;case"within":o=Ce(n[1]),2!==n.length?a.push(new rn(r,n,'filter array for "'+n[0]+'" operator must have 2 elements')):"object"!==o&&a.push(new rn(r+"[1]",n[1],"object expected, "+o+" found"))}return a}(t)}function gn(t,e){var n=t.key,r=t.style,i=t.styleSpec,o=t.value,a=t.objectKey,s=i[e+"_"+t.layerType];if(!s)return[];var l=a.match(/^(.*)-transition$/);if("paint"===e&&l&&s[l[1]]&&s[l[1]].transition)return Pn({key:n,value:o,valueSpec:i.transition,style:r,styleSpec:i});var u,c=t.valueSpec||s[a];if(!c)return[new rn(n,o,'unknown property "'+a+'"')];if("string"===Ce(o)&&be(c)&&!c.tokens&&(u=/^{([^}]+)}$/.exec(o)))return[new rn(n,o,'"'+a+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(u[1])+" }`.")];var p=[];return"symbol"===t.layerType&&("text-field"===a&&r&&!r.glyphs&&p.push(new rn(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===a&&Ee(ln(o))&&"identity"===sn(o.type)&&p.push(new rn(n,o,'"text-font" does not support identity functions'))),p.concat(Pn({key:t.key,value:o,valueSpec:c,style:r,styleSpec:i,expressionContext:"property",propertyType:e,propertyKey:a}))}function _n(t){return gn(t,"paint")}function mn(t){return gn(t,"layout")}function vn(t){var e=[],n=t.value,r=t.key,i=t.style,o=t.styleSpec;n.type||n.ref||e.push(new rn(r,n,'either "type" or "ref" is required'));var a,s,l,u=sn(n.type),c=sn(n.ref);if(n.id)for(var p=sn(n.id),h=0;h<t.arrayIndex;h++){var f=i.layers[h];sn(f.id)===p&&e.push(new rn(r,n.id,'duplicate layer id "'+n.id+'", previously used at line '+f.id.__line__))}return"ref"in n?(["type","source","source-layer","filter","layout"].forEach(function(t){t in n&&e.push(new rn(r,n[t],'"'+t+'" is prohibited for ref layers'))}),i.layers.forEach(function(t){sn(t.id)===c&&(a=t)}),a?a.ref?e.push(new rn(r,n.ref,"ref cannot reference another ref layer")):u=sn(a.type):e.push(new rn(r,n.ref,'ref layer "'+c+'" not found'))):"background"!==u&&(n.source?(l=(s=i.sources&&i.sources[n.source])&&sn(s.type),s?"vector"===l&&"raster"===u?e.push(new rn(r,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===l&&"raster"!==u?e.push(new rn(r,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==l||n["source-layer"]?"raster-dem"===l&&"hillshade"!==u?e.push(new rn(r,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==u||!n.paint||!n.paint["line-gradient"]||"geojson"===l&&s.lineMetrics||e.push(new rn(r,n,'layer "'+n.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):e.push(new rn(r,n,'layer "'+n.id+'" must specify a "source-layer"')):e.push(new rn(r,n.source,'source "'+n.source+'" not found'))):e.push(new rn(r,n,'missing required property "source"'))),e=e.concat(un({key:r,value:n,valueSpec:o.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Pn({key:r+".type",value:n.type,valueSpec:o.layer.type,style:t.style,styleSpec:t.styleSpec,object:n,objectKey:"type"})},filter:yn,layout:function(t){return un({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return mn(E({layerType:u},t))}}})},paint:function(t){return un({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":function(t){return _n(E({layerType:u},t))}}})}}}))}function bn(t){var e=t.value,n=t.key,r=Ce(e);return"string"!==r?[new rn(n,e,"string expected, "+r+" found")]:[]}var wn={promoteId:function(t){var e=t.key,n=t.value;{if("string"===Ce(n))return bn({key:e,value:n});var r=[];for(var i in n)r.push.apply(r,bn({key:e+"."+i,value:n[i]}));return r}}};function xn(t){var e=t.value,n=t.key,r=t.styleSpec,i=t.style;if(!e.type)return[new rn(n,e,'"type" is required')];var o,a=sn(e.type);switch(a){case"vector":case"raster":case"raster-dem":return o=un({key:n,value:e,valueSpec:r["source_"+a.replace("-","_")],style:t.style,styleSpec:r,objectElementValidators:wn});case"geojson":if(o=un({key:n,value:e,valueSpec:r.source_geojson,style:i,styleSpec:r,objectElementValidators:wn}),e.cluster)for(var s in e.clusterProperties){var l=e.clusterProperties[s],u=l[0],c=l[1],p="string"==typeof u?[u,["accumulated"],["get",s]]:u;o.push.apply(o,fn({key:n+"."+s+".map",value:c,expressionContext:"cluster-map"})),o.push.apply(o,fn({key:n+"."+s+".reduce",value:p,expressionContext:"cluster-reduce"}))}return o;case"video":return un({key:n,value:e,valueSpec:r.source_video,style:i,styleSpec:r});case"image":return un({key:n,value:e,valueSpec:r.source_image,style:i,styleSpec:r});case"canvas":return[new rn(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return dn({key:n+".type",value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:i,styleSpec:r})}}function Cn(t){var e=t.value,n=t.styleSpec,r=n.light,i=t.style,o=[],a=Ce(e);if(void 0===e)return o;if("object"!==a)return o=o.concat([new rn("light",e,"object expected, "+a+" found")]);for(var s in e)var l=s.match(/^(.*)-transition$/),o=l&&r[l[1]]&&r[l[1]].transition?o.concat(Pn({key:s,value:e[s],valueSpec:n.transition,style:i,styleSpec:n})):r[s]?o.concat(Pn({key:s,value:e[s],valueSpec:r[s],style:i,styleSpec:n})):o.concat([new rn(s,e[s],'unknown property "'+s+'"')]);return o}var En={"*":function(){return[]},array:cn,boolean:function(t){var e=t.value,n=t.key,r=Ce(e);return"boolean"!==r?[new rn(n,e,"boolean expected, "+r+" found")]:[]},number:pn,color:function(t){var e=t.key,n=t.value,r=Ce(n);return"string"!==r?[new rn(e,n,"color expected, "+r+" found")]:null===N(n)?[new rn(e,n,'color expected, "'+n+'" found')]:[]},constants:an,enum:dn,filter:yn,function:hn,layer:vn,object:un,source:xn,light:Cn,string:bn,formatted:function(t){return 0===bn(t).length?[]:fn(t)},resolvedImage:function(t){return 0===bn(t).length?[]:fn(t)}};function Pn(t){var e=t.value,n=t.valueSpec,r=t.styleSpec;return n.expression&&Ee(sn(e))?hn(t):n.expression&&Me(ln(e))?fn(t):n.type&&En[n.type]?En[n.type](t):un(E({},t,{valueSpec:n.type?r[n.type]:n}))}function On(t){var e=t.value,n=t.key,r=bn(t);return r.length||(-1===e.indexOf("{fontstack}")&&r.push(new rn(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&r.push(new rn(n,e,'"glyphs" url must include a "{range}" token'))),r}function Tn(t,e){void 0===e&&(e=r);var n=(n=[]).concat(Pn({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,objectElementValidators:{glyphs:On,"*":function(){return[]}}}));return t.constants&&(n=n.concat(an({key:"constants",value:t.constants,style:t,styleSpec:e}))),Sn(n)}function Sn(t){return[].concat(t).sort(function(t,e){return t.line-e.line})}function In(n){return function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return Sn(n.apply(this,t))}}Tn.source=In(xn),Tn.light=In(Cn),Tn.layer=In(vn),Tn.filter=In(yn),Tn.paintProperty=In(_n),Tn.layoutProperty=In(mn);var An=i(function(t,e){var n,r,i,o,a,s,l,u,c,p,h,f,d=(c=[18,22],p=[22,24],h={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(t,e,n,r,i,o){var a=o.length-1;switch(i){case 1:this.$=new String(t.replace(/\\(\\|")/g,"$1").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b")),this.$.__line__=this._$.first_line;break;case 2:this.$=new Number(t),this.$.__line__=this._$.first_line;break;case 3:this.$=null;break;case 4:this.$=new Boolean(!0),this.$.__line__=this._$.first_line;break;case 5:this.$=new Boolean(!1),this.$.__line__=this._$.first_line;break;case 6:return this.$=o[a-1];case 13:this.$={},Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 14:case 19:this.$=o[a-1],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 15:this.$=[o[a-2],o[a]];break;case 16:this.$={},this.$[o[a][0]]=o[a][1];break;case 17:this.$=o[a-2],o[a-2][o[a][0]]=o[a][1];break;case 18:this.$=[],Object.defineProperty(this.$,"__line__",{value:this._$.first_line,enumerable:!1});break;case 20:this.$=[o[a]];break;case 21:this.$=o[a-2],o[a-2].push(o[a])}},table:[{3:5,4:n=[1,12],5:6,6:r=[1,13],7:3,8:i=[1,9],9:4,10:o=[1,10],11:a=[1,11],12:1,13:2,15:7,16:8,17:s=[1,14],23:l=[1,15]},{1:[3]},{14:[1,16]},y(u=[14,18,22,24],[2,7]),y(u,[2,8]),y(u,[2,9]),y(u,[2,10]),y(u,[2,11]),y(u,[2,12]),y(u,[2,3]),y(u,[2,4]),y(u,[2,5]),y([14,18,21,22,24],[2,1]),y(u,[2,2]),{3:20,4:n,18:[1,17],19:18,20:19},{3:5,4:n,5:6,6:r,7:3,8:i,9:4,10:o,11:a,13:23,15:7,16:8,17:s,23:l,24:[1,21],25:22},{1:[2,6]},y(u,[2,13]),{18:[1,24],22:[1,25]},y(c,[2,16]),{21:[1,26]},y(u,[2,18]),{22:[1,28],24:[1,27]},y(p,[2,20]),y(u,[2,14]),{3:20,4:n,20:29},{3:5,4:n,5:6,6:r,7:3,8:i,9:4,10:o,11:a,13:30,15:7,16:8,17:s,23:l},y(u,[2,19]),{3:5,4:n,5:6,6:r,7:3,8:i,9:4,10:o,11:a,13:31,15:7,16:8,17:s,23:l},y(c,[2,17]),y(c,[2,15]),y(p,[2,21])],defaultActions:{16:[2,6]},parseError:function(t,e){if(!e.recoverable)throw new Error(t);this.trace(t)},parse:function(t){var e=this,n=[0],r=[null],i=[],o=this.table,a="",s=0,l=0,u=1,c=i.slice.call(arguments,1),p=Object.create(this.lexer),h={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(h.yy[f]=this.yy[f]);p.setInput(t,h.yy),h.yy.lexer=p,h.yy.parser=this,void 0===p.yylloc&&(p.yylloc={});var d=p.yylloc;i.push(d);var y=p.options&&p.options.ranges;"function"==typeof h.yy.parseError?this.parseError=h.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var g,_,m,v,b,w,x,C,E={};;){if(_=n[n.length-1],void 0===(m=this.defaultActions[_]?this.defaultActions[_]:(null==g&&(C=void 0,"number"!=typeof(C=p.lex()||u)&&(C=e.symbols_[C]||C),g=C),o[_]&&o[_][g]))||!m.length||!m[0]){var P="",O=[];for(b in o[_])this.terminals_[b]&&2<b&&O.push("'"+this.terminals_[b]+"'");P=p.showPosition?"Parse error on line "+(s+1)+":\n"+p.showPosition()+"\nExpecting "+O.join(", ")+", got '"+(this.terminals_[g]||g)+"'":"Parse error on line "+(s+1)+": Unexpected "+(g==u?"end of input":"'"+(this.terminals_[g]||g)+"'"),this.parseError(P,{text:p.match,token:this.terminals_[g]||g,line:p.yylineno,loc:d,expected:O})}if(m[0]instanceof Array&&1<m.length)throw new Error("Parse Error: multiple actions possible at state: "+_+", token: "+g);switch(m[0]){case 1:n.push(g),r.push(p.yytext),i.push(p.yylloc),n.push(m[1]),g=null,l=p.yyleng,a=p.yytext,s=p.yylineno,d=p.yylloc;break;case 2:if(w=this.productions_[m[1]][1],E.$=r[r.length-w],E._$={first_line:i[i.length-(w||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(w||1)].first_column,last_column:i[i.length-1].last_column},y&&(E._$.range=[i[i.length-(w||1)].range[0],i[i.length-1].range[1]]),void 0!==(v=this.performAction.apply(E,[a,l,s,h.yy,m[1],r,i].concat(c))))return v;w&&(n=n.slice(0,-1*w*2),r=r.slice(0,-1*w),i=i.slice(0,-1*w)),n.push(this.productions_[m[1]][0]),r.push(E.$),i.push(E._$),x=o[n[n.length-2]][n[n.length-1]],n.push(x);break;case 3:return!0}}return!0}},f={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t,e){return this.yy=e||this.yy||{},this._input=t,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];return this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t,t.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,n=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e),this.offset-=e;var r=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),n.length-1&&(this.yylineno-=n.length-1);var i=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:n?(n.length===r.length?this.yylloc.first_column:0)+r[r.length-n.length].length-n[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[i[0],i[0]+this.yyleng-e]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(20<t.length?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(20<t.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},test_match:function(t,e){var n,r,i;if(this.options.backtrack_lexer&&(i={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(i.yylloc.range=this.yylloc.range.slice(0))),(r=t[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=r.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:r?r[r.length-1].length-r[r.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],n=this.performAction.call(this,this.yy,this,e,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),n)return n;if(this._backtrack){for(var o in i)this[o]=i[o];return!1}return!1},next:function(){if(this.done)return this.EOF;var t,e,n,r;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),o=0;o<i.length;o++)if((n=this._input.match(this.rules[i[o]]))&&(!e||n[0].length>e[0].length)){if(e=n,r=o,this.options.backtrack_lexer){if(!1!==(t=this.test_match(n,i[o])))return t;if(this._backtrack){e=!1;continue}return!1}if(!this.options.flex)break}return e?!1!==(t=this.test_match(e,i[r]))&&t:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return t||this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(t){return 0<=(t=this.conditionStack.length-1-Math.abs(t||0))?this.conditionStack[t]:"INITIAL"},pushState:function(t){this.begin(t)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(t,e,n){switch(n){case 0:break;case 1:return 6;case 2:return e.yytext=e.yytext.substr(1,e.yyleng-2),4;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},rules:[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}}},h.lexer=f,new((g.prototype=h).Parser=g));function y(t,e,n,r){for(n=n||{},r=t.length;r--;n[t[r]]=e);return n}function g(){this.yy={}}e.parser=d,e.Parser=d.Parser,e.parse=function(){return d.parse.apply(d,arguments)}});An.parser,An.Parser,An.parse;function Ln(t){if(t instanceof String||"string"==typeof t||t instanceof e)try{return An.parse(t.toString())}catch(t){throw new on(t)}return t}function Nn(t,e){void 0===e&&(e=r);var n=t;try{n=Ln(n)}catch(t){return[t]}return Tn(n,e)}var Mn={StyleExpression:Ne,isExpression:Me,isExpressionFilter:Xe,createExpression:De,createPropertyExpression:ke,normalizePropertyExpression:function(t,e){if(Ee(t))return new Fe(t,e);if(Me(t)){var n=ke(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));return n.value}var r=t;return"string"==typeof t&&"color"===e.type&&(r=R.parse(t)),{kind:"constant",evaluate:function(){return r}}},ZoomConstantExpression:Re,ZoomDependentExpression:je,StylePropertyFunction:Fe},Dn={convertFunction:Ge,createFunction:Oe,isFunction:Ee};(Nn.parsed=Nn).latest=Nn}).call(this,jn(44),jn(55).Buffer)},,function(e,t){(function(t){e.exports=t}).call(this,{toUrlUndefined:!0})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var w=n(311),v={version:"1.0.0",createTime:"2018.6.19",author:"xupinhui"},_="doublearrow",m=.25,b=.3,x=.85,C=.15,E={headHeightFactor:.18,headWidthFactor:.3,neckHeightFactor:.85,neckWidthFactor:.15,tailWidthFactor:.1,headTailFactor:.8,swallowTailFactor:1},P={tailWidthFactor:.15,neckWidthFactor:.2,headWidthFactor:.25,headAngle:Math.PI/8.5,neckAngle:Math.PI/13};v.algorithm={},v.algorithm.doubleArrow=function(t){this.connPoint=null;var e={controlPoint:this.tempPoint4=null,polygonalPoint:null};if(!((s=(this.points=t).length)<2)){if(2==s)return t;var n,r,i=this.points[0],o=this.points[1],a=this.points[2],s=t.length;this.tempPoint4=3==s?v.algorithm.getTempPoint4(i,o,a):this.points[3],this.connPoint=3==s||4==s?w.default.PlotUtils.mid(i,o):this.points[4],r=w.default.PlotUtils.isClockWise(i,o,a)?(n=v.algorithm.getArrowPoints(i,this.connPoint,this.tempPoint4,!1),v.algorithm.getArrowPoints(this.connPoint,o,a,!0)):(n=v.algorithm.getArrowPoints(o,this.connPoint,a,!1),v.algorithm.getArrowPoints(this.connPoint,i,this.tempPoint4,!0));var l=n.length,u=(l-5)/2,c=n.slice(0,u),p=n.slice(u,5+u),h=n.slice(5+u,l),f=r.slice(0,u),d=r.slice(u,5+u),y=r.slice(5+u,l),f=w.default.PlotUtils.getBezierPoints(f),g=w.default.PlotUtils.getBezierPoints(y.concat(c.slice(1))),h=w.default.PlotUtils.getBezierPoints(h),_=f.concat(d,g,p,h),m=v.algorithm.array2Dto1D(_);e.controlPoint=[i,o,a,this.tempPoint4,this.connPoint],e.polygonalPoint=Cesium.Cartesian3.fromDegreesArray(m)}return e},v.algorithm.getTempPoint4=function(t,e,n,r){this.type=_,this.headHeightFactor=m,this.headWidthFactor=b,this.neckHeightFactor=x,this.neckWidthFactor=C;var i=w.default.PlotUtils.mid(t,e),o=w.default.PlotUtils.distance(i,n),a=w.default.PlotUtils.getThirdPoint(n,i,0,.3*o,!0),s=w.default.PlotUtils.getThirdPoint(n,i,0,.5*o,!0),l=[i,a=w.default.PlotUtils.getThirdPoint(i,a,w.default.Constants.HALF_PI,o/5,r),s=w.default.PlotUtils.getThirdPoint(i,s,w.default.Constants.HALF_PI,o/4,r),n],u=v.algorithm.getArrowHeadPoints(l,this.headHeightFactor,this.headWidthFactor,this.neckHeightFactor,this.neckWidthFactor),c=u[0],p=u[4],h=w.default.PlotUtils.distance(t,e)/w.default.PlotUtils.getBaseLength(l)/2,f=v.algorithm.getArrowBodyPoints(l,c,p,h),d=f.length,y=f.slice(0,d/2),g=f.slice(d/2,d);return y.push(c),g.push(p),(y=y.reverse()).push(e),(g=g.reverse()).push(t),y.reverse().concat(u,g)},v.algorithm.array2Dto1D=function(t){var e=[];return t.forEach(function(t){e.push(t[0]),e.push(t[1])}),e},v.algorithm.getArrowPoints=function(t,e,n,r){this.type=_,this.headHeightFactor=m,this.headWidthFactor=b,this.neckHeightFactor=x,this.neckWidthFactor=C;var i=w.default.PlotUtils.mid(t,e),o=w.default.PlotUtils.distance(i,n),a=w.default.PlotUtils.getThirdPoint(n,i,0,.3*o,!0),s=w.default.PlotUtils.getThirdPoint(n,i,0,.5*o,!0),l=[i,a=w.default.PlotUtils.getThirdPoint(i,a,w.default.Constants.HALF_PI,o/5,r),s=w.default.PlotUtils.getThirdPoint(i,s,w.default.Constants.HALF_PI,o/4,r),n],u=v.algorithm.getArrowHeadPoints(l,this.headHeightFactor,this.headWidthFactor,this.neckHeightFactor,this.neckWidthFactor),c=u[0],p=u[4],h=w.default.PlotUtils.distance(t,e)/w.default.PlotUtils.getBaseLength(l)/2,f=v.algorithm.getArrowBodyPoints(l,c,p,h),d=f.length,y=f.slice(0,d/2),g=f.slice(d/2,d);return y.push(c),g.push(p),(y=y.reverse()).push(e),(g=g.reverse()).push(t),y.reverse().concat(u,g)},v.algorithm.getArrowHeadPoints=function(t,e,n){this.type=_,this.headHeightFactor=m,this.headWidthFactor=b,this.neckHeightFactor=x,this.neckWidthFactor=C;var r=w.default.PlotUtils.getBaseLength(t)*this.headHeightFactor,i=t[t.length-1],o=(w.default.PlotUtils.distance(e,n),r*this.headWidthFactor),a=r*this.neckWidthFactor,s=r*this.neckHeightFactor,l=w.default.PlotUtils.getThirdPoint(t[t.length-2],i,0,r,!0),u=w.default.PlotUtils.getThirdPoint(t[t.length-2],i,0,s,!0),c=w.default.PlotUtils.getThirdPoint(i,l,w.default.Constants.HALF_PI,o,!1),p=w.default.PlotUtils.getThirdPoint(i,l,w.default.Constants.HALF_PI,o,!0);return[w.default.PlotUtils.getThirdPoint(i,u,w.default.Constants.HALF_PI,a,!1),c,i,p,w.default.PlotUtils.getThirdPoint(i,u,w.default.Constants.HALF_PI,a,!0)]},v.algorithm.getArrowBodyPoints=function(t,e,n,r){for(var i=w.default.PlotUtils.wholeDistance(t),o=w.default.PlotUtils.getBaseLength(t)*r,a=(o-w.default.PlotUtils.distance(e,n))/2,s=0,l=[],u=[],c=1;c<t.length-1;c++){var p=w.default.PlotUtils.getAngleOfThreePoints(t[c-1],t[c],t[c+1])/2,h=(o/2-(s+=w.default.PlotUtils.distance(t[c-1],t[c]))/i*a)/Math.sin(p),f=w.default.PlotUtils.getThirdPoint(t[c-1],t[c],Math.PI-p,h,!0),d=w.default.PlotUtils.getThirdPoint(t[c-1],t[c],p,h,!1);l.push(f),u.push(d)}return l.concat(u)},v.algorithm.getTempPoint4=function(t,e,n){var r,i,o,a=w.default.PlotUtils.mid(t,e),s=w.default.PlotUtils.distance(a,n),l=w.default.PlotUtils.getAngleOfThreePoints(t,a,n),u=l<w.default.Constants.HALF_PI?(r=s*Math.sin(l),i=s*Math.cos(l),o=w.default.PlotUtils.getThirdPoint(t,a,w.default.Constants.HALF_PI,r,!1),w.default.PlotUtils.getThirdPoint(a,o,w.default.Constants.HALF_PI,i,!0)):l>=w.default.Constants.HALF_PI&&l<Math.PI?(r=s*Math.sin(Math.PI-l),i=s*Math.cos(Math.PI-l),o=w.default.PlotUtils.getThirdPoint(t,a,w.default.Constants.HALF_PI,r,!1),w.default.PlotUtils.getThirdPoint(a,o,w.default.Constants.HALF_PI,i,!1)):l>=Math.PI&&l<1.5*Math.PI?(r=s*Math.sin(l-Math.PI),i=s*Math.cos(l-Math.PI),o=w.default.PlotUtils.getThirdPoint(t,a,w.default.Constants.HALF_PI,r,!0),w.default.PlotUtils.getThirdPoint(a,o,w.default.Constants.HALF_PI,i,!0)):(r=s*Math.sin(2*Math.PI-l),i=s*Math.cos(2*Math.PI-l),o=w.default.PlotUtils.getThirdPoint(t,a,w.default.Constants.HALF_PI,r,!0),w.default.PlotUtils.getThirdPoint(a,o,w.default.Constants.HALF_PI,i,!1));return u},v.algorithm.tailedAttackArrow=function(t){t=v.algorithm.dereplication(t),this.tailWidthFactor=E.tailWidthFactor,this.swallowTailFactor=E.swallowTailFactor,this.swallowTailPnt=E.swallowTailPnt;var e={controlPoint:null,polygonalPoint:null};if(!((d=(e.controlPoint=t).length)<2)){if(2==t.length)return e.polygonalPoint=t,e;var n=t,r=n[0],i=n[1];w.default.PlotUtils.isClockWise(n[0],n[1],n[2])&&(r=n[1],i=n[0]);var o=[w.default.PlotUtils.mid(r,i)].concat(n.slice(2)),a=v.algorithm.getAttackArrowHeadPoints(o,r,i,E),s=a[0],l=a[4],u=w.default.PlotUtils.distance(r,i),c=w.default.PlotUtils.getBaseLength(o),p=c*this.tailWidthFactor*this.swallowTailFactor;this.swallowTailPnt=w.default.PlotUtils.getThirdPoint(o[1],o[0],0,p,!0);var h=u/c,f=v.algorithm.getAttackArrowBodyPoints(o,s,l,h),d=f.length,y=[r].concat(f.slice(0,d/2));y.push(s);var g,_=[i].concat(f.slice(d/2,d));_.push(l),y=w.default.PlotUtils.getQBSplinePoints(y),_=w.default.PlotUtils.getQBSplinePoints(_),g=v.algorithm.array2Dto1D(y.concat(a,_.reverse(),[this.swallowTailPnt,y[0]])),e.polygonalPoint=Cesium.Cartesian3.fromDegreesArray(g)}return e},v.algorithm.getAttackArrowHeadPoints=function(t,e,n,r){this.headHeightFactor=r.headHeightFactor,this.headTailFactor=r.headTailFactor,this.headWidthFactor=r.headWidthFactor,this.neckWidthFactor=r.neckWidthFactor,this.neckHeightFactor=r.neckHeightFactor;var i=(a=w.default.PlotUtils.getBaseLength(t))*this.headHeightFactor,o=t[t.length-1],a=w.default.PlotUtils.distance(o,t[t.length-2]),s=w.default.PlotUtils.distance(e,n);i>s*this.headTailFactor&&(i=s*this.headTailFactor);var l=i*this.headWidthFactor,u=i*this.neckWidthFactor,c=(i=a<i?a:i)*this.neckHeightFactor,p=w.default.PlotUtils.getThirdPoint(t[t.length-2],o,0,i,!0),h=w.default.PlotUtils.getThirdPoint(t[t.length-2],o,0,c,!0),f=w.default.PlotUtils.getThirdPoint(o,p,w.default.Constants.HALF_PI,l,!1),d=w.default.PlotUtils.getThirdPoint(o,p,w.default.Constants.HALF_PI,l,!0);return[w.default.PlotUtils.getThirdPoint(o,h,w.default.Constants.HALF_PI,u,!1),f,o,d,w.default.PlotUtils.getThirdPoint(o,h,w.default.Constants.HALF_PI,u,!0)]},v.algorithm.getAttackArrowBodyPoints=function(t,e,n,r){for(var i=w.default.PlotUtils.wholeDistance(t),o=w.default.PlotUtils.getBaseLength(t)*r,a=(o-w.default.PlotUtils.distance(e,n))/2,s=0,l=[],u=[],c=1;c<t.length-1;c++){var p=w.default.PlotUtils.getAngleOfThreePoints(t[c-1],t[c],t[c+1])/2,h=(o/2-(s+=w.default.PlotUtils.distance(t[c-1],t[c]))/i*a)/Math.sin(p),f=w.default.PlotUtils.getThirdPoint(t[c-1],t[c],Math.PI-p,h,!0),d=w.default.PlotUtils.getThirdPoint(t[c-1],t[c],p,h,!1);l.push(f),u.push(d)}return l.concat(u)},v.algorithm.dereplication=function(t){var e=t[t.length-1],n=!1,r=[],r=t.filter(function(t){return t[0]!=e[0]&&t[1]!=e[1]?t:void(n=!0)});return n&&r.push(e),r},v.algorithm.fineArrow=function(t,e){if(!(t.length<2||e.length<2)){var n=P.tailWidthFactor,r=P.neckWidthFactor,i=P.headWidthFactor,o=P.headAngle,a=P.neckAngle,s=[];s[0]=t,s[1]=e;var l=s[0],u=s[1],c=w.default.PlotUtils.getBaseLength(s),p=c*n,h=c*r,f=c*i,d=w.default.PlotUtils.getThirdPoint(u,l,w.default.Constants.HALF_PI,p,!0),y=w.default.PlotUtils.getThirdPoint(u,l,w.default.Constants.HALF_PI,p,!1),g=w.default.PlotUtils.getThirdPoint(l,u,o,f,!1),_=w.default.PlotUtils.getThirdPoint(l,u,o,f,!0),m=w.default.PlotUtils.getThirdPoint(l,u,a,h,!1),v=w.default.PlotUtils.getThirdPoint(l,u,a,h,!0),b=[];return b.push(d[0],d[1],m[0],m[1],g[0],g[1],u[0],u[1],_[0],_[1],v[0],v[1],y[0],y[1],l[0],l[1]),Cesium.Cartesian3.fromDegreesArray(b)}},e.default=v},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).UP="up",i.DOWN="down",i.LEFT="left",i.RIGHT="right",i.UP_LEFT="up_left",i.UP_RIGHT="up_right",i.DOWN_LEFT="down_left",i.DOWN_RIGHT="down_right",e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(i.prototype.destory=function(){this._eventHandler&&!this._eventHandler.isDestroyed()&&(this._eventHandler=this._eventHandler&&this._eventHandler.destroy())},i);function i(){}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(t){var e=void 0===t?{}:t,n=e.id,r=(void 0===n&&a.default(),e.position),i=void 0===r?null:r;return e.radius,{id:a.default(),position:o.Cartesian3.fromDegrees(i[0],i[1],i[2]),scale:1.2,image:CESIUM_BASE_URL+"Assets/Images/vertex/dragIcon.png"}}var o=n(8),a=n(105);e.default=r},,,,,,,,,,,function(t,e,n){(((e=t.exports=n(164)).Stream=e).Readable=e).Writable=n(127),e.Duplex=n(67),e.Transform=n(168),e.PassThrough=n(265)},function(t,r,i){(function(t){var e=i(9);function n(t){return Object.prototype.toString.call(t)}r.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},r.isBoolean=function(t){return"boolean"==typeof t},r.isNull=function(t){return null===t},r.isNullOrUndefined=function(t){return null==t},r.isNumber=function(t){return"number"==typeof t},r.isString=function(t){return"string"==typeof t},r.isSymbol=function(t){return"symbol"===e(t)},r.isUndefined=function(t){return void 0===t},r.isRegExp=function(t){return"[object RegExp]"===n(t)},r.isObject=function(t){return"object"===e(t)&&null!==t},r.isDate=function(t){return"[object Date]"===n(t)},r.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},r.isFunction=function(t){return"function"==typeof t},r.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===e(t)||void 0===t},r.isBuffer=t.isBuffer}).call(this,i(55).Buffer)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});function o(t){var e=t.textFill,n=t.textOutline;return e&&n?u.LabelStyle.FILL_AND_OUTLINE:!e&&n?u.LabelStyle.OUTLINE:u.LabelStyle.FILL}var a,s=n(19),l=n(11),u=n(8),c=n(92),p=n(93),h=n(16),f=n(26),d=n(12),y=n(20),g=n(94),_={type:{type:"string",value:l.default.BILLBOARD,readonly:!0},class:{type:"string",value:h.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:f.arrayToCartesianPosition},image:{type:"string",value:null,required:!0,target:"billboard.image"},pixelOffset:{type:"array",value:[0,0],convert:f.arrayToCartesian2,target:"billboard.pixelOffset"},horizontalOrigin:{type:"string",value:u.HorizontalOrigin.CENTER,convert:c.default,target:"billboard.horizontalOrigin"},verticalOrigin:{type:"string",value:u.VerticalOrigin.CENTER,convert:p.default,target:"billboard.verticalOrigin"},scale:{type:"number",value:1,target:"billboard.scale"},color:{type:"string",value:"rgb(255,255,255)",convert:f.stringToColor,target:"billboard.color"},rotation:{type:"number",value:0,convert:u.Math.toRadians,target:"billboard.rotation"},width:{type:"number",value:32,target:"billboard.width"},height:{type:"number",value:32,target:"billboard.height"},text:{type:"string",value:null,target:"label.text"},textFont:{type:"string",value:"12px Microsoft YaHei",target:"label.font"},textFill:{type:"boolean",value:!0,convert:o,convertParams:["textFill","textOutline"],target:"label.style"},textOutline:{type:"boolean",value:!0,convert:o,convertParams:["textFill","textOutline"],target:"label.style"},textFillColor:{type:"string",value:"rgb(255,255,255)",convert:f.stringToColor,target:"label.fillColor"},textOutlineColor:{type:"string",value:"rgb(0,0,0)",convert:f.stringToColor,target:"label.outlineColor"},textOutlineWidth:{type:"number",value:3,target:"label.outlineWidth"},textPixelOffset:{type:"array",value:[0,0],convert:f.arrayToCartesian2,target:"label.pixelOffset"},textHorizontalOrigin:{type:"string",value:u.HorizontalOrigin.CENTER,convert:c.default,target:"label.horizontalOrigin"},textVerticalOrigin:{type:"string",value:u.VerticalOrigin.CENTER,convert:p.default,target:"label.verticalOrigin"},heightReference:{type:"string",value:u.HeightReference.NONE,convert:g.default,target:"billboard.heightReference"},disableDepthTestDistance:{type:"number",value:Number.POSITIVE_INFINITY,target:"billboard.disableDepthTestDistance"},show:{type:"boolean",value:!0},opacity:{type:"number",value:1,convert:function(t){var e=t.color,n=t.textFillColor,r=t.textOutlineColor,i=t.opacity;switch(t.target){case"billboard.color":return f.stringToColor(e).withAlpha(i);case"label.fillColor":return f.stringToColor(n).withAlpha(i);case"label.outlineColor":return f.stringToColor(r).withAlpha(i)}},convertParams:["color","textFillColor","textOutlineColor","opacity"],target:["billboard.color","label.fillColor","label.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:f.arrayToDistanceDisplayCondition,target:["billboard.distanceDisplayCondition","label.distanceDisplayCondition"]},properties:{type:"object",value:{}}},m=(a=s.default,i(v,a),Object.defineProperty(v.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),v);function v(t){var e=a.call(this)||this;try{if(a.prototype.fromJSON.call(e,t),e._onClick=new u.Event,e._onHover=new u.Event,!d.isObject(t))throw"error: Billboard. The options is not a Object.";if(!t.position)throw"error: Billboard. The position of options is not defined.";y.definedProperties(e,_,t);var n=y.getPerOptions(e,_,t);e.value=new u.Entity(n)}catch(t){}return e}m.defaultProps=_,e.default=m},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(62);e.default=function(t){var e=r.HorizontalOrigin.CENTER;switch(t){case i.default.CENTER:e=r.HorizontalOrigin.CENTER;break;case i.default.LEFT:e=r.HorizontalOrigin.LEFT;break;case i.default.RIGHT:e=r.HorizontalOrigin.RIGHT}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(51);e.default=function(t){var e=r.VerticalOrigin.CENTER;switch(t){case i.default.CENTER:e=r.VerticalOrigin.CENTER;break;case i.default.TOP:e=r.VerticalOrigin.TOP;break;case i.default.BOTTOM:e=r.VerticalOrigin.BOTTOM}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(176);e.default=function(t){var e=r.HeightReference.NONE;switch(t){case i.default.NONE:e=r.HeightReference.NONE;break;case i.default.CLAMP_TO_GROUND:e=r.HeightReference.CLAMP_TO_GROUND;break;case i.default.RELATIVE_TO_GROUND:e=r.HeightReference.RELATIVE_TO_GROUND}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(78),o=n(11),a=(Object.defineProperty(s.prototype,"length",{get:function(){return this.value.length},enumerable:!1,configurable:!0}),s.prototype.add=function(t){var e=this.value.add(t);Object.defineProperty(e,"type",{value:o.default.VERTEX,writable:!1}),Object.defineProperty(e,"index",{value:this.length-1,writable:!1})},s.prototype.removeById=function(t){for(var e,n=this.value.length,r=0;r<n;r++)this.value.get(r).id===t&&(e=this.value.get(r));e&&this.value.remove(e)},s.prototype.removeByIndex=function(t){var e=this.value.get(t);this.value.remove(e)},s.prototype.removeAll=function(){this.value.removeAll()},s.prototype.fromDegrees=function(t){var e=this;t.forEach(function(t){e.add(new i.default({position:t}))})},s);function s(){this.value=new r.BillboardCollection}e.default=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(28),s=n(8),l=n(77),u=n(22),c=(o=l.default,i(p,o),p.prototype.destory=function(){o.prototype.destory.call(this),this._drag=!1,this._drawMode=a.default.NONE,this._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!0},p.prototype._initMouseHandlers=function(){this._eventHandler=new s.ScreenSpaceEventHandler(this._earth.getViewer().scene.canvas),this._onLeftClick(this._eventHandler),this._onLeftDown(this._eventHandler),this._onMouseMove(this._eventHandler),this._onLeftUp(this._eventHandler)},p.prototype._onLeftClick=function(t){var i=this,o=this;t.setInputAction(function(t){var e,n,r=i._earth.pickGloble(t.position);r&&(e=u.default.cartesianToDegrees(r),o._drawMode===a.default.ADD?(n=o._addEvent(e),o._selectedEntity=n,o._drawMode=a.default.EDIT):(o._drawMode,a.default.EDIT))},s.ScreenSpaceEventType.LEFT_CLICK)},p.prototype._onMouseMove=function(t){var r=this,i=this;t.setInputAction(function(t){if(i._selectedEntity&&i._drawMode===a.default.EDIT&&i._drag){var e=r._earth.pickGloble(t.endPosition,[i._selectedEntity.value]);if(!e)return;var n=u.default.cartesianToDegrees(e);i._selectedEntity.position=n}},s.ScreenSpaceEventType.MOUSE_MOVE)},p.prototype._onLeftDown=function(t){var r=this,i=this;t.setInputAction(function(t){var e=r._earth.pickGloble(t.position),n=r._earth.sceneTree.getNodeByScreenPosition(t.position);e&&n&&(i._drawMode===a.default.EDIT&&i._selectedEntity===n.value?(i._drag=!0,i._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!1):(i._drag=!1,i._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!0))},s.ScreenSpaceEventType.LEFT_DOWN)},p.prototype._onLeftUp=function(t){var e=this,n=this;t.setInputAction(function(t){e._earth.pickGloble(t.position)&&n._drawMode===a.default.EDIT&&n._drag&&(e._drag=!1,n._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!0)},s.ScreenSpaceEventType.LEFT_UP)},Object.defineProperty(p.prototype,"drawMode",{get:function(){return this._drawMode},set:function(t){this._drawMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"selectedEntity",{get:function(){return this._selectedEntity},set:function(t){this._selectedEntity=t},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"drag",{get:function(){return this._drag},set:function(t){this._drag=t},enumerable:!1,configurable:!0}),p);function p(t,e){var n=o.call(this)||this;return n._drawMode=a.default.NONE,n._drag=!1,n._earth=t,n._addEvent=e,n._initMouseHandlers(),n}e.default=c},,,,,function(t,e,n){"use strict";(function(s){void 0===s||!s.version||0===s.version.indexOf("v0.")||0===s.version.indexOf("v1.")&&0!==s.version.indexOf("v1.8.")?t.exports={nextTick:function(t,e,n,r){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var i,o,a=arguments.length;switch(a){case 0:case 1:return s.nextTick(t);case 2:return s.nextTick(function(){t.call(null,e)});case 3:return s.nextTick(function(){t.call(null,e,n)});case 4:return s.nextTick(function(){t.call(null,e,n,r)});default:for(i=new Array(a-1),o=0;o<i.length;)i[o++]=arguments[o];return s.nextTick(function(){t.apply(null,i)})}}}:t.exports=s}).call(this,n(60))},function(t,e,n){var r=n(55),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";var a=n(9),r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;e.assign=function(t){for(var e,n,r=Array.prototype.slice.call(arguments,1);r.length;){var i=r.shift();if(i){if("object"!==a(i))throw new TypeError(i+"must be non-object");for(var o in i)e=i,n=o,Object.prototype.hasOwnProperty.call(e,n)&&(t[o]=i[o])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var i={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){for(var e,n,r,i=0,o=0,a=t.length;o<a;o++)i+=t[o].length;for(r=new Uint8Array(i),o=e=0,a=t.length;o<a;o++)n=t[o],r.set(n,e),e+=n.length;return r}},o={arraySet:function(t,e,n,r,i){for(var o=0;o<r;o++)t[i+o]=e[n+o]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,i)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,o))},e.setTyped(r)},function(module,exports,__webpack_require__){"use strict";var __extends=this&&this.__extends||(_oa=function(t,e){return(_oa=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}_oa(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),_oa;Object.defineProperty(exports,"__esModule",{value:!0});var EntityObject_1=__webpack_require__(19),Node_1=__webpack_require__(130),TreeType_1=__webpack_require__(45),ClassType_1=__webpack_require__(16),cesium_1=__webpack_require__(8),Batched3DModel3DTileContent=__webpack_require__(8).Batched3DModel3DTileContent,deepCopy_1=__webpack_require__(27),TypeJudgment_1=__webpack_require__(12),Group=function(_super){function Group(options){var _this=_super.call(this)||this;_this.findNodesByConditions=function(conditions){var _nodes=[];return conditions.indexOf("${")<0&&conditions.indexOf("}")<0?[]:(conditions=conditions.replace("${","c.value.").replace("}",""),_this.children.forEach(function(c){c.type===TreeType_1.default.GROUP?_nodes=_nodes.concat(_this.findNodesByConditions(conditions)):c.type===TreeType_1.default.NODE&&eval(conditions)&&_nodes.push(c)}),_nodes)},_this._findAllNodes=function(t,e){var n=[];return t.forEach(function(t){t.type===TreeType_1.default.GROUP?n=n.concat(e?_this._findAllNodes(t.children,e):[]):t.type===TreeType_1.default.NODE&&n.push(t)}),n};var _opts=options||{},name=_opts.name||"",id=_opts.id||"",children=_opts.children||[],jsonObject={id:id,name:name,children:children};return _super.prototype.fromJSON.call(_this,{id:jsonObject.id,name:jsonObject.name,children:[]}),_this.type=TreeType_1.default.GROUP,_this.name=name,_this.children=[],_this._creator(jsonObject,_this),_this}return __extends(Group,_super),Group.prototype.toJSON=function(){return this._toJSONByGroup(this)},Group.prototype.getNodes=function(){return this._findAllNodes(this.children,!0)},Group.prototype.getNodeById=function(e,n){void 0===n&&(n=!0);var r=null;return this.children.forEach(function(t){switch(t.type){case TreeType_1.default.GROUP:n&&(r=t.getNodeById(e)||r);break;case TreeType_1.default.NODE:r=t.id===e?t:r}}),r},Group.prototype.getNodesByGroupId=function(e,n){var r=this;void 0===n&&(n=!0);var i=[];return e=e||this.id,this.children.forEach(function(t){t.type===TreeType_1.default.GROUP&&(t.id===e?i=r._findAllNodes(t.children,n):0===i.length&&(i=t.getNodesByGroupId(e,n)))}),i},Group.prototype.getNodeByScreenPosition=function(t,e){var n,r=this._viewer.scene.pick(t);if(r){var i=!TypeJudgment_1.isBoolean(e)||e;return r.primitive&&r.collection&&(n=this._getNodeByPrimitive(r.collection,i)),r.id instanceof cesium_1.Entity&&(n=this._getNodeByEntity(r.id,i)),r instanceof cesium_1.Cesium3DTileFeature&&(n=this._getNodeByPrimitive(r.tileset,i)),r.content&&r.content instanceof Batched3DModel3DTileContent&&r.content.constructor===Batched3DModel3DTileContent&&(n=this._getNodeByPrimitive(r.primitive,i)),n}},Group.prototype.getNodeByPicked=function(t,e){var n,r=!TypeJudgment_1.isBoolean(e)||e;return t.id instanceof cesium_1.Entity&&(n=this._getNodeByEntity(t.id,r)),t instanceof cesium_1.Cesium3DTileFeature&&(n=this._getNodeByPrimitive(t.tileset,r)),t.content&&t.content instanceof Batched3DModel3DTileContent&&t.content.constructor===Batched3DModel3DTileContent&&(n=this._getNodeByPrimitive(t.primitive,r)),t.primitive&&t.collection&&!t.id&&(n=this._getNodeByPrimitive(t.collection,r)),!t.primitive||t.collection||t.id||(n=this._getNodeByPrimitive(t.primitive,r)),n},Group.prototype.getGroupById=function(e,n){var r;return void 0===n&&(n=!0),this.children.forEach(function(t){t.type===TreeType_1.default.GROUP&&(r=t.id===e?t:r,n&&(r=t.getGroupById(e,n)||r))}),r},Group.prototype.get=function(t){var e=this.children[t];return e instanceof Group?e:e instanceof Node_1.default?e.getValue():void 0},Group.prototype.add=function(t){try{var e,n,r=void 0;if(TypeJudgment_1.isObject(t)?r=t.type===TreeType_1.default.GROUP?(e=new Group(t),this._viewer&&(this._appendGroupToMap(e),e._viewer=this._viewer,e._earth=this._earth),e):(n=new Node_1.default(t),this._viewer&&this._appendToMap(n),n):t instanceof Group?(this._viewer&&(this._appendGroupToMap(t),t._viewer=this._viewer,t._earth=this._earth),r=t):(n=new Node_1.default(t))&&n.getValue()&&(this._viewer&&this._appendToMap(n),r=n),r){if((t.parent=this)._addChildren(r),r instanceof Group)return r;if(r instanceof Node_1.default)return r.getValue()}return}catch(t){return}},Group.prototype.remove=function(t){try{if(t instanceof Group)this._viewer&&this._removeGroupFromMap(t),this._removeChildren(t);else{if(!t.type)return!1;this._viewer&&this._removeFromMap(t),this._removeChildren(t)}return!0}catch(t){return!1}},Group.prototype.removeAll=function(){try{for(var t=this.children.length-1;0<=t;t--)this.remove(this.children[t]);return!0}catch(t){return!1}},Object.defineProperty(Group.prototype,"length",{get:function(){return this.children.length},enumerable:!1,configurable:!0}),Group.prototype._creator=function(t,n){t.children.forEach(function(t){var e;t.type===TreeType_1.default.GROUP?(e=new Group(t),n.add(e)):t.type&&n.add(t)})},Group.prototype._getNodeByEntity=function(e,n){void 0===n&&(n=!0);var r=null;return this.children.forEach(function(t){switch(t.type){case TreeType_1.default.GROUP:n&&(r=t._getNodeByEntity(e)||r);break;case TreeType_1.default.NODE:t.value.class===ClassType_1.default.ENTITY&&(r=t.value.value.id===e.id?t:r)}}),r},Group.prototype._getNodeByPrimitive=function(n,t){void 0===t&&(t=!0);var r=null;return this.children.forEach(function(e){switch(e.type){case TreeType_1.default.GROUP:t&&(r=e._getNodeByPrimitive(n)||r);break;case TreeType_1.default.NODE:e.value.class!==ClassType_1.default.PRIMITIVE&&e.value.class!==ClassType_1.default.PRIMITIVE_COLLECTION||(e.value.value instanceof cesium_1.PrimitiveCollection?e.value.value._primitives.forEach(function(t){r=t===n?e:r}):r=e.value.value===n?e:r)}}),r},Group.prototype._addChildren=function(t){this.children.push(t)},Group.prototype._removeChildren=function(t){for(var e=0,n=this.children.length;e<n;e++){var r=this.children[e];if(r.type===TreeType_1.default.GROUP){if(r===t){this.children.splice(e,1);break}r._removeChildren(t)}else if(r.type===TreeType_1.default.NODE&&r===t){this.children.splice(e,1);break}}},Group.prototype._toJSONByGroup=function(t){var e=this,n=deepCopy_1.default(t._JSONObject);return t.children.forEach(function(t){switch(t.type){case TreeType_1.default.GROUP:n.children.push(e._toJSONByGroup(t));break;case TreeType_1.default.NODE:n.children.push(t.value.toJSON())}}),n},Group.prototype._appendGroupToMap=function(t){var e=this;t.children.forEach(function(t){switch(t.type){case TreeType_1.default.NODE:e._appendToMap(t);break;case TreeType_1.default.GROUP:e._appendGroupToMap(t);break;default:e._appendToMap(t)}})},Group.prototype._removeGroupFromMap=function(t){var e=this;t.children.forEach(function(t){switch(t.type){case TreeType_1.default.NODE:e._removeFromMap(t);break;case TreeType_1.default.GROUP:e._removeGroupFromMap(t);break;default:e._removeFromMap(t)}})},Group.prototype._appendToMap=function(t){try{if(!this._viewer)return;var e=this._viewer.scene.primitives,n=this._viewer.scene.imageryLayers,r=this._viewer.entities,i=this._viewer.dataSources,o=void 0,a=void 0;if(t.value.value?(o=t.value,a=t.value.class,t.value._group=this,t.value.addEvent&&t.value.addEvent.raiseEvent(this)):t.value&&t.value.class?(a=(o=t).value.class,t.value._group=this,t.value.addEvent&&t.value.addEvent.raiseEvent(this)):t.type&&t.class&&(a=(o=t).class,t._group=this,t.addEvent&&t.addEvent.raiseEvent(this)),!o||!a)return;switch(a){case ClassType_1.default.PRIMITIVE:case ClassType_1.default.PRIMITIVE_COLLECTION:e.add(o.value);break;case ClassType_1.default.IMAGERY_LAYER:n.add(o.value);break;case ClassType_1.default.ENTITY:r.add(o.value);break;case ClassType_1.default.DATA_SOURCE:i.add(o.value)}}catch(t){}},Group.prototype._removeFromMap=function(t){try{if(!this._viewer)return;var e=this._viewer.scene.primitives,n=this._viewer.scene.imageryLayers,r=this._viewer.entities,i=this._viewer.dataSources,o=void 0,a=void 0;if(t&&t.value&&t.value.value?(o=t.value,a=t.value.class,t.value.removeEvent&&t.value.removeEvent.raiseEvent(this)):t.value&&t.value.class?(a=(o=t).value.class,t.value.removeEvent&&t.value.removeEvent.raiseEvent(this)):t.type&&t.class&&(a=(o=t).class,t.removeEvent&&t.removeEvent.raiseEvent(this)),!o||!a)return;switch(a){case ClassType_1.default.PRIMITIVE:case ClassType_1.default.PRIMITIVE_COLLECTION:e.remove(o.value);break;case ClassType_1.default.IMAGERY_LAYER:n.remove(o.value);break;case ClassType_1.default.ENTITY:r.remove(o.value);break;case ClassType_1.default.DATA_SOURCE:i.remove(o.value)}}catch(t){}},Group}(EntityObject_1.default);exports.default=Group},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){for(var t=[],e="0123456789abcdef",n=0;n<36;n++)t[n]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(16),c=n(12),p=n(20),h=n(26),f=n(94),d={type:{type:"string",value:s.default.POINT,readonly:!0},class:{type:"string",value:u.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:h.arrayToCartesianPosition},pixelSize:{type:"number",value:1,target:"point.pixelSize"},color:{type:"string",value:"rgb(255,255,255)",convert:function(t){var e=t.color,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["color","opacity"],target:"point.color"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"point.outlineColor"},outlineWidth:{type:"number",value:0,target:"point.outlineWidth"},show:{type:"boolean",value:!0},opacity:{type:"number",value:1,convert:function(t){var e=t.color,n=t.outlineColor,r=t.opacity;switch(t.target){case"point.color":return l.Color.fromCssColorString(e).withAlpha(r);case"point.outlineColor":return l.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["color","outlineColor","opacity"],target:["point.color","point.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:h.arrayToDistanceDisplayCondition,target:"point.distanceDisplayCondition"},heightReference:{type:"string",value:l.HeightReference.NONE,convert:f.default,target:"point.heightReference"},properties:{type:"object",value:{}}},y=(o=a.default,i(g,o),g);function g(t){var e=o.call(this)||this;try{if(o.prototype.fromJSON.call(e,t),!c.isObject(t))throw"error: Point. The options is not a Object.";if(!t.position)throw"error: Point. The position of options is not defined.";p.definedProperties(e,d,t);var n=p.getPerOptions(e,d,t);e.value=new l.Entity(n)}catch(t){}return e}y.defaultProps=d,e.default=y},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});function a(t){var e=t.positions;return!0===t.dynamic?new p.CallbackProperty(function(){return h.arrayToCartesianPositions(e)},!1):h.arrayToCartesianPositions(e)}var s,l=n(19),u=n(11),c=n(16),p=n(8),h=n(26),f=n(12),d=n(20),y={convert:function(t){var e=t.color,n=t.opacity;return p.Color.fromCssColorString(e).withAlpha(n)},convertParams:["color","opacity"],target:"polyline.material"},g={convert:a,convertParams:["positions","dynamic"],target:"polyline.positions"},_={type:{type:"string",value:u.default.POLYLINE,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},positions:o({type:"array",value:null},g),width:{type:"number",value:1,target:"polyline.width"},clampToGround:{type:"boolean",value:!0,target:"polyline.clampToGround"},color:o({type:"string",value:"rgb(70,180,160)"},y),show:{type:"boolean",value:!0},opacity:o({type:"number",value:1},y),showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:h.arrayToDistanceDisplayCondition,target:"polyline.distanceDisplayCondition"},dynamic:{type:"boolean",value:!1,convert:a,convertParams:["positions","dynamic"],target:"polyline.positions"},properties:{type:"object",value:{}}},m=(s=l.default,i(v,s),v);function v(t){var e=s.call(this)||this;e.defaultProps=_;try{if(s.prototype.fromJSON.call(e,t),!f.isObject(t))throw"error: Polyline. The options is not a Object.";if(!t.positions)throw"error: Polyline. The positions of options is not defined.";d.definedProperties(e,_,t);var n=d.getPerOptions(e,_,t);n.polyline.classificationType=p.ClassificationType.BOTH,e.value=new p.Entity(n)}catch(t){}return e}m.defaultProps=_,e.default=m},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(19),l=n(11),u=n(8),c=n(16),p=n(26),h=n(20),f=n(12),d={convert:function(t){var e=t.positions,n=t.dynamic,r=t.target;return"polygon.hierarchy"===r?!0===n?new u.CallbackProperty(function(){var t=p.arrayToCartesianPositions(e);return new u.PolygonHierarchy(t)},!1):p.arrayToCartesianPositions(e):"polyline.positions"===r?!0===n?new u.CallbackProperty(function(){return p.arrayToCartesianPositions(e)},!1):p.arrayToCartesianPositions(e):void 0},convertParams:["positions","dynamic"],target:["polygon.hierarchy","polyline.positions"]},y={type:{type:"string",value:l.default.POLYGON,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},positions:o({type:"array",value:null},d),fill:{type:"boolean",value:!0,target:"polygon.fill"},fillColor:{type:"string",value:"rgb(70,180,160)",convert:function(t){var e=t.fillColor,n=t.opacity;return u.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"polygon.material"},outline:{type:"boolean",value:!0,target:"polyline.show"},outlineColor:{type:"string",value:"rgb(255,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return u.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"polyline.material"},outlineWidth:{type:"number",value:1,target:"polyline.width"},clampToGround:{type:"boolean",value:!1,convert:function(t){var e=t.clampToGround;switch(t.target){case"polygon.perPositionHeight":return!f.isBoolean(e)||!e;case"polyline.clampToGround":return!!f.isBoolean(e)&&e}},convertParams:["clampToGround"],target:["polygon.perPositionHeight","polyline.clampToGround"]},show:{type:"boolean",value:!0},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(1===r&&(r=.99),t.target){case"polygon.material":return u.Color.fromCssColorString(e).withAlpha(r);case"polygon.outlineColor":return u.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["polygon.material","polygon.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:["polygon.distanceDisplayCondition","polyline.distanceDisplayCondition"]},dynamic:o({type:"boolean",value:!1},d),properties:{type:"object",value:{}}},g=(a=s.default,i(_,a),_);function _(t){var e=a.call(this)||this;e.defaultProps=y;try{if(a.prototype.fromJSON.call(e,t),!f.isObject(t))throw"error: Polygon. The options is not a Object.";if(!t.positions)throw"error: Polygon. The positions of options is not defined.";h.definedProperties(e,y,t);var n=h.getPerOptions(e,y,t);n.polygon.classificationType=u.ClassificationType.BOTH,n.polygon.shadows=u.ShadowMode.DISABLED,n.polygon.outline=!1,e.value=new u.Entity(n)}catch(t){}return e}g.defaultProps=y,e.default=g},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(16),c=n(26),p=n(12),h=n(20),f=n(94),d={type:{type:"string",value:s.default.MODEL,readonly:!0},class:{type:"string",value:u.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:c.arrayToCartesianPosition},orientation:{type:"array",value:[0,0,0],convert:function(t){var e=t.position,n=t.orientation,r=l.Cartesian3.fromDegrees(e[0],e[1],e[2]),i=new l.HeadingPitchRoll(l.Math.toRadians(Number(n[0])),l.Math.toRadians(Number(n[1])),l.Math.toRadians(Number(n[2])));return l.Transforms.headingPitchRollQuaternion(r,i)},convertParams:["position","orientation"]},url:{type:"string",value:null,required:!0,target:"model.uri"},scale:{type:"number",value:1,target:"model.scale"},minimumPixelSize:{type:"number",value:0,target:"model.minimumPixelSize"},heightReference:{type:"string",value:l.HeightReference.NONE,convert:f.default,target:"model.heightReference"},silhouetteColor:{type:"string",value:"rgb(255,0,0)",convert:c.stringToColor,target:"model.silhouetteColor"},silhouetteSize:{type:"number",value:0,target:"model.silhouetteSize"},color:{type:"string",value:"rgb(255,255,255)",convert:c.stringToColor,target:"model.color"},lightColor:{type:"array",value:null,convert:function(t){var e=t.lightColor;return e?c.arrayToCartesianPosition(e):null},convertParams:["lightColor"],target:"model.lightColor"},show:{type:"boolean",value:!0,target:"model.show"},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:c.arrayToDistanceDisplayCondition,target:"model.distanceDisplayCondition"},properties:{type:"object",value:{}}},y=(o=a.default,i(g,o),Object.defineProperty(g.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),g);function g(t){var e=o.call(this)||this;try{if(o.prototype.fromJSON.call(e,t),e._onClick=new l.Event,e._onHover=new l.Event,!p.isObject(t))throw"error: Model. The options is not a Object.";if(!t.position)throw"error: Model. The position of options is not defined.";if(!t.url)throw"error: Model. The url of options is not defined.";h.definedProperties(e,d,t);var n=h.getPerOptions(e,d,t);e.value=new l.Entity(n)}catch(t){}return e}y.defaultProps=d,e.default=y},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});function o(t){var e=t.fill,n=t.outline;return e&&n?u.LabelStyle.FILL_AND_OUTLINE:!e&&n?u.LabelStyle.OUTLINE:u.LabelStyle.FILL}var a,s=n(19),l=n(11),u=n(8),c=n(92),p=n(93),h=n(94),f=n(16),d=n(26),y=n(12),g=n(20),_={type:{type:"string",value:l.default.LABEL,readonly:!0},class:{type:"string",value:f.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:d.arrayToCartesianPosition},show:{type:"boolean",value:!0},scale:{type:"number",value:1,target:"label.scale"},showBackground:{type:"boolean",value:!1,target:"label.showBackground"},backgroundColor:{type:"string",value:"rgb(42,42,42)",convert:d.stringToColor,target:"label.backgroundColor"},backgroundPadding:{type:"array",value:[7,5],convert:d.arrayToCartesian2,target:"label.backgroundPadding"},pixelOffset:{type:"array",value:[0,0],convert:d.arrayToCartesian2,target:"label.pixelOffset"},eyeOffset:{type:"array",value:[0,0,0],convert:d.arrayToCartesian3,target:"label.eyeOffset"},text:{type:"string",value:null,target:"label.text"},font:{type:"string",value:"30px sans-serif",target:"label.font"},fill:{type:"boolean",value:!0,convert:o,convertParams:["fill","outline"],target:"label.style"},outline:{type:"boolean",value:!0,convert:o,convertParams:["fill","outline"],target:"label.style"},fillColor:{type:"string",value:"rgb(255,255,255)",convert:d.stringToColor,target:"label.fillColor"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:d.stringToColor,target:"label.outlineColor"},outlineWidth:{type:"number",value:1,target:"label.outlineWidth"},horizontalOrigin:{type:"string",value:u.HorizontalOrigin.CENTER,convert:c.default,target:"label.horizontalOrigin"},verticalOrigin:{type:"string",value:u.VerticalOrigin.CENTER,convert:p.default,target:"label.verticalOrigin"},heightReference:{type:"string",value:u.HeightReference.NONE,convert:h.default,target:"label.heightReference"},opacity:{type:"number",value:1,convert:function(t){var e=t.backgroundColor,n=t.fillColor,r=t.outlineColor,i=t.opacity;switch(t.target){case"label.backgroundColor":return d.stringToColor(e).withAlpha(i);case"label.fillColor":return d.stringToColor(n).withAlpha(i);case"label.outlineColor":return d.stringToColor(r).withAlpha(i)}},convertParams:["backgroundColor","fillColor","outlineColor","opacity"],target:["label.backgroundColor","label.fillColor","label.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:d.arrayToDistanceDisplayCondition,target:"label.distanceDisplayCondition"},scaleByDistance:{type:"array",value:[150,3,15e6,.5],convert:d.arrayToNearFarScalar,target:"label.scaleByDistance"},disableDepthTestDistance:{type:"number",value:Number.POSITIVE_INFINITY,target:"label.disableDepthTestDistance"},properties:{type:"object",value:{}}},m=(a=s.default,i(v,a),Object.defineProperty(v.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),v);function v(t){var e=a.call(this)||this;try{if(a.prototype.fromJSON.call(e,t),e._onClick=new u.Event,e._onHover=new u.Event,!y.isObject(t))throw"error: Label. The options is not a Object.";if(!t.position)throw"error: Label. The position of options is not defined.";g.definedProperties(e,_,t);var n=g.getPerOptions(e,_,t);e.value=new u.Entity(n)}catch(t){}return e}m.defaultProps=_,e.default=m},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).POST_RENDER="post_render",i.PRE_RENDER="pre_render",i.POST_UPDATE="post_update",i.PRE_UPDATE="pre_update",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).SCENE3D="scene3d",i.PLANAR3D="planar3d",i.SCENE2D="scene2d",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).CENTER="center",i.LEFT="left",i.RIGHT="right",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).CENTER="center",i.BOTTOM="bottom",i.TOP="top",e.default=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(28),s=n(8),l=n(77),u=n(22),c=n(78),p=n(11),h=n(95),f=(o=l.default,i(d,o),d.prototype.destory=function(){o.prototype.destory.call(this),this._drag=!1,this._drawMode=a.default.NONE,this._vertexCollection.removeAll(),this._destroyed(this._selectedEntity)},d.prototype._initMouseHandlers=function(){this._eventHandler=new s.ScreenSpaceEventHandler(this._earth.getViewer().scene.canvas),this._onLeftClick(this._eventHandler),this._onRightClick(this._eventHandler),this._onLeftDown(this._eventHandler),this._onMouseMove(this._eventHandler),this._onLeftUp(this._eventHandler),this._onDoubleClick(this._eventHandler)},d.prototype._onLeftClick=function(t){var i=this;t.setInputAction(function(t){if(i._drawMode===a.default.ADD){var e=i._earth.pickGloble(t.position,i._selectedEntity?[i._selectedEntity.value]:void 0);if(!e)return;var n=u.default.cartesianToDegrees(e);i._vertexCollection.add(new c.default({position:n}));var r=i._addVertex(n);r&&(i._selectedEntity=r)}},s.ScreenSpaceEventType.LEFT_CLICK)},d.prototype._onRightClick=function(t){var n=this;t.setInputAction(function(t){var e=n._earth.pickGloble(t.position);e&&u.default.cartesianToDegrees(e)},s.ScreenSpaceEventType.RIGHT_CLICK)},d.prototype._onDoubleClick=function(t){var n=this;t.setInputAction(function(t){if(n._drawMode===a.default.ADD&&!n._drag&&n._selectedEntity){var e=n._earth.pickGloble(t.position);if(!e)return;u.default.cartesianToDegrees(e);n._vertexCollection.removeByIndex(n._vertexCollection.length-1),n._drawMode=a.default.EDIT,n._endAdd()}},s.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},d.prototype._onMouseMove=function(t){var i=this;t.setInputAction(function(t){if(i._drawMode===a.default.ADD&&!i._drag&&i._selectedEntity){if(!(r=i._earth.pickGloble(t.endPosition,[i._selectedEntity.value])))return;var e=u.default.cartesianToDegrees(r),n=i._selectedEntity.positions;n.push(e),n.splice(n.length-2,1)}if(i._drawMode===a.default.EDIT&&i._drag&&i._selectedEntity&&i._selectedVertex){var r=i._earth.pickGloble(t.endPosition,[]);if(!s.defined(r))return;e=u.default.cartesianToDegrees(r);i._selectedVertex.position=r,i._editVertex(e,i._selectedVertex.index)}},s.ScreenSpaceEventType.MOUSE_MOVE)},d.prototype._onLeftDown=function(t){var r=this;t.setInputAction(function(t){if(r._drawMode===a.default.EDIT&&r._selectedEntity){var e=r._earth.getViewer().scene.pick(t.position);if(!e)return;var n=e.primitive;n&&n.type===p.default.VERTEX&&(r._selectedVertex=n,r._drag=!0,r._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!1)}},s.ScreenSpaceEventType.LEFT_DOWN)},d.prototype._onLeftUp=function(t){var e=this;t.setInputAction(function(t){e._selectedVertex=null,e._drag=!1,e._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!0},s.ScreenSpaceEventType.LEFT_UP)},Object.defineProperty(d.prototype,"drawMode",{get:function(){return this._drawMode},set:function(t){this._drawMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"selectedEntity",{get:function(){return this._selectedEntity},set:function(t){this._selectedEntity=t},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"drag",{get:function(){return this._drag},set:function(t){this._drag=t},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"vertexCollection",{get:function(){return this._vertexCollection},enumerable:!1,configurable:!0}),d);function d(t,e){var n=o.call(this)||this;n._vertexCollection=new h.default,n._drawMode=a.default.NONE,n._drag=!1,n._earth=t,n._earth.getViewer().scene.primitives.add(n._vertexCollection.value);var r=e||{};return n._addVertex=r.addVertex,n._editVertex=r.editVertex,n._endAdd=r.endAdd,n._destroyed=r.destroyed,n._initMouseHandlers(),n}e.default=f},,,,,,,,,function(t,e,n){var r,i,o,a,s=n(9);a=function(t){"use strict";function e(){}function n(t){this.message=t||""}function r(t){this.message=t||""}function i(t){this.message=t||""}function o(){}function a(t){return null===t?te:t.color}function s(t){return null===t?null:t.parent}function l(t,e){null!==t&&(t.color=e)}function u(t){return null===t?null:t.left}function c(t){return null===t?null:t.right}function p(){this.root_=null,this.size_=0}function h(){}function f(){this.array_=[],arguments[0]instanceof At&&this.addAll(arguments[0])}function d(){}function y(t){this.message=t||""}function g(){this.array_=[]}"fill"in Array.prototype||Object.defineProperty(Array.prototype,"fill",{configurable:!0,value:function(t,e,n){if(null==this)throw new TypeError(this+" is not an object");for(var r=Object(this),i=Math.max(Math.min(r.length,9007199254740991),0)||0,o=((o=1 in arguments&&parseInt(Number(e),10)||0)<0?Math.max(i+o,0):Math.min(o,i)),a=((a=2 in arguments&&void 0!==n?parseInt(Number(n),10)||0:i)<0?Math.max(i+n,0):Math.min(a,i));o<a;)r[o]=t,++o;return r},writable:!0}),Number.isFinite=Number.isFinite||function(t){return"number"==typeof t&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!=t},Math.trunc=Math.trunc||function(t){return t<0?Math.ceil(t):Math.floor(t)};function _(){}_.prototype.interfaces_=function(){return[]},_.prototype.getClass=function(){return _},_.prototype.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n};function m(){}var v,b=((v=Error)&&(x.__proto__=v),(x.prototype=Object.create(v&&v.prototype)).constructor=x),w={MAX_VALUE:{configurable:!0}};function x(t){v.call(this,t),this.name="IllegalArgumentException",this.message=t,this.stack=(new v).stack}m.isNaN=function(t){return Number.isNaN(t)},m.doubleToLongBits=function(t){return t},m.longBitsToDouble=function(t){return t},m.isInfinite=function(t){return!Number.isFinite(t)},w.MAX_VALUE.get=function(){return Number.MAX_VALUE},Object.defineProperties(m,w);function C(){}function E(){}function P(){}var O=function t(){var e;this.x=null,this.y=null,this.z=null,0===arguments.length?(this.x=0,this.y=0,this.z=t.NULL_ORDINATE):1===arguments.length?(e=arguments[0],this.x=e.x,this.y=e.y,this.z=e.z):2===arguments.length?(this.x=arguments[0],this.y=arguments[1],this.z=t.NULL_ORDINATE):3===arguments.length&&(this.x=arguments[0],this.y=arguments[1],this.z=arguments[2])},T={DimensionalComparator:{configurable:!0},serialVersionUID:{configurable:!0},NULL_ORDINATE:{configurable:!0},X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0}};O.prototype.setOrdinate=function(t,e){switch(t){case O.X:this.x=e;break;case O.Y:this.y=e;break;case O.Z:this.z=e;break;default:throw new b("Invalid ordinate index: "+t)}},O.prototype.equals2D=function(){if(1===arguments.length){var t=arguments[0];return this.x===t.x&&this.y===t.y}if(2===arguments.length){var e=arguments[0],n=arguments[1];return!!_.equalsWithTolerance(this.x,e.x,n)&&!!_.equalsWithTolerance(this.y,e.y,n)}},O.prototype.getOrdinate=function(t){switch(t){case O.X:return this.x;case O.Y:return this.y;case O.Z:return this.z}throw new b("Invalid ordinate index: "+t)},O.prototype.equals3D=function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||m.isNaN(this.z))&&m.isNaN(t.z)},O.prototype.equals=function(t){return t instanceof O&&this.equals2D(t)},O.prototype.equalInZ=function(t,e){return _.equalsWithTolerance(this.z,t.z,e)},O.prototype.compareTo=function(t){return this.x<t.x?-1:this.x>t.x?1:this.y<t.y?-1:this.y>t.y?1:0},O.prototype.clone=function(){},O.prototype.copy=function(){return new O(this)},O.prototype.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"},O.prototype.distance3D=function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},O.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},O.prototype.hashCode=function(){return 37*(629+O.hashCode(this.x))+O.hashCode(this.y)},O.prototype.setCoordinate=function(t){this.x=t.x,this.y=t.y,this.z=t.z},O.prototype.interfaces_=function(){return[C,E,e]},O.prototype.getClass=function(){return O},O.hashCode=function(){if(1===arguments.length){var t=m.doubleToLongBits(arguments[0]);return Math.trunc((t^t)>>>32)}},T.DimensionalComparator.get=function(){return S},T.serialVersionUID.get=function(){return 0x5cbf2c235c7e5800},T.NULL_ORDINATE.get=function(){return m.NaN},T.X.get=function(){return 0},T.Y.get=function(){return 1},T.Z.get=function(){return 2},Object.defineProperties(O,T);var S=function(t){if(this._dimensionsToTest=2,0!==arguments.length&&1===arguments.length){var e=t;if(2!==e&&3!==e)throw new b("only 2 or 3 dimensions may be specified");this._dimensionsToTest=e}};S.prototype.compare=function(t,e){var n=t,r=e,i=S.compare(n.x,r.x);if(0!==i)return i;var o=S.compare(n.y,r.y);return 0!==o?o:this._dimensionsToTest<=2?0:S.compare(n.z,r.z)},S.prototype.interfaces_=function(){return[P]},S.prototype.getClass=function(){return S},S.compare=function(t,e){return t<e?-1:e<t?1:m.isNaN(t)?m.isNaN(e)?0:-1:m.isNaN(e)?1:0};function I(){}I.prototype.create=function(){},I.prototype.interfaces_=function(){return[]},I.prototype.getClass=function(){return I};function A(){}var L={INTERIOR:{configurable:!0},BOUNDARY:{configurable:!0},EXTERIOR:{configurable:!0},NONE:{configurable:!0}};A.prototype.interfaces_=function(){return[]},A.prototype.getClass=function(){return A},A.toLocationSymbol=function(t){switch(t){case A.EXTERIOR:return"e";case A.BOUNDARY:return"b";case A.INTERIOR:return"i";case A.NONE:return"-"}throw new b("Unknown location value: "+t)},L.INTERIOR.get=function(){return 0},L.BOUNDARY.get=function(){return 1},L.EXTERIOR.get=function(){return 2},L.NONE.get=function(){return-1},Object.defineProperties(A,L);function N(t,e){return t.interfaces_&&-1<t.interfaces_().indexOf(e)}function M(){}var D={LOG_10:{configurable:!0}};M.prototype.interfaces_=function(){return[]},M.prototype.getClass=function(){return M},M.log10=function(t){var e=Math.log(t);return m.isInfinite(e)||m.isNaN(e)?e:e/M.LOG_10},M.min=function(t,e,n,r){var i=t;return e<i&&(i=e),n<i&&(i=n),r<i&&(i=r),i},M.clamp=function(){if("number"==typeof arguments[2]&&"number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1],n=arguments[2];return t<e?e:n<t?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],i=arguments[1],o=arguments[2];return r<i?i:o<r?o:r}},M.wrap=function(t,e){return t<0?e- -t%e:t%e},M.max=function(){if(3===arguments.length){var t=arguments[1],e=arguments[2],n=arguments[0];return n<t&&(n=t),n<e&&(n=e),n}if(4===arguments.length){var r=arguments[1],i=arguments[2],o=arguments[3],a=arguments[0];return a<r&&(a=r),a<i&&(a=i),a<o&&(a=o),a}},M.average=function(t,e){return(t+e)/2},D.LOG_10.get=function(){return Math.log(10)},Object.defineProperties(M,D);function R(t){this.str=t}R.prototype.append=function(t){this.str+=t},R.prototype.setCharAt=function(t,e){this.str=this.str.substr(0,t)+e+this.str.substr(t+1)},R.prototype.toString=function(t){return this.str};function j(t){this.value=t}j.prototype.intValue=function(){return this.value},j.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},j.isNaN=function(t){return Number.isNaN(t)};function k(){}k.isWhitespace=function(t){return t<=32&&0<=t||127===t},k.toUpperCase=function(t){return t.toUpperCase()};function F(){var t,e,n,r;this._hi=0,(this._lo=0)===arguments.length?this.init(0):1===arguments.length?"number"==typeof arguments[0]?(t=arguments[0],this.init(t)):arguments[0]instanceof F?(e=arguments[0],this.init(e)):"string"==typeof arguments[0]&&F.call(this,F.parse(arguments[0])):2===arguments.length&&(n=arguments[0],r=arguments[1],this.init(n,r))}var B={PI:{configurable:!0},TWO_PI:{configurable:!0},PI_2:{configurable:!0},E:{configurable:!0},NaN:{configurable:!0},EPS:{configurable:!0},SPLIT:{configurable:!0},MAX_PRINT_DIGITS:{configurable:!0},TEN:{configurable:!0},ONE:{configurable:!0},SCI_NOT_EXPONENT_CHAR:{configurable:!0},SCI_NOT_ZERO:{configurable:!0}};F.prototype.le=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<=t._lo},F.prototype.extractSignificantDigits=function(t,e){var n=this.abs(),r=F.magnitude(n._hi),i=F.TEN.pow(r);(n=n.divide(i)).gt(F.TEN)?(n=n.divide(F.TEN),r+=1):n.lt(F.ONE)&&(n=n.multiply(F.TEN),--r);for(var o=r+1,a=new R,s=F.MAX_PRINT_DIGITS-1,l=0;l<=s;l++){t&&l===o&&a.append(".");var u=Math.trunc(n._hi);if(u<0)break;var c=!1,p=0,p=9<u?(c=!0,"9"):"0"+u;a.append(p),n=n.subtract(F.valueOf(u)).multiply(F.TEN),c&&n.selfAdd(F.TEN);var h=!0,f=F.magnitude(n._hi);if(f<0&&Math.abs(f)>=s-l&&(h=!1),!h)break}return e[0]=r,a.toString()},F.prototype.sqr=function(){return this.multiply(this)},F.prototype.doubleValue=function(){return this._hi+this._lo},F.prototype.subtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.add(t.negate())}if("number"==typeof arguments[0]){var e=arguments[0];return this.add(-e)}},F.prototype.equals=function(){if(1===arguments.length){var t=arguments[0];return this._hi===t._hi&&this._lo===t._lo}},F.prototype.isZero=function(){return 0===this._hi&&0===this._lo},F.prototype.selfSubtract=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t._hi,-t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},F.prototype.getSpecialNumberString=function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},F.prototype.min=function(t){return this.le(t)?this:t},F.prototype.selfDivide=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfDivide(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfDivide(e,0)}}else if(2===arguments.length){var n,r,i,o,a=arguments[0],s=arguments[1],l=null,u=null,c=null,p=this._hi/a;return c=(l=(u=F.SPLIT*p)-(l=u-p))*(r=(c=F.SPLIT*a)-(c-a))-(o=p*a)+l*(i=a-r)+(n=p-l)*r+n*i,c=p+(u=(this._hi-o-c+this._lo-p*s)/a),this._hi=c,this._lo=p-c+u,this}},F.prototype.dump=function(){return"DD<"+this._hi+", "+this._lo+">"},F.prototype.divide=function(){if(arguments[0]instanceof F){var t,e,n,r=arguments[0],i=null,o=null,a=(e=this._hi/r._hi)-(i=(l=F.SPLIT*e)-(l-e)),s=i*(o=(s=F.SPLIT*r._hi)-(s-r._hi))-(n=e*r._hi)+i*(t=r._hi-o)+a*o+a*t,l=(this._hi-n-s+this._lo-e*r._lo)/r._hi;return new F(s=e+l,e-s+l)}if("number"==typeof arguments[0]){var u=arguments[0];return m.isNaN(u)?F.createNaN():F.copy(this).selfDivide(u,0)}},F.prototype.ge=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>=t._lo},F.prototype.pow=function(t){if(0===t)return F.valueOf(1);var e=new F(this),n=F.valueOf(1),r=Math.abs(t);if(1<r)for(;0<r;)r%2==1&&n.selfMultiply(e),0<(r/=2)&&(e=e.sqr());else n=e;return t<0?n.reciprocal():n},F.prototype.ceil=function(){if(this.isNaN())return F.NaN;var t=Math.ceil(this._hi),e=0;return t===this._hi&&(e=Math.ceil(this._lo)),new F(t,e)},F.prototype.compareTo=function(t){return this._hi<t._hi?-1:this._hi>t._hi?1:this._lo<t._lo?-1:this._lo>t._lo?1:0},F.prototype.rint=function(){return this.isNaN()?this:this.add(.5).floor()},F.prototype.setValue=function(){if(arguments[0]instanceof F){var t=arguments[0];return this.init(t),this}if("number"==typeof arguments[0]){var e=arguments[0];return this.init(e),this}},F.prototype.max=function(t){return this.ge(t)?this:t},F.prototype.sqrt=function(){if(this.isZero())return F.valueOf(0);if(this.isNegative())return F.NaN;var t=1/Math.sqrt(this._hi),e=this._hi*t,n=F.valueOf(e),r=this.subtract(n.sqr())._hi*(.5*t);return n.add(r)},F.prototype.selfAdd=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfAdd(t._hi,t._lo)}if("number"==typeof arguments[0]){var e,n,r=arguments[0],i=null,o=null,a=(i=this._hi+r)-(o=i-this._hi),s=(n=r-o+(this._hi-a)+this._lo)+(i-(e=i+n));return this._hi=e+s,this._lo=s+(e-this._hi),this}}else if(2===arguments.length){var l,u,c,p=arguments[0],h=arguments[1],f=this._hi+p,d=this._lo+h,y=f-(u=f-this._hi),g=d-(c=d-this._lo),_=(l=f+(u=p-u+(this._hi-y)+d))+(u=h-c+(this._lo-g)+(u+(f-l))),m=u+(l-_);return this._hi=_,this._lo=m,this}},F.prototype.selfMultiply=function(){if(1===arguments.length){if(arguments[0]instanceof F){var t=arguments[0];return this.selfMultiply(t._hi,t._lo)}if("number"==typeof arguments[0]){var e=arguments[0];return this.selfMultiply(e,0)}}else if(2===arguments.length){var n,r,i,o,a=arguments[0],s=arguments[1],l=(o=F.SPLIT*this._hi)-this._hi,u=F.SPLIT*a;l=o-l,n=this._hi-l,r=u-a;var c=(o=this._hi*a)+(u=l*(r=u-r)-o+l*(i=a-r)+n*r+n*i+(this._hi*s+this._lo*a)),p=u+(o-c);return this._hi=c,this._lo=p,this}},F.prototype.selfSqr=function(){return this.selfMultiply(this)},F.prototype.floor=function(){if(this.isNaN())return F.NaN;var t=Math.floor(this._hi),e=0;return t===this._hi&&(e=Math.floor(this._lo)),new F(t,e)},F.prototype.negate=function(){return this.isNaN()?this:new F(-this._hi,-this._lo)},F.prototype.clone=function(){},F.prototype.multiply=function(){if(arguments[0]instanceof F){var t=arguments[0];return t.isNaN()?F.createNaN():F.copy(this).selfMultiply(t)}if("number"==typeof arguments[0]){var e=arguments[0];return m.isNaN(e)?F.createNaN():F.copy(this).selfMultiply(e,0)}},F.prototype.isNaN=function(){return m.isNaN(this._hi)},F.prototype.intValue=function(){return Math.trunc(this._hi)},F.prototype.toString=function(){var t=F.magnitude(this._hi);return-3<=t&&t<=20?this.toStandardNotation():this.toSciNotation()},F.prototype.toStandardNotation=function(){var t=this.getSpecialNumberString();if(null!==t)return t;var e,n=new Array(1).fill(null),r=this.extractSignificantDigits(!0,n),i=n[0]+1,o=r;return"."===r.charAt(0)?o="0"+r:i<0?o="0."+F.stringOfChar("0",-i)+r:-1===r.indexOf(".")&&(e=i-r.length,o=r+F.stringOfChar("0",e)+".0"),this.isNegative()?"-"+o:o},F.prototype.reciprocal=function(){var t,e,n,r,i,o=null,a=(e=1/this._hi)-(o=(n=F.SPLIT*e)-(n-e)),s=(i=F.SPLIT*this._hi)-this._hi,l=e+(n=(1-(r=e*this._hi)-(o*(s=i-s)-r+o*(t=this._hi-s)+a*s+a*t)-e*this._lo)/this._hi);return new F(l,e-l+n)},F.prototype.toSciNotation=function(){if(this.isZero())return F.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(null!==t)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=F.SCI_NOT_EXPONENT_CHAR+e[0];if("0"===n.charAt(0))throw new Error("Found leading zero: "+n);var i="";1<n.length&&(i=n.substring(1));var o=n.charAt(0)+"."+i;return this.isNegative()?"-"+o+r:o+r},F.prototype.abs=function(){return this.isNaN()?F.NaN:this.isNegative()?this.negate():new F(this)},F.prototype.isPositive=function(){return(0<this._hi||0===this._hi)&&0<this._lo},F.prototype.lt=function(t){return(this._hi<t._hi||this._hi===t._hi)&&this._lo<t._lo},F.prototype.add=function(){if(arguments[0]instanceof F){var t=arguments[0];return F.copy(this).selfAdd(t)}if("number"==typeof arguments[0]){var e=arguments[0];return F.copy(this).selfAdd(e)}},F.prototype.init=function(){var t,e,n,r;1===arguments.length?"number"==typeof arguments[0]?(t=arguments[0],this._hi=t,this._lo=0):arguments[0]instanceof F&&(e=arguments[0],this._hi=e._hi,this._lo=e._lo):2===arguments.length&&(n=arguments[0],r=arguments[1],this._hi=n,this._lo=r)},F.prototype.gt=function(t){return(this._hi>t._hi||this._hi===t._hi)&&this._lo>t._lo},F.prototype.isNegative=function(){return(this._hi<0||0===this._hi)&&this._lo<0},F.prototype.trunc=function(){return this.isNaN()?F.NaN:this.isPositive()?this.floor():this.ceil()},F.prototype.signum=function(){return 0<this._hi?1:this._hi<0?-1:0<this._lo?1:this._lo<0?-1:0},F.prototype.interfaces_=function(){return[e,C,E]},F.prototype.getClass=function(){return F},F.sqr=function(t){return F.valueOf(t).selfMultiply(t)},F.valueOf=function(){return"string"==typeof arguments[0]?F.parse(arguments[0]):"number"==typeof arguments[0]?new F(arguments[0]):void 0},F.sqrt=function(t){return F.valueOf(t).sqrt()},F.parse=function(t){for(var e=0,n=t.length;k.isWhitespace(t.charAt(e));)e++;var r,i=!1;e<n&&("-"!==(r=t.charAt(e))&&"+"!==r||(e++,"-"===r&&(i=!0)));for(var o=new F,a=0,s=0,l=0;!(n<=e);){var u=t.charAt(e);if(e++,k.isDigit(u)){var c=u-"0";o.selfMultiply(F.TEN),o.selfAdd(c),a++}else{if("."!==u){if("e"!==u&&"E"!==u)throw new Error("Unexpected character '"+u+"' at position "+e+" in string "+t);var p=t.substring(e);try{l=j.parseInt(p)}catch(e){throw e instanceof Error?new Error("Invalid exponent "+p+" in string "+t):e}break}s=a}}var h,f,d=o,y=a-s-l;return 0==y?d=o:0<y?(h=F.TEN.pow(y),d=o.divide(h)):y<0&&(f=F.TEN.pow(-y),d=o.multiply(f)),i?d.negate():d},F.createNaN=function(){return new F(m.NaN,m.NaN)},F.copy=function(t){return new F(t)},F.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n));return 10*Math.pow(10,r)<=e&&(r+=1),r},F.stringOfChar=function(t,e){for(var n=new R,r=0;r<e;r++)n.append(t);return n.toString()},B.PI.get=function(){return new F(3.141592653589793,12246467991473532e-32)},B.TWO_PI.get=function(){return new F(6.283185307179586,24492935982947064e-32)},B.PI_2.get=function(){return new F(1.5707963267948966,6123233995736766e-32)},B.E.get=function(){return new F(2.718281828459045,14456468917292502e-32)},B.NaN.get=function(){return new F(m.NaN,m.NaN)},B.EPS.get=function(){return 123259516440783e-46},B.SPLIT.get=function(){return 134217729},B.MAX_PRINT_DIGITS.get=function(){return 32},B.TEN.get=function(){return F.valueOf(10)},B.ONE.get=function(){return F.valueOf(1)},B.SCI_NOT_EXPONENT_CHAR.get=function(){return"E"},B.SCI_NOT_ZERO.get=function(){return"0.0E0"},Object.defineProperties(F,B);function G(){}var z={DP_SAFE_EPSILON:{configurable:!0}};G.prototype.interfaces_=function(){return[]},G.prototype.getClass=function(){return G},G.orientationIndex=function(t,e,n){var r=G.orientationIndexFilter(t,e,n);if(r<=1)return r;var i=F.valueOf(e.x).selfAdd(-t.x),o=F.valueOf(e.y).selfAdd(-t.y),a=F.valueOf(n.x).selfAdd(-e.x),s=F.valueOf(n.y).selfAdd(-e.y);return i.selfMultiply(s).selfSubtract(o.selfMultiply(a)).signum()},G.signOfDet2x2=function(t,e,n,r){return t.multiply(r).selfSubtract(e.multiply(n)).signum()},G.intersection=function(t,e,n,r){var i=F.valueOf(r.y).selfSubtract(n.y).selfMultiply(F.valueOf(e.x).selfSubtract(t.x)),o=F.valueOf(r.x).selfSubtract(n.x).selfMultiply(F.valueOf(e.y).selfSubtract(t.y)),a=i.subtract(o),s=F.valueOf(r.x).selfSubtract(n.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),l=F.valueOf(r.y).selfSubtract(n.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),u=s.subtract(l).selfDivide(a).doubleValue(),c=F.valueOf(t.x).selfAdd(F.valueOf(e.x).selfSubtract(t.x).selfMultiply(u)).doubleValue(),p=F.valueOf(e.x).selfSubtract(t.x).selfMultiply(F.valueOf(t.y).selfSubtract(n.y)),h=F.valueOf(e.y).selfSubtract(t.y).selfMultiply(F.valueOf(t.x).selfSubtract(n.x)),f=p.subtract(h).selfDivide(a).doubleValue(),d=F.valueOf(n.y).selfAdd(F.valueOf(r.y).selfSubtract(n.y).selfMultiply(f)).doubleValue();return new O(c,d)},G.orientationIndexFilter=function(t,e,n){var r=null,i=(t.x-n.x)*(e.y-n.y),o=(t.y-n.y)*(e.x-n.x),a=i-o;if(0<i){if(o<=0)return G.signum(a);r=i+o}else{if(!(i<0))return G.signum(a);if(0<=o)return G.signum(a);r=-i-o}var s=G.DP_SAFE_EPSILON*r;return s<=a||s<=-a?G.signum(a):2},G.signum=function(t){return 0<t?1:t<0?-1:0},z.DP_SAFE_EPSILON.get=function(){return 1e-15},Object.defineProperties(G,z);function U(){}var V={X:{configurable:!0},Y:{configurable:!0},Z:{configurable:!0},M:{configurable:!0}};V.X.get=function(){return 0},V.Y.get=function(){return 1},V.Z.get=function(){return 2},V.M.get=function(){return 3},U.prototype.setOrdinate=function(t,e,n){},U.prototype.size=function(){},U.prototype.getOrdinate=function(t,e){},U.prototype.getCoordinate=function(){},U.prototype.getCoordinateCopy=function(t){},U.prototype.getDimension=function(){},U.prototype.getX=function(t){},U.prototype.clone=function(){},U.prototype.expandEnvelope=function(t){},U.prototype.copy=function(){},U.prototype.getY=function(t){},U.prototype.toCoordinateArray=function(){},U.prototype.interfaces_=function(){return[E]},U.prototype.getClass=function(){return U},Object.defineProperties(U,V);function H(){}function q(){}var W,Y=((W=H)&&(X.__proto__=W),((X.prototype=Object.create(W&&W.prototype)).constructor=X).prototype.interfaces_=function(){return[]},X.prototype.getClass=function(){return X},X);function X(){W.call(this,"Projective point not representable on the Cartesian plane.")}q.arraycopy=function(t,e,n,r,i){for(var o=0,a=e;a<e+i;a++)n[r+o]=t[a],o++},q.getProperty=function(t){return{"line.separator":"\n"}[t]};function J(){var t,e,n,r,i,o,a,s,l,u,c,p,h,f,d,y,g,_,m,v;this.x=null,this.y=null,this.w=null,0===arguments.length?(this.x=0,this.y=0,this.w=1):1===arguments.length?(t=arguments[0],this.x=t.x,this.y=t.y,this.w=1):2===arguments.length?"number"==typeof arguments[0]&&"number"==typeof arguments[1]?(e=arguments[0],n=arguments[1],this.x=e,this.y=n,this.w=1):arguments[0]instanceof J&&arguments[1]instanceof J?(r=arguments[0],i=arguments[1],this.x=r.y*i.w-i.y*r.w,this.y=i.x*r.w-r.x*i.w,this.w=r.x*i.y-i.x*r.y):arguments[0]instanceof O&&arguments[1]instanceof O&&(o=arguments[0],a=arguments[1],this.x=o.y-a.y,this.y=a.x-o.x,this.w=o.x*a.y-a.x*o.y):3===arguments.length?(s=arguments[0],l=arguments[1],u=arguments[2],this.x=s,this.y=l,this.w=u):4===arguments.length&&(p=arguments[1],h=arguments[2],f=arguments[3],d=(c=arguments[0]).y-p.y,y=p.x-c.x,g=c.x*p.y-p.x*c.y,_=h.y-f.y,m=f.x-h.x,v=h.x*f.y-f.x*h.y,this.x=y*v-m*g,this.y=_*g-d*v,this.w=d*m-_*y)}J.prototype.getY=function(){var t=this.y/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new Y;return t},J.prototype.getX=function(){var t=this.x/this.w;if(m.isNaN(t)||m.isInfinite(t))throw new Y;return t},J.prototype.getCoordinate=function(){var t=new O;return t.x=this.getX(),t.y=this.getY(),t},J.prototype.interfaces_=function(){return[]},J.prototype.getClass=function(){return J},J.intersection=function(t,e,n,r){var i=t.y-e.y,o=e.x-t.x,a=t.x*e.y-e.x*t.y,s=n.y-r.y,l=r.x-n.x,u=n.x*r.y-r.x*n.y,c=i*l-s*o,p=(o*u-l*a)/c,h=(s*a-i*u)/c;if(m.isNaN(p)||m.isInfinite(p)||m.isNaN(h)||m.isInfinite(h))throw new Y;return new O(p,h)};function Z(){var t,e,n,r,i,o,a,s;this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,0===arguments.length?this.init():1===arguments.length?arguments[0]instanceof O?(t=arguments[0],this.init(t.x,t.x,t.y,t.y)):arguments[0]instanceof Z&&(e=arguments[0],this.init(e)):2===arguments.length?(n=arguments[0],r=arguments[1],this.init(n.x,r.x,n.y,r.y)):4===arguments.length&&(i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],this.init(i,o,a,s))}var K={serialVersionUID:{configurable:!0}};Z.prototype.getArea=function(){return this.getWidth()*this.getHeight()},Z.prototype.equals=function(t){if(!(t instanceof Z))return!1;var e=t;return this.isNull()?e.isNull():this._maxx===e.getMaxX()&&this._maxy===e.getMaxY()&&this._minx===e.getMinX()&&this._miny===e.getMinY()},Z.prototype.intersection=function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new Z;var e=this._minx>t._minx?this._minx:t._minx,n=this._miny>t._miny?this._miny:t._miny,r=this._maxx<t._maxx?this._maxx:t._maxx,i=this._maxy<t._maxy?this._maxy:t._maxy;return new Z(e,r,n,i)},Z.prototype.isNull=function(){return this._maxx<this._minx},Z.prototype.getMaxX=function(){return this._maxx},Z.prototype.covers=function(){if(1===arguments.length){if(arguments[0]instanceof O){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof Z){var e=arguments[0];return!this.isNull()&&!e.isNull()&&e.getMinX()>=this._minx&&e.getMaxX()<=this._maxx&&e.getMinY()>=this._miny&&e.getMaxY()<=this._maxy}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&n>=this._minx&&n<=this._maxx&&r>=this._miny&&r<=this._maxy}},Z.prototype.intersects=function(){if(1===arguments.length){if(arguments[0]instanceof Z){var t=arguments[0];return!this.isNull()&&!t.isNull()&&!(t._minx>this._maxx||t._maxx<this._minx||t._miny>this._maxy||t._maxy<this._miny)}if(arguments[0]instanceof O){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return!this.isNull()&&!(n>this._maxx||n<this._minx||r>this._maxy||r<this._miny)}},Z.prototype.getMinY=function(){return this._miny},Z.prototype.getMinX=function(){return this._minx},Z.prototype.expandToInclude=function(){var t,e;if(1===arguments.length){if(arguments[0]instanceof O){var n=arguments[0];this.expandToInclude(n.x,n.y)}else if(arguments[0]instanceof Z){var r=arguments[0];if(r.isNull())return null;this.isNull()?(this._minx=r.getMinX(),this._maxx=r.getMaxX(),this._miny=r.getMinY(),this._maxy=r.getMaxY()):(r._minx<this._minx&&(this._minx=r._minx),r._maxx>this._maxx&&(this._maxx=r._maxx),r._miny<this._miny&&(this._miny=r._miny),r._maxy>this._maxy&&(this._maxy=r._maxy))}}else 2===arguments.length&&(t=arguments[0],e=arguments[1],this.isNull()?(this._minx=t,this._maxx=t,this._miny=e,this._maxy=e):(t<this._minx&&(this._minx=t),t>this._maxx&&(this._maxx=t),e<this._miny&&(this._miny=e),e>this._maxy&&(this._maxy=e)))},Z.prototype.minExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t<e?t:e},Z.prototype.getWidth=function(){return this.isNull()?0:this._maxx-this._minx},Z.prototype.compareTo=function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this._minx<e._minx?-1:this._minx>e._minx?1:this._miny<e._miny?-1:this._miny>e._miny?1:this._maxx<e._maxx?-1:this._maxx>e._maxx?1:this._maxy<e._maxy?-1:this._maxy>e._maxy?1:0},Z.prototype.translate=function(t,e){if(this.isNull())return null;this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},Z.prototype.toString=function(){return"Env["+this._minx+" : "+this._maxx+", "+this._miny+" : "+this._maxy+"]"},Z.prototype.setToNull=function(){this._minx=0,this._maxx=-1,this._miny=0,this._maxy=-1},Z.prototype.getHeight=function(){return this.isNull()?0:this._maxy-this._miny},Z.prototype.maxExtent=function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e<t?t:e},Z.prototype.expandBy=function(){if(1===arguments.length){var t=arguments[0];this.expandBy(t,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this._minx-=e,this._maxx+=e,this._miny-=n,this._maxy+=n,(this._minx>this._maxx||this._miny>this._maxy)&&this.setToNull()}},Z.prototype.contains=function(){if(1===arguments.length){if(arguments[0]instanceof Z){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof O){var e=arguments[0];return this.covers(e)}}else if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},Z.prototype.centre=function(){return this.isNull()?null:new O((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},Z.prototype.init=function(){var t,e,n,r,i,o,a,s;0===arguments.length?this.setToNull():1===arguments.length?arguments[0]instanceof O?(t=arguments[0],this.init(t.x,t.x,t.y,t.y)):arguments[0]instanceof Z&&(e=arguments[0],this._minx=e._minx,this._maxx=e._maxx,this._miny=e._miny,this._maxy=e._maxy):2===arguments.length?(n=arguments[0],r=arguments[1],this.init(n.x,r.x,n.y,r.y)):4===arguments.length&&(a=arguments[2],s=arguments[3],(i=arguments[0])<(o=arguments[1])?(this._minx=i,this._maxx=o):(this._minx=o,this._maxx=i),a<s?(this._miny=a,this._maxy=s):(this._miny=s,this._maxy=a))},Z.prototype.getMaxY=function(){return this._maxy},Z.prototype.distance=function(t){if(this.intersects(t))return 0;var e=0;this._maxx<t._minx?e=t._minx-this._maxx:this._minx>t._maxx&&(e=this._minx-t._maxx);var n=0;return this._maxy<t._miny?n=t._miny-this._maxy:this._miny>t._maxy&&(n=this._miny-t._maxy),0===e?n:0===n?e:Math.sqrt(e*e+n*n)},Z.prototype.hashCode=function(){return 37*(37*(37*(629+O.hashCode(this._minx))+O.hashCode(this._maxx))+O.hashCode(this._miny))+O.hashCode(this._maxy)},Z.prototype.interfaces_=function(){return[C,e]},Z.prototype.getClass=function(){return Z},Z.intersects=function(){if(3===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(4===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=Math.min(o.x,a.x),l=Math.max(o.x,a.x),u=Math.min(r.x,i.x),c=Math.max(r.x,i.x);return!(l<u||c<s||(s=Math.min(o.y,a.y),l=Math.max(o.y,a.y),u=Math.min(r.y,i.y),c=Math.max(r.y,i.y),l<u||c<s))}},K.serialVersionUID.get=function(){return 0x51845cd552189800},Object.defineProperties(Z,K);function $(t){this.geometryFactory=t||new ze}var Q={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};$.prototype.read=function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var i=Q.typeStr.exec(t);if(-1!==t.search("EMPTY")&&((i=Q.emptyTypeStr.exec(t))[2]=void 0),i&&(n=i[1].toLowerCase(),r=i[2],nt[n]&&(e=nt[n].apply(this,[r]))),void 0===e)throw new Error("Could not parse WKT "+t);return e},$.prototype.write=function(t){return this.extractGeometry(t)},$.prototype.extractGeometry=function(t){var e=t.getGeometryType().toLowerCase();if(!et[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+et[e].apply(this,[t])+")"};function tt(t){this.parser=new $(t)}var et={coordinate:function(t){return t.x+" "+t.y},point:function(t){return et.coordinate.call(this,t._coordinates._coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+et.point.apply(this,[t._geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(et.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t._points._coordinates.length;n<r;++n)e.push(et.coordinate.apply(this,[t._points._coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+et.linestring.apply(this,[t._geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+et.linestring.apply(this,[t._shell])+")");for(var n=0,r=t._holes.length;n<r;++n)e.push("("+et.linestring.apply(this,[t._holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push("("+et.polygon.apply(this,[t._geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t._geometries.length;n<r;++n)e.push(this.extractGeometry(t._geometries[n]));return e.join(",")}},nt={point:function(t){if(void 0===t)return this.geometryFactory.createPoint();var e=t.trim().split(Q.spaces);return this.geometryFactory.createPoint(new O(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(void 0===t)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Q.trimParens,"$1"),r.push(nt.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(void 0===t)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Q.spaces),r.push(new O(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(void 0===t)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],i=0,o=n.length;i<o;++i)e=n[i].trim().split(Q.spaces),r.push(new O(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(void 0===t)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(Q.parenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Q.trimParens,"$1"),r.push(nt.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(void 0===t)return this.geometryFactory.createPolygon();for(var e,n,r,i,o=t.trim().split(Q.parenComma),a=[],s=0,l=o.length;s<l;++s)e=o[s].replace(Q.trimParens,"$1"),n=nt.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n._points),0===s?i=r:a.push(r);return this.geometryFactory.createPolygon(i,a)},multipolygon:function(t){if(void 0===t)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(Q.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)e=n[i].replace(Q.trimParens,"$1"),r.push(nt.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(void 0===t)return this.geometryFactory.createGeometryCollection();for(var e=(t=t.replace(/,\s*([A-Za-z])/g,"|$1")).trim().split("|"),n=[],r=0,i=e.length;r<i;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}};tt.prototype.write=function(t){return this.parser.write(t)},tt.toLineString=function(t,e){if(2!==arguments.length)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"};function rt(){}var it,ot,at=((ot=Error)&&(ut.__proto__=ot),(ut.prototype=Object.create(ot&&ot.prototype)).constructor=ut),st=((it=at)&&(lt.__proto__=it),((lt.prototype=Object.create(it&&it.prototype)).constructor=lt).prototype.interfaces_=function(){return[]},lt.prototype.getClass=function(){return lt},lt);function lt(){var t;it.call(this),0===arguments.length?it.call(this):1===arguments.length&&(t=arguments[0],it.call(this,t))}function ut(t){ot.call(this,t),this.name="RuntimeException",this.message=t,this.stack=(new ot).stack}rt.prototype.interfaces_=function(){return[]},rt.prototype.getClass=function(){return rt},rt.shouldNeverReachHere=function(){if(0===arguments.length)rt.shouldNeverReachHere(null);else if(1===arguments.length){var t=arguments[0];throw new st("Should never reach here"+(null!==t?": "+t:""))}},rt.isTrue=function(){var t;if(1===arguments.length)rt.isTrue(arguments[0],null);else if(2===arguments.length&&(t=arguments[1],!arguments[0]))throw null===t?new st:new st(t)},rt.equals=function(){var t,e,n;if(2===arguments.length)rt.equals(t=arguments[0],e=arguments[1],null);else if(3===arguments.length&&(t=arguments[0],n=arguments[2],!(e=arguments[1]).equals(t)))throw new st("Expected "+t+" but encountered "+e+(null!==n?": "+n:""))};function ct(){this._result=null,this._inputLines=Array(2).fill().map(function(){return Array(2)}),this._intPt=new Array(2).fill(null),this._intLineIndex=null,this._isProper=null,this._pa=null,this._pb=null,this._precisionModel=null,this._intPt[0]=new O,this._intPt[1]=new O,this._pa=this._intPt[0],this._pb=this._intPt[1],this._result=0}var pt={DONT_INTERSECT:{configurable:!0},DO_INTERSECT:{configurable:!0},COLLINEAR:{configurable:!0},NO_INTERSECTION:{configurable:!0},POINT_INTERSECTION:{configurable:!0},COLLINEAR_INTERSECTION:{configurable:!0}};ct.prototype.getIndexAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intLineIndex[t][e]},ct.prototype.getTopologySummary=function(){var t=new R;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},ct.prototype.computeIntersection=function(t,e,n,r){this._inputLines[0][0]=t,this._inputLines[0][1]=e,this._inputLines[1][0]=n,this._inputLines[1][1]=r,this._result=this.computeIntersect(t,e,n,r)},ct.prototype.getIntersectionNum=function(){return this._result},ct.prototype.computeIntLineIndex=function(){var t;0===arguments.length?null===this._intLineIndex&&(this._intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1)):1===arguments.length&&(t=arguments[0],this.getEdgeDistance(t,0)>this.getEdgeDistance(t,1)?(this._intLineIndex[t][0]=0,this._intLineIndex[t][1]=1):(this._intLineIndex[t][0]=1,this._intLineIndex[t][1]=0))},ct.prototype.isProper=function(){return this.hasIntersection()&&this._isProper},ct.prototype.setPrecisionModel=function(t){this._precisionModel=t},ct.prototype.isInteriorIntersection=function(){if(0===arguments.length)return!!this.isInteriorIntersection(0)||!!this.isInteriorIntersection(1);if(1===arguments.length){for(var t=arguments[0],e=0;e<this._result;e++)if(!this._intPt[e].equals2D(this._inputLines[t][0])&&!this._intPt[e].equals2D(this._inputLines[t][1]))return!0;return!1}},ct.prototype.getIntersection=function(t){return this._intPt[t]},ct.prototype.isEndPoint=function(){return this.hasIntersection()&&!this._isProper},ct.prototype.hasIntersection=function(){return this._result!==ct.NO_INTERSECTION},ct.prototype.getEdgeDistance=function(t,e){return ct.computeEdgeDistance(this._intPt[e],this._inputLines[t][0],this._inputLines[t][1])},ct.prototype.isCollinear=function(){return this._result===ct.COLLINEAR_INTERSECTION},ct.prototype.toString=function(){return tt.toLineString(this._inputLines[0][0],this._inputLines[0][1])+" - "+tt.toLineString(this._inputLines[1][0],this._inputLines[1][1])+this.getTopologySummary()},ct.prototype.getEndpoint=function(t,e){return this._inputLines[t][e]},ct.prototype.isIntersection=function(t){for(var e=0;e<this._result;e++)if(this._intPt[e].equals2D(t))return!0;return!1},ct.prototype.getIntersectionAlongSegment=function(t,e){return this.computeIntLineIndex(),this._intPt[this._intLineIndex[t][e]]},ct.prototype.interfaces_=function(){return[]},ct.prototype.getClass=function(){return ct},ct.computeEdgeDistance=function(t,e,n){var r,i,o=Math.abs(n.x-e.x),a=Math.abs(n.y-e.y),s=-1;return t.equals(e)?s=0:t.equals(n)?s=a<o?o:a:(r=Math.abs(t.x-e.x),i=Math.abs(t.y-e.y),0!==(s=a<o?r:i)||t.equals(e)||(s=Math.max(r,i))),rt.isTrue(!(0===s&&!t.equals(e)),"Bad distance calculation"),s},ct.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,i=t.y-e.y,o=Math.sqrt(r*r+i*i);return rt.isTrue(!(0===o&&!t.equals(e)),"Invalid distance calculation"),o},pt.DONT_INTERSECT.get=function(){return 0},pt.DO_INTERSECT.get=function(){return 1},pt.COLLINEAR.get=function(){return 2},pt.NO_INTERSECTION.get=function(){return 0},pt.POINT_INTERSECTION.get=function(){return 1},pt.COLLINEAR_INTERSECTION.get=function(){return 2},Object.defineProperties(ct,pt);function ht(){}var ft,dt=((ft=ct)&&(yt.__proto__=ft),((yt.prototype=Object.create(ft&&ft.prototype)).constructor=yt).prototype.isInSegmentEnvelopes=function(t){var e=new Z(this._inputLines[0][0],this._inputLines[0][1]),n=new Z(this._inputLines[1][0],this._inputLines[1][1]);return e.contains(t)&&n.contains(t)},yt.prototype.computeIntersection=function(){if(3!==arguments.length)return ft.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];if(this._isProper=!1,Z.intersects(e,n,t)&&0===_t.orientationIndex(e,n,t)&&0===_t.orientationIndex(n,e,t))return this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this._result=ft.POINT_INTERSECTION,null;this._result=ft.NO_INTERSECTION},yt.prototype.normalizeToMinimum=function(t,e,n,r,i){i.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),i.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},yt.prototype.safeHCoordinateIntersection=function(e,n,r,i){var o=null;try{o=J.intersection(e,n,r,i)}catch(t){if(!(t instanceof Y))throw t;o=yt.nearestEndpoint(e,n,r,i)}return o},yt.prototype.intersection=function(t,e,n,r){var i=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(i)||(i=new O(yt.nearestEndpoint(t,e,n,r))),null!==this._precisionModel&&this._precisionModel.makePrecise(i),i},yt.prototype.smallestInAbsValue=function(t,e,n,r){var i=t,o=Math.abs(i);return Math.abs(e)<o&&(i=e,o=Math.abs(e)),Math.abs(n)<o&&(i=n,o=Math.abs(n)),Math.abs(r)<o&&(i=r),i},yt.prototype.checkDD=function(t,e,n,r,i){var o=G.intersection(t,e,n,r),a=this.isInSegmentEnvelopes(o);q.out.println("DD in env = "+a+"  --------------------- "+o),1e-4<i.distance(o)&&q.out.println("Distance = "+i.distance(o))},yt.prototype.intersectionWithNormalization=function(t,e,n,r){var i=new O(t),o=new O(e),a=new O(n),s=new O(r),l=new O;this.normalizeToEnvCentre(i,o,a,s,l);var u=this.safeHCoordinateIntersection(i,o,a,s);return u.x+=l.x,u.y+=l.y,u},yt.prototype.computeCollinearIntersection=function(t,e,n,r){var i=Z.intersects(t,e,n),o=Z.intersects(t,e,r),a=Z.intersects(n,r,t),s=Z.intersects(n,r,e);return i&&o?(this._intPt[0]=n,this._intPt[1]=r,ft.COLLINEAR_INTERSECTION):a&&s?(this._intPt[0]=t,this._intPt[1]=e,ft.COLLINEAR_INTERSECTION):i&&a?(this._intPt[0]=n,this._intPt[1]=t,!n.equals(t)||o||s?ft.COLLINEAR_INTERSECTION:ft.POINT_INTERSECTION):i&&s?(this._intPt[0]=n,this._intPt[1]=e,!n.equals(e)||o||a?ft.COLLINEAR_INTERSECTION:ft.POINT_INTERSECTION):o&&a?(this._intPt[0]=r,this._intPt[1]=t,!r.equals(t)||i||s?ft.COLLINEAR_INTERSECTION:ft.POINT_INTERSECTION):o&&s?(this._intPt[0]=r,this._intPt[1]=e,!r.equals(e)||i||a?ft.COLLINEAR_INTERSECTION:ft.POINT_INTERSECTION):ft.NO_INTERSECTION},yt.prototype.normalizeToEnvCentre=function(t,e,n,r,i){var o=t.x<e.x?t.x:e.x,a=t.y<e.y?t.y:e.y,s=t.x>e.x?t.x:e.x,l=t.y>e.y?t.y:e.y,u=n.x<r.x?n.x:r.x,c=n.y<r.y?n.y:r.y,p=n.x>r.x?n.x:r.x,h=n.y>r.y?n.y:r.y,f=((u<o?o:u)+(s<p?s:p))/2,d=((c<a?a:c)+(l<h?l:h))/2;i.x=f,i.y=d,t.x-=i.x,t.y-=i.y,e.x-=i.x,e.y-=i.y,n.x-=i.x,n.y-=i.y,r.x-=i.x,r.y-=i.y},yt.prototype.computeIntersect=function(t,e,n,r){if(this._isProper=!1,!Z.intersects(t,e,n,r))return ft.NO_INTERSECTION;var i=_t.orientationIndex(t,e,n),o=_t.orientationIndex(t,e,r);if(0<i&&0<o||i<0&&o<0)return ft.NO_INTERSECTION;var a=_t.orientationIndex(n,r,t),s=_t.orientationIndex(n,r,e);return 0<a&&0<s||a<0&&s<0?ft.NO_INTERSECTION:0===i&&0===o&&0===a&&0===s?this.computeCollinearIntersection(t,e,n,r):(0===i||0===o||0===a||0===s?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this._intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this._intPt[0]=e:0===i?this._intPt[0]=new O(n):0===o?this._intPt[0]=new O(r):0===a?this._intPt[0]=new O(t):0===s&&(this._intPt[0]=new O(e))):(this._isProper=!0,this._intPt[0]=this.intersection(t,e,n,r)),ft.POINT_INTERSECTION)},yt.prototype.interfaces_=function(){return[]},yt.prototype.getClass=function(){return yt},yt.nearestEndpoint=function(t,e,n,r){var i=t,o=_t.distancePointLine(t,n,r),a=_t.distancePointLine(e,n,r);return a<o&&(o=a,i=e),(a=_t.distancePointLine(n,t,e))<o&&(o=a,i=n),(a=_t.distancePointLine(r,t,e))<o&&(o=a,i=r),i},yt);function yt(){ft.apply(this,arguments)}ht.prototype.interfaces_=function(){return[]},ht.prototype.getClass=function(){return ht},ht.orientationIndex=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=n.x-e.x,a=n.y-e.y;return ht.signOfDet2x2(r,i,o,a)},ht.signOfDet2x2=function(t,e,n,r){var i,o=null,a=null,o=1;if(0===t||0===r)return 0===e||0===n?0:0<e?0<n?-o:o:0<n?o:-o;if(0===e||0===n)return 0<r?0<t?o:-o:0<t?-o:o;if(0<e?0<r?e<=r||(o=-o,a=t,t=n,n=a,a=e,e=r,r=a):r=e<=-r?(o=-o,n=-n,-r):(a=t,t=-n,n=a,a=e,e=-r,a):0<r?-e<=r?(o=-o,t=-t,e=-e):(a=-t,t=n,n=a,a=-e,e=r,r=a):r=r<=e?(t=-t,e=-e,n=-n,-r):(o=-o,a=-t,t=-n,n=a,a=-e,e=-r,a),0<t){if(!(0<n))return o;if(!(t<=n))return o}else{if(0<n)return-o;if(!(n<=t))return-o;o=-o,t=-t,n=-n}for(;;){if((r-=(i=Math.floor(n/t))*e)<0)return-o;if(e<r)return o;if((n-=i*t)+n<t){if(e<r+r)return o}else{if(r+r<e)return-o;n=t-n,r=e-r,o=-o}if(0===r)return 0===n?0:-o;if(0===n)return o;if((e-=(i=Math.floor(t/n))*r)<0)return o;if(r<e)return-o;if((t-=i*n)+t<n){if(r<e+e)return-o}else{if(e+e<r)return o;t=n-t,e=r-e,o=-o}if(0===e)return 0===t?0:o;if(0===t)return-o}};function gt(t){this._p=null,this._crossingCount=0,this._isPointOnSegment=!1,this._p=t}gt.prototype.countSegment=function(t,e){if(t.x<this._p.x&&e.x<this._p.x)return null;if(this._p.x===e.x&&this._p.y===e.y)return this._isPointOnSegment=!0,null;if(t.y===this._p.y&&e.y===this._p.y){var n=t.x,r=e.x;return r<n&&(n=e.x,r=t.x),this._p.x>=n&&this._p.x<=r&&(this._isPointOnSegment=!0),null}if(t.y>this._p.y&&e.y<=this._p.y||e.y>this._p.y&&t.y<=this._p.y){var i=t.x-this._p.x,o=t.y-this._p.y,a=e.x-this._p.x,s=e.y-this._p.y,l=ht.signOfDet2x2(i,o,a,s);if(0===l)return this._isPointOnSegment=!0,null;s<o&&(l=-l),0<l&&this._crossingCount++}},gt.prototype.isPointInPolygon=function(){return this.getLocation()!==A.EXTERIOR},gt.prototype.getLocation=function(){return this._isPointOnSegment?A.BOUNDARY:this._crossingCount%2==1?A.INTERIOR:A.EXTERIOR},gt.prototype.isOnSegment=function(){return this._isPointOnSegment},gt.prototype.interfaces_=function(){return[]},gt.prototype.getClass=function(){return gt},gt.locatePointInRing=function(){if(arguments[0]instanceof O&&N(arguments[1],U)){for(var t=arguments[1],e=new gt(arguments[0]),n=new O,r=new O,i=1;i<t.size();i++)if(t.getCoordinate(i,n),t.getCoordinate(i-1,r),e.countSegment(n,r),e.isOnSegment())return e.getLocation();return e.getLocation()}if(arguments[0]instanceof O&&arguments[1]instanceof Array){for(var o=arguments[1],a=new gt(arguments[0]),s=1;s<o.length;s++){var l=o[s],u=o[s-1];if(a.countSegment(l,u),a.isOnSegment())return a.getLocation()}return a.getLocation()}};var _t=function(){},mt={CLOCKWISE:{configurable:!0},RIGHT:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},LEFT:{configurable:!0},COLLINEAR:{configurable:!0},STRAIGHT:{configurable:!0}};_t.prototype.interfaces_=function(){return[]},_t.prototype.getClass=function(){return _t},_t.orientationIndex=function(t,e,n){return G.orientationIndex(t,e,n)},_t.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var i=t[r].x-n,o=t[r+1].y;e+=i*(t[r-1].y-o)}return e/2}if(N(arguments[0],U)){var a=arguments[0],s=a.size();if(s<3)return 0;var l=new O,u=new O,c=new O;a.getCoordinate(0,u),a.getCoordinate(1,c);var p=u.x;c.x-=p;for(var h=0,f=1;f<s-1;f++)l.y=u.y,u.x=c.x,u.y=c.y,a.getCoordinate(f+1,c),c.x-=p,h+=u.x*(l.y-c.y);return h/2}},_t.distanceLineLine=function(t,e,n,r){if(t.equals(e))return _t.distancePointLine(t,n,r);if(n.equals(r))return _t.distancePointLine(r,t,e);var i,o,a,s,l=!1;return!Z.intersects(t,e,n,r)||0==(i=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x))?l=!0:(o=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),a=((t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y))/i,((s=o/i)<0||1<s||a<0||1<a)&&(l=!0)),l?M.min(_t.distancePointLine(t,n,r),_t.distancePointLine(e,n,r),_t.distancePointLine(n,t,e),_t.distancePointLine(r,t,e)):0},_t.isPointInRing=function(t,e){return _t.locatePointInRing(t,e)!==A.EXTERIOR},_t.computeLength=function(t){var e=t.size();if(e<=1)return 0;var n=0,r=new O;t.getCoordinate(0,r);for(var i=r.x,o=r.y,a=1;a<e;a++){t.getCoordinate(a,r);var s=r.x,l=r.y,u=s-i,c=l-o;n+=Math.sqrt(u*u+c*c),i=s,o=l}return n},_t.isCCW=function(t){var e=t.length-1;if(e<3)throw new b("Ring has fewer than 4 points, so orientation cannot be determined");for(var n=t[0],r=0,i=1;i<=e;i++){var o=t[i];o.y>n.y&&(n=o,r=i)}for(var a=r;--a<0&&(a=e),t[a].equals2D(n)&&a!==r;);for(var s=r;t[s=(s+1)%e].equals2D(n)&&s!==r;);var l=t[a],u=t[s];if(l.equals2D(n)||u.equals2D(n)||l.equals2D(u))return!1;var c=_t.computeOrientation(l,n,u);return 0===c?l.x>u.x:0<c},_t.locatePointInRing=function(t,e){return gt.locatePointInRing(t,e)},_t.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),i=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(i)*Math.sqrt(r)},_t.computeOrientation=function(t,e,n){return _t.orientationIndex(t,e,n)},_t.distancePointLine=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(0===e.length)throw new b("Line array must contain at least one vertex");for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var i=_t.distancePointLine(t,e[r],e[r+1]);i<n&&(n=i)}return n}if(3===arguments.length){var o=arguments[0],a=arguments[1],s=arguments[2];if(a.x===s.x&&a.y===s.y)return o.distance(a);var l=(s.x-a.x)*(s.x-a.x)+(s.y-a.y)*(s.y-a.y),u=((o.x-a.x)*(s.x-a.x)+(o.y-a.y)*(s.y-a.y))/l;if(u<=0)return o.distance(a);if(1<=u)return o.distance(s);var c=((a.y-o.y)*(s.x-a.x)-(a.x-o.x)*(s.y-a.y))/l;return Math.abs(c)*Math.sqrt(l)}},_t.isOnLine=function(t,e){for(var n=new dt,r=1;r<e.length;r++){var i=e[r-1],o=e[r];if(n.computeIntersection(t,i,o),n.hasIntersection())return!0}return!1},mt.CLOCKWISE.get=function(){return-1},mt.RIGHT.get=function(){return _t.CLOCKWISE},mt.COUNTERCLOCKWISE.get=function(){return 1},mt.LEFT.get=function(){return _t.COUNTERCLOCKWISE},mt.COLLINEAR.get=function(){return 0},mt.STRAIGHT.get=function(){return _t.COLLINEAR},Object.defineProperties(_t,mt);function vt(){}vt.prototype.filter=function(t){},vt.prototype.interfaces_=function(){return[]},vt.prototype.getClass=function(){return vt};function bt(t){var e=t;this._envelope=null,this._factory=null,this._SRID=null,this._userData=null,this._factory=e,this._SRID=e.getSRID()}var wt={serialVersionUID:{configurable:!0},SORTINDEX_POINT:{configurable:!0},SORTINDEX_MULTIPOINT:{configurable:!0},SORTINDEX_LINESTRING:{configurable:!0},SORTINDEX_LINEARRING:{configurable:!0},SORTINDEX_MULTILINESTRING:{configurable:!0},SORTINDEX_POLYGON:{configurable:!0},SORTINDEX_MULTIPOLYGON:{configurable:!0},SORTINDEX_GEOMETRYCOLLECTION:{configurable:!0},geometryChangedFilter:{configurable:!0}};bt.prototype.isGeometryCollection=function(){return this.getSortIndex()===bt.SORTINDEX_GEOMETRYCOLLECTION},bt.prototype.getFactory=function(){return this._factory},bt.prototype.getGeometryN=function(t){return this},bt.prototype.getArea=function(){return 0},bt.prototype.isRectangle=function(){return!1},bt.prototype.equals=function(){if(arguments[0]instanceof bt){var t=arguments[0];return null!==t&&this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof bt))return!1;return this.equalsExact(e)}},bt.prototype.equalsExact=function(t){return this===t||this.equalsExact(t,0)},bt.prototype.geometryChanged=function(){this.apply(bt.geometryChangedFilter)},bt.prototype.geometryChangedAction=function(){this._envelope=null},bt.prototype.equalsNorm=function(t){return null!==t&&this.norm().equalsExact(t.norm())},bt.prototype.getLength=function(){return 0},bt.prototype.getNumGeometries=function(){return 1},bt.prototype.compareTo=function(){if(1===arguments.length){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(2===arguments.length){var n=arguments[0],r=arguments[1];return this.getSortIndex()!==n.getSortIndex()?this.getSortIndex()-n.getSortIndex():this.isEmpty()&&n.isEmpty()?0:this.isEmpty()?-1:n.isEmpty()?1:this.compareToSameClass(n,r)}},bt.prototype.getUserData=function(){return this._userData},bt.prototype.getSRID=function(){return this._SRID},bt.prototype.getEnvelope=function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},bt.prototype.checkNotGeometryCollection=function(t){if(t.getSortIndex()===bt.SORTINDEX_GEOMETRYCOLLECTION)throw new b("This method does not support GeometryCollection arguments")},bt.prototype.equal=function(t,e,n){return 0===n?t.equals(e):t.distance(e)<=n},bt.prototype.norm=function(){var t=this.copy();return t.normalize(),t},bt.prototype.getPrecisionModel=function(){return this._factory.getPrecisionModel()},bt.prototype.getEnvelopeInternal=function(){return null===this._envelope&&(this._envelope=this.computeEnvelopeInternal()),new Z(this._envelope)},bt.prototype.setSRID=function(t){this._SRID=t},bt.prototype.setUserData=function(t){this._userData=t},bt.prototype.compare=function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var i=n.next(),o=r.next(),a=i.compareTo(o);if(0!==a)return a}return n.hasNext()?1:r.hasNext()?-1:0},bt.prototype.hashCode=function(){return this.getEnvelopeInternal().hashCode()},bt.prototype.isGeometryCollectionOrDerived=function(){return this.getSortIndex()===bt.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===bt.SORTINDEX_MULTIPOINT||this.getSortIndex()===bt.SORTINDEX_MULTILINESTRING||this.getSortIndex()===bt.SORTINDEX_MULTIPOLYGON},bt.prototype.interfaces_=function(){return[E,C,e]},bt.prototype.getClass=function(){return bt},bt.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},bt.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(null===t[e])return!0;return!1},wt.serialVersionUID.get=function(){return 0x799ea46522854c00},wt.SORTINDEX_POINT.get=function(){return 0},wt.SORTINDEX_MULTIPOINT.get=function(){return 1},wt.SORTINDEX_LINESTRING.get=function(){return 2},wt.SORTINDEX_LINEARRING.get=function(){return 3},wt.SORTINDEX_MULTILINESTRING.get=function(){return 4},wt.SORTINDEX_POLYGON.get=function(){return 5},wt.SORTINDEX_MULTIPOLYGON.get=function(){return 6},wt.SORTINDEX_GEOMETRYCOLLECTION.get=function(){return 7},wt.geometryChangedFilter.get=function(){return xt},Object.defineProperties(bt,wt);var xt=function(){};xt.interfaces_=function(){return[vt]},xt.filter=function(t){t.geometryChangedAction()};function Ct(){}Ct.prototype.filter=function(t){},Ct.prototype.interfaces_=function(){return[]},Ct.prototype.getClass=function(){return Ct};function Et(){}var Pt={Mod2BoundaryNodeRule:{configurable:!0},EndPointBoundaryNodeRule:{configurable:!0},MultiValentEndPointBoundaryNodeRule:{configurable:!0},MonoValentEndPointBoundaryNodeRule:{configurable:!0},MOD2_BOUNDARY_RULE:{configurable:!0},ENDPOINT_BOUNDARY_RULE:{configurable:!0},MULTIVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},MONOVALENT_ENDPOINT_BOUNDARY_RULE:{configurable:!0},OGC_SFS_BOUNDARY_RULE:{configurable:!0}};Et.prototype.isInBoundary=function(t){},Et.prototype.interfaces_=function(){return[]},Et.prototype.getClass=function(){return Et},Pt.Mod2BoundaryNodeRule.get=function(){return Ot},Pt.EndPointBoundaryNodeRule.get=function(){return Tt},Pt.MultiValentEndPointBoundaryNodeRule.get=function(){return St},Pt.MonoValentEndPointBoundaryNodeRule.get=function(){return It},Pt.MOD2_BOUNDARY_RULE.get=function(){return new Ot},Pt.ENDPOINT_BOUNDARY_RULE.get=function(){return new Tt},Pt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new St},Pt.MONOVALENT_ENDPOINT_BOUNDARY_RULE.get=function(){return new It},Pt.OGC_SFS_BOUNDARY_RULE.get=function(){return Et.MOD2_BOUNDARY_RULE},Object.defineProperties(Et,Pt);var Ot=function(){};Ot.prototype.isInBoundary=function(t){return t%2==1},Ot.prototype.interfaces_=function(){return[Et]},Ot.prototype.getClass=function(){return Ot};var Tt=function(){};Tt.prototype.isInBoundary=function(t){return 0<t},Tt.prototype.interfaces_=function(){return[Et]},Tt.prototype.getClass=function(){return Tt};var St=function(){};St.prototype.isInBoundary=function(t){return 1<t},St.prototype.interfaces_=function(){return[Et]},St.prototype.getClass=function(){return St};var It=function(){};It.prototype.isInBoundary=function(t){return 1===t},It.prototype.interfaces_=function(){return[Et]},It.prototype.getClass=function(){return It};function At(){}At.prototype.add=function(){},At.prototype.addAll=function(){},At.prototype.isEmpty=function(){},At.prototype.iterator=function(){},At.prototype.size=function(){},At.prototype.toArray=function(){},At.prototype.remove=function(){},(n.prototype=new Error).name="IndexOutOfBoundsException";function Lt(){}Lt.prototype.hasNext=function(){},Lt.prototype.next=function(){},Lt.prototype.remove=function(){};var Nt,Mt=((Nt=At)&&(Dt.__proto__=Nt),((Dt.prototype=Object.create(Nt&&Nt.prototype)).constructor=Dt).prototype.get=function(){},Dt.prototype.set=function(){},Dt.prototype.isEmpty=function(){},Dt);function Dt(){Nt.apply(this,arguments)}(r.prototype=new Error).name="NoSuchElementException";function Rt(){}var jt,kt,Ft=((kt=Mt)&&(Vt.__proto__=kt),((Vt.prototype=Object.create(kt&&kt.prototype)).constructor=Vt).prototype.ensureCapacity=function(){},Vt.prototype.interfaces_=function(){return[kt,At]},Vt.prototype.add=function(t){return 1===arguments.length?this.array_.push(t):this.array_.splice(t,arguments[1]),!0},Vt.prototype.clear=function(){this.array_=[]},Vt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Vt.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},Vt.prototype.iterator=function(){return new Bt(this)},Vt.prototype.get=function(t){if(t<0||t>=this.size())throw new n;return this.array_[t]},Vt.prototype.isEmpty=function(){return 0===this.array_.length},Vt.prototype.size=function(){return this.array_.length},Vt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},Vt.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;n<r;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e},Vt),Bt=((jt=Lt)&&(Ut.__proto__=jt),((Ut.prototype=Object.create(jt&&jt.prototype)).constructor=Ut).prototype.next=function(){if(this.position_===this.arrayList_.size())throw new r;return this.arrayList_.get(this.position_++)},Ut.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},Ut.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},Ut.prototype.remove=function(){this.arrayList_.remove(this.arrayList_.get(this.position_))},Ut),Gt=function(v){function t(){var t,e,n;v.call(this),0===arguments.length||(1===arguments.length?(t=arguments[0],this.ensureCapacity(t.length),this.add(t,!0)):2===arguments.length&&(e=arguments[0],n=arguments[1],this.ensureCapacity(e.length),this.add(e,n)))}v&&(t.__proto__=v),(t.prototype=Object.create(v&&v.prototype)).constructor=t;var e={coordArrayType:{configurable:!0}};return e.coordArrayType.get=function(){return new Array(0).fill(null)},t.prototype.getCoordinate=function(t){return this.get(t)},t.prototype.addAll=function(){if(2!==arguments.length)return v.prototype.addAll.apply(this,arguments);for(var t=arguments[1],e=!1,n=arguments[0].iterator();n.hasNext();)this.add(n.next(),t),e=!0;return e},t.prototype.clone=function(){for(var t=v.prototype.clone.call(this),e=0;e<this.size();e++)t.add(e,this.get(e).copy());return t},t.prototype.toCoordinateArray=function(){return this.toArray(t.coordArrayType)},t.prototype.add=function(){if(1===arguments.length){var t=arguments[0];v.prototype.add.call(this,t)}else if(2===arguments.length){if(arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof O&&"boolean"==typeof arguments[1]){var r=arguments[0];if(!arguments[1]&&1<=this.size()&&this.get(this.size()-1).equals2D(r))return null;v.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&"boolean"==typeof arguments[1]){var i=arguments[0],o=arguments[1];return this.add(i,o),!0}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&arguments[0]instanceof Array&&"boolean"==typeof arguments[1]){var a=arguments[0],s=arguments[1];if(arguments[2])for(var l=0;l<a.length;l++)this.add(a[l],s);else for(var u=a.length-1;0<=u;u--)this.add(a[u],s);return!0}if("boolean"==typeof arguments[2]&&Number.isInteger(arguments[0])&&arguments[1]instanceof O){var c=arguments[0],p=arguments[1];if(!arguments[2]){var h=this.size();if(0<h){if(0<c&&this.get(c-1).equals2D(p))return null;if(c<h&&this.get(c).equals2D(p))return null}}v.prototype.add.call(this,c,p)}}else if(4===arguments.length){var f=arguments[0],d=arguments[1],y=arguments[2],g=arguments[3],_=1;g<y&&(_=-1);for(var m=y;m!==g;m+=_)this.add(f[m],d);return!0}},t.prototype.closeRing=function(){0<this.size()&&this.add(new O(this.get(0)),!1)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},Object.defineProperties(t,e),t}(Ft),zt={ForwardComparator:{configurable:!0},BidirectionalComparator:{configurable:!0},coordArrayType:{configurable:!0}};function Ut(t){jt.call(this),this.arrayList_=t,this.position_=0}function Vt(){kt.call(this),this.array_=[],arguments[0]instanceof At&&this.addAll(arguments[0])}zt.ForwardComparator.get=function(){return Ht},zt.BidirectionalComparator.get=function(){return qt},zt.coordArrayType.get=function(){return new Array(0).fill(null)},Rt.prototype.interfaces_=function(){return[]},Rt.prototype.getClass=function(){return Rt},Rt.isRing=function(t){return!(t.length<4||!t[0].equals2D(t[t.length-1]))},Rt.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Rt.indexOf(r,e)<0)return r}return null},Rt.scroll=function(t,e){var n=Rt.indexOf(e,t);if(n<0)return null;var r=new Array(t.length).fill(null);q.arraycopy(t,n,r,0,t.length-n),q.arraycopy(t,0,r,t.length-n,n),q.arraycopy(r,0,t,0,t.length)},Rt.equals=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(null===t||null===e)return!1;if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2];if(r===i)return!0;if(null===r||null===i)return!1;if(r.length!==i.length)return!1;for(var a=0;a<r.length;a++)if(0!==o.compare(r[a],i[a]))return!1;return!0}},Rt.intersection=function(t,e){for(var n=new Gt,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Rt.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Rt.removeRepeatedPoints=function(t){return Rt.hasRepeatedPoints(t)?new Gt(t,!1).toCoordinateArray():t},Rt.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;r<=n;r++){var i=t[r];t[r]=t[e-r],t[e-r]=i}},Rt.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)null!==t[n]&&e++;var r=new Array(e).fill(null);if(0===e)return r;for(var i=0,o=0;o<t.length;o++)null!==t[o]&&(r[i++]=t[o]);return r},Rt.copyDeep=function(){if(1===arguments.length){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new O(t[n]);return e}if(5===arguments.length)for(var r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],s=arguments[4],l=0;l<s;l++)o[a+l]=new O(r[i+l])},Rt.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=e[t.length-n-1];if(0!==r.compareTo(i))return!1}return!0},Rt.envelope=function(t){for(var e=new Z,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Rt.toCoordinateArray=function(t){return t.toArray(Rt.coordArrayType)},Rt.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Rt.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Rt.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(0!==r)return r}return 1},Rt.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(0!==r)return r;n++}return n<e.length?-1:n<t.length?1:0},Rt.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(null===e||0<e.compareTo(t[n]))&&(e=t[n]);return e},Rt.extract=function(t,e,n){e=M.clamp(e,0,t.length);var r=(n=M.clamp(n,-1,t.length))-e+1;n<0&&(r=0),e>=t.length&&(r=0),n<e&&(r=0);var i=new Array(r).fill(null);if(0===r)return i;for(var o=0,a=e;a<=n;a++)i[o++]=t[a];return i},Object.defineProperties(Rt,zt);var Ht=function(){};Ht.prototype.compare=function(t,e){return Rt.compare(t,e)},Ht.prototype.interfaces_=function(){return[P]},Ht.prototype.getClass=function(){return Ht};var qt=function(){};qt.prototype.compare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;var i=Rt.compare(n,r);return Rt.isEqualReversed(n,r)?0:i},qt.prototype.OLDcompare=function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(0===n.length)return 0;for(var i=Rt.increasingDirection(n),o=Rt.increasingDirection(r),a=0<i?0:n.length-1,s=0<o?0:n.length-1,l=0;l<n.length;l++){var u=n[a].compareTo(r[s]);if(0!==u)return u;a+=i,s+=o}return 0},qt.prototype.interfaces_=function(){return[P]},qt.prototype.getClass=function(){return qt};function Wt(){}Wt.prototype.get=function(){},Wt.prototype.put=function(){},Wt.prototype.size=function(){},Wt.prototype.values=function(){},Wt.prototype.entrySet=function(){};var Yt,Xt=((Yt=Wt)&&(Jt.__proto__=Yt),(Jt.prototype=Object.create(Yt&&Yt.prototype)).constructor=Jt);function Jt(){Yt.apply(this,arguments)}(i.prototype=new Error).name="OperationNotSupported",(o.prototype=new At).contains=function(){};var Zt,Kt,$t=((Kt=o)&&(ne.__proto__=Kt),((ne.prototype=Object.create(Kt&&Kt.prototype)).constructor=ne).prototype.contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(this.array_[e]===t)return!0;return!1},ne.prototype.add=function(t){return!this.contains(t)&&(this.array_.push(t),!0)},ne.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},ne.prototype.remove=function(t){throw new Error},ne.prototype.size=function(){return this.array_.length},ne.prototype.isEmpty=function(){return 0===this.array_.length},ne.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},ne.prototype.iterator=function(){return new Qt(this)},ne),Qt=((Zt=Lt)&&(ee.__proto__=Zt),((ee.prototype=Object.create(Zt&&Zt.prototype)).constructor=ee).prototype.next=function(){if(this.position_===this.hashSet_.size())throw new r;return this.hashSet_.array_[this.position_++]},ee.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},ee.prototype.remove=function(){throw new i},ee),te=0;function ee(t){Zt.call(this),this.hashSet_=t,this.position_=0}function ne(){Kt.call(this),this.array_=[],arguments[0]instanceof At&&this.addAll(arguments[0])}(p.prototype=new Xt).get=function(t){for(var e=this.root_;null!==e;){var n=t.compareTo(e.key);if(n<0)e=e.left;else{if(!(0<n))return e.value;e=e.right}}return null},p.prototype.put=function(t,e){if(null===this.root_)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:te,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,i=this.root_;do{if(n=i,(r=t.compareTo(i.key))<0)i=i.left;else{if(!(0<r)){var o=i.value;return i.value=e,o}i=i.right}}while(null!==i);var a={key:t,left:null,right:null,value:e,parent:n,color:te,getValue:function(){return this.value},getKey:function(){return this.key}};return r<0?n.left=a:n.right=a,this.fixAfterInsertion(a),this.size_++,null},p.prototype.fixAfterInsertion=function(t){for(t.color=1;null!=t&&t!==this.root_&&1===t.parent.color;){var e,n;s(t)===u(s(s(t)))?1===a(e=c(s(s(t))))?(l(s(t),te),l(e,te),l(s(s(t)),1),t=s(s(t))):(t===c(s(t))&&(t=s(t),this.rotateLeft(t)),l(s(t),te),l(s(s(t)),1),this.rotateRight(s(s(t)))):1===a(n=u(s(s(t))))?(l(s(t),te),l(n,te),l(s(s(t)),1),t=s(s(t))):(t===u(s(t))&&(t=s(t),this.rotateRight(t)),l(s(t),te),l(s(s(t)),1),this.rotateLeft(s(s(t))))}this.root_.color=te},p.prototype.values=function(){var t=new Ft,e=this.getFirstEntry();if(null!==e)for(t.add(e.value);null!==(e=p.successor(e));)t.add(e.value);return t},p.prototype.entrySet=function(){var t=new $t,e=this.getFirstEntry();if(null!==e)for(t.add(e);null!==(e=p.successor(e));)t.add(e);return t},p.prototype.rotateLeft=function(t){var e;null!=t&&(e=t.right,t.right=e.left,null!=e.left&&(e.left.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.left===t?t.parent.left=e:t.parent.right=e,(e.left=t).parent=e)},p.prototype.rotateRight=function(t){var e;null!=t&&(e=t.left,t.left=e.right,null!=e.right&&(e.right.parent=t),e.parent=t.parent,null===t.parent?this.root_=e:t.parent.right===t?t.parent.right=e:t.parent.left=e,(e.right=t).parent=e)},p.prototype.getFirstEntry=function(){var t=this.root_;if(null!=t)for(;null!=t.left;)t=t.left;return t},p.successor=function(t){if(null===t)return null;if(null!==t.right){for(var e=t.right;null!==e.left;)e=e.left;return e}for(var n=t.parent,r=t;null!==n&&r===n.right;)n=(r=n).parent;return n},p.prototype.size=function(){return this.size_};function re(){}re.prototype.interfaces_=function(){return[]},re.prototype.getClass=function(){return re},h.prototype=new o,(f.prototype=new h).contains=function(t){for(var e=0,n=this.array_.length;e<n;e++)if(0===this.array_[e].compareTo(t))return!0;return!1},f.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;e<n;e++)if(1===this.array_[e].compareTo(t))return this.array_.splice(e,0,t),!0;return this.array_.push(t),!0},f.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},f.prototype.remove=function(t){throw new i},f.prototype.size=function(){return this.array_.length},f.prototype.isEmpty=function(){return 0===this.array_.length},f.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t},f.prototype.iterator=function(){return new ie(this)};var ie=function(t){this.treeSet_=t,this.position_=0};ie.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new r;return this.treeSet_.array_[this.position_++]},ie.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},ie.prototype.remove=function(){throw new i};function oe(){}oe.sort=function(){var t,e,n,r,i=arguments[0];if(1===arguments.length)r=function(t,e){return t.compareTo(e)},i.sort(r);else if(2===arguments.length)n=arguments[1],r=function(t,e){return n.compare(t,e)},i.sort(r);else if(3===arguments.length){(e=i.slice(arguments[1],arguments[2])).sort();var o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length));for(i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])}else if(4===arguments.length)for(e=i.slice(arguments[1],arguments[2]),n=arguments[3],r=function(t,e){return n.compare(t,e)},e.sort(r),o=i.slice(0,arguments[1]).concat(e,i.slice(arguments[2],i.length)),i.splice(0,i.length),t=0;t<o.length;t++)i.push(o[t])},oe.asList=function(t){for(var e=new Ft,n=0,r=t.length;n<r;n++)e.add(t[n]);return e};function ae(){}var se={P:{configurable:!0},L:{configurable:!0},A:{configurable:!0},FALSE:{configurable:!0},TRUE:{configurable:!0},DONTCARE:{configurable:!0},SYM_FALSE:{configurable:!0},SYM_TRUE:{configurable:!0},SYM_DONTCARE:{configurable:!0},SYM_P:{configurable:!0},SYM_L:{configurable:!0},SYM_A:{configurable:!0}};se.P.get=function(){return 0},se.L.get=function(){return 1},se.A.get=function(){return 2},se.FALSE.get=function(){return-1},se.TRUE.get=function(){return-2},se.DONTCARE.get=function(){return-3},se.SYM_FALSE.get=function(){return"F"},se.SYM_TRUE.get=function(){return"T"},se.SYM_DONTCARE.get=function(){return"*"},se.SYM_P.get=function(){return"0"},se.SYM_L.get=function(){return"1"},se.SYM_A.get=function(){return"2"},ae.prototype.interfaces_=function(){return[]},ae.prototype.getClass=function(){return ae},ae.toDimensionSymbol=function(t){switch(t){case ae.FALSE:return ae.SYM_FALSE;case ae.TRUE:return ae.SYM_TRUE;case ae.DONTCARE:return ae.SYM_DONTCARE;case ae.P:return ae.SYM_P;case ae.L:return ae.SYM_L;case ae.A:return ae.SYM_A}throw new b("Unknown dimension value: "+t)},ae.toDimensionValue=function(t){switch(k.toUpperCase(t)){case ae.SYM_FALSE:return ae.FALSE;case ae.SYM_TRUE:return ae.TRUE;case ae.SYM_DONTCARE:return ae.DONTCARE;case ae.SYM_P:return ae.P;case ae.SYM_L:return ae.L;case ae.SYM_A:return ae.A}throw new b("Unknown dimension symbol: "+t)},Object.defineProperties(ae,se);function le(){}le.prototype.filter=function(t){},le.prototype.interfaces_=function(){return[]},le.prototype.getClass=function(){return le};function ue(){}ue.prototype.filter=function(t,e){},ue.prototype.isDone=function(){},ue.prototype.isGeometryChanged=function(){},ue.prototype.interfaces_=function(){return[]},ue.prototype.getClass=function(){return ue};var ce=function(i){function n(t,e){if(i.call(this,e),this._geometries=t||[],i.hasNullElements(this._geometries))throw new b("geometries must not contain null elements")}i&&(n.__proto__=i);var t={serialVersionUID:{configurable:!0}};return((n.prototype=Object.create(i&&i.prototype)).constructor=n).prototype.computeEnvelopeInternal=function(){for(var t=new Z,e=0;e<this._geometries.length;e++)t.expandToInclude(this._geometries[e].getEnvelopeInternal());return t},n.prototype.getGeometryN=function(t){return this._geometries[t]},n.prototype.getSortIndex=function(){return i.SORTINDEX_GEOMETRYCOLLECTION},n.prototype.getCoordinates=function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this._geometries.length;n++)for(var r=this._geometries[n].getCoordinates(),i=0;i<r.length;i++)t[++e]=r[i];return t},n.prototype.getArea=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getArea();return t},n.prototype.equalsExact=function(){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._geometries.length!==n._geometries.length)return!1;for(var r=0;r<this._geometries.length;r++)if(!this._geometries[r].equalsExact(n._geometries[r],e))return!1;return!0},n.prototype.normalize=function(){for(var t=0;t<this._geometries.length;t++)this._geometries[t].normalize();oe.sort(this._geometries)},n.prototype.getCoordinate=function(){return this.isEmpty()?null:this._geometries[0].getCoordinate()},n.prototype.getBoundaryDimension=function(){for(var t=ae.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getBoundaryDimension());return t},n.prototype.getDimension=function(){for(var t=ae.FALSE,e=0;e<this._geometries.length;e++)t=Math.max(t,this._geometries[e].getDimension());return t},n.prototype.getLength=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getLength();return t},n.prototype.getNumPoints=function(){for(var t=0,e=0;e<this._geometries.length;e++)t+=this._geometries[e].getNumPoints();return t},n.prototype.getNumGeometries=function(){return this._geometries.length},n.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},n.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=new f(oe.asList(this._geometries)),n=new f(oe.asList(t._geometries));return this.compare(e,n)}if(2===arguments.length){for(var r=arguments[1],i=arguments[0],o=this.getNumGeometries(),a=i.getNumGeometries(),s=0;s<o&&s<a;){var l=this.getGeometryN(s),u=i.getGeometryN(s),c=l.compareToSameClass(u,r);if(0!==c)return c;s++}return s<o?1:s<a?-1:0}},n.prototype.apply=function(){if(N(arguments[0],Ct))for(var t=arguments[0],e=0;e<this._geometries.length;e++)this._geometries[e].apply(t);else if(N(arguments[0],ue)){var n=arguments[0];if(0===this._geometries.length)return null;for(var r=0;r<this._geometries.length&&(this._geometries[r].apply(n),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else if(N(arguments[0],le)){var i=arguments[0];i.filter(this);for(var o=0;o<this._geometries.length;o++)this._geometries[o].apply(i)}else if(N(arguments[0],vt)){var a=arguments[0];a.filter(this);for(var s=0;s<this._geometries.length;s++)this._geometries[s].apply(a)}},n.prototype.getBoundary=function(){return this.checkNotGeometryCollection(this),rt.shouldNeverReachHere(),null},n.prototype.clone=function(){var t=i.prototype.clone.call(this);t._geometries=new Array(this._geometries.length).fill(null);for(var e=0;e<this._geometries.length;e++)t._geometries[e]=this._geometries[e].clone();return t},n.prototype.getGeometryType=function(){return"GeometryCollection"},n.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new n(t,this._factory)},n.prototype.isEmpty=function(){for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isEmpty())return!1;return!0},n.prototype.interfaces_=function(){return[]},n.prototype.getClass=function(){return n},t.serialVersionUID.get=function(){return-0x4f07bcb1f857d800},Object.defineProperties(n,t),n}(bt),pe=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return bt.SORTINDEX_MULTILINESTRING},r.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)},r.prototype.getBoundaryDimension=function(){return this.isClosed()?ae.FALSE:0},r.prototype.isClosed=function(){if(this.isEmpty())return!1;for(var t=0;t<this._geometries.length;t++)if(!this._geometries[t].isClosed())return!1;return!0},r.prototype.getDimension=function(){return 1},r.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[t-1-n]=this._geometries[n].reverse();return this.getFactory().createMultiLineString(e)},r.prototype.getBoundary=function(){return new he(this).getBoundary()},r.prototype.getGeometryType=function(){return"MultiLineString"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[re]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return 0x7155d2ab4afa8000},Object.defineProperties(r,t),r}(ce),he=function(t,e){var n,r,i,o;this._geom=null,this._geomFact=null,this._bnRule=null,this._endpointMap=null,1===arguments.length?(n=t,r=Et.MOD2_BOUNDARY_RULE,this._geom=n,this._geomFact=n.getFactory(),this._bnRule=r):2===arguments.length&&(i=t,o=e,this._geom=i,this._geomFact=i.getFactory(),this._bnRule=o)};he.prototype.boundaryMultiLineString=function(t){if(this._geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return 1===e.length?this._geomFact.createPoint(e[0]):this._geomFact.createMultiPointFromCoords(e)},he.prototype.getBoundary=function(){return this._geom instanceof me?this.boundaryLineString(this._geom):this._geom instanceof pe?this.boundaryMultiLineString(this._geom):this._geom.getBoundary()},he.prototype.boundaryLineString=function(t){return this._geom.isEmpty()?this.getEmptyMultiPoint():t.isClosed()?this._bnRule.isInBoundary(2)?t.getStartPoint():this._geomFact.createMultiPoint():this._geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},he.prototype.getEmptyMultiPoint=function(){return this._geomFact.createMultiPoint()},he.prototype.computeBoundaryCoordinates=function(t){var e=new Ft;this._endpointMap=new p;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);0!==r.getNumPoints()&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var i=this._endpointMap.entrySet().iterator();i.hasNext();){var o=i.next(),a=o.getValue().count;this._bnRule.isInBoundary(a)&&e.add(o.getKey())}return Rt.toCoordinateArray(e)},he.prototype.addEndpoint=function(t){var e=this._endpointMap.get(t);null===e&&(e=new fe,this._endpointMap.put(t,e)),e.count++},he.prototype.interfaces_=function(){return[]},he.prototype.getClass=function(){return he},he.getBoundary=function(){return 1===arguments.length?new he(arguments[0]).getBoundary():2===arguments.length?new he(arguments[0],arguments[1]).getBoundary():void 0};var fe=function(){this.count=null};fe.prototype.interfaces_=function(){return[]},fe.prototype.getClass=function(){return fe};function de(){}var ye={NEWLINE:{configurable:!0},SIMPLE_ORDINATE_FORMAT:{configurable:!0}};de.prototype.interfaces_=function(){return[]},de.prototype.getClass=function(){return de},de.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;r<e;r++)n[r]=t;return String(n)},de.getStackTrace=function(){if(1===arguments.length){var t=new function(){},e=new function(){};return arguments[0].printStackTrace(e),t.toString()}if(2===arguments.length){for(var n=arguments[1],r="",i=new function(){}(new function(){}(de.getStackTrace(arguments[0]))),o=0;o<n;o++)try{r+=i.readLine()+de.NEWLINE}catch(t){if(!(t instanceof d))throw t;rt.shouldNeverReachHere()}return r}},de.split=function(t,e){for(var n=e.length,r=new Ft,i=""+t,o=i.indexOf(e);0<=o;){var a=i.substring(0,o);r.add(a),o=(i=i.substring(o+n)).indexOf(e)}0<i.length&&r.add(i);for(var s=new Array(r.size()).fill(null),l=0;l<s.length;l++)s[l]=r.get(l);return s},de.toString=function(){if(1===arguments.length){var t=arguments[0];return de.SIMPLE_ORDINATE_FORMAT.format(t)}},de.spaces=function(t){return de.chars(" ",t)},ye.NEWLINE.get=function(){return q.getProperty("line.separator")},ye.SIMPLE_ORDINATE_FORMAT.get=function(){return new function(){}},Object.defineProperties(de,ye);function ge(){}ge.prototype.interfaces_=function(){return[]},ge.prototype.getClass=function(){return ge},ge.copyCoord=function(t,e,n,r){for(var i=Math.min(t.getDimension(),n.getDimension()),o=0;o<i;o++)n.setOrdinate(r,o,t.getOrdinate(e,o))},ge.isRing=function(t){var e=t.size();return 0===e||!(e<=3)&&t.getOrdinate(0,U.X)===t.getOrdinate(e-1,U.X)&&t.getOrdinate(0,U.Y)===t.getOrdinate(e-1,U.Y)},ge.isEqual=function(t,e){var n=t.size();if(n!==e.size())return!1;for(var r=Math.min(t.getDimension(),e.getDimension()),i=0;i<n;i++)for(var o=0;o<r;o++){var a=t.getOrdinate(i,o),s=e.getOrdinate(i,o);if(!(t.getOrdinate(i,o)===e.getOrdinate(i,o)||m.isNaN(a)&&m.isNaN(s)))return!1}return!0},ge.extend=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();if(ge.copy(e,0,r,0,i),0<i)for(var o=i;o<n;o++)ge.copy(e,i-1,r,o,1);return r},ge.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;r<=n;r++)ge.swap(t,r,e-r)},ge.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var i=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,i)}},ge.copy=function(t,e,n,r,i){for(var o=0;o<i;o++)ge.copyCoord(t,e+o,n,r+o)},ge.toString=function(){if(1===arguments.length){var t=arguments[0],e=t.size();if(0===e)return"()";var n=t.getDimension(),r=new R;r.append("(");for(var i=0;i<e;i++){0<i&&r.append(" ");for(var o=0;o<n;o++)0<o&&r.append(","),r.append(de.toString(t.getOrdinate(i,o)))}return r.append(")"),r.toString()}},ge.ensureValidRing=function(t,e){var n=e.size();return 0===n?e:n<=3?ge.createClosedRing(t,e,4):e.getOrdinate(0,U.X)===e.getOrdinate(n-1,U.X)&&e.getOrdinate(0,U.Y)===e.getOrdinate(n-1,U.Y)?e:ge.createClosedRing(t,e,n+1)},ge.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),i=e.size();ge.copy(e,0,r,0,i);for(var o=i;o<n;o++)ge.copy(e,0,r,o,1);return r};function _e(){}var me=function(i){function e(t,e){i.call(this,e),this._points=null,this.init(t)}i&&(e.__proto__=i);var t={serialVersionUID:{configurable:!0}};return((e.prototype=Object.create(i&&i.prototype)).constructor=e).prototype.computeEnvelopeInternal=function(){return this.isEmpty()?new Z:this._points.expandEnvelope(new Z)},e.prototype.isRing=function(){return this.isClosed()&&this.isSimple()},e.prototype.getSortIndex=function(){return i.SORTINDEX_LINESTRING},e.prototype.getCoordinates=function(){return this._points.toCoordinateArray()},e.prototype.equalsExact=function(){if(2!==arguments.length)return i.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this._points.size()!==n._points.size())return!1;for(var r=0;r<this._points.size();r++)if(!this.equal(this._points.getCoordinate(r),n._points.getCoordinate(r),e))return!1;return!0},e.prototype.normalize=function(){for(var t=0;t<Math.trunc(this._points.size()/2);t++){var e=this._points.size()-1-t;if(!this._points.getCoordinate(t).equals(this._points.getCoordinate(e)))return 0<this._points.getCoordinate(t).compareTo(this._points.getCoordinate(e))&&ge.reverse(this._points),null}},e.prototype.getCoordinate=function(){return this.isEmpty()?null:this._points.getCoordinate(0)},e.prototype.getBoundaryDimension=function(){return this.isClosed()?ae.FALSE:0},e.prototype.isClosed=function(){return!this.isEmpty()&&this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},e.prototype.getEndPoint=function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},e.prototype.getDimension=function(){return 1},e.prototype.getLength=function(){return _t.computeLength(this._points)},e.prototype.getNumPoints=function(){return this._points.size()},e.prototype.reverse=function(){var t=this._points.copy();return ge.reverse(t),this.getFactory().createLineString(t)},e.prototype.compareToSameClass=function(){if(1===arguments.length){for(var t=arguments[0],e=0,n=0;e<this._points.size()&&n<t._points.size();){var r=this._points.getCoordinate(e).compareTo(t._points.getCoordinate(n));if(0!==r)return r;e++,n++}return e<this._points.size()?1:n<t._points.size()?-1:0}if(2===arguments.length){var i=arguments[0];return arguments[1].compare(this._points,i._points)}},e.prototype.apply=function(){if(N(arguments[0],Ct))for(var t=arguments[0],e=0;e<this._points.size();e++)t.filter(this._points.getCoordinate(e));else if(N(arguments[0],ue)){var n=arguments[0];if(0===this._points.size())return null;for(var r=0;r<this._points.size()&&(n.filter(this._points,r),!n.isDone());r++);n.isGeometryChanged()&&this.geometryChanged()}else(N(arguments[0],le)||N(arguments[0],vt))&&arguments[0].filter(this)},e.prototype.getBoundary=function(){return new he(this).getBoundary()},e.prototype.isEquivalentClass=function(t){return t instanceof e},e.prototype.clone=function(){var t=i.prototype.clone.call(this);return t._points=this._points.clone(),t},e.prototype.getCoordinateN=function(t){return this._points.getCoordinate(t)},e.prototype.getGeometryType=function(){return"LineString"},e.prototype.copy=function(){return new e(this._points.copy(),this._factory)},e.prototype.getCoordinateSequence=function(){return this._points},e.prototype.isEmpty=function(){return 0===this._points.size()},e.prototype.init=function(t){if(null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),1===t.size())throw new b("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this._points=t},e.prototype.isCoordinate=function(t){for(var e=0;e<this._points.size();e++)if(this._points.getCoordinate(e).equals(t))return!0;return!1},e.prototype.getStartPoint=function(){return this.isEmpty()?null:this.getPointN(0)},e.prototype.getPointN=function(t){return this.getFactory().createPoint(this._points.getCoordinate(t))},e.prototype.interfaces_=function(){return[re]},e.prototype.getClass=function(){return e},t.serialVersionUID.get=function(){return 0x2b2b51ba435c8e00},Object.defineProperties(e,t),e}(bt);_e.prototype.interfaces_=function(){return[]},_e.prototype.getClass=function(){return _e};function ve(){}var be=function(n){function t(t,e){n.call(this,e),this._coordinates=t||null,this.init(this._coordinates)}n&&(t.__proto__=n);var e={serialVersionUID:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.computeEnvelopeInternal=function(){if(this.isEmpty())return new Z;var t=new Z;return t.expandToInclude(this._coordinates.getX(0),this._coordinates.getY(0)),t},t.prototype.getSortIndex=function(){return n.SORTINDEX_POINT},t.prototype.getCoordinates=function(){return this.isEmpty()?[]:[this.getCoordinate()]},t.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&(!(!this.isEmpty()||!t.isEmpty())||this.isEmpty()===t.isEmpty()&&this.equal(t.getCoordinate(),this.getCoordinate(),e))},t.prototype.normalize=function(){},t.prototype.getCoordinate=function(){return 0!==this._coordinates.size()?this._coordinates.getCoordinate(0):null},t.prototype.getBoundaryDimension=function(){return ae.FALSE},t.prototype.getDimension=function(){return 0},t.prototype.getNumPoints=function(){return this.isEmpty()?0:1},t.prototype.reverse=function(){return this.copy()},t.prototype.getX=function(){if(null===this.getCoordinate())throw new Error("getX called on empty Point");return this.getCoordinate().x},t.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0];return this.getCoordinate().compareTo(t.getCoordinate())}if(2===arguments.length){var e=arguments[0];return arguments[1].compare(this._coordinates,e._coordinates)}},t.prototype.apply=function(){if(N(arguments[0],Ct)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(N(arguments[0],ue)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this._coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else(N(arguments[0],le)||N(arguments[0],vt))&&arguments[0].filter(this)},t.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},t.prototype.clone=function(){var t=n.prototype.clone.call(this);return t._coordinates=this._coordinates.clone(),t},t.prototype.getGeometryType=function(){return"Point"},t.prototype.copy=function(){return new t(this._coordinates.copy(),this._factory)},t.prototype.getCoordinateSequence=function(){return this._coordinates},t.prototype.getY=function(){if(null===this.getCoordinate())throw new Error("getY called on empty Point");return this.getCoordinate().y},t.prototype.isEmpty=function(){return 0===this._coordinates.size()},t.prototype.init=function(t){null===t&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),rt.isTrue(t.size()<=1),this._coordinates=t},t.prototype.isSimple=function(){return!0},t.prototype.interfaces_=function(){return[_e]},t.prototype.getClass=function(){return t},e.serialVersionUID.get=function(){return 0x44077bad161cbc00},Object.defineProperties(t,e),t}(bt);ve.prototype.interfaces_=function(){return[]},ve.prototype.getClass=function(){return ve};function we(t){this._factory=t||null,this._isUserDataCopied=!1}var xe=function(a){function r(t,e,n){if(a.call(this,n),this._shell=null,(this._holes=null)===t&&(t=this.getFactory().createLinearRing()),null===e&&(e=[]),a.hasNullElements(e))throw new b("holes must not contain null elements");if(t.isEmpty()&&a.hasNonEmptyElements(e))throw new b("shell is empty but holes are not");this._shell=t,this._holes=e}a&&(r.__proto__=a);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(a&&a.prototype)).constructor=r).prototype.computeEnvelopeInternal=function(){return this._shell.getEnvelopeInternal()},r.prototype.getSortIndex=function(){return a.SORTINDEX_POLYGON},r.prototype.getCoordinates=function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this._shell.getCoordinates(),r=0;r<n.length;r++)t[++e]=n[r];for(var i=0;i<this._holes.length;i++)for(var o=this._holes[i].getCoordinates(),a=0;a<o.length;a++)t[++e]=o[a];return t},r.prototype.getArea=function(){var t=0;t+=Math.abs(_t.signedArea(this._shell.getCoordinateSequence()));for(var e=0;e<this._holes.length;e++)t-=Math.abs(_t.signedArea(this._holes[e].getCoordinateSequence()));return t},r.prototype.isRectangle=function(){if(0!==this.getNumInteriorRing())return!1;if(null===this._shell)return!1;if(5!==this._shell.getNumPoints())return!1;for(var t=this._shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;n<5;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var i=t.getY(n);if(i!==e.getMinY()&&i!==e.getMaxY())return!1}for(var o=t.getX(0),a=t.getY(0),s=1;s<=4;s++){var l=t.getX(s),u=t.getY(s);if(l!==o==(u!==a))return!1;o=l,a=u}return!0},r.prototype.equalsExact=function(){if(2!==arguments.length)return a.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this._shell,i=n._shell;if(!r.equalsExact(i,e))return!1;if(this._holes.length!==n._holes.length)return!1;for(var o=0;o<this._holes.length;o++)if(!this._holes[o].equalsExact(n._holes[o],e))return!1;return!0},r.prototype.normalize=function(){if(0===arguments.length){this.normalize(this._shell,!0);for(var t=0;t<this._holes.length;t++)this.normalize(this._holes[t],!1);oe.sort(this._holes)}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);q.arraycopy(e.getCoordinates(),0,r,0,r.length);var i=Rt.minCoordinate(e.getCoordinates());Rt.scroll(r,i),q.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],_t.isCCW(e.getCoordinates())===n&&Rt.reverse(e.getCoordinates())}},r.prototype.getCoordinate=function(){return this._shell.getCoordinate()},r.prototype.getNumInteriorRing=function(){return this._holes.length},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.getLength=function(){var t=0;t+=this._shell.getLength();for(var e=0;e<this._holes.length;e++)t+=this._holes[e].getLength();return t},r.prototype.getNumPoints=function(){for(var t=this._shell.getNumPoints(),e=0;e<this._holes.length;e++)t+=this._holes[e].getNumPoints();return t},r.prototype.reverse=function(){var t=this.copy();t._shell=this._shell.copy().reverse(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].copy().reverse();return t},r.prototype.convexHull=function(){return this.getExteriorRing().convexHull()},r.prototype.compareToSameClass=function(){if(1===arguments.length){var t=arguments[0],e=this._shell,n=t._shell;return e.compareToSameClass(n)}if(2===arguments.length){var r=arguments[1],i=arguments[0],o=this._shell,a=i._shell,s=o.compareToSameClass(a,r);if(0!==s)return s;for(var l=this.getNumInteriorRing(),u=i.getNumInteriorRing(),c=0;c<l&&c<u;){var p=this.getInteriorRingN(c),h=i.getInteriorRingN(c),f=p.compareToSameClass(h,r);if(0!==f)return f;c++}return c<l?1:c<u?-1:0}},r.prototype.apply=function(t){if(N(t,Ct)){this._shell.apply(t);for(var e=0;e<this._holes.length;e++)this._holes[e].apply(t)}else if(N(t,ue)){if(this._shell.apply(t),!t.isDone())for(var n=0;n<this._holes.length&&(this._holes[n].apply(t),!t.isDone());n++);t.isGeometryChanged()&&this.geometryChanged()}else if(N(t,le))t.filter(this);else if(N(t,vt)){t.filter(this),this._shell.apply(t);for(var r=0;r<this._holes.length;r++)this._holes[r].apply(t)}},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this._holes.length+1).fill(null);t[0]=this._shell;for(var e=0;e<this._holes.length;e++)t[e+1]=this._holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},r.prototype.clone=function(){var t=a.prototype.clone.call(this);t._shell=this._shell.clone(),t._holes=new Array(this._holes.length).fill(null);for(var e=0;e<this._holes.length;e++)t._holes[e]=this._holes[e].clone();return t},r.prototype.getGeometryType=function(){return"Polygon"},r.prototype.copy=function(){for(var t=this._shell.copy(),e=new Array(this._holes.length).fill(null),n=0;n<e.length;n++)e[n]=this._holes[n].copy();return new r(t,e,this._factory)},r.prototype.getExteriorRing=function(){return this._shell},r.prototype.isEmpty=function(){return this._shell.isEmpty()},r.prototype.getInteriorRingN=function(t){return this._holes[t]},r.prototype.interfaces_=function(){return[ve]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x307ffefd8dc97200},Object.defineProperties(r,t),r}(bt),Ce=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return bt.SORTINDEX_MULTIPOINT},r.prototype.isValid=function(){return!0},r.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)},r.prototype.getCoordinate=function(){if(1!==arguments.length)return n.prototype.getCoordinate.apply(this,arguments);var t=arguments[0];return this._geometries[t].getCoordinate()},r.prototype.getBoundaryDimension=function(){return ae.FALSE},r.prototype.getDimension=function(){return 0},r.prototype.getBoundary=function(){return this.getFactory().createGeometryCollection(null)},r.prototype.getGeometryType=function(){return"MultiPoint"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[_e]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x6fb1ed4162e0fc00},Object.defineProperties(r,t),r}(ce),Ee=function(n){function t(t,e){t instanceof O&&e instanceof ze&&(t=e.getCoordinateSequenceFactory().create(t)),n.call(this,t,e),this.validateConstruction()}n&&(t.__proto__=n);var e={MINIMUM_VALID_SIZE:{configurable:!0},serialVersionUID:{configurable:!0}};return((t.prototype=Object.create(n&&n.prototype)).constructor=t).prototype.getSortIndex=function(){return bt.SORTINDEX_LINEARRING},t.prototype.getBoundaryDimension=function(){return ae.FALSE},t.prototype.isClosed=function(){return!!this.isEmpty()||n.prototype.isClosed.call(this)},t.prototype.reverse=function(){var t=this._points.copy();return ge.reverse(t),this.getFactory().createLinearRing(t)},t.prototype.validateConstruction=function(){if(!this.isEmpty()&&!n.prototype.isClosed.call(this))throw new b("Points of LinearRing do not form a closed linestring");if(1<=this.getCoordinateSequence().size()&&this.getCoordinateSequence().size()<t.MINIMUM_VALID_SIZE)throw new b("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},t.prototype.getGeometryType=function(){return"LinearRing"},t.prototype.copy=function(){return new t(this._points.copy(),this._factory)},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},e.MINIMUM_VALID_SIZE.get=function(){return 4},e.serialVersionUID.get=function(){return-0x3b229e262367a600},Object.defineProperties(t,e),t}(me),Pe=function(n){function r(){n.apply(this,arguments)}n&&(r.__proto__=n);var t={serialVersionUID:{configurable:!0}};return((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.getSortIndex=function(){return bt.SORTINDEX_MULTIPOLYGON},r.prototype.equalsExact=function(){if(2!==arguments.length)return n.prototype.equalsExact.apply(this,arguments);var t=arguments[0],e=arguments[1];return!!this.isEquivalentClass(t)&&n.prototype.equalsExact.call(this,t,e)},r.prototype.getBoundaryDimension=function(){return 1},r.prototype.getDimension=function(){return 2},r.prototype.reverse=function(){for(var t=this._geometries.length,e=new Array(t).fill(null),n=0;n<this._geometries.length;n++)e[n]=this._geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},r.prototype.getBoundary=function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new Ft,e=0;e<this._geometries.length;e++)for(var n=this._geometries[e].getBoundary(),r=0;r<n.getNumGeometries();r++)t.add(n.getGeometryN(r));var i=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(i))},r.prototype.getGeometryType=function(){return"MultiPolygon"},r.prototype.copy=function(){for(var t=new Array(this._geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this._geometries[e].copy();return new r(t,this._factory)},r.prototype.interfaces_=function(){return[ve]},r.prototype.getClass=function(){return r},t.serialVersionUID.get=function(){return-0x7a5aa1369171980},Object.defineProperties(r,t),r}(ce),Oe={NoOpGeometryOperation:{configurable:!0},CoordinateOperation:{configurable:!0},CoordinateSequenceOperation:{configurable:!0}};we.prototype.setCopyUserData=function(t){this._isUserDataCopied=t},we.prototype.edit=function(t,e){if(null===t)return null;var n=this.editInternal(t,e);return this._isUserDataCopied&&n.setUserData(t.getUserData()),n},we.prototype.editInternal=function(t,e){return null===this._factory&&(this._factory=t.getFactory()),t instanceof ce?this.editGeometryCollection(t,e):t instanceof xe?this.editPolygon(t,e):t instanceof be||t instanceof me?e.edit(t,this._factory):(rt.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},we.prototype.editGeometryCollection=function(t,e){for(var n=e.edit(t,this._factory),r=new Ft,i=0;i<n.getNumGeometries();i++){var o=this.edit(n.getGeometryN(i),e);null===o||o.isEmpty()||r.add(o)}return n.getClass()===Ce?this._factory.createMultiPoint(r.toArray([])):n.getClass()===pe?this._factory.createMultiLineString(r.toArray([])):n.getClass()===Pe?this._factory.createMultiPolygon(r.toArray([])):this._factory.createGeometryCollection(r.toArray([]))},we.prototype.editPolygon=function(t,e){var n=e.edit(t,this._factory);if(null===n&&(n=this._factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(null===r||r.isEmpty())return this._factory.createPolygon();for(var i=new Ft,o=0;o<n.getNumInteriorRing();o++){var a=this.edit(n.getInteriorRingN(o),e);null===a||a.isEmpty()||i.add(a)}return this._factory.createPolygon(r,i.toArray([]))},we.prototype.interfaces_=function(){return[]},we.prototype.getClass=function(){return we},we.GeometryEditorOperation=function(){},Oe.NoOpGeometryOperation.get=function(){return Te},Oe.CoordinateOperation.get=function(){return Se},Oe.CoordinateSequenceOperation.get=function(){return Ie},Object.defineProperties(we,Oe);var Te=function(){};Te.prototype.edit=function(t,e){return t},Te.prototype.interfaces_=function(){return[we.GeometryEditorOperation]},Te.prototype.getClass=function(){return Te};var Se=function(){};Se.prototype.edit=function(t,e){var n=this.editCoordinates(t.getCoordinates(),t);return null===n?t:t instanceof Ee?e.createLinearRing(n):t instanceof me?e.createLineString(n):t instanceof be?0<n.length?e.createPoint(n[0]):e.createPoint():t},Se.prototype.interfaces_=function(){return[we.GeometryEditorOperation]},Se.prototype.getClass=function(){return Se};var Ie=function(){};Ie.prototype.edit=function(t,e){return t instanceof Ee?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof me?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof be?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},Ie.prototype.interfaces_=function(){return[we.GeometryEditorOperation]},Ie.prototype.getClass=function(){return Ie};function Ae(t,e){if(this._dimension=3,this._coordinates=null,1===arguments.length){if(t instanceof Array)this._coordinates=t,this._dimension=3;else if(Number.isInteger(t)){var n=t;this._coordinates=new Array(n).fill(null);for(var r=0;r<n;r++)this._coordinates[r]=new O}else if(N(t,U)){var i=t;if(null===i)return this._coordinates=new Array(0).fill(null),null;this._dimension=i.getDimension(),this._coordinates=new Array(i.size()).fill(null);for(var o=0;o<this._coordinates.length;o++)this._coordinates[o]=i.getCoordinateCopy(o)}}else if(2===arguments.length)if(t instanceof Array&&Number.isInteger(e)){var a=t,s=e;this._coordinates=a,this._dimension=s,null===a&&(this._coordinates=new Array(0).fill(null))}else if(Number.isInteger(t)&&Number.isInteger(e)){var l=t,u=e;this._coordinates=new Array(l).fill(null),this._dimension=u;for(var c=0;c<l;c++)this._coordinates[c]=new O}}var Le={serialVersionUID:{configurable:!0}};Ae.prototype.setOrdinate=function(t,e,n){switch(e){case U.X:this._coordinates[t].x=n;break;case U.Y:this._coordinates[t].y=n;break;case U.Z:this._coordinates[t].z=n;break;default:throw new b("invalid ordinateIndex")}},Ae.prototype.size=function(){return this._coordinates.length},Ae.prototype.getOrdinate=function(t,e){switch(e){case U.X:return this._coordinates[t].x;case U.Y:return this._coordinates[t].y;case U.Z:return this._coordinates[t].z}return m.NaN},Ae.prototype.getCoordinate=function(){if(1===arguments.length){var t=arguments[0];return this._coordinates[t]}var e,n;2===arguments.length&&(e=arguments[0],(n=arguments[1]).x=this._coordinates[e].x,n.y=this._coordinates[e].y,n.z=this._coordinates[e].z)},Ae.prototype.getCoordinateCopy=function(t){return new O(this._coordinates[t])},Ae.prototype.getDimension=function(){return this._dimension},Ae.prototype.getX=function(t){return this._coordinates[t].x},Ae.prototype.clone=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].clone();return new Ae(t,this._dimension)},Ae.prototype.expandEnvelope=function(t){for(var e=0;e<this._coordinates.length;e++)t.expandToInclude(this._coordinates[e]);return t},Ae.prototype.copy=function(){for(var t=new Array(this.size()).fill(null),e=0;e<this._coordinates.length;e++)t[e]=this._coordinates[e].copy();return new Ae(t,this._dimension)},Ae.prototype.toString=function(){if(0<this._coordinates.length){var t=new R(17*this._coordinates.length);t.append("("),t.append(this._coordinates[0]);for(var e=1;e<this._coordinates.length;e++)t.append(", "),t.append(this._coordinates[e]);return t.append(")"),t.toString()}return"()"},Ae.prototype.getY=function(t){return this._coordinates[t].y},Ae.prototype.toCoordinateArray=function(){return this._coordinates},Ae.prototype.interfaces_=function(){return[U,e]},Ae.prototype.getClass=function(){return Ae},Le.serialVersionUID.get=function(){return-0xcb44a778db18e00},Object.defineProperties(Ae,Le);function Ne(){}var Me={serialVersionUID:{configurable:!0},instanceObject:{configurable:!0}};Ne.prototype.readResolve=function(){return Ne.instance()},Ne.prototype.create=function(){if(1===arguments.length){if(arguments[0]instanceof Array)return new Ae(arguments[0]);if(N(arguments[0],U))return new Ae(arguments[0])}else if(2===arguments.length){var t=arguments[0],e=arguments[1];return 3<e&&(e=3),e<2?new Ae(t):new Ae(t,e)}},Ne.prototype.interfaces_=function(){return[I,e]},Ne.prototype.getClass=function(){return Ne},Ne.instance=function(){return Ne.instanceObject},Me.serialVersionUID.get=function(){return-0x38e49fa6cf6f2e00},Me.instanceObject.get=function(){return new Ne},Object.defineProperties(Ne,Me);function De(){var t,e,n;this._modelType=null,this._scale=null,0===arguments.length?this._modelType=De.FLOATING:1===arguments.length&&(arguments[0]instanceof Be?(t=arguments[0],(this._modelType=t)===De.FIXED&&this.setScale(1)):"number"==typeof arguments[0]?(e=arguments[0],this._modelType=De.FIXED,this.setScale(e)):arguments[0]instanceof De&&(n=arguments[0],this._modelType=n._modelType,this._scale=n._scale))}var Re,je=((Re=Wt)&&(Fe.__proto__=Re),((Fe.prototype=Object.create(Re&&Re.prototype)).constructor=Fe).prototype.get=function(t){return this.map_.get(t)||null},Fe.prototype.put=function(t,e){return this.map_.set(t,e),e},Fe.prototype.values=function(){for(var t=new Ft,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},Fe.prototype.entrySet=function(){var e=new $t;return this.map_.entries().forEach(function(t){return e.add(t)}),e},Fe.prototype.size=function(){return this.map_.size()},Fe),ke={serialVersionUID:{configurable:!0},maximumPreciseValue:{configurable:!0}};function Fe(){Re.call(this),this.map_=new Map}De.prototype.equals=function(t){if(!(t instanceof De))return!1;return this._modelType===t._modelType&&this._scale===t._scale},De.prototype.compareTo=function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new j(n).compareTo(new j(r))},De.prototype.getScale=function(){return this._scale},De.prototype.isFloating=function(){return this._modelType===De.FLOATING||this._modelType===De.FLOATING_SINGLE},De.prototype.getType=function(){return this._modelType},De.prototype.toString=function(){var t="UNKNOWN";return this._modelType===De.FLOATING?t="Floating":this._modelType===De.FLOATING_SINGLE?t="Floating-Single":this._modelType===De.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},De.prototype.makePrecise=function(){if("number"==typeof arguments[0]){var t=arguments[0];return m.isNaN(t)?t:this._modelType!==De.FLOATING_SINGLE&&this._modelType===De.FIXED?Math.round(t*this._scale)/this._scale:t}if(arguments[0]instanceof O){var e=arguments[0];if(this._modelType===De.FLOATING)return null;e.x=this.makePrecise(e.x),e.y=this.makePrecise(e.y)}},De.prototype.getMaximumSignificantDigits=function(){var t=16;return this._modelType===De.FLOATING?t=16:this._modelType===De.FLOATING_SINGLE?t=6:this._modelType===De.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},De.prototype.setScale=function(t){this._scale=Math.abs(t)},De.prototype.interfaces_=function(){return[e,C]},De.prototype.getClass=function(){return De},De.mostPrecise=function(t,e){return 0<=t.compareTo(e)?t:e},ke.serialVersionUID.get=function(){return 0x6bee6404e9a25c00},ke.maximumPreciseValue.get=function(){return 9007199254740992},Object.defineProperties(De,ke);var Be=function t(e){this._name=e||null,t.nameToTypeMap.put(e,this)},Ge={serialVersionUID:{configurable:!0},nameToTypeMap:{configurable:!0}};Be.prototype.readResolve=function(){return Be.nameToTypeMap.get(this._name)},Be.prototype.toString=function(){return this._name},Be.prototype.interfaces_=function(){return[e]},Be.prototype.getClass=function(){return Be},Ge.serialVersionUID.get=function(){return-552860263173159e4},Ge.nameToTypeMap.get=function(){return new je},Object.defineProperties(Be,Ge),De.Type=Be,De.FIXED=new Be("FIXED"),De.FLOATING=new Be("FLOATING"),De.FLOATING_SINGLE=new Be("FLOATING SINGLE");var ze=function t(){this._precisionModel=new De,this._SRID=0,this._coordinateSequenceFactory=t.getDefaultCoordinateSequenceFactory(),0===arguments.length||(1===arguments.length?N(arguments[0],I)?this._coordinateSequenceFactory=arguments[0]:arguments[0]instanceof De&&(this._precisionModel=arguments[0]):2===arguments.length?(this._precisionModel=arguments[0],this._SRID=arguments[1]):3===arguments.length&&(this._precisionModel=arguments[0],this._SRID=arguments[1],this._coordinateSequenceFactory=arguments[2]))},Ue={serialVersionUID:{configurable:!0}};ze.prototype.toGeometry=function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new O(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new O(t.getMinX(),t.getMinY()),new O(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new O(t.getMinX(),t.getMinY()),new O(t.getMinX(),t.getMaxY()),new O(t.getMaxX(),t.getMaxY()),new O(t.getMaxX(),t.getMinY()),new O(t.getMinX(),t.getMinY())]),null)},ze.prototype.createLineString=function(t){return t?t instanceof Array?new me(this.getCoordinateSequenceFactory().create(t),this):N(t,U)?new me(t,this):void 0:new me(this.getCoordinateSequenceFactory().create([]),this)},ze.prototype.createMultiLineString=function(){return 0===arguments.length?new pe(null,this):1===arguments.length?new pe(arguments[0],this):void 0},ze.prototype.buildGeometry=function(t){for(var e=null,n=!1,r=!1,i=t.iterator();i.hasNext();){var o=i.next(),a=o.getClass();null===e&&(e=a),a!==e&&(n=!0),o.isGeometryCollectionOrDerived()&&(r=!0)}if(null===e)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ze.toGeometryArray(t));var s=t.iterator().next();if(1<t.size()){if(s instanceof xe)return this.createMultiPolygon(ze.toPolygonArray(t));if(s instanceof me)return this.createMultiLineString(ze.toLineStringArray(t));if(s instanceof be)return this.createMultiPoint(ze.toPointArray(t));rt.shouldNeverReachHere("Unhandled class: "+s.getClass().getName())}return s},ze.prototype.createMultiPointFromCoords=function(t){return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)},ze.prototype.createPoint=function(){if(0===arguments.length)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof O){var t=arguments[0];return this.createPoint(null!==t?this.getCoordinateSequenceFactory().create([t]):null)}if(N(arguments[0],U))return new be(arguments[0],this)}},ze.prototype.getCoordinateSequenceFactory=function(){return this._coordinateSequenceFactory},ze.prototype.createPolygon=function(){if(0===arguments.length)return new xe(null,null,this);if(1===arguments.length){if(N(arguments[0],U)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Ee){var n=arguments[0];return this.createPolygon(n,null)}}else if(2===arguments.length){return new xe(arguments[0],arguments[1],this)}},ze.prototype.getSRID=function(){return this._SRID},ze.prototype.createGeometryCollection=function(){return 0===arguments.length?new ce(null,this):1===arguments.length?new ce(arguments[0],this):void 0},ze.prototype.createGeometry=function(t){return new we(this).edit(t,{edit:function(t){if(2===arguments.length)return this._coordinateSequenceFactory.create(t)}})},ze.prototype.getPrecisionModel=function(){return this._precisionModel},ze.prototype.createLinearRing=function(){if(0===arguments.length)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(1===arguments.length){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],U))return new Ee(arguments[0],this)}},ze.prototype.createMultiPolygon=function(){return 0===arguments.length?new Pe(null,this):1===arguments.length?new Pe(arguments[0],this):void 0},ze.prototype.createMultiPoint=function(){if(0===arguments.length)return new Ce(null,this);if(1===arguments.length){if(arguments[0]instanceof Array)return new Ce(arguments[0],this);if(arguments[0]instanceof Array){var t=arguments[0];return this.createMultiPoint(null!==t?this.getCoordinateSequenceFactory().create(t):null)}if(N(arguments[0],U)){var e=arguments[0];if(null===e)return this.createMultiPoint(new Array(0).fill(null));for(var n=new Array(e.size()).fill(null),r=0;r<e.size();r++){var i=this.getCoordinateSequenceFactory().create(1,e.getDimension());ge.copy(e,r,i,0,1),n[r]=this.createPoint(i)}return this.createMultiPoint(n)}}},ze.prototype.interfaces_=function(){return[e]},ze.prototype.getClass=function(){return ze},ze.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ze.toGeometryArray=function(t){if(null===t)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ze.getDefaultCoordinateSequenceFactory=function(){return Ne.instance()},ze.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ze.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ze.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ze.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ze.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ze.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ze.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},Ue.serialVersionUID.get=function(){return-0x5ea75f2051eeb400},Object.defineProperties(ze,Ue);function Ve(t){this.geometryFactory=t||new ze}var He=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];Ve.prototype.read=function(t){var e,n=(e="string"==typeof t?JSON.parse(t):t).type;if(!We[n])throw new Error("Unknown GeoJSON type: "+e.type);return-1!==He.indexOf(n)?We[n].apply(this,[e.coordinates]):"GeometryCollection"===n?We[n].apply(this,[e.geometries]):We[n].apply(this,[e])},Ve.prototype.write=function(t){var e=t.getGeometryType();if(!Ye[e])throw new Error("Geometry is not supported");return Ye[e].apply(this,[t])};function qe(t){this.geometryFactory=t||new ze,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new Ve(this.geometryFactory)}var We={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!We[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=We.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(new O(r[0],r[1]))}return e},bbox:function(t){return this.geometryFactory.createLinearRing([new O(t[0],t[1]),new O(t[2],t[1]),new O(t[2],t[3]),new O(t[0],t[3]),new O(t[0],t[1])])},Point:function(t){var e=new O(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(We.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=We.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(We.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=We.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],i=1;i<t.length;++i){var o=t[i],a=We.coordinates.apply(this,[o]),s=this.geometryFactory.createLinearRing(a);r.push(s)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(We.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},Ye={coordinate:function(t){return[t.x,t.y]},Point:function(t){return{type:"Point",coordinates:Ye.coordinate.apply(this,[t.getCoordinate()])}},MultiPoint:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ye.Point.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var i=n[r];e.push(Ye.coordinate.apply(this,[i]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ye.LineString.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=Ye.LineString.apply(this,[t._shell]);e.push(n.coordinates);for(var r=0;r<t._holes.length;++r){var i=t._holes[r],o=Ye.LineString.apply(this,[i]);e.push(o.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=Ye.Polygon.apply(this,[r]);e.push(i.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t._geometries.length;++n){var r=t._geometries[n],i=r.getGeometryType();e.push(Ye[i].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}};qe.prototype.read=function(t){var e=this.parser.read(t);return this.precisionModel.getType()===De.FIXED&&this.reducePrecision(e),e},qe.prototype.reducePrecision=function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;e<n;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;e<n;e++)this.reducePrecision(t.geometries[e])};function Xe(){this.parser=new Ve(this.geometryFactory)}Xe.prototype.write=function(t){return this.parser.write(t)};function Je(){}var Ze={ON:{configurable:!0},LEFT:{configurable:!0},RIGHT:{configurable:!0}};Je.prototype.interfaces_=function(){return[]},Je.prototype.getClass=function(){return Je},Je.opposite=function(t){return t===Je.LEFT?Je.RIGHT:t===Je.RIGHT?Je.LEFT:t},Ze.ON.get=function(){return 0},Ze.LEFT.get=function(){return 1},Ze.RIGHT.get=function(){return 2},Object.defineProperties(Je,Ze),(y.prototype=new Error).name="EmptyStackException",(g.prototype=new Mt).add=function(t){return this.array_.push(t),!0},g.prototype.get=function(t){if(t<0||t>=this.size())throw new Error;return this.array_[t]},g.prototype.push=function(t){return this.array_.push(t),t},g.prototype.pop=function(t){if(0===this.array_.length)throw new y;return this.array_.pop()},g.prototype.peek=function(){if(0===this.array_.length)throw new y;return this.array_[this.array_.length-1]},g.prototype.empty=function(){return 0===this.array_.length},g.prototype.isEmpty=function(){return this.empty()},g.prototype.search=function(t){return this.array_.indexOf(t)},g.prototype.size=function(){return this.array_.length},g.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;e<n;e++)t.push(this.array_[e]);return t};function Ke(){this._minIndex=-1,this._minCoord=null,this._minDe=null,this._orientedDe=null}Ke.prototype.getCoordinate=function(){return this._minCoord},Ke.prototype.getRightmostSide=function(t,e){var n=this.getRightmostSideOfSegment(t,e);return n<0&&(n=this.getRightmostSideOfSegment(t,e-1)),n<0&&(this._minCoord=null,this.checkForRightmostCoordinate(t)),n},Ke.prototype.findRightmostEdgeAtVertex=function(){var t=this._minDe.getEdge().getCoordinates();rt.isTrue(0<this._minIndex&&this._minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this._minIndex-1],n=t[this._minIndex+1],r=_t.computeOrientation(this._minCoord,n,e),i=!1;(e.y<this._minCoord.y&&n.y<this._minCoord.y&&r===_t.COUNTERCLOCKWISE||e.y>this._minCoord.y&&n.y>this._minCoord.y&&r===_t.CLOCKWISE)&&(i=!0),i&&(this._minIndex=this._minIndex-1)},Ke.prototype.getRightmostSideOfSegment=function(t,e){var n=t.getEdge().getCoordinates();if(e<0||e+1>=n.length)return-1;if(n[e].y===n[e+1].y)return-1;var r=Je.LEFT;return n[e].y<n[e+1].y&&(r=Je.RIGHT),r},Ke.prototype.getEdge=function(){return this._orientedDe},Ke.prototype.checkForRightmostCoordinate=function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(null===this._minCoord||e[n].x>this._minCoord.x)&&(this._minDe=t,this._minIndex=n,this._minCoord=e[n])},Ke.prototype.findRightmostEdgeAtNode=function(){var t=this._minDe.getNode().getEdges();this._minDe=t.getRightmostEdge(),this._minDe.isForward()||(this._minDe=this._minDe.getSym(),this._minIndex=this._minDe.getEdge().getCoordinates().length-1)},Ke.prototype.findEdge=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}rt.isTrue(0!==this._minIndex||this._minCoord.equals(this._minDe.getCoordinate()),"inconsistency in rightmost processing"),0===this._minIndex?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this._orientedDe=this._minDe,this.getRightmostSide(this._minDe,this._minIndex)===Je.LEFT&&(this._orientedDe=this._minDe.getSym())},Ke.prototype.interfaces_=function(){return[]},Ke.prototype.getClass=function(){return Ke};function $e(){this.array_=[]}var Qe,tn=((Qe=at)&&(en.__proto__=Qe),en.prototype=Object.create(Qe&&Qe.prototype),(en.prototype.constructor=en).prototype.getCoordinate=function(){return this.pt},en.prototype.interfaces_=function(){return[]},en.prototype.getClass=function(){return en},en.msgWithCoord=function(t,e){return e?t:t+" [ "+e+" ]"},en);function en(t,e){Qe.call(this,en.msgWithCoord(t,e)),this.pt=e?new O(e):null,this.name="TopologyException"}$e.prototype.addLast=function(t){this.array_.push(t)},$e.prototype.removeFirst=function(){return this.array_.shift()},$e.prototype.isEmpty=function(){return 0===this.array_.length};function nn(){this._finder=null,this._dirEdgeList=new Ft,this._nodes=new Ft,this._rightMostCoord=null,this._env=null,this._finder=new Ke}nn.prototype.clearVisitedEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();)t.next().setVisited(!1)},nn.prototype.getRightmostCoordinate=function(){return this._rightMostCoord},nn.prototype.computeNodeDepth=function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(null===e)throw new tn("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var i=t.getEdges().iterator();i.hasNext();){var o=i.next();o.setVisited(!0),this.copySymDepths(o)}},nn.prototype.computeDepth=function(t){this.clearVisitedEdges();var e=this._finder.getEdge();e.setEdgeDepths(Je.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},nn.prototype.create=function(t){this.addReachable(t),this._finder.findEdge(this._dirEdgeList),this._rightMostCoord=this._finder.getCoordinate()},nn.prototype.findResultEdges=function(){for(var t=this._dirEdgeList.iterator();t.hasNext();){var e=t.next();1<=e.getDepth(Je.RIGHT)&&e.getDepth(Je.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},nn.prototype.computeDepths=function(t){var e=new $t,n=new $e,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var i=n.removeFirst();e.add(i),this.computeNodeDepth(i);for(var o=i.getEdges().iterator();o.hasNext();){var a,s=o.next().getSym();s.isVisited()||(a=s.getNode(),e.contains(a)||(n.addLast(a),e.add(a)))}}},nn.prototype.compareTo=function(t){return this._rightMostCoord.x<t._rightMostCoord.x?-1:this._rightMostCoord.x>t._rightMostCoord.x?1:0},nn.prototype.getEnvelope=function(){if(null===this._env){for(var t=new Z,e=this._dirEdgeList.iterator();e.hasNext();)for(var n=e.next().getEdge().getCoordinates(),r=0;r<n.length-1;r++)t.expandToInclude(n[r]);this._env=t}return this._env},nn.prototype.addReachable=function(t){var e=new g;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},nn.prototype.copySymDepths=function(t){var e=t.getSym();e.setDepth(Je.LEFT,t.getDepth(Je.RIGHT)),e.setDepth(Je.RIGHT,t.getDepth(Je.LEFT))},nn.prototype.add=function(t,e){t.setVisited(!0),this._nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this._dirEdgeList.add(r);var i=r.getSym().getNode();i.isVisited()||e.push(i)}},nn.prototype.getNodes=function(){return this._nodes},nn.prototype.getDirectedEdges=function(){return this._dirEdgeList},nn.prototype.interfaces_=function(){return[C]},nn.prototype.getClass=function(){return nn};function rn(){var t,e,n;if(this.location=null,1===arguments.length){if(arguments[0]instanceof Array){var r=arguments[0];this.init(r.length)}else if(Number.isInteger(arguments[0])){var i=arguments[0];this.init(1),this.location[Je.ON]=i}else if(arguments[0]instanceof rn){var o=arguments[0];if(this.init(o.location.length),null!==o)for(var a=0;a<this.location.length;a++)this.location[a]=o.location[a]}}else 3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this.init(3),this.location[Je.ON]=t,this.location[Je.LEFT]=e,this.location[Je.RIGHT]=n)}rn.prototype.setAllLocations=function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},rn.prototype.isNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==A.NONE)return!1;return!0},rn.prototype.setAllLocationsIfNull=function(t){for(var e=0;e<this.location.length;e++)this.location[e]===A.NONE&&(this.location[e]=t)},rn.prototype.isLine=function(){return 1===this.location.length},rn.prototype.merge=function(t){var e;t.location.length>this.location.length&&((e=new Array(3).fill(null))[Je.ON]=this.location[Je.ON],e[Je.LEFT]=A.NONE,e[Je.RIGHT]=A.NONE,this.location=e);for(var n=0;n<this.location.length;n++)this.location[n]===A.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},rn.prototype.getLocations=function(){return this.location},rn.prototype.flip=function(){if(this.location.length<=1)return null;var t=this.location[Je.LEFT];this.location[Je.LEFT]=this.location[Je.RIGHT],this.location[Je.RIGHT]=t},rn.prototype.toString=function(){var t=new R;return 1<this.location.length&&t.append(A.toLocationSymbol(this.location[Je.LEFT])),t.append(A.toLocationSymbol(this.location[Je.ON])),1<this.location.length&&t.append(A.toLocationSymbol(this.location[Je.RIGHT])),t.toString()},rn.prototype.setLocations=function(t,e,n){this.location[Je.ON]=t,this.location[Je.LEFT]=e,this.location[Je.RIGHT]=n},rn.prototype.get=function(t){return t<this.location.length?this.location[t]:A.NONE},rn.prototype.isArea=function(){return 1<this.location.length},rn.prototype.isAnyNull=function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===A.NONE)return!0;return!1},rn.prototype.setLocation=function(){var t,e,n;1===arguments.length?(t=arguments[0],this.setLocation(Je.ON,t)):2===arguments.length&&(e=arguments[0],n=arguments[1],this.location[e]=n)},rn.prototype.init=function(t){this.location=new Array(t).fill(null),this.setAllLocations(A.NONE)},rn.prototype.isEqualOnSide=function(t,e){return this.location[e]===t.location[e]},rn.prototype.allPositionsEqual=function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},rn.prototype.interfaces_=function(){return[]},rn.prototype.getClass=function(){return rn};function on(){var t,e,n,r,i,o,a,s,l,u,c;this.elt=new Array(2).fill(null),1===arguments.length?Number.isInteger(arguments[0])?(t=arguments[0],this.elt[0]=new rn(t),this.elt[1]=new rn(t)):arguments[0]instanceof on&&(e=arguments[0],this.elt[0]=new rn(e.elt[0]),this.elt[1]=new rn(e.elt[1])):2===arguments.length?(n=arguments[0],r=arguments[1],this.elt[0]=new rn(A.NONE),this.elt[1]=new rn(A.NONE),this.elt[n].setLocation(r)):3===arguments.length?(i=arguments[0],o=arguments[1],a=arguments[2],this.elt[0]=new rn(i,o,a),this.elt[1]=new rn(i,o,a)):4===arguments.length&&(s=arguments[0],l=arguments[1],u=arguments[2],c=arguments[3],this.elt[0]=new rn(A.NONE,A.NONE,A.NONE),this.elt[1]=new rn(A.NONE,A.NONE,A.NONE),this.elt[s].setLocations(l,u,c))}on.prototype.getGeometryCount=function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},on.prototype.setAllLocations=function(t,e){this.elt[t].setAllLocations(e)},on.prototype.isNull=function(t){return this.elt[t].isNull()},on.prototype.setAllLocationsIfNull=function(){var t,e,n;1===arguments.length?(t=arguments[0],this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)):2===arguments.length&&(e=arguments[0],n=arguments[1],this.elt[e].setAllLocationsIfNull(n))},on.prototype.isLine=function(t){return this.elt[t].isLine()},on.prototype.merge=function(t){for(var e=0;e<2;e++)null===this.elt[e]&&null!==t.elt[e]?this.elt[e]=new rn(t.elt[e]):this.elt[e].merge(t.elt[e])},on.prototype.flip=function(){this.elt[0].flip(),this.elt[1].flip()},on.prototype.getLocation=function(){if(1===arguments.length){var t=arguments[0];return this.elt[t].get(Je.ON)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},on.prototype.toString=function(){var t=new R;return null!==this.elt[0]&&(t.append("A:"),t.append(this.elt[0].toString())),null!==this.elt[1]&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},on.prototype.isArea=function(){if(0===arguments.length)return this.elt[0].isArea()||this.elt[1].isArea();if(1===arguments.length){var t=arguments[0];return this.elt[t].isArea()}},on.prototype.isAnyNull=function(t){return this.elt[t].isAnyNull()},on.prototype.setLocation=function(){var t,e,n,r,i;2===arguments.length?(t=arguments[0],e=arguments[1],this.elt[t].setLocation(Je.ON,e)):3===arguments.length&&(n=arguments[0],r=arguments[1],i=arguments[2],this.elt[n].setLocation(r,i))},on.prototype.isEqualOnSide=function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},on.prototype.allPositionsEqual=function(t,e){return this.elt[t].allPositionsEqual(e)},on.prototype.toLine=function(t){this.elt[t].isArea()&&(this.elt[t]=new rn(this.elt[t].location[0]))},on.prototype.interfaces_=function(){return[]},on.prototype.getClass=function(){return on},on.toLineLabel=function(t){for(var e=new on(A.NONE),n=0;n<2;n++)e.setLocation(n,t.getLocation(n));return e};function an(t,e){this._startDe=null,this._maxNodeDegree=-1,this._edges=new Ft,this._pts=new Ft,this._label=new on(A.NONE),this._ring=null,this._isHole=null,this._shell=null,this._holes=new Ft,this._geometryFactory=null;var n=t;this._geometryFactory=e,this.computePoints(n),this.computeRing()}an.prototype.computeRing=function(){if(null!==this._ring)return null;for(var t=new Array(this._pts.size()).fill(null),e=0;e<this._pts.size();e++)t[e]=this._pts.get(e);this._ring=this._geometryFactory.createLinearRing(t),this._isHole=_t.isCCW(this._ring.getCoordinates())},an.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},an.prototype.computePoints=function(t){var e=this._startDe=t,n=!0;do{if(null===e)throw new tn("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new tn("Directed Edge visited twice during ring-building at "+e.getCoordinate());this._edges.add(e);var r=e.getLabel();rt.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this._startDe)},an.prototype.getLinearRing=function(){return this._ring},an.prototype.getCoordinate=function(t){return this._pts.get(t)},an.prototype.computeMaxNodeDegree=function(){this._maxNodeDegree=0;var t=this._startDe;do{var e=t.getNode().getEdges().getOutgoingDegree(this);e>this._maxNodeDegree&&(this._maxNodeDegree=e),t=this.getNext(t)}while(t!==this._startDe);this._maxNodeDegree*=2},an.prototype.addPoints=function(t,e,n){var r=t.getCoordinates();if(e){var i=1;n&&(i=0);for(var o=i;o<r.length;o++)this._pts.add(r[o])}else{var a=r.length-2;n&&(a=r.length-1);for(var s=a;0<=s;s--)this._pts.add(r[s])}},an.prototype.isHole=function(){return this._isHole},an.prototype.setInResult=function(){for(var t=this._startDe;t.getEdge().setInResult(!0),(t=t.getNext())!==this._startDe;);},an.prototype.containsPoint=function(t){var e=this.getLinearRing();if(!e.getEnvelopeInternal().contains(t))return!1;if(!_t.isPointInRing(t,e.getCoordinates()))return!1;for(var n=this._holes.iterator();n.hasNext();)if(n.next().containsPoint(t))return!1;return!0},an.prototype.addHole=function(t){this._holes.add(t)},an.prototype.isShell=function(){return null===this._shell},an.prototype.getLabel=function(){return this._label},an.prototype.getEdges=function(){return this._edges},an.prototype.getMaxNodeDegree=function(){return this._maxNodeDegree<0&&this.computeMaxNodeDegree(),this._maxNodeDegree},an.prototype.getShell=function(){return this._shell},an.prototype.mergeLabel=function(){if(1===arguments.length){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(2===arguments.length){var e=arguments[1],n=arguments[0].getLocation(e,Je.RIGHT);if(n===A.NONE)return null;if(this._label.getLocation(e)===A.NONE)return this._label.setLocation(e,n),null}},an.prototype.setShell=function(t){null!==(this._shell=t)&&t.addHole(this)},an.prototype.toPolygon=function(t){for(var e=new Array(this._holes.size()).fill(null),n=0;n<this._holes.size();n++)e[n]=this._holes.get(n).getLinearRing();return t.createPolygon(this.getLinearRing(),e)},an.prototype.interfaces_=function(){return[]},an.prototype.getClass=function(){return an};function sn(t){this._label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,0===arguments.length||1===arguments.length&&(this._label=t)}var ln,un,cn=((un=an)&&(fn.__proto__=un),((fn.prototype=Object.create(un&&un.prototype)).constructor=fn).prototype.setEdgeRing=function(t,e){t.setMinEdgeRing(e)},fn.prototype.getNext=function(t){return t.getNextMin()},fn.prototype.interfaces_=function(){return[]},fn.prototype.getClass=function(){return fn},fn),pn=((ln=an)&&(hn.__proto__=ln),((hn.prototype=Object.create(ln&&ln.prototype)).constructor=hn).prototype.buildMinimalRings=function(){var t,e=new Ft,n=this._startDe;do{null===n.getMinEdgeRing()&&(t=new cn(n,this._geometryFactory),e.add(t)),n=n.getNext()}while(n!==this._startDe);return e},hn.prototype.setEdgeRing=function(t,e){t.setEdgeRing(e)},hn.prototype.linkDirectedEdgesForMinimalEdgeRings=function(){for(var t=this._startDe;t.getNode().getEdges().linkMinimalDirectedEdges(this),(t=t.getNext())!==this._startDe;);},hn.prototype.getNext=function(t){return t.getNext()},hn.prototype.interfaces_=function(){return[]},hn.prototype.getClass=function(){return hn},hn);function hn(){var t=arguments[0],e=arguments[1];ln.call(this,t,e)}function fn(){var t=arguments[0],e=arguments[1];un.call(this,t,e)}sn.prototype.setVisited=function(t){this._isVisited=t},sn.prototype.setInResult=function(t){this._isInResult=t},sn.prototype.isCovered=function(){return this._isCovered},sn.prototype.isCoveredSet=function(){return this._isCoveredSet},sn.prototype.setLabel=function(t){this._label=t},sn.prototype.getLabel=function(){return this._label},sn.prototype.setCovered=function(t){this._isCovered=t,this._isCoveredSet=!0},sn.prototype.updateIM=function(t){rt.isTrue(2<=this._label.getGeometryCount(),"found partial label"),this.computeIM(t)},sn.prototype.isInResult=function(){return this._isInResult},sn.prototype.isVisited=function(){return this._isVisited},sn.prototype.interfaces_=function(){return[]},sn.prototype.getClass=function(){return sn};function dn(t){this.nodeMap=new p,this.nodeFact=null,this.nodeFact=t}var yn,gn=((yn=sn)&&(_n.__proto__=yn),((_n.prototype=Object.create(yn&&yn.prototype)).constructor=_n).prototype.isIncidentEdgeInResult=function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();)if(t.next().getEdge().isInResult())return!0;return!1},_n.prototype.isIsolated=function(){return 1===this._label.getGeometryCount()},_n.prototype.getCoordinate=function(){return this._coord},_n.prototype.print=function(t){t.println("node "+this._coord+" lbl: "+this._label)},_n.prototype.computeIM=function(t){},_n.prototype.computeMergedLocation=function(t,e){var n,r=A.NONE,r=this._label.getLocation(e);return t.isNull(e)||(n=t.getLocation(e),r!==A.BOUNDARY&&(r=n)),r},_n.prototype.setLabel=function(){if(2!==arguments.length)return yn.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];null===this._label?this._label=new on(t,e):this._label.setLocation(t,e)},_n.prototype.getEdges=function(){return this._edges},_n.prototype.mergeLabel=function(){if(arguments[0]instanceof _n){var t=arguments[0];this.mergeLabel(t._label)}else if(arguments[0]instanceof on)for(var e=arguments[0],n=0;n<2;n++){var r=this.computeMergedLocation(e,n);this._label.getLocation(n)===A.NONE&&this._label.setLocation(n,r)}},_n.prototype.add=function(t){this._edges.insert(t),t.setNode(this)},_n.prototype.setLabelBoundary=function(t){if(null===this._label)return null;var e=A.NONE;null!==this._label&&(e=this._label.getLocation(t));var n=null;switch(e){case A.BOUNDARY:n=A.INTERIOR;break;case A.INTERIOR:default:n=A.BOUNDARY}this._label.setLocation(t,n)},_n.prototype.interfaces_=function(){return[]},_n.prototype.getClass=function(){return _n},_n);function _n(){yn.call(this),this._coord=null,this._edges=null;var t=arguments[0],e=arguments[1];this._coord=t,this._edges=e,this._label=new on(0,A.NONE)}dn.prototype.find=function(t){return this.nodeMap.get(t)},dn.prototype.addNode=function(){if(arguments[0]instanceof O){var t=arguments[0],e=this.nodeMap.get(t);return null===e&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof gn){var n=arguments[0],r=this.nodeMap.get(n.getCoordinate());return null===r?(this.nodeMap.put(n.getCoordinate(),n),n):(r.mergeLabel(n),r)}},dn.prototype.print=function(t){for(var e=this.iterator();e.hasNext();)e.next().print(t)},dn.prototype.iterator=function(){return this.nodeMap.values().iterator()},dn.prototype.values=function(){return this.nodeMap.values()},dn.prototype.getBoundaryNodes=function(t){for(var e=new Ft,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===A.BOUNDARY&&e.add(r)}return e},dn.prototype.add=function(t){var e=t.getCoordinate();this.addNode(e).add(t)},dn.prototype.interfaces_=function(){return[]},dn.prototype.getClass=function(){return dn};function mn(){}var vn={NE:{configurable:!0},NW:{configurable:!0},SW:{configurable:!0},SE:{configurable:!0}};mn.prototype.interfaces_=function(){return[]},mn.prototype.getClass=function(){return mn},mn.isNorthern=function(t){return t===mn.NE||t===mn.NW},mn.isOpposite=function(t,e){return t!==e&&2==(t-e+4)%4},mn.commonHalfPlane=function(t,e){if(t===e)return t;if(2==(t-e+4)%4)return-1;var n=t<e?t:e;return 0===n&&3===(e<t?t:e)?3:n},mn.isInHalfPlane=function(t,e){return e===mn.SE?t===mn.SE||t===mn.SW:t===e||t===e+1},mn.quadrant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new b("Cannot compute the quadrant for point ( "+t+", "+e+" )");return 0<=t?0<=e?mn.NE:mn.SE:0<=e?mn.NW:mn.SW}if(arguments[0]instanceof O&&arguments[1]instanceof O){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new b("Cannot compute the quadrant for two identical points "+n);return r.x>=n.x?r.y>=n.y?mn.NE:mn.SE:r.y>=n.y?mn.NW:mn.SW}},vn.NE.get=function(){return 0},vn.NW.get=function(){return 1},vn.SW.get=function(){return 2},vn.SE.get=function(){return 3},Object.defineProperties(mn,vn);function bn(t,e,n,r){var i,o,a,s,l;this._edge=null,this._label=null,this._node=null,this._p0=null,this._p1=null,this._dx=null,this._dy=null,this._quadrant=null,1===arguments.length?this._edge=t:3===arguments.length?(i=e,o=n,this._edge=t,this.init(i,o),this._label=null):4===arguments.length&&(a=e,s=n,l=r,this._edge=t,this.init(a,s),this._label=l)}bn.prototype.compareDirection=function(t){return this._dx===t._dx&&this._dy===t._dy?0:this._quadrant>t._quadrant?1:this._quadrant<t._quadrant?-1:_t.computeOrientation(t._p0,t._p1,this._p1)},bn.prototype.getDy=function(){return this._dy},bn.prototype.getCoordinate=function(){return this._p0},bn.prototype.setNode=function(t){this._node=t},bn.prototype.print=function(t){var e=Math.atan2(this._dy,this._dx),n=this.getClass().getName(),r=n.lastIndexOf("."),i=n.substring(r+1);t.print("  "+i+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+e+"   "+this._label)},bn.prototype.compareTo=function(t){return this.compareDirection(t)},bn.prototype.getDirectedCoordinate=function(){return this._p1},bn.prototype.getDx=function(){return this._dx},bn.prototype.getLabel=function(){return this._label},bn.prototype.getEdge=function(){return this._edge},bn.prototype.getQuadrant=function(){return this._quadrant},bn.prototype.getNode=function(){return this._node},bn.prototype.toString=function(){var t=Math.atan2(this._dy,this._dx),e=this.getClass().getName(),n=e.lastIndexOf(".");return"  "+e.substring(n+1)+": "+this._p0+" - "+this._p1+" "+this._quadrant+":"+t+"   "+this._label},bn.prototype.computeLabel=function(t){},bn.prototype.init=function(t,e){this._p0=t,this._p1=e,this._dx=e.x-t.x,this._dy=e.y-t.y,this._quadrant=mn.quadrant(this._dx,this._dy),rt.isTrue(!(0===this._dx&&0===this._dy),"EdgeEnd with identical endpoints found")},bn.prototype.interfaces_=function(){return[C]},bn.prototype.getClass=function(){return bn};function wn(){}var xn,Cn=((xn=bn)&&(En.__proto__=xn),((En.prototype=Object.create(xn&&xn.prototype)).constructor=En).prototype.getNextMin=function(){return this._nextMin},En.prototype.getDepth=function(t){return this._depth[t]},En.prototype.setVisited=function(t){this._isVisited=t},En.prototype.computeDirectedLabel=function(){this._label=new on(this._edge.getLabel()),this._isForward||this._label.flip()},En.prototype.getNext=function(){return this._next},En.prototype.setDepth=function(t,e){if(-999!==this._depth[t]&&this._depth[t]!==e)throw new tn("assigned depths do not match",this.getCoordinate());this._depth[t]=e},En.prototype.isInteriorAreaEdge=function(){for(var t=!0,e=0;e<2;e++)this._label.isArea(e)&&this._label.getLocation(e,Je.LEFT)===A.INTERIOR&&this._label.getLocation(e,Je.RIGHT)===A.INTERIOR||(t=!1);return t},En.prototype.setNextMin=function(t){this._nextMin=t},En.prototype.print=function(t){xn.prototype.print.call(this,t),t.print(" "+this._depth[Je.LEFT]+"/"+this._depth[Je.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},En.prototype.setMinEdgeRing=function(t){this._minEdgeRing=t},En.prototype.isLineEdge=function(){var t=this._label.isLine(0)||this._label.isLine(1),e=!this._label.isArea(0)||this._label.allPositionsEqual(0,A.EXTERIOR),n=!this._label.isArea(1)||this._label.allPositionsEqual(1,A.EXTERIOR);return t&&e&&n},En.prototype.setEdgeRing=function(t){this._edgeRing=t},En.prototype.getMinEdgeRing=function(){return this._minEdgeRing},En.prototype.getDepthDelta=function(){var t=this._edge.getDepthDelta();return this._isForward||(t=-t),t},En.prototype.setInResult=function(t){this._isInResult=t},En.prototype.getSym=function(){return this._sym},En.prototype.isForward=function(){return this._isForward},En.prototype.getEdge=function(){return this._edge},En.prototype.printEdge=function(t){this.print(t),t.print(" "),this._isForward?this._edge.print(t):this._edge.printReverse(t)},En.prototype.setSym=function(t){this._sym=t},En.prototype.setVisitedEdge=function(t){this.setVisited(t),this._sym.setVisited(t)},En.prototype.setEdgeDepths=function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===Je.LEFT&&(r=-1);var i=Je.opposite(t),o=e+n*r;this.setDepth(t,e),this.setDepth(i,o)},En.prototype.getEdgeRing=function(){return this._edgeRing},En.prototype.isInResult=function(){return this._isInResult},En.prototype.setNext=function(t){this._next=t},En.prototype.isVisited=function(){return this._isVisited},En.prototype.interfaces_=function(){return[]},En.prototype.getClass=function(){return En},En.depthFactor=function(t,e){return t===A.EXTERIOR&&e===A.INTERIOR?1:t===A.INTERIOR&&e===A.EXTERIOR?-1:0},En);function En(){var t,e=arguments[0],n=arguments[1];xn.call(this,e),this._isForward=null,this._isInResult=!1,this._isVisited=!1,this._sym=null,this._next=null,this._nextMin=null,this._edgeRing=null,this._minEdgeRing=null,this._depth=[0,-999,-999],(this._isForward=n)?this.init(e.getCoordinate(0),e.getCoordinate(1)):(t=e.getNumPoints()-1,this.init(e.getCoordinate(t),e.getCoordinate(t-1))),this.computeDirectedLabel()}wn.prototype.createNode=function(t){return new gn(t,null)},wn.prototype.interfaces_=function(){return[]},wn.prototype.getClass=function(){return wn};function Pn(t){this._edges=new Ft,this._nodes=null,this._edgeEndList=new Ft,0===arguments.length?this._nodes=new dn(new wn):1===arguments.length&&(this._nodes=new dn(t))}Pn.prototype.printEdges=function(t){t.println("Edges:");for(var e=0;e<this._edges.size();e++){t.println("edge "+e+":");var n=this._edges.get(e);n.print(t),n.eiList.print(t)}},Pn.prototype.find=function(t){return this._nodes.find(t)},Pn.prototype.addNode=function(){if(arguments[0]instanceof gn){var t=arguments[0];return this._nodes.addNode(t)}if(arguments[0]instanceof O){var e=arguments[0];return this._nodes.addNode(e)}},Pn.prototype.getNodeIterator=function(){return this._nodes.iterator()},Pn.prototype.linkResultDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkResultDirectedEdges()},Pn.prototype.debugPrintln=function(t){q.out.println(t)},Pn.prototype.isBoundaryNode=function(t,e){var n=this._nodes.find(e);if(null===n)return!1;var r=n.getLabel();return null!==r&&r.getLocation(t)===A.BOUNDARY},Pn.prototype.linkAllDirectedEdges=function(){for(var t=this._nodes.iterator();t.hasNext();)t.next().getEdges().linkAllDirectedEdges()},Pn.prototype.matchInSameDirection=function(t,e,n,r){return!!t.equals(n)&&_t.computeOrientation(t,e,r)===_t.COLLINEAR&&mn.quadrant(t,e)===mn.quadrant(n,r)},Pn.prototype.getEdgeEnds=function(){return this._edgeEndList},Pn.prototype.debugPrint=function(t){q.out.print(t)},Pn.prototype.getEdgeIterator=function(){return this._edges.iterator()},Pn.prototype.findEdgeInSameDirection=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(this.matchInSameDirection(t,e,i[0],i[1]))return r;if(this.matchInSameDirection(t,e,i[i.length-1],i[i.length-2]))return r}return null},Pn.prototype.insertEdge=function(t){this._edges.add(t)},Pn.prototype.findEdgeEnd=function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},Pn.prototype.addEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this._edges.add(n);var r=new Cn(n,!0),i=new Cn(n,!1);r.setSym(i),i.setSym(r),this.add(r),this.add(i)}},Pn.prototype.add=function(t){this._nodes.add(t),this._edgeEndList.add(t)},Pn.prototype.getNodes=function(){return this._nodes.values()},Pn.prototype.findEdge=function(t,e){for(var n=0;n<this._edges.size();n++){var r=this._edges.get(n),i=r.getCoordinates();if(t.equals(i[0])&&e.equals(i[1]))return r}return null},Pn.prototype.interfaces_=function(){return[]},Pn.prototype.getClass=function(){return Pn},Pn.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();)e.next().getEdges().linkResultDirectedEdges()};function On(t){this._geometryFactory=null,this._shellList=new Ft,this._geometryFactory=t}On.prototype.sortShellsAndHoles=function(t,e,n){for(var r=t.iterator();r.hasNext();){var i=r.next();i.isHole()?n.add(i):e.add(i)}},On.prototype.computePolygons=function(t){for(var e=new Ft,n=t.iterator();n.hasNext();){var r=n.next().toPolygon(this._geometryFactory);e.add(r)}return e},On.prototype.placeFreeHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(null===r.getShell()){var i=this.findEdgeRingContaining(r,t);if(null===i)throw new tn("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(i)}}},On.prototype.buildMinimalEdgeRings=function(t,e,n){for(var r=new Ft,i=t.iterator();i.hasNext();){var o,a,s=i.next();2<s.getMaxNodeDegree()?(s.linkDirectedEdgesForMinimalEdgeRings(),o=s.buildMinimalRings(),null!==(a=this.findShell(o))?(this.placePolygonHoles(a,o),e.add(a)):n.addAll(o)):r.add(s)}return r},On.prototype.containsPoint=function(t){for(var e=this._shellList.iterator();e.hasNext();)if(e.next().containsPoint(t))return!0;return!1},On.prototype.buildMaximalEdgeRings=function(t){for(var e=new Ft,n=t.iterator();n.hasNext();){var r,i=n.next();i.isInResult()&&i.getLabel().isArea()&&null===i.getEdgeRing()&&(r=new pn(i,this._geometryFactory),e.add(r),r.setInResult())}return e},On.prototype.placePolygonHoles=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},On.prototype.getPolygons=function(){return this.computePolygons(this._shellList)},On.prototype.findEdgeRingContaining=function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),i=n.getCoordinateN(0),o=null,a=null,s=e.iterator();s.hasNext();){var l=s.next(),u=l.getLinearRing(),c=u.getEnvelopeInternal();null!==o&&(a=o.getLinearRing().getEnvelopeInternal());var p=!1;c.contains(r)&&_t.isPointInRing(i,u.getCoordinates())&&(p=!0),p&&(null===o||a.contains(c))&&(o=l)}return o},On.prototype.findShell=function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var i=r.next();i.isHole()||(n=i,e++)}return rt.isTrue(e<=1,"found two shells in MinimalEdgeRing list"),n},On.prototype.add=function(){var t,e,n,r,i;1===arguments.length?(t=arguments[0],this.add(t.getEdgeEnds(),t.getNodes())):2===arguments.length&&(e=arguments[0],Pn.linkResultDirectedEdges(arguments[1]),n=this.buildMaximalEdgeRings(e),r=new Ft,i=this.buildMinimalEdgeRings(n,this._shellList,r),this.sortShellsAndHoles(i,this._shellList,r),this.placeFreeHoles(this._shellList,r))},On.prototype.interfaces_=function(){return[]},On.prototype.getClass=function(){return On};function Tn(){}Tn.prototype.getBounds=function(){},Tn.prototype.interfaces_=function(){return[]},Tn.prototype.getClass=function(){return Tn};function Sn(t,e){this._bounds=null,this._item=null;var n=e;this._bounds=t,this._item=n}Sn.prototype.getItem=function(){return this._item},Sn.prototype.getBounds=function(){return this._bounds},Sn.prototype.interfaces_=function(){return[Tn,e]},Sn.prototype.getClass=function(){return Sn};function In(){this._size=null,this._items=null,this._size=0,this._items=new Ft,this._items.add(null)}In.prototype.poll=function(){if(this.isEmpty())return null;var t=this._items.get(1);return this._items.set(1,this._items.get(this._size)),--this._size,this.reorder(1),t},In.prototype.size=function(){return this._size},In.prototype.reorder=function(t){for(var e=null,n=this._items.get(t);2*t<=this._size&&((e=2*t)!==this._size&&this._items.get(e+1).compareTo(this._items.get(e))<0&&e++,this._items.get(e).compareTo(n)<0);t=e)this._items.set(t,this._items.get(e));this._items.set(t,n)},In.prototype.clear=function(){this._size=0,this._items.clear()},In.prototype.isEmpty=function(){return 0===this._size},In.prototype.add=function(t){this._items.add(null),this._size+=1;var e=this._size;for(this._items.set(0,t);t.compareTo(this._items.get(Math.trunc(e/2)))<0;e/=2)this._items.set(e,this._items.get(Math.trunc(e/2)));this._items.set(e,t)},In.prototype.interfaces_=function(){return[]},In.prototype.getClass=function(){return In};function An(){}An.prototype.visitItem=function(t){},An.prototype.interfaces_=function(){return[]},An.prototype.getClass=function(){return An};function Ln(){}Ln.prototype.insert=function(t,e){},Ln.prototype.remove=function(t,e){},Ln.prototype.query=function(){},Ln.prototype.interfaces_=function(){return[]},Ln.prototype.getClass=function(){return Ln};function Nn(t){this._childBoundables=new Ft,this._bounds=null,this._level=null,0===arguments.length||1===arguments.length&&(this._level=t)}var Mn={serialVersionUID:{configurable:!0}};Nn.prototype.getLevel=function(){return this._level},Nn.prototype.size=function(){return this._childBoundables.size()},Nn.prototype.getChildBoundables=function(){return this._childBoundables},Nn.prototype.addChildBoundable=function(t){rt.isTrue(null===this._bounds),this._childBoundables.add(t)},Nn.prototype.isEmpty=function(){return this._childBoundables.isEmpty()},Nn.prototype.getBounds=function(){return null===this._bounds&&(this._bounds=this.computeBounds()),this._bounds},Nn.prototype.interfaces_=function(){return[Tn,e]},Nn.prototype.getClass=function(){return Nn},Mn.serialVersionUID.get=function(){return 0x5a1e55ec41369800},Object.defineProperties(Nn,Mn);function Dn(){}Dn.reverseOrder=function(){return{compare:function(t,e){return e.compareTo(t)}}},Dn.min=function(t){return Dn.sort(t),t.get(0)},Dn.sort=function(t,e){var n=t.toArray();e?oe.sort(n,e):oe.sort(n);for(var r=t.iterator(),i=0,o=n.length;i<o;i++)r.next(),r.set(n[i])},Dn.singletonList=function(t){var e=new Ft;return e.add(t),e};function Rn(t,e,n){this._boundable1=null,this._boundable2=null,this._distance=null,this._itemDistance=null;var r=e,i=n;this._boundable1=t,this._boundable2=r,this._itemDistance=i,this._distance=this.distance()}Rn.prototype.expandToQueue=function(t,e){var n=Rn.isComposite(this._boundable1),r=Rn.isComposite(this._boundable2);if(n&&r)return Rn.area(this._boundable1)>Rn.area(this._boundable2)?this.expand(this._boundable1,this._boundable2,t,e):this.expand(this._boundable2,this._boundable1,t,e),null;if(n)return this.expand(this._boundable1,this._boundable2,t,e),null;if(r)return this.expand(this._boundable2,this._boundable1,t,e),null;throw new b("neither boundable is composite")},Rn.prototype.isLeaves=function(){return!(Rn.isComposite(this._boundable1)||Rn.isComposite(this._boundable2))},Rn.prototype.compareTo=function(t){return this._distance<t._distance?-1:this._distance>t._distance?1:0},Rn.prototype.expand=function(t,e,n,r){for(var i=t.getChildBoundables().iterator();i.hasNext();){var o=i.next(),a=new Rn(o,e,this._itemDistance);a.getDistance()<r&&n.add(a)}},Rn.prototype.getBoundable=function(t){return 0===t?this._boundable1:this._boundable2},Rn.prototype.getDistance=function(){return this._distance},Rn.prototype.distance=function(){return this.isLeaves()?this._itemDistance.distance(this._boundable1,this._boundable2):this._boundable1.getBounds().distance(this._boundable2.getBounds())},Rn.prototype.interfaces_=function(){return[C]},Rn.prototype.getClass=function(){return Rn},Rn.area=function(t){return t.getBounds().getArea()},Rn.isComposite=function(t){return t instanceof Nn};function jn(){var t,e;this._root=null,this._built=!1,this._itemBoundables=new Ft,this._nodeCapacity=null,0===arguments.length?(t=jn.DEFAULT_NODE_CAPACITY,this._nodeCapacity=t):1===arguments.length&&(rt.isTrue(1<(e=arguments[0]),"Node capacity must be greater than 1"),this._nodeCapacity=e)}var kn={IntersectsOp:{configurable:!0},serialVersionUID:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};jn.prototype.getNodeCapacity=function(){return this._nodeCapacity},jn.prototype.lastNode=function(t){return t.get(t.size()-1)},jn.prototype.size=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.size(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n=e.next();n instanceof Nn?t+=this.size(n):n instanceof Sn&&(t+=1)}return t}},jn.prototype.removeItem=function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var i=r.next();i instanceof Sn&&i.getItem()===e&&(n=i)}return null!==n&&(t.getChildBoundables().remove(n),!0)},jn.prototype.itemsTree=function(){if(0===arguments.length){this.build();var t=this.itemsTree(this._root);return null===t?new Ft:t}if(1===arguments.length){for(var e=arguments[0],n=new Ft,r=e.getChildBoundables().iterator();r.hasNext();){var i,o=r.next();o instanceof Nn?null!==(i=this.itemsTree(o))&&n.add(i):o instanceof Sn?n.add(o.getItem()):rt.shouldNeverReachHere()}return n.size()<=0?null:n}},jn.prototype.insert=function(t,e){rt.isTrue(!this._built,"Cannot insert items into an STR packed R-tree after it has been built."),this._itemBoundables.add(new Sn(t,e))},jn.prototype.boundablesAtLevel=function(){if(1===arguments.length){var t=arguments[0],e=new Ft;return this.boundablesAtLevel(t,this._root,e),e}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2];if(rt.isTrue(-2<n),r.getLevel()===n)return i.add(r),null;for(var o=r.getChildBoundables().iterator();o.hasNext();){var a=o.next();a instanceof Nn?this.boundablesAtLevel(n,a,i):(rt.isTrue(a instanceof Sn),-1===n&&i.add(a))}return null}},jn.prototype.query=function(){if(1===arguments.length){var t=arguments[0];this.build();var e=new Ft;return this.isEmpty()||this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.query(t,this._root,e),e}if(2===arguments.length){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this._root.getBounds(),n)&&this.query(n,this._root,r)}else if(3===arguments.length)if(N(arguments[2],An)&&arguments[0]instanceof Object&&arguments[1]instanceof Nn)for(var i=arguments[0],o=arguments[2],a=arguments[1].getChildBoundables(),s=0;s<a.size();s++){var l=a.get(s);this.getIntersectsOp().intersects(l.getBounds(),i)&&(l instanceof Nn?this.query(i,l,o):l instanceof Sn?o.visitItem(l.getItem()):rt.shouldNeverReachHere())}else if(N(arguments[2],Mt)&&arguments[0]instanceof Object&&arguments[1]instanceof Nn)for(var u=arguments[0],c=arguments[2],p=arguments[1].getChildBoundables(),h=0;h<p.size();h++){var f=p.get(h);this.getIntersectsOp().intersects(f.getBounds(),u)&&(f instanceof Nn?this.query(u,f,c):f instanceof Sn?c.add(f.getItem()):rt.shouldNeverReachHere())}},jn.prototype.build=function(){if(this._built)return null;this._root=this._itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this._itemBoundables,-1),this._itemBoundables=null,this._built=!0},jn.prototype.getRoot=function(){return this.build(),this._root},jn.prototype.remove=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.build(),!!this.getIntersectsOp().intersects(this._root.getBounds(),t)&&this.remove(t,this._root,e)}if(3===arguments.length){var n=arguments[0],r=arguments[1],i=arguments[2],o=this.removeItem(r,i);if(o)return!0;for(var a=null,s=r.getChildBoundables().iterator();s.hasNext();){var l=s.next();if(this.getIntersectsOp().intersects(l.getBounds(),n)&&l instanceof Nn&&(o=this.remove(n,l,i))){a=l;break}}return null!==a&&a.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(a),o}},jn.prototype.createHigherLevels=function(t,e){rt.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return 1===n.size()?n.get(0):this.createHigherLevels(n,e+1)},jn.prototype.depth=function(){if(0===arguments.length)return this.isEmpty()?0:(this.build(),this.depth(this._root));if(1===arguments.length){for(var t=0,e=arguments[0].getChildBoundables().iterator();e.hasNext();){var n,r=e.next();r instanceof Nn&&(t<(n=this.depth(r))&&(t=n))}return t+1}},jn.prototype.createParentBoundables=function(t,e){rt.isTrue(!t.isEmpty());var n=new Ft;n.add(this.createNode(e));var r=new Ft(t);Dn.sort(r,this.getComparator());for(var i=r.iterator();i.hasNext();){var o=i.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(o)}return n},jn.prototype.isEmpty=function(){return this._built?this._root.isEmpty():this._itemBoundables.isEmpty()},jn.prototype.interfaces_=function(){return[e]},jn.prototype.getClass=function(){return jn},jn.compareDoubles=function(t,e){return e<t?1:t<e?-1:0},kn.IntersectsOp.get=function(){return Bn},kn.serialVersionUID.get=function(){return-0x35ef64c82d4c5400},kn.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(jn,kn);function Fn(){}var Bn=function(){};Fn.prototype.distance=function(t,e){},Fn.prototype.interfaces_=function(){return[]},Fn.prototype.getClass=function(){return Fn};function Gn(){}var zn,Un=function(u){function y(t){t=t||y.DEFAULT_NODE_CAPACITY,u.call(this,t)}u&&(y.__proto__=u);var t={STRtreeNode:{configurable:!0},serialVersionUID:{configurable:!0},xComparator:{configurable:!0},yComparator:{configurable:!0},intersectsOp:{configurable:!0},DEFAULT_NODE_CAPACITY:{configurable:!0}};return((y.prototype=Object.create(u&&u.prototype)).constructor=y).prototype.createParentBoundablesFromVerticalSlices=function(t,e){rt.isTrue(0<t.length);for(var n=new Ft,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},y.prototype.createNode=function(t){return new Vn(t)},y.prototype.size=function(){return 0===arguments.length?u.prototype.size.call(this):u.prototype.size.apply(this,arguments)},y.prototype.insert=function(){if(2!==arguments.length)return u.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];if(t.isNull())return null;u.prototype.insert.call(this,t,e)},y.prototype.getIntersectsOp=function(){return y.intersectsOp},y.prototype.verticalSlices=function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),i=t.iterator(),o=0;o<e;o++){r[o]=new Ft;for(var a=0;i.hasNext()&&a<n;){var s=i.next();r[o].add(s),a++}}return r},y.prototype.query=function(){if(1===arguments.length){var t=arguments[0];return u.prototype.query.call(this,t)}var e,n,r,i,o,a,s,l;2===arguments.length?(e=arguments[0],n=arguments[1],u.prototype.query.call(this,e,n)):3===arguments.length&&(N(arguments[2],An)&&arguments[0]instanceof Object&&arguments[1]instanceof Nn?(r=arguments[0],i=arguments[1],o=arguments[2],u.prototype.query.call(this,r,i,o)):N(arguments[2],Mt)&&arguments[0]instanceof Object&&arguments[1]instanceof Nn&&(a=arguments[0],s=arguments[1],l=arguments[2],u.prototype.query.call(this,a,s,l)))},y.prototype.getComparator=function(){return y.yComparator},y.prototype.createParentBoundablesFromVerticalSlice=function(t,e){return u.prototype.createParentBoundables.call(this,t,e)},y.prototype.remove=function(){if(2!==arguments.length)return u.prototype.remove.apply(this,arguments);var t=arguments[0],e=arguments[1];return u.prototype.remove.call(this,t,e)},y.prototype.depth=function(){return 0===arguments.length?u.prototype.depth.call(this):u.prototype.depth.apply(this,arguments)},y.prototype.createParentBoundables=function(t,e){rt.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new Ft(t);Dn.sort(r,y.xComparator);var i=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(i,e)},y.prototype.nearestNeighbour=function(){if(1===arguments.length){if(N(arguments[0],Fn)){var t=arguments[0],e=new Rn(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof Rn){var n=arguments[0];return this.nearestNeighbour(n,m.POSITIVE_INFINITY)}}else if(2===arguments.length){if(arguments[0]instanceof y&&N(arguments[1],Fn)){var r=arguments[0],i=arguments[1],o=new Rn(this.getRoot(),r.getRoot(),i);return this.nearestNeighbour(o)}if(arguments[0]instanceof Rn&&"number"==typeof arguments[1]){var a=arguments[0],s=arguments[1],l=null,u=new In;for(u.add(a);!u.isEmpty()&&0<s;){var c=u.poll(),p=c.getDistance();if(s<=p)break;c.isLeaves()?(s=p,l=c):c.expandToQueue(u,s)}return[l.getBoundable(0).getItem(),l.getBoundable(1).getItem()]}}else if(3===arguments.length){var h=arguments[2],f=new Sn(arguments[0],arguments[1]),d=new Rn(this.getRoot(),f,h);return this.nearestNeighbour(d)[0]}},y.prototype.interfaces_=function(){return[Ln,e]},y.prototype.getClass=function(){return y},y.centreX=function(t){return y.avg(t.getMinX(),t.getMaxX())},y.avg=function(t,e){return(t+e)/2},y.centreY=function(t){return y.avg(t.getMinY(),t.getMaxY())},t.STRtreeNode.get=function(){return Vn},t.serialVersionUID.get=function(){return 0x39920f7d5f261e0},t.xComparator.get=function(){return{interfaces_:function(){return[P]},compare:function(t,e){return u.compareDoubles(y.centreX(t.getBounds()),y.centreX(e.getBounds()))}}},t.yComparator.get=function(){return{interfaces_:function(){return[P]},compare:function(t,e){return u.compareDoubles(y.centreY(t.getBounds()),y.centreY(e.getBounds()))}}},t.intersectsOp.get=function(){return{interfaces_:function(){return[u.IntersectsOp]},intersects:function(t,e){return t.intersects(e)}}},t.DEFAULT_NODE_CAPACITY.get=function(){return 10},Object.defineProperties(y,t),y}(jn),Vn=((zn=Nn)&&(Hn.__proto__=zn),((Hn.prototype=Object.create(zn&&zn.prototype)).constructor=Hn).prototype.computeBounds=function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();null===t?t=new Z(n.getBounds()):t.expandToInclude(n.getBounds())}return t},Hn.prototype.interfaces_=function(){return[]},Hn.prototype.getClass=function(){return Hn},Hn);function Hn(){var t=arguments[0];zn.call(this,t)}Gn.prototype.interfaces_=function(){return[]},Gn.prototype.getClass=function(){return Gn},Gn.relativeSign=function(t,e){return t<e?-1:e<t?1:0},Gn.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=Gn.relativeSign(e.x,n.x),i=Gn.relativeSign(e.y,n.y);switch(t){case 0:return Gn.compareValue(r,i);case 1:return Gn.compareValue(i,r);case 2:return Gn.compareValue(i,-r);case 3:return Gn.compareValue(-r,i);case 4:return Gn.compareValue(-r,-i);case 5:return Gn.compareValue(-i,-r);case 6:return Gn.compareValue(-i,r);case 7:return Gn.compareValue(r,-i)}return rt.shouldNeverReachHere("invalid octant value"),0},Gn.compareValue=function(t,e){return t<0?-1:0<t?1:e<0?-1:0<e?1:0};function qn(t,e,n,r){this._segString=null,this.coord=null,this.segmentIndex=null,this._segmentOctant=null,this._isInterior=null;var i=t,o=e,a=n,s=r;this._segString=i,this.coord=new O(o),this.segmentIndex=a,this._segmentOctant=s,this._isInterior=!o.equals2D(i.getCoordinate(a))}qn.prototype.getCoordinate=function(){return this.coord},qn.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},qn.prototype.compareTo=function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:Gn.compare(this._segmentOctant,this.coord,e.coord)},qn.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&!this._isInterior||this.segmentIndex===t},qn.prototype.isInterior=function(){return this._isInterior},qn.prototype.interfaces_=function(){return[C]},qn.prototype.getClass=function(){return qn};function Wn(t){this._nodeMap=new p,this._edge=null,this._edge=t}Wn.prototype.getSplitCoordinates=function(){var t=new Gt;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},Wn.prototype.addCollapsedNodes=function(){var t=new Ft;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this._edge.getCoordinate(n),n)}},Wn.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Wn.prototype.findCollapsesFromExistingVertices=function(t){for(var e=0;e<this._edge.size()-2;e++){var n=this._edge.getCoordinate(e),r=this._edge.getCoordinate(e+2);n.equals2D(r)&&t.add(new j(e+1))}},Wn.prototype.addEdgeCoordinates=function(t,e,n){var r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);n.add(new O(t.coord),!1);for(var o=t.segmentIndex+1;o<=e.segmentIndex;o++)n.add(this._edge.getCoordinate(o));i&&n.add(new O(e.coord))},Wn.prototype.iterator=function(){return this._nodeMap.values().iterator()},Wn.prototype.addSplitEdges=function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Wn.prototype.findCollapseIndex=function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,1===r&&(n[0]=t.segmentIndex+1,!0)},Wn.prototype.findCollapsesFromInsertedNodes=function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var i=n.next();this.findCollapseIndex(r,i,e)&&t.add(new j(e[0])),r=i}},Wn.prototype.getEdge=function(){return this._edge},Wn.prototype.addEndpoints=function(){var t=this._edge.size()-1;this.add(this._edge.getCoordinate(0),0),this.add(this._edge.getCoordinate(t),t)},Wn.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this._edge.getCoordinate(e.segmentIndex),i=e.isInterior()||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new O(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this._edge.getCoordinate(s);return i&&(o[a]=new O(e.coord)),new Zn(o,this._edge.getData())},Wn.prototype.add=function(t,e){var n=new qn(this._edge,t,e,this._edge.getSegmentOctant(e)),r=this._nodeMap.get(n);return null!==r?(rt.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this._nodeMap.put(n,n),n)},Wn.prototype.checkSplitEdgesCorrectness=function(t){var e=this._edge.getCoordinates(),n=t.get(0).getCoordinate(0);if(!n.equals2D(e[0]))throw new at("bad split edge start point at "+n);var r=t.get(t.size()-1).getCoordinates(),i=r[r.length-1];if(!i.equals2D(e[e.length-1]))throw new at("bad split edge end point at "+i)},Wn.prototype.interfaces_=function(){return[]},Wn.prototype.getClass=function(){return Wn};function Yn(){}Yn.prototype.interfaces_=function(){return[]},Yn.prototype.getClass=function(){return Yn},Yn.octant=function(){if("number"==typeof arguments[0]&&"number"==typeof arguments[1]){var t=arguments[0],e=arguments[1];if(0===t&&0===e)throw new b("Cannot compute the octant for point ( "+t+", "+e+" )");var n=Math.abs(t),r=Math.abs(e);return 0<=t?0<=e?r<=n?0:1:r<=n?7:6:0<=e?r<=n?3:2:r<=n?4:5}if(arguments[0]instanceof O&&arguments[1]instanceof O){var i=arguments[0],o=arguments[1],a=o.x-i.x,s=o.y-i.y;if(0==a&&0==s)throw new b("Cannot compute the octant for two identical points "+i);return Yn.octant(a,s)}};function Xn(){}Xn.prototype.getCoordinates=function(){},Xn.prototype.size=function(){},Xn.prototype.getCoordinate=function(t){},Xn.prototype.isClosed=function(){},Xn.prototype.setData=function(t){},Xn.prototype.getData=function(){},Xn.prototype.interfaces_=function(){return[]},Xn.prototype.getClass=function(){return Xn};function Jn(){}Jn.prototype.addIntersection=function(t,e){},Jn.prototype.interfaces_=function(){return[Xn]},Jn.prototype.getClass=function(){return Jn};var Zn=function(t,e){this._nodeList=new Wn(this),this._pts=null,this._data=null;var n=e;this._pts=t,this._data=n};Zn.prototype.getCoordinates=function(){return this._pts},Zn.prototype.size=function(){return this._pts.length},Zn.prototype.getCoordinate=function(t){return this._pts[t]},Zn.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Zn.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},Zn.prototype.setData=function(t){this._data=t},Zn.prototype.safeOctant=function(t,e){return t.equals2D(e)?0:Yn.octant(t,e)},Zn.prototype.getData=function(){return this._data},Zn.prototype.addIntersection=function(){var t,e,n,r,i;2===arguments.length?(t=arguments[0],e=arguments[1],this.addIntersectionNode(t,e)):4===arguments.length&&(n=arguments[1],r=arguments[3],i=new O(arguments[0].getIntersection(r)),this.addIntersection(i,n))},Zn.prototype.toString=function(){return tt.toLineString(new Ae(this._pts))},Zn.prototype.getNodeList=function(){return this._nodeList},Zn.prototype.addIntersectionNode=function(t,e){var n,r=e,i=r+1;return i<this._pts.length&&(n=this._pts[i],t.equals2D(n)&&(r=i)),this._nodeList.add(t,r)},Zn.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},Zn.prototype.interfaces_=function(){return[Jn]},Zn.prototype.getClass=function(){return Zn},Zn.getNodedSubstrings=function(){if(1===arguments.length){var t=arguments[0],e=new Ft;return Zn.getNodedSubstrings(t,e),e}if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();)r.next().getNodeList().addSplitEdges(n)};function Kn(t,e,n,r){var i,o,a;this.p0=null,this.p1=null,0===arguments.length?(this.p0=new O,this.p1=new O):1===arguments.length?(i=t,this.p0=new O(i.p0),this.p1=new O(i.p1)):2===arguments.length?(this.p0=t,this.p1=e):4===arguments.length&&(o=n,a=r,this.p0=new O(t,e),this.p1=new O(o,a))}var $n={serialVersionUID:{configurable:!0}};Kn.prototype.minX=function(){return Math.min(this.p0.x,this.p1.x)},Kn.prototype.orientationIndex=function(){if(arguments[0]instanceof Kn){var t=arguments[0],e=_t.orientationIndex(this.p0,this.p1,t.p0),n=_t.orientationIndex(this.p0,this.p1,t.p1);return 0<=e&&0<=n||e<=0&&n<=0?Math.max(e,n):0}if(arguments[0]instanceof O){var r=arguments[0];return _t.orientationIndex(this.p0,this.p1,r)}},Kn.prototype.toGeometry=function(t){return t.createLineString([this.p0,this.p1])},Kn.prototype.isVertical=function(){return this.p0.x===this.p1.x},Kn.prototype.equals=function(t){if(!(t instanceof Kn))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},Kn.prototype.intersection=function(t){var e=new dt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},Kn.prototype.project=function(){if(arguments[0]instanceof O){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new O(t);var e=this.projectionFactor(t),n=new O;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof Kn){var r=arguments[0],i=this.projectionFactor(r.p0),o=this.projectionFactor(r.p1);if(1<=i&&1<=o)return null;if(i<=0&&o<=0)return null;var a=this.project(r.p0);i<0&&(a=this.p0),1<i&&(a=this.p1);var s=this.project(r.p1);return o<0&&(s=this.p0),1<o&&(s=this.p1),new Kn(a,s)}},Kn.prototype.normalize=function(){this.p1.compareTo(this.p0)<0&&this.reverse()},Kn.prototype.angle=function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},Kn.prototype.getCoordinate=function(t){return 0===t?this.p0:this.p1},Kn.prototype.distancePerpendicular=function(t){return _t.distancePointLinePerpendicular(t,this.p0,this.p1)},Kn.prototype.minY=function(){return Math.min(this.p0.y,this.p1.y)},Kn.prototype.midPoint=function(){return Kn.midPoint(this.p0,this.p1)},Kn.prototype.projectionFactor=function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;return r<=0?m.NaN:((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r},Kn.prototype.closestPoints=function(t){var e=this.intersection(t);if(null!==e)return[e,e];var n=new Array(2).fill(null),r=m.MAX_VALUE,i=null,o=this.closestPoint(t.p0),r=o.distance(t.p0);n[0]=o,n[1]=t.p0;var a=this.closestPoint(t.p1);(i=a.distance(t.p1))<r&&(r=i,n[0]=a,n[1]=t.p1);var s=t.closestPoint(this.p0);(i=s.distance(this.p0))<r&&(r=i,n[0]=this.p0,n[1]=s);var l=t.closestPoint(this.p1);return(i=l.distance(this.p1))<r&&(r=i,n[0]=this.p1,n[1]=l),n},Kn.prototype.closestPoint=function(t){var e=this.projectionFactor(t);return 0<e&&e<1?this.project(t):this.p0.distance(t)<this.p1.distance(t)?this.p0:this.p1},Kn.prototype.maxX=function(){return Math.max(this.p0.x,this.p1.x)},Kn.prototype.getLength=function(){return this.p0.distance(this.p1)},Kn.prototype.compareTo=function(t){var e=t,n=this.p0.compareTo(e.p0);return 0!==n?n:this.p1.compareTo(e.p1)},Kn.prototype.reverse=function(){var t=this.p0;this.p0=this.p1,this.p1=t},Kn.prototype.equalsTopo=function(t){return this.p0.equals(t.p0)&&(this.p1.equals(t.p1)||this.p0.equals(t.p1))&&this.p1.equals(t.p0)},Kn.prototype.lineIntersection=function(t){try{return J.intersection(this.p0,this.p1,t.p0,t.p1)}catch(t){if(!(t instanceof Y))throw t}return null},Kn.prototype.maxY=function(){return Math.max(this.p0.y,this.p1.y)},Kn.prototype.pointAlongOffset=function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),i=this.p1.x-this.p0.x,o=this.p1.y-this.p0.y,a=Math.sqrt(i*i+o*o),s=0,l=0;if(0!==e){if(a<=0)throw new Error("Cannot compute offset from zero-length line segment");s=e*i/a,l=e*o/a}return new O(n-l,r+s)},Kn.prototype.setCoordinates=function(){var t,e,n;1===arguments.length?(t=arguments[0],this.setCoordinates(t.p0,t.p1)):2===arguments.length&&(e=arguments[0],n=arguments[1],this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y)},Kn.prototype.segmentFraction=function(t){var e=this.projectionFactor(t);return e<0?e=0:(1<e||m.isNaN(e))&&(e=1),e},Kn.prototype.toString=function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},Kn.prototype.isHorizontal=function(){return this.p0.y===this.p1.y},Kn.prototype.distance=function(){if(arguments[0]instanceof Kn){var t=arguments[0];return _t.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof O){var e=arguments[0];return _t.distancePointLine(e,this.p0,this.p1)}},Kn.prototype.pointAlong=function(t){var e=new O;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},Kn.prototype.hashCode=function(){var t=m.doubleToLongBits(this.p0.x);t^=31*m.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=m.doubleToLongBits(this.p1.x);return n^=31*m.doubleToLongBits(this.p1.y),e^(Math.trunc(n)^Math.trunc(n>>32))},Kn.prototype.interfaces_=function(){return[C,e]},Kn.prototype.getClass=function(){return Kn},Kn.midPoint=function(t,e){return new O((t.x+e.x)/2,(t.y+e.y)/2)},$n.serialVersionUID.get=function(){return 0x2d2172135f411c00},Object.defineProperties(Kn,$n);function Qn(){this.tempEnv1=new Z,this.tempEnv2=new Z,this._overlapSeg1=new Kn,this._overlapSeg2=new Kn}Qn.prototype.overlap=function(){var t,e,n;2===arguments.length||4===arguments.length&&(t=arguments[1],e=arguments[2],n=arguments[3],arguments[0].getLineSegment(t,this._overlapSeg1),e.getLineSegment(n,this._overlapSeg2),this.overlap(this._overlapSeg1,this._overlapSeg2))},Qn.prototype.interfaces_=function(){return[]},Qn.prototype.getClass=function(){return Qn};function tr(t,e,n,r){this._pts=null,this._start=null,this._end=null,this._env=null,this._context=null,this._id=null;var i=e,o=n,a=r;this._pts=t,this._start=i,this._end=o,this._context=a}tr.prototype.getLineSegment=function(t,e){e.p0=this._pts[t],e.p1=this._pts[t+1]},tr.prototype.computeSelect=function(t,e,n,r){var i=this._pts[e],o=this._pts[n];if(r.tempEnv1.init(i,o),n-e==1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var a=Math.trunc((e+n)/2);e<a&&this.computeSelect(t,e,a,r),a<n&&this.computeSelect(t,a,n,r)},tr.prototype.getCoordinates=function(){for(var t=new Array(this._end-this._start+1).fill(null),e=0,n=this._start;n<=this._end;n++)t[e++]=this._pts[n];return t},tr.prototype.computeOverlaps=function(t,e){this.computeOverlapsInternal(this._start,this._end,t,t._start,t._end,e)},tr.prototype.setId=function(t){this._id=t},tr.prototype.select=function(t,e){this.computeSelect(t,this._start,this._end,e)},tr.prototype.getEnvelope=function(){var t,e;return null===this._env&&(t=this._pts[this._start],e=this._pts[this._end],this._env=new Z(t,e)),this._env},tr.prototype.getEndIndex=function(){return this._end},tr.prototype.getStartIndex=function(){return this._start},tr.prototype.getContext=function(){return this._context},tr.prototype.getId=function(){return this._id},tr.prototype.computeOverlapsInternal=function(t,e,n,r,i,o){var a=this._pts[t],s=this._pts[e],l=n._pts[r],u=n._pts[i];if(e-t==1&&i-r==1)return o.overlap(this,t,n,r),null;if(o.tempEnv1.init(a,s),o.tempEnv2.init(l,u),!o.tempEnv1.intersects(o.tempEnv2))return null;var c=Math.trunc((t+e)/2),p=Math.trunc((r+i)/2);t<c&&(r<p&&this.computeOverlapsInternal(t,c,n,r,p,o),p<i&&this.computeOverlapsInternal(t,c,n,p,i,o)),c<e&&(r<p&&this.computeOverlapsInternal(c,e,n,r,p,o),p<i&&this.computeOverlapsInternal(c,e,n,p,i,o))},tr.prototype.interfaces_=function(){return[]},tr.prototype.getClass=function(){return tr};function er(){}er.prototype.interfaces_=function(){return[]},er.prototype.getClass=function(){return er},er.getChainStartIndices=function(t){var e=0,n=new Ft;n.add(new j(e));do{var r=er.findChainEnd(t,e);n.add(new j(r)),e=r}while(e<t.length-1);return er.toIntArray(n)},er.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=mn.quadrant(t[n],t[n+1]),i=e+1;i<t.length&&(t[i-1].equals2D(t[i])||mn.quadrant(t[i-1],t[i])===r);)i++;return i-1},er.getChains=function(){if(1===arguments.length)return er.getChains(arguments[0],null);if(2===arguments.length){for(var t=arguments[0],e=arguments[1],n=new Ft,r=er.getChainStartIndices(t),i=0;i<r.length-1;i++){var o=new tr(t,r[i],r[i+1],e);n.add(o)}return n}},er.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};function nr(){}nr.prototype.computeNodes=function(t){},nr.prototype.getNodedSubstrings=function(){},nr.prototype.interfaces_=function(){return[]},nr.prototype.getClass=function(){return nr};function rr(t){this._segInt=null,0===arguments.length||1===arguments.length&&this.setSegmentIntersector(t)}rr.prototype.setSegmentIntersector=function(t){this._segInt=t},rr.prototype.interfaces_=function(){return[nr]},rr.prototype.getClass=function(){return rr};function ir(){var t,e,n,r,i,o,a;this._quadrantSegments=ir.DEFAULT_QUADRANT_SEGMENTS,this._endCapStyle=ir.CAP_ROUND,this._joinStyle=ir.JOIN_ROUND,this._mitreLimit=ir.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this._simplifyFactor=ir.DEFAULT_SIMPLIFY_FACTOR,0===arguments.length||(1===arguments.length?(t=arguments[0],this.setQuadrantSegments(t)):2===arguments.length?(e=arguments[0],n=arguments[1],this.setQuadrantSegments(e),this.setEndCapStyle(n)):4===arguments.length&&(r=arguments[0],i=arguments[1],o=arguments[2],a=arguments[3],this.setQuadrantSegments(r),this.setEndCapStyle(i),this.setJoinStyle(o),this.setMitreLimit(a)))}var or,ar=function(e){function t(t){t?e.call(this,t):e.call(this),this._monoChains=new Ft,this._index=new Un,this._idCounter=0,this._nodedSegStrings=null,this._nOverlaps=0}e&&(t.__proto__=e);var n={SegmentOverlapAction:{configurable:!0}};return((t.prototype=Object.create(e&&e.prototype)).constructor=t).prototype.getMonotoneChains=function(){return this._monoChains},t.prototype.getNodedSubstrings=function(){return Zn.getNodedSubstrings(this._nodedSegStrings)},t.prototype.getIndex=function(){return this._index},t.prototype.add=function(t){for(var e=er.getChains(t.getCoordinates(),t).iterator();e.hasNext();){var n=e.next();n.setId(this._idCounter++),this._index.insert(n.getEnvelope(),n),this._monoChains.add(n)}},t.prototype.computeNodes=function(t){for(var e=(this._nodedSegStrings=t).iterator();e.hasNext();)this.add(e.next());this.intersectChains()},t.prototype.intersectChains=function(){for(var t=new sr(this._segInt),e=this._monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this._index.query(n.getEnvelope()).iterator();r.hasNext();){var i=r.next();if(i.getId()>n.getId()&&(n.computeOverlaps(i,t),this._nOverlaps++),this._segInt.isDone())return null}},t.prototype.interfaces_=function(){return[]},t.prototype.getClass=function(){return t},n.SegmentOverlapAction.get=function(){return sr},Object.defineProperties(t,n),t}(rr),sr=((or=Qn)&&(ur.__proto__=or),((ur.prototype=Object.create(or&&or.prototype)).constructor=ur).prototype.overlap=function(){if(4!==arguments.length)return or.prototype.overlap.apply(this,arguments);var t=arguments[1],e=arguments[2],n=arguments[3],r=arguments[0].getContext(),i=e.getContext();this._si.processIntersections(r,t,i,n)},ur.prototype.interfaces_=function(){return[]},ur.prototype.getClass=function(){return ur},ur),lr={CAP_ROUND:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},JOIN_ROUND:{configurable:!0},JOIN_MITRE:{configurable:!0},JOIN_BEVEL:{configurable:!0},DEFAULT_QUADRANT_SEGMENTS:{configurable:!0},DEFAULT_MITRE_LIMIT:{configurable:!0},DEFAULT_SIMPLIFY_FACTOR:{configurable:!0}};function ur(){or.call(this),this._si=null;var t=arguments[0];this._si=t}ir.prototype.getEndCapStyle=function(){return this._endCapStyle},ir.prototype.isSingleSided=function(){return this._isSingleSided},ir.prototype.setQuadrantSegments=function(t){this._quadrantSegments=t,0===this._quadrantSegments&&(this._joinStyle=ir.JOIN_BEVEL),this._quadrantSegments<0&&(this._joinStyle=ir.JOIN_MITRE,this._mitreLimit=Math.abs(this._quadrantSegments)),t<=0&&(this._quadrantSegments=1),this._joinStyle!==ir.JOIN_ROUND&&(this._quadrantSegments=ir.DEFAULT_QUADRANT_SEGMENTS)},ir.prototype.getJoinStyle=function(){return this._joinStyle},ir.prototype.setJoinStyle=function(t){this._joinStyle=t},ir.prototype.setSimplifyFactor=function(t){this._simplifyFactor=t<0?0:t},ir.prototype.getSimplifyFactor=function(){return this._simplifyFactor},ir.prototype.getQuadrantSegments=function(){return this._quadrantSegments},ir.prototype.setEndCapStyle=function(t){this._endCapStyle=t},ir.prototype.getMitreLimit=function(){return this._mitreLimit},ir.prototype.setMitreLimit=function(t){this._mitreLimit=t},ir.prototype.setSingleSided=function(t){this._isSingleSided=t},ir.prototype.interfaces_=function(){return[]},ir.prototype.getClass=function(){return ir},ir.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},lr.CAP_ROUND.get=function(){return 1},lr.CAP_FLAT.get=function(){return 2},lr.CAP_SQUARE.get=function(){return 3},lr.JOIN_ROUND.get=function(){return 1},lr.JOIN_MITRE.get=function(){return 2},lr.JOIN_BEVEL.get=function(){return 3},lr.DEFAULT_QUADRANT_SEGMENTS.get=function(){return 8},lr.DEFAULT_MITRE_LIMIT.get=function(){return 5},lr.DEFAULT_SIMPLIFY_FACTOR.get=function(){return.01},Object.defineProperties(ir,lr);function cr(t){this._distanceTol=null,this._isDeleted=null,this._angleOrientation=_t.COUNTERCLOCKWISE,this._inputLine=t||null}var pr={INIT:{configurable:!0},DELETE:{configurable:!0},KEEP:{configurable:!0},NUM_PTS_TO_CHECK:{configurable:!0}};cr.prototype.isDeletable=function(t,e,n,r){var i=this._inputLine[t],o=this._inputLine[e],a=this._inputLine[n];return!!this.isConcave(i,o,a)&&!!this.isShallow(i,o,a,r)&&this.isShallowSampled(i,o,t,n,r)},cr.prototype.deleteShallowConcavities=function(){for(var t=1,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e),r=!1;n<this._inputLine.length;){var i=!1;this.isDeletable(t,e,n,this._distanceTol)&&(this._isDeleted[e]=cr.DELETE,r=i=!0),t=i?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},cr.prototype.isShallowConcavity=function(t,e,n,r){return _t.computeOrientation(t,e,n)===this._angleOrientation&&_t.distancePointLine(e,t,n)<r},cr.prototype.isShallowSampled=function(t,e,n,r,i){var o=Math.trunc((r-n)/cr.NUM_PTS_TO_CHECK);o<=0&&(o=1);for(var a=n;a<r;a+=o)if(!this.isShallow(t,e,this._inputLine[a],i))return!1;return!0},cr.prototype.isConcave=function(t,e,n){return _t.computeOrientation(t,e,n)===this._angleOrientation},cr.prototype.simplify=function(t){this._distanceTol=Math.abs(t),t<0&&(this._angleOrientation=_t.CLOCKWISE),this._isDeleted=new Array(this._inputLine.length).fill(null);for(;this.deleteShallowConcavities(););return this.collapseLine()},cr.prototype.findNextNonDeletedIndex=function(t){for(var e=t+1;e<this._inputLine.length&&this._isDeleted[e]===cr.DELETE;)e++;return e},cr.prototype.isShallow=function(t,e,n,r){return _t.distancePointLine(e,t,n)<r},cr.prototype.collapseLine=function(){for(var t=new Gt,e=0;e<this._inputLine.length;e++)this._isDeleted[e]!==cr.DELETE&&t.add(this._inputLine[e]);return t.toCoordinateArray()},cr.prototype.interfaces_=function(){return[]},cr.prototype.getClass=function(){return cr},cr.simplify=function(t,e){return new cr(t).simplify(e)},pr.INIT.get=function(){return 0},pr.DELETE.get=function(){return 1},pr.KEEP.get=function(){return 1},pr.NUM_PTS_TO_CHECK.get=function(){return 10},Object.defineProperties(cr,pr);function hr(){this._ptList=null,this._precisionModel=null,this._minimimVertexDistance=0,this._ptList=new Ft}var fr={COORDINATE_ARRAY_TYPE:{configurable:!0}};hr.prototype.getCoordinates=function(){return this._ptList.toArray(hr.COORDINATE_ARRAY_TYPE)},hr.prototype.setPrecisionModel=function(t){this._precisionModel=t},hr.prototype.addPt=function(t){var e=new O(t);if(this._precisionModel.makePrecise(e),this.isRedundant(e))return null;this._ptList.add(e)},hr.prototype.revere=function(){},hr.prototype.addPts=function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var r=t.length-1;0<=r;r--)this.addPt(t[r])},hr.prototype.isRedundant=function(t){if(this._ptList.size()<1)return!1;var e=this._ptList.get(this._ptList.size()-1);return t.distance(e)<this._minimimVertexDistance},hr.prototype.toString=function(){return(new ze).createLineString(this.getCoordinates()).toString()},hr.prototype.closeRing=function(){if(this._ptList.size()<1)return null;var t=new O(this._ptList.get(0)),e=this._ptList.get(this._ptList.size()-1);if(t.equals(e))return null;this._ptList.add(t)},hr.prototype.setMinimumVertexDistance=function(t){this._minimimVertexDistance=t},hr.prototype.interfaces_=function(){return[]},hr.prototype.getClass=function(){return hr},fr.COORDINATE_ARRAY_TYPE.get=function(){return new Array(0).fill(null)},Object.defineProperties(hr,fr);function dr(){}var yr={PI_TIMES_2:{configurable:!0},PI_OVER_2:{configurable:!0},PI_OVER_4:{configurable:!0},COUNTERCLOCKWISE:{configurable:!0},CLOCKWISE:{configurable:!0},NONE:{configurable:!0}};dr.prototype.interfaces_=function(){return[]},dr.prototype.getClass=function(){return dr},dr.toDegrees=function(t){return 180*t/Math.PI},dr.normalize=function(t){for(;t>Math.PI;)t-=dr.PI_TIMES_2;for(;t<=-Math.PI;)t+=dr.PI_TIMES_2;return t},dr.angle=function(){if(1===arguments.length){var t=arguments[0];return Math.atan2(t.y,t.x)}if(2===arguments.length){var e=arguments[0],n=arguments[1],r=n.x-e.x,i=n.y-e.y;return Math.atan2(i,r)}},dr.isAcute=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return 0<r*(n.x-e.x)+i*(n.y-e.y)},dr.isObtuse=function(t,e,n){var r=t.x-e.x,i=t.y-e.y;return r*(n.x-e.x)+i*(n.y-e.y)<0},dr.interiorAngle=function(t,e,n){var r=dr.angle(e,t),i=dr.angle(e,n);return Math.abs(i-r)},dr.normalizePositive=function(t){if(t<0){for(;t<0;)t+=dr.PI_TIMES_2;dr.PI_TIMES_2<=t&&(t=0)}else{for(;dr.PI_TIMES_2<=t;)t-=dr.PI_TIMES_2;t<0&&(t=0)}return t},dr.angleBetween=function(t,e,n){var r=dr.angle(e,t),i=dr.angle(e,n);return dr.diff(r,i)},dr.diff=function(t,e){var n=null;return(n=t<e?e-t:t-e)>Math.PI&&(n=2*Math.PI-n),n},dr.toRadians=function(t){return t*Math.PI/180},dr.getTurn=function(t,e){var n=Math.sin(e-t);return 0<n?dr.COUNTERCLOCKWISE:n<0?dr.CLOCKWISE:dr.NONE},dr.angleBetweenOriented=function(t,e,n){var r=dr.angle(e,t),i=dr.angle(e,n)-r;return i<=-Math.PI?i+dr.PI_TIMES_2:i>Math.PI?i-dr.PI_TIMES_2:i},yr.PI_TIMES_2.get=function(){return 2*Math.PI},yr.PI_OVER_2.get=function(){return Math.PI/2},yr.PI_OVER_4.get=function(){return Math.PI/4},yr.COUNTERCLOCKWISE.get=function(){return _t.COUNTERCLOCKWISE},yr.CLOCKWISE.get=function(){return _t.CLOCKWISE},yr.NONE.get=function(){return _t.COLLINEAR},Object.defineProperties(dr,yr);function gr(){this._maxCurveSegmentError=0,this._filletAngleQuantum=null,this._closingSegLengthFactor=1,this._segList=null,this._distance=0,this._precisionModel=null,this._bufParams=null,this._li=null,this._s0=null,this._s1=null,this._s2=null,this._seg0=new Kn,this._seg1=new Kn,this._offset0=new Kn,this._offset1=new Kn,this._side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._precisionModel=t,this._bufParams=e,this._li=new dt,this._filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),8<=e.getQuadrantSegments()&&e.getJoinStyle()===ir.JOIN_ROUND&&(this._closingSegLengthFactor=gr.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}var _r={OFFSET_SEGMENT_SEPARATION_FACTOR:{configurable:!0},INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},CURVE_VERTEX_SNAP_DISTANCE_FACTOR:{configurable:!0},MAX_CLOSING_SEG_LEN_FACTOR:{configurable:!0}};gr.prototype.addNextSegment=function(t,e){if(this._s0=this._s1,this._s1=this._s2,this._s2=t,this._seg0.setCoordinates(this._s0,this._s1),this.computeOffsetSegment(this._seg0,this._side,this._distance,this._offset0),this._seg1.setCoordinates(this._s1,this._s2),this.computeOffsetSegment(this._seg1,this._side,this._distance,this._offset1),this._s1.equals(this._s2))return null;var n=_t.computeOrientation(this._s0,this._s1,this._s2),r=n===_t.CLOCKWISE&&this._side===Je.LEFT||n===_t.COUNTERCLOCKWISE&&this._side===Je.RIGHT;0===n?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},gr.prototype.addLineEndCap=function(t,e){var n=new Kn(t,e),r=new Kn;this.computeOffsetSegment(n,Je.LEFT,this._distance,r);var i=new Kn;this.computeOffsetSegment(n,Je.RIGHT,this._distance,i);var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o);switch(this._bufParams.getEndCapStyle()){case ir.CAP_ROUND:this._segList.addPt(r.p1),this.addFilletArc(e,s+Math.PI/2,s-Math.PI/2,_t.CLOCKWISE,this._distance),this._segList.addPt(i.p1);break;case ir.CAP_FLAT:this._segList.addPt(r.p1),this._segList.addPt(i.p1);break;case ir.CAP_SQUARE:var l=new O;l.x=Math.abs(this._distance)*Math.cos(s),l.y=Math.abs(this._distance)*Math.sin(s);var u=new O(r.p1.x+l.x,r.p1.y+l.y),c=new O(i.p1.x+l.x,i.p1.y+l.y);this._segList.addPt(u),this._segList.addPt(c)}},gr.prototype.getCoordinates=function(){return this._segList.getCoordinates()},gr.prototype.addMitreJoin=function(t,e,n,r){var i=!0,o=null;try{o=J.intersection(e.p0,e.p1,n.p0,n.p1),(r<=0?1:o.distance(t)/Math.abs(r))>this._bufParams.getMitreLimit()&&(i=!1)}catch(t){if(!(t instanceof Y))throw t;o=new O(0,0),i=!1}i?this._segList.addPt(o):this.addLimitedMitreJoin(e,n,r,this._bufParams.getMitreLimit())},gr.prototype.addFilletCorner=function(t,e,n,r,i){var o=e.x-t.x,a=e.y-t.y,s=Math.atan2(a,o),l=n.x-t.x,u=n.y-t.y,c=Math.atan2(u,l);r===_t.CLOCKWISE?s<=c&&(s+=2*Math.PI):c<=s&&(s-=2*Math.PI),this._segList.addPt(e),this.addFilletArc(t,s,c,r,i),this._segList.addPt(n)},gr.prototype.addOutsideTurn=function(t,e){if(this._offset0.p1.distance(this._offset1.p0)<this._distance*gr.OFFSET_SEGMENT_SEPARATION_FACTOR)return this._segList.addPt(this._offset0.p1),null;this._bufParams.getJoinStyle()===ir.JOIN_MITRE?this.addMitreJoin(this._s1,this._offset0,this._offset1,this._distance):this._bufParams.getJoinStyle()===ir.JOIN_BEVEL?this.addBevelJoin(this._offset0,this._offset1):(e&&this._segList.addPt(this._offset0.p1),this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,t,this._distance),this._segList.addPt(this._offset1.p0))},gr.prototype.createSquare=function(t){this._segList.addPt(new O(t.x+this._distance,t.y+this._distance)),this._segList.addPt(new O(t.x+this._distance,t.y-this._distance)),this._segList.addPt(new O(t.x-this._distance,t.y-this._distance)),this._segList.addPt(new O(t.x-this._distance,t.y+this._distance)),this._segList.closeRing()},gr.prototype.addSegments=function(t,e){this._segList.addPts(t,e)},gr.prototype.addFirstSegment=function(){this._segList.addPt(this._offset1.p0)},gr.prototype.addLastSegment=function(){this._segList.addPt(this._offset1.p1)},gr.prototype.initSideSegments=function(t,e,n){this._s1=t,this._s2=e,this._side=n,this._seg1.setCoordinates(t,e),this.computeOffsetSegment(this._seg1,n,this._distance,this._offset1)},gr.prototype.addLimitedMitreJoin=function(t,e,n,r){var i=this._seg0.p1,o=dr.angle(i,this._seg0.p0),a=dr.angleBetweenOriented(this._seg0.p0,i,this._seg1.p1)/2,s=dr.normalize(o+a),l=dr.normalize(s+Math.PI),u=r*n,c=n-u*Math.abs(Math.sin(a)),p=i.x+u*Math.cos(l),h=i.y+u*Math.sin(l),f=new O(p,h),d=new Kn(i,f),y=d.pointAlongOffset(1,c),g=d.pointAlongOffset(1,-c);this._side===Je.LEFT?(this._segList.addPt(y),this._segList.addPt(g)):(this._segList.addPt(g),this._segList.addPt(y))},gr.prototype.computeOffsetSegment=function(t,e,n,r){var i=e===Je.LEFT?1:-1,o=t.p1.x-t.p0.x,a=t.p1.y-t.p0.y,s=Math.sqrt(o*o+a*a),l=i*n*o/s,u=i*n*a/s;r.p0.x=t.p0.x-u,r.p0.y=t.p0.y+l,r.p1.x=t.p1.x-u,r.p1.y=t.p1.y+l},gr.prototype.addFilletArc=function(t,e,n,r,i){var o=r===_t.CLOCKWISE?-1:1,a=Math.abs(e-n),s=Math.trunc(a/this._filletAngleQuantum+.5);if(s<1)return null;for(var l=a/s,u=0,c=new O;u<a;){var p=e+o*u;c.x=t.x+i*Math.cos(p),c.y=t.y+i*Math.sin(p),this._segList.addPt(c),u+=l}},gr.prototype.addInsideTurn=function(t,e){var n,r;this._li.computeIntersection(this._offset0.p0,this._offset0.p1,this._offset1.p0,this._offset1.p1),this._li.hasIntersection()?this._segList.addPt(this._li.getIntersection(0)):(this._hasNarrowConcaveAngle=!0,this._offset0.p1.distance(this._offset1.p0)<this._distance*gr.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR?this._segList.addPt(this._offset0.p1):(this._segList.addPt(this._offset0.p1),0<this._closingSegLengthFactor?(n=new O((this._closingSegLengthFactor*this._offset0.p1.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset0.p1.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(n),r=new O((this._closingSegLengthFactor*this._offset1.p0.x+this._s1.x)/(this._closingSegLengthFactor+1),(this._closingSegLengthFactor*this._offset1.p0.y+this._s1.y)/(this._closingSegLengthFactor+1)),this._segList.addPt(r)):this._segList.addPt(this._s1),this._segList.addPt(this._offset1.p0)))},gr.prototype.createCircle=function(t){var e=new O(t.x+this._distance,t.y);this._segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this._distance),this._segList.closeRing()},gr.prototype.addBevelJoin=function(t,e){this._segList.addPt(t.p1),this._segList.addPt(e.p0)},gr.prototype.init=function(t){this._distance=t,this._maxCurveSegmentError=t*(1-Math.cos(this._filletAngleQuantum/2)),this._segList=new hr,this._segList.setPrecisionModel(this._precisionModel),this._segList.setMinimumVertexDistance(t*gr.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},gr.prototype.addCollinear=function(t){this._li.computeIntersection(this._s0,this._s1,this._s1,this._s2),2<=this._li.getIntersectionNum()&&(this._bufParams.getJoinStyle()===ir.JOIN_BEVEL||this._bufParams.getJoinStyle()===ir.JOIN_MITRE?(t&&this._segList.addPt(this._offset0.p1),this._segList.addPt(this._offset1.p0)):this.addFilletCorner(this._s1,this._offset0.p1,this._offset1.p0,_t.CLOCKWISE,this._distance))},gr.prototype.closeRing=function(){this._segList.closeRing()},gr.prototype.hasNarrowConcaveAngle=function(){return this._hasNarrowConcaveAngle},gr.prototype.interfaces_=function(){return[]},gr.prototype.getClass=function(){return gr},_r.OFFSET_SEGMENT_SEPARATION_FACTOR.get=function(){return.001},_r.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return.001},_r.CURVE_VERTEX_SNAP_DISTANCE_FACTOR.get=function(){return 1e-6},_r.MAX_CLOSING_SEG_LEN_FACTOR.get=function(){return 80},Object.defineProperties(gr,_r);function mr(t,e){this._distance=0,this._precisionModel=null,this._bufParams=null;var n=e;this._precisionModel=t,this._bufParams=n}mr.prototype.getOffsetCurve=function(t,e){if(0===(this._distance=e))return null;var n=e<0,r=Math.abs(e),i=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],i):this.computeOffsetCurve(t,n,i);var o=i.getCoordinates();return n&&Rt.reverse(o),o},mr.prototype.computeSingleSidedBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){n.addSegments(t,!0);var i=cr.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Je.LEFT),n.addFirstSegment();for(var a=o-2;0<=a;a--)n.addNextSegment(i[a],!0)}else{n.addSegments(t,!1);var s=cr.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Je.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment(),n.closeRing()},mr.prototype.computeRingBufferCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);e===Je.RIGHT&&(r=-r);var i=cr.simplify(t,r),o=i.length-1;n.initSideSegments(i[o-1],i[0],e);for(var a=1;a<=o;a++){var s=1!==a;n.addNextSegment(i[a],s)}n.closeRing()},mr.prototype.computeLineBufferCurve=function(t,e){var n=this.simplifyTolerance(this._distance),r=cr.simplify(t,n),i=r.length-1;e.initSideSegments(r[0],r[1],Je.LEFT);for(var o=2;o<=i;o++)e.addNextSegment(r[o],!0);e.addLastSegment(),e.addLineEndCap(r[i-1],r[i]);var a=cr.simplify(t,-n),s=a.length-1;e.initSideSegments(a[s],a[s-1],Je.LEFT);for(var l=s-2;0<=l;l--)e.addNextSegment(a[l],!0);e.addLastSegment(),e.addLineEndCap(a[1],a[0]),e.closeRing()},mr.prototype.computePointCurve=function(t,e){switch(this._bufParams.getEndCapStyle()){case ir.CAP_ROUND:e.createCircle(t);break;case ir.CAP_SQUARE:e.createSquare(t)}},mr.prototype.getLineCurve=function(t,e){if((this._distance=e)<0&&!this._bufParams.isSingleSided())return null;if(0===e)return null;var n,r=Math.abs(e),i=this.getSegGen(r);return t.length<=1?this.computePointCurve(t[0],i):this._bufParams.isSingleSided()?(n=e<0,this.computeSingleSidedBufferCurve(t,n,i)):this.computeLineBufferCurve(t,i),i.getCoordinates()},mr.prototype.getBufferParameters=function(){return this._bufParams},mr.prototype.simplifyTolerance=function(t){return t*this._bufParams.getSimplifyFactor()},mr.prototype.getRingCurve=function(t,e,n){if(this._distance=n,t.length<=2)return this.getLineCurve(t,n);if(0===n)return mr.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},mr.prototype.computeOffsetCurve=function(t,e,n){var r=this.simplifyTolerance(this._distance);if(e){var i=cr.simplify(t,-r),o=i.length-1;n.initSideSegments(i[o],i[o-1],Je.LEFT),n.addFirstSegment();for(var a=o-2;0<=a;a--)n.addNextSegment(i[a],!0)}else{var s=cr.simplify(t,r),l=s.length-1;n.initSideSegments(s[0],s[1],Je.LEFT),n.addFirstSegment();for(var u=2;u<=l;u++)n.addNextSegment(s[u],!0)}n.addLastSegment()},mr.prototype.getSegGen=function(t){return new gr(this._precisionModel,this._bufParams,t)},mr.prototype.interfaces_=function(){return[]},mr.prototype.getClass=function(){return mr},mr.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new O(t[n]);return e};function vr(t){this._subgraphs=null,this._seg=new Kn,this._cga=new _t,this._subgraphs=t}var br={DepthSegment:{configurable:!0}};vr.prototype.findStabbedSegments=function(){if(1===arguments.length){for(var t=arguments[0],e=new Ft,n=this._subgraphs.iterator();n.hasNext();){var r=n.next(),i=r.getEnvelope();t.y<i.getMinY()||t.y>i.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(3===arguments.length)if(N(arguments[2],Mt)&&arguments[0]instanceof O&&arguments[1]instanceof Cn)for(var o=arguments[0],a=arguments[1],s=arguments[2],l=a.getEdge().getCoordinates(),u=0;u<l.length-1;u++){var c,p;this._seg.p0=l[u],this._seg.p1=l[u+1],this._seg.p0.y>this._seg.p1.y&&this._seg.reverse(),Math.max(this._seg.p0.x,this._seg.p1.x)<o.x||this._seg.isHorizontal()||o.y<this._seg.p0.y||o.y>this._seg.p1.y||_t.computeOrientation(this._seg.p0,this._seg.p1,o)===_t.RIGHT||(c=a.getDepth(Je.LEFT),this._seg.p0.equals(l[u])||(c=a.getDepth(Je.RIGHT)),p=new wr(this._seg,c),s.add(p))}else if(N(arguments[2],Mt)&&arguments[0]instanceof O&&N(arguments[1],Mt))for(var h=arguments[0],f=arguments[2],d=arguments[1].iterator();d.hasNext();){var y=d.next();y.isForward()&&this.findStabbedSegments(h,y,f)}},vr.prototype.getDepth=function(t){var e=this.findStabbedSegments(t);return 0===e.size()?0:Dn.min(e)._leftDepth},vr.prototype.interfaces_=function(){return[]},vr.prototype.getClass=function(){return vr},br.DepthSegment.get=function(){return wr},Object.defineProperties(vr,br);var wr=function(t,e){this._upwardSeg=null,this._leftDepth=null;var n=e;this._upwardSeg=new Kn(t),this._leftDepth=n};wr.prototype.compareTo=function(t){var e=t;if(this._upwardSeg.minX()>=e._upwardSeg.maxX())return 1;if(this._upwardSeg.maxX()<=e._upwardSeg.minX())return-1;var n=this._upwardSeg.orientationIndex(e._upwardSeg);return 0!==n||0!=(n=-1*e._upwardSeg.orientationIndex(this._upwardSeg))?n:this._upwardSeg.compareTo(e._upwardSeg)},wr.prototype.compareX=function(t,e){var n=t.p0.compareTo(e.p0);return 0!==n?n:t.p1.compareTo(e.p1)},wr.prototype.toString=function(){return this._upwardSeg.toString()},wr.prototype.interfaces_=function(){return[C]},wr.prototype.getClass=function(){return wr};function xr(t,e,n){this.p0=t||null,this.p1=e||null,this.p2=n||null}xr.prototype.area=function(){return xr.area(this.p0,this.p1,this.p2)},xr.prototype.signedArea=function(){return xr.signedArea(this.p0,this.p1,this.p2)},xr.prototype.interpolateZ=function(t){if(null===t)throw new b("Supplied point is null.");return xr.interpolateZ(t,this.p0,this.p1,this.p2)},xr.prototype.longestSideLength=function(){return xr.longestSideLength(this.p0,this.p1,this.p2)},xr.prototype.isAcute=function(){return xr.isAcute(this.p0,this.p1,this.p2)},xr.prototype.circumcentre=function(){return xr.circumcentre(this.p0,this.p1,this.p2)},xr.prototype.area3D=function(){return xr.area3D(this.p0,this.p1,this.p2)},xr.prototype.centroid=function(){return xr.centroid(this.p0,this.p1,this.p2)},xr.prototype.inCentre=function(){return xr.inCentre(this.p0,this.p1,this.p2)},xr.prototype.interfaces_=function(){return[]},xr.prototype.getClass=function(){return xr},xr.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},xr.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},xr.det=function(t,e,n,r){return t*r-e*n},xr.interpolateZ=function(t,e,n,r){var i=e.x,o=e.y,a=n.x-i,s=r.x-i,l=n.y-o,u=r.y-o,c=a*u-s*l,p=t.x-i,h=t.y-o,f=(u*p-s*h)/c,d=(-l*p+a*h)/c;return e.z+f*(n.z-e.z)+d*(r.z-e.z)},xr.longestSideLength=function(t,e,n){var r=t.distance(e),i=e.distance(n),o=n.distance(t),a=r;return a<i&&(a=i),a<o&&(a=o),a},xr.isAcute=function(t,e,n){return!!dr.isAcute(t,e,n)&&!!dr.isAcute(e,n,t)&&!!dr.isAcute(n,t,e)},xr.circumcentre=function(t,e,n){var r=n.x,i=n.y,o=t.x-r,a=t.y-i,s=e.x-r,l=e.y-i,u=2*xr.det(o,a,s,l),c=xr.det(a,o*o+a*a,l,s*s+l*l),p=xr.det(o,o*o+a*a,s,s*s+l*l);return new O(r-c/u,i+p/u)},xr.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,i=new J(t.x+n/2,t.y+r/2,1),o=new J(t.x-r+n/2,t.y+n+r/2,1);return new J(i,o)},xr.angleBisector=function(t,e,n){var r=e.distance(t),i=r/(r+e.distance(n)),o=n.x-t.x,a=n.y-t.y;return new O(t.x+i*o,t.y+i*a)},xr.area3D=function(t,e,n){var r=e.x-t.x,i=e.y-t.y,o=e.z-t.z,a=n.x-t.x,s=n.y-t.y,l=n.z-t.z,u=i*l-o*s,c=o*a-r*l,p=r*s-i*a,h=u*u+c*c+p*p;return Math.sqrt(h)/2},xr.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,i=(t.y+e.y+n.y)/3;return new O(r,i)},xr.inCentre=function(t,e,n){var r=e.distance(n),i=t.distance(n),o=t.distance(e),a=r+i+o,s=(r*t.x+i*e.x+o*n.x)/a,l=(r*t.y+i*e.y+o*n.y)/a;return new O(s,l)};function Cr(t,e,n){this._inputGeom=null,this._distance=null,this._curveBuilder=null,this._curveList=new Ft;var r=e,i=n;this._inputGeom=t,this._distance=r,this._curveBuilder=i}Cr.prototype.addPoint=function(t){if(this._distance<=0)return null;var e=t.getCoordinates(),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,A.EXTERIOR,A.INTERIOR)},Cr.prototype.addPolygon=function(t){var e=this._distance,n=Je.LEFT;this._distance<0&&(e=-this._distance,n=Je.RIGHT);var r=t.getExteriorRing(),i=Rt.removeRepeatedPoints(r.getCoordinates());if(this._distance<0&&this.isErodedCompletely(r,this._distance))return null;if(this._distance<=0&&i.length<3)return null;this.addPolygonRing(i,e,n,A.EXTERIOR,A.INTERIOR);for(var o=0;o<t.getNumInteriorRing();o++){var a=t.getInteriorRingN(o),s=Rt.removeRepeatedPoints(a.getCoordinates());0<this._distance&&this.isErodedCompletely(a,-this._distance)||this.addPolygonRing(s,e,Je.opposite(n),A.INTERIOR,A.EXTERIOR)}},Cr.prototype.isTriangleErodedCompletely=function(t,e){var n=new xr(t[0],t[1],t[2]),r=n.inCentre();return _t.distancePointLine(r,n.p0,n.p1)<Math.abs(e)},Cr.prototype.addLineString=function(t){if(this._distance<=0&&!this._curveBuilder.getBufferParameters().isSingleSided())return null;var e=Rt.removeRepeatedPoints(t.getCoordinates()),n=this._curveBuilder.getLineCurve(e,this._distance);this.addCurve(n,A.EXTERIOR,A.INTERIOR)},Cr.prototype.addCurve=function(t,e,n){if(null===t||t.length<2)return null;var r=new Zn(t,new on(0,A.BOUNDARY,e,n));this._curveList.add(r)},Cr.prototype.getCurves=function(){return this.add(this._inputGeom),this._curveList},Cr.prototype.addPolygonRing=function(t,e,n,r,i){if(0===e&&t.length<Ee.MINIMUM_VALID_SIZE)return null;var o=r,a=i;t.length>=Ee.MINIMUM_VALID_SIZE&&_t.isCCW(t)&&(o=i,a=r,n=Je.opposite(n));var s=this._curveBuilder.getRingCurve(t,n,e);this.addCurve(s,o,a)},Cr.prototype.add=function(t){if(t.isEmpty())return null;t instanceof xe?this.addPolygon(t):t instanceof me?this.addLineString(t):t instanceof be?this.addPoint(t):(t instanceof Ce||t instanceof pe||t instanceof Pe||t instanceof ce)&&this.addCollection(t)},Cr.prototype.isErodedCompletely=function(t,e){var n=t.getCoordinates();if(n.length<4)return e<0;if(4===n.length)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),i=Math.min(r.getHeight(),r.getWidth());return e<0&&2*Math.abs(e)>i},Cr.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},Cr.prototype.interfaces_=function(){return[]},Cr.prototype.getClass=function(){return Cr};function Er(){}Er.prototype.locate=function(t){},Er.prototype.interfaces_=function(){return[]},Er.prototype.getClass=function(){return Er};function Pr(t){this._parent=null,this._atStart=null,this._max=null,this._index=null,this._subcollectionIterator=null;var e=t;this._parent=e,this._atStart=!0,this._index=0,this._max=e.getNumGeometries()}Pr.prototype.next=function(){if(this._atStart)return this._atStart=!1,Pr.isAtomic(this._parent)&&this._index++,this._parent;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return this._subcollectionIterator.next();this._subcollectionIterator=null}if(this._index>=this._max)throw new r;var t=this._parent.getGeometryN(this._index++);return t instanceof ce?(this._subcollectionIterator=new Pr(t),this._subcollectionIterator.next()):t},Pr.prototype.remove=function(){throw new Error(this.getClass().getName())},Pr.prototype.hasNext=function(){if(this._atStart)return!0;if(null!==this._subcollectionIterator){if(this._subcollectionIterator.hasNext())return!0;this._subcollectionIterator=null}return!(this._index>=this._max)},Pr.prototype.interfaces_=function(){return[Lt]},Pr.prototype.getClass=function(){return Pr},Pr.isAtomic=function(t){return!(t instanceof ce)};function Or(t){this._geom=null,this._geom=t}Or.prototype.locate=function(t){return Or.locate(t,this._geom)},Or.prototype.interfaces_=function(){return[Er]},Or.prototype.getClass=function(){return Or},Or.isPointInRing=function(t,e){return!!e.getEnvelopeInternal().intersects(t)&&_t.isPointInRing(t,e.getCoordinates())},Or.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!Or.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var i=e.getInteriorRingN(r);if(Or.isPointInRing(t,i))return!1}return!0},Or.containsPoint=function(t,e){if(e instanceof xe)return Or.containsPointInPolygon(t,e);if(e instanceof ce)for(var n=new Pr(e);n.hasNext();){var r=n.next();if(r!==e&&Or.containsPoint(t,r))return!0}return!1},Or.locate=function(t,e){return!e.isEmpty()&&Or.containsPoint(t,e)?A.INTERIOR:A.EXTERIOR};function Tr(){this._edgeMap=new p,this._edgeList=null,this._ptInAreaLocation=[A.NONE,A.NONE]}Tr.prototype.getNextCW=function(t){this.getEdges();var e=this._edgeList.indexOf(t),n=e-1;return 0===e&&(n=this._edgeList.size()-1),this._edgeList.get(n)},Tr.prototype.propagateSideLabels=function(t){for(var e=A.NONE,n=this.iterator();n.hasNext();){var r=n.next().getLabel();r.isArea(t)&&r.getLocation(t,Je.LEFT)!==A.NONE&&(e=r.getLocation(t,Je.LEFT))}if(e===A.NONE)return null;for(var i=e,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getLabel();if(s.getLocation(t,Je.ON)===A.NONE&&s.setLocation(t,Je.ON,i),s.isArea(t)){var l=s.getLocation(t,Je.LEFT),u=s.getLocation(t,Je.RIGHT);if(u!==A.NONE){if(u!==i)throw new tn("side location conflict",a.getCoordinate());l===A.NONE&&rt.shouldNeverReachHere("found single null side (at "+a.getCoordinate()+")"),i=l}else rt.isTrue(s.getLocation(t,Je.LEFT)===A.NONE,"found single null side"),s.setLocation(t,Je.RIGHT,i),s.setLocation(t,Je.LEFT,i)}}},Tr.prototype.getCoordinate=function(){var t=this.iterator();return t.hasNext()?t.next().getCoordinate():null},Tr.prototype.print=function(t){q.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();)e.next().print(t)},Tr.prototype.isAreaLabelsConsistent=function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},Tr.prototype.checkAreaLabelsConsistent=function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel().getLocation(t,Je.LEFT);rt.isTrue(r!==A.NONE,"Found unlabelled area edge");for(var i=r,o=this.iterator();o.hasNext();){var a=o.next().getLabel();rt.isTrue(a.isArea(t),"Found non-area edge");var s=a.getLocation(t,Je.LEFT),l=a.getLocation(t,Je.RIGHT);if(s===l)return!1;if(l!==i)return!1;i=s}return!0},Tr.prototype.findIndex=function(t){this.iterator();for(var e=0;e<this._edgeList.size();e++)if(this._edgeList.get(e)===t)return e;return-1},Tr.prototype.iterator=function(){return this.getEdges().iterator()},Tr.prototype.getEdges=function(){return null===this._edgeList&&(this._edgeList=new Ft(this._edgeMap.values())),this._edgeList},Tr.prototype.getLocation=function(t,e,n){return this._ptInAreaLocation[t]===A.NONE&&(this._ptInAreaLocation[t]=Or.locate(e,n[t].getGeometry())),this._ptInAreaLocation[t]},Tr.prototype.toString=function(){var t=new R;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append("\n");for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append("\n")}return t.toString()},Tr.prototype.computeEdgeEndLabels=function(t){for(var e=this.iterator();e.hasNext();)e.next().computeLabel(t)},Tr.prototype.computeLabelling=function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next().getLabel(),i=0;i<2;i++)r.isLine(i)&&r.getLocation(i)===A.BOUNDARY&&(e[i]=!0);for(var o=this.iterator();o.hasNext();)for(var a,s,l=o.next(),u=l.getLabel(),c=0;c<2;c++){u.isAnyNull(c)&&(s=A.NONE,s=e[c]?A.EXTERIOR:(a=l.getCoordinate(),this.getLocation(c,a,t)),u.setAllLocationsIfNull(c,s))}},Tr.prototype.getDegree=function(){return this._edgeMap.size()},Tr.prototype.insertEdgeEnd=function(t,e){this._edgeMap.put(t,e),this._edgeList=null},Tr.prototype.interfaces_=function(){return[]},Tr.prototype.getClass=function(){return Tr};function Sr(){this._pts=null,this._orientation=null;var t=arguments[0];this._pts=t,this._orientation=Sr.orientation(t)}var Ir,Ar,Lr=((Ar=Tr)&&(Dr.__proto__=Ar),((Dr.prototype=Object.create(Ar&&Ar.prototype)).constructor=Dr).prototype.linkResultDirectedEdges=function(){this.getResultAreaEdges();for(var t=null,e=null,n=this._SCANNING_FOR_INCOMING,r=0;r<this._resultAreaEdgeList.size();r++){var i=this._resultAreaEdgeList.get(r),o=i.getSym();if(i.getLabel().isArea())switch(null===t&&i.isInResult()&&(t=i),n){case this._SCANNING_FOR_INCOMING:if(!o.isInResult())continue;e=o,n=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(!i.isInResult())continue;e.setNext(i),n=this._SCANNING_FOR_INCOMING}}if(n===this._LINKING_TO_OUTGOING){if(null===t)throw new tn("no outgoing dirEdge found",this.getCoordinate());rt.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},Dr.prototype.insert=function(t){this.insertEdgeEnd(t,t)},Dr.prototype.getRightmostEdge=function(){var t=this.getEdges(),e=t.size();if(e<1)return null;var n=t.get(0);if(1===e)return n;var r=t.get(e-1),i=n.getQuadrant(),o=r.getQuadrant();return mn.isNorthern(i)&&mn.isNorthern(o)?n:mn.isNorthern(i)||mn.isNorthern(o)?0!==n.getDy()?n:0!==r.getDy()?r:(rt.shouldNeverReachHere("found two horizontal edges incident on node"),null):r},Dr.prototype.print=function(t){q.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},Dr.prototype.getResultAreaEdges=function(){if(null!==this._resultAreaEdgeList)return this._resultAreaEdgeList;this._resultAreaEdgeList=new Ft;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this._resultAreaEdgeList.add(e)}return this._resultAreaEdgeList},Dr.prototype.updateLabelling=function(t){for(var e=this.iterator();e.hasNext();){var n=e.next().getLabel();n.setAllLocationsIfNull(0,t.getLocation(0)),n.setAllLocationsIfNull(1,t.getLocation(1))}},Dr.prototype.linkAllDirectedEdges=function(){this.getEdges();for(var t=null,e=null,n=this._edgeList.size()-1;0<=n;n--){var r=this._edgeList.get(n),i=r.getSym();null===e&&(e=i),null!==t&&i.setNext(t),t=r}e.setNext(t)},Dr.prototype.computeDepths=function(){if(1===arguments.length){var t=arguments[0],e=this.findIndex(t),n=t.getDepth(Je.LEFT),r=t.getDepth(Je.RIGHT),i=this.computeDepths(e+1,this._edgeList.size(),n);if(this.computeDepths(0,e,i)!==r)throw new tn("depth mismatch at "+t.getCoordinate())}else if(3===arguments.length){for(var o=arguments[1],a=arguments[2],s=arguments[0];s<o;s++){var l=this._edgeList.get(s);l.setEdgeDepths(Je.RIGHT,a),a=l.getDepth(Je.LEFT)}return a}},Dr.prototype.mergeSymLabels=function(){for(var t=this.iterator();t.hasNext();){var e=t.next();e.getLabel().merge(e.getSym().getLabel())}},Dr.prototype.linkMinimalDirectedEdges=function(t){for(var e=null,n=null,r=this._SCANNING_FOR_INCOMING,i=this._resultAreaEdgeList.size()-1;0<=i;i--){var o=this._resultAreaEdgeList.get(i),a=o.getSym();switch(null===e&&o.getEdgeRing()===t&&(e=o),r){case this._SCANNING_FOR_INCOMING:if(a.getEdgeRing()!==t)continue;n=a,r=this._LINKING_TO_OUTGOING;break;case this._LINKING_TO_OUTGOING:if(o.getEdgeRing()!==t)continue;n.setNextMin(o),r=this._SCANNING_FOR_INCOMING}}r===this._LINKING_TO_OUTGOING&&(rt.isTrue(null!==e,"found null for first outgoing dirEdge"),rt.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},Dr.prototype.getOutgoingDegree=function(){if(0===arguments.length){for(var t=0,e=this.iterator();e.hasNext();)e.next().isInResult()&&t++;return t}if(1===arguments.length){for(var n=arguments[0],r=0,i=this.iterator();i.hasNext();)i.next().getEdgeRing()===n&&r++;return r}},Dr.prototype.getLabel=function(){return this._label},Dr.prototype.findCoveredLineEdges=function(){for(var t=A.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=A.INTERIOR;break}if(r.isInResult()){t=A.EXTERIOR;break}}}if(t===A.NONE)return null;for(var i=t,o=this.iterator();o.hasNext();){var a=o.next(),s=a.getSym();a.isLineEdge()?a.getEdge().setCovered(i===A.INTERIOR):(a.isInResult()&&(i=A.EXTERIOR),s.isInResult()&&(i=A.INTERIOR))}},Dr.prototype.computeLabelling=function(t){Ar.prototype.computeLabelling.call(this,t),this._label=new on(A.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next().getEdge().getLabel(),r=0;r<2;r++){var i=n.getLocation(r);i!==A.INTERIOR&&i!==A.BOUNDARY||this._label.setLocation(r,A.INTERIOR)}},Dr.prototype.interfaces_=function(){return[]},Dr.prototype.getClass=function(){return Dr},Dr),Nr=((Ir=wn)&&(Mr.__proto__=Ir),((Mr.prototype=Object.create(Ir&&Ir.prototype)).constructor=Mr).prototype.createNode=function(t){return new gn(t,new Lr)},Mr.prototype.interfaces_=function(){return[]},Mr.prototype.getClass=function(){return Mr},Mr);function Mr(){Ir.apply(this,arguments)}function Dr(){Ar.call(this),this._resultAreaEdgeList=null,this._label=null,this._SCANNING_FOR_INCOMING=1,this._LINKING_TO_OUTGOING=2}Sr.prototype.compareTo=function(t){return Sr.compareOriented(this._pts,this._orientation,t._pts,t._orientation)},Sr.prototype.interfaces_=function(){return[C]},Sr.prototype.getClass=function(){return Sr},Sr.orientation=function(t){return 1===Rt.increasingDirection(t)},Sr.compareOriented=function(t,e,n,r){for(var i=e?1:-1,o=r?1:-1,a=e?t.length:-1,s=r?n.length:-1,l=e?0:t.length-1,u=r?0:n.length-1;;){var c=t[l].compareTo(n[u]);if(0!==c)return c;var p=(l+=i)===a,h=(u+=o)===s;if(p&&!h)return-1;if(!p&&h)return 1;if(p&&h)return 0}};function Rr(){this._edges=new Ft,this._ocaMap=new p}Rr.prototype.print=function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this._edges.size();e++){var n=this._edges.get(e);0<e&&t.print(","),t.print("(");for(var r=n.getCoordinates(),i=0;i<r.length;i++)0<i&&t.print(","),t.print(r[i].x+" "+r[i].y);t.println(")")}t.print(")  ")},Rr.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},Rr.prototype.findEdgeIndex=function(t){for(var e=0;e<this._edges.size();e++)if(this._edges.get(e).equals(t))return e;return-1},Rr.prototype.iterator=function(){return this._edges.iterator()},Rr.prototype.getEdges=function(){return this._edges},Rr.prototype.get=function(t){return this._edges.get(t)},Rr.prototype.findEqualEdge=function(t){var e=new Sr(t.getCoordinates());return this._ocaMap.get(e)},Rr.prototype.add=function(t){this._edges.add(t);var e=new Sr(t.getCoordinates());this._ocaMap.put(e,t)},Rr.prototype.interfaces_=function(){return[]},Rr.prototype.getClass=function(){return Rr};function jr(){}jr.prototype.processIntersections=function(t,e,n,r){},jr.prototype.isDone=function(){},jr.prototype.interfaces_=function(){return[]},jr.prototype.getClass=function(){return jr};function kr(t){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._hasInterior=!1,this._properIntersectionPoint=null,this._li=null,this._isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0,this._li=t}kr.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(kr.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.size()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},kr.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},kr.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},kr.prototype.getLineIntersector=function(){return this._li},kr.prototype.hasProperIntersection=function(){return this._hasProper},kr.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this.numIntersections++,this._li.isInteriorIntersection()&&(this.numInteriorIntersections++,this._hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1),this._li.isProper()&&(this.numProperIntersections++,this._hasProper=!0,this._hasProperInterior=!0)))},kr.prototype.hasIntersection=function(){return this._hasIntersection},kr.prototype.isDone=function(){return!1},kr.prototype.hasInteriorIntersection=function(){return this._hasInterior},kr.prototype.interfaces_=function(){return[jr]},kr.prototype.getClass=function(){return kr},kr.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};function Fr(t,e,n){this.coord=null,this.segmentIndex=null,this.dist=null;var r=e,i=n;this.coord=new O(t),this.segmentIndex=r,this.dist=i}Fr.prototype.getSegmentIndex=function(){return this.segmentIndex},Fr.prototype.getCoordinate=function(){return this.coord},Fr.prototype.print=function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},Fr.prototype.compareTo=function(t){return this.compare(t.segmentIndex,t.dist)},Fr.prototype.isEndPoint=function(t){return 0===this.segmentIndex&&0===this.dist||this.segmentIndex===t},Fr.prototype.toString=function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},Fr.prototype.getDistance=function(){return this.dist},Fr.prototype.compare=function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},Fr.prototype.interfaces_=function(){return[C]},Fr.prototype.getClass=function(){return Fr};var Br=function(t){this._nodeMap=new p,this.edge=null;this.edge=t};Br.prototype.print=function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();)e.next().print(t)},Br.prototype.iterator=function(){return this._nodeMap.values().iterator()},Br.prototype.addSplitEdges=function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),i=this.createSplitEdge(n,r);t.add(i),n=r}},Br.prototype.addEndpoints=function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},Br.prototype.createSplitEdge=function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],i=0<e.dist||!e.coord.equals2D(r);i||n--;var o=new Array(n).fill(null),a=0;o[a++]=new O(t.coord);for(var s=t.segmentIndex+1;s<=e.segmentIndex;s++)o[a++]=this.edge.pts[s];return i&&(o[a]=e.coord),new Wr(o,new on(this.edge._label))},Br.prototype.add=function(t,e,n){var r=new Fr(t,e,n),i=this._nodeMap.get(r);return null!==i?i:(this._nodeMap.put(r,r),r)},Br.prototype.isIntersection=function(t){for(var e=this.iterator();e.hasNext();)if(e.next().coord.equals(t))return!0;return!1},Br.prototype.interfaces_=function(){return[]},Br.prototype.getClass=function(){return Br};function Gr(){}Gr.prototype.getChainStartIndices=function(t){var e=0,n=new Ft;n.add(new j(e));do{var r=this.findChainEnd(t,e);n.add(new j(r)),e=r}while(e<t.length-1);return Gr.toIntArray(n)},Gr.prototype.findChainEnd=function(t,e){for(var n=mn.quadrant(t[e],t[e+1]),r=e+1;r<t.length&&mn.quadrant(t[r-1],t[r])===n;)r++;return r-1},Gr.prototype.interfaces_=function(){return[]},Gr.prototype.getClass=function(){return Gr},Gr.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e};function zr(t){this.e=null,this.pts=null,this.startIndex=null,this.env1=new Z,this.env2=new Z;var e=t;this.e=e,this.pts=e.getCoordinates();var n=new Gr;this.startIndex=n.getChainStartIndices(this.pts)}zr.prototype.getCoordinates=function(){return this.pts},zr.prototype.getMaxX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n<e?e:n},zr.prototype.getMinX=function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e<n?e:n},zr.prototype.computeIntersectsForChain=function(){if(4===arguments.length){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(6===arguments.length){var i=arguments[0],o=arguments[1],a=arguments[2],s=arguments[3],l=arguments[4],u=arguments[5],c=this.pts[i],p=this.pts[o],h=a.pts[s],f=a.pts[l];if(o-i==1&&l-s==1)return u.addIntersections(this.e,i,a.e,s),null;if(this.env1.init(c,p),this.env2.init(h,f),!this.env1.intersects(this.env2))return null;var d=Math.trunc((i+o)/2),y=Math.trunc((s+l)/2);i<d&&(s<y&&this.computeIntersectsForChain(i,d,a,s,y,u),y<l&&this.computeIntersectsForChain(i,d,a,y,l,u)),d<o&&(s<y&&this.computeIntersectsForChain(d,o,a,s,y,u),y<l&&this.computeIntersectsForChain(d,o,a,y,l,u))}},zr.prototype.getStartIndexes=function(){return this.startIndex},zr.prototype.computeIntersects=function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},zr.prototype.interfaces_=function(){return[]},zr.prototype.getClass=function(){return zr};var Ur=function t(){this._depth=Array(2).fill().map(function(){return Array(3)});for(var e=0;e<2;e++)for(var n=0;n<3;n++)this._depth[e][n]=t.NULL_VALUE},Vr={NULL_VALUE:{configurable:!0}};Ur.prototype.getDepth=function(t,e){return this._depth[t][e]},Ur.prototype.setDepth=function(t,e,n){this._depth[t][e]=n},Ur.prototype.isNull=function(){if(0===arguments.length){for(var t=0;t<2;t++)for(var e=0;e<3;e++)if(this._depth[t][e]!==Ur.NULL_VALUE)return!1;return!0}if(1===arguments.length){var n=arguments[0];return this._depth[n][1]===Ur.NULL_VALUE}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._depth[r][i]===Ur.NULL_VALUE}},Ur.prototype.normalize=function(){for(var t=0;t<2;t++)if(!this.isNull(t)){var e=this._depth[t][1];this._depth[t][2]<e&&(e=this._depth[t][2]),e<0&&(e=0);for(var n=1;n<3;n++){var r=0;this._depth[t][n]>e&&(r=1),this._depth[t][n]=r}}},Ur.prototype.getDelta=function(t){return this._depth[t][Je.RIGHT]-this._depth[t][Je.LEFT]},Ur.prototype.getLocation=function(t,e){return this._depth[t][e]<=0?A.EXTERIOR:A.INTERIOR},Ur.prototype.toString=function(){return"A: "+this._depth[0][1]+","+this._depth[0][2]+" B: "+this._depth[1][1]+","+this._depth[1][2]},Ur.prototype.add=function(){var t,e;if(1===arguments.length)for(var n=arguments[0],r=0;r<2;r++)for(var i=1;i<3;i++){var o=n.getLocation(r,i);o!==A.EXTERIOR&&o!==A.INTERIOR||(this.isNull(r,i)?this._depth[r][i]=Ur.depthAtLocation(o):this._depth[r][i]+=Ur.depthAtLocation(o))}else 3===arguments.length&&(t=arguments[0],e=arguments[1],arguments[2]===A.INTERIOR&&this._depth[t][e]++)},Ur.prototype.interfaces_=function(){return[]},Ur.prototype.getClass=function(){return Ur},Ur.depthAtLocation=function(t){return t===A.EXTERIOR?0:t===A.INTERIOR?1:Ur.NULL_VALUE},Vr.NULL_VALUE.get=function(){return-1},Object.defineProperties(Ur,Vr);function Hr(t){this._workingPrecisionModel=null,this._workingNoder=null,this._geomFact=null,this._graph=null,this._edgeList=new Rr,this._bufParams=t||null}var qr,Wr=((qr=sn)&&(Yr.__proto__=qr),Yr.prototype=Object.create(qr&&qr.prototype),(Yr.prototype.constructor=Yr).prototype.getDepth=function(){return this._depth},Yr.prototype.getCollapsedEdge=function(){var t=new Array(2).fill(null);return t[0]=this.pts[0],t[1]=this.pts[1],new Yr(t,on.toLineLabel(this._label))},Yr.prototype.isIsolated=function(){return this._isIsolated},Yr.prototype.getCoordinates=function(){return this.pts},Yr.prototype.setIsolated=function(t){this._isIsolated=t},Yr.prototype.setName=function(t){this._name=t},Yr.prototype.equals=function(t){if(!(t instanceof Yr))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,i=this.pts.length,o=0;o<this.pts.length;o++)if(this.pts[o].equals2D(e.pts[o])||(n=!1),this.pts[o].equals2D(e.pts[--i])||(r=!1),!n&&!r)return!1;return!0},Yr.prototype.getCoordinate=function(){if(0===arguments.length)return 0<this.pts.length?this.pts[0]:null;if(1===arguments.length){var t=arguments[0];return this.pts[t]}},Yr.prototype.print=function(t){t.print("edge "+this._name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this._label+" "+this._depthDelta)},Yr.prototype.computeIM=function(t){Yr.updateIM(this._label,t)},Yr.prototype.isCollapsed=function(){return!!this._label.isArea()&&3===this.pts.length&&!!this.pts[0].equals(this.pts[2])},Yr.prototype.isClosed=function(){return this.pts[0].equals(this.pts[this.pts.length-1])},Yr.prototype.getMaximumSegmentIndex=function(){return this.pts.length-1},Yr.prototype.getDepthDelta=function(){return this._depthDelta},Yr.prototype.getNumPoints=function(){return this.pts.length},Yr.prototype.printReverse=function(t){t.print("edge "+this._name+": ");for(var e=this.pts.length-1;0<=e;e--)t.print(this.pts[e]+" ");t.println("")},Yr.prototype.getMonotoneChainEdge=function(){return null===this._mce&&(this._mce=new zr(this)),this._mce},Yr.prototype.getEnvelope=function(){if(null===this._env){this._env=new Z;for(var t=0;t<this.pts.length;t++)this._env.expandToInclude(this.pts[t])}return this._env},Yr.prototype.addIntersection=function(t,e,n,r){var i,o=new O(t.getIntersection(r)),a=e,s=t.getEdgeDistance(n,r),l=a+1;l<this.pts.length&&(i=this.pts[l],o.equals2D(i)&&(a=l,s=0)),this.eiList.add(o,a,s)},Yr.prototype.toString=function(){var t=new R;t.append("edge "+this._name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)0<e&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this._label+" "+this._depthDelta),t.toString()},Yr.prototype.isPointwiseEqual=function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},Yr.prototype.setDepthDelta=function(t){this._depthDelta=t},Yr.prototype.getEdgeIntersectionList=function(){return this.eiList},Yr.prototype.addIntersections=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},Yr.prototype.interfaces_=function(){return[]},Yr.prototype.getClass=function(){return Yr},Yr.updateIM=function(){if(2!==arguments.length)return qr.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,Je.ON),t.getLocation(1,Je.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,Je.LEFT),t.getLocation(1,Je.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,Je.RIGHT),t.getLocation(1,Je.RIGHT),2))},Yr);function Yr(){var t,e,n;qr.call(this),this.pts=null,this._env=null,this.eiList=new Br(this),this._name=null,this._mce=null,this._isIsolated=!0,this._depth=new Ur,this._depthDelta=0,1===arguments.length?(t=arguments[0],Yr.call(this,t,null)):2===arguments.length&&(e=arguments[0],n=arguments[1],this.pts=e,this._label=n)}Hr.prototype.setWorkingPrecisionModel=function(t){this._workingPrecisionModel=t},Hr.prototype.insertUniqueEdge=function(t){var e,n,r,i,o=this._edgeList.findEqualEdge(t);null!==o?(e=o.getLabel(),n=t.getLabel(),o.isPointwiseEqual(t)||(n=new on(t.getLabel())).flip(),e.merge(n),r=Hr.depthDelta(n),i=o.getDepthDelta()+r,o.setDepthDelta(i)):(this._edgeList.add(t),t.setDepthDelta(Hr.depthDelta(t.getLabel())))},Hr.prototype.buildSubgraphs=function(t,e){for(var n=new Ft,r=t.iterator();r.hasNext();){var i=r.next(),o=i.getRightmostCoordinate(),a=new vr(n).getDepth(o);i.computeDepth(a),i.findResultEdges(),n.add(i),e.add(i.getDirectedEdges(),i.getNodes())}},Hr.prototype.createSubgraphs=function(t){for(var e=new Ft,n=t.getNodes().iterator();n.hasNext();){var r,i=n.next();i.isVisited()||((r=new nn).create(i),e.add(r))}return Dn.sort(e,Dn.reverseOrder()),e},Hr.prototype.createEmptyResultGeometry=function(){return this._geomFact.createPolygon()},Hr.prototype.getNoder=function(t){if(null!==this._workingNoder)return this._workingNoder;var e=new ar,n=new dt;return n.setPrecisionModel(t),e.setSegmentIntersector(new kr(n)),e},Hr.prototype.buffer=function(t,e){var n=this._workingPrecisionModel;null===n&&(n=t.getPrecisionModel()),this._geomFact=t.getFactory();var r=new mr(n,this._bufParams),i=new Cr(t,e,r).getCurves();if(i.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(i,n),this._graph=new Pn(new Nr),this._graph.addEdges(this._edgeList.getEdges());var o=this.createSubgraphs(this._graph),a=new On(this._geomFact);this.buildSubgraphs(o,a);var s=a.getPolygons();return s.size()<=0?this.createEmptyResultGeometry():this._geomFact.buildGeometry(s)},Hr.prototype.computeNodedEdges=function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings().iterator();r.hasNext();){var i,o,a=r.next(),s=a.getCoordinates();2===s.length&&s[0].equals2D(s[1])||(i=a.getData(),o=new Wr(a.getCoordinates(),new on(i)),this.insertUniqueEdge(o))}},Hr.prototype.setNoder=function(t){this._workingNoder=t},Hr.prototype.interfaces_=function(){return[]},Hr.prototype.getClass=function(){return Hr},Hr.depthDelta=function(t){var e=t.getLocation(0,Je.LEFT),n=t.getLocation(0,Je.RIGHT);return e===A.INTERIOR&&n===A.EXTERIOR?1:e===A.EXTERIOR&&n===A.INTERIOR?-1:0},Hr.convertSegStrings=function(t){for(var e=new ze,n=new Ft;t.hasNext();){var r=t.next(),i=e.createLineString(r.getCoordinates());n.add(i)}return e.buildGeometry(n)};function Xr(t,e,n,r){var i,o,a,s;this._noder=null,this._scaleFactor=null,this._offsetX=null,this._offsetY=null,this._isScaled=!1,2===arguments.length?(i=e,this._noder=t,this._scaleFactor=i,this._offsetX=0,this._offsetY=0,this._isScaled=!this.isIntegerPrecision()):4===arguments.length&&(o=e,a=n,s=r,this._noder=t,this._scaleFactor=o,this._offsetX=a,this._offsetY=s,this._isScaled=!this.isIntegerPrecision())}Xr.prototype.rescale=function(){if(N(arguments[0],At))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.rescale(e.getCoordinates())}else if(arguments[0]instanceof Array){for(var n=arguments[0],r=0;r<n.length;r++)n[r].x=n[r].x/this._scaleFactor+this._offsetX,n[r].y=n[r].y/this._scaleFactor+this._offsetY;2===n.length&&n[0].equals2D(n[1])&&q.out.println(n)}},Xr.prototype.scale=function(){if(N(arguments[0],At)){for(var t=arguments[0],e=new Ft,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Zn(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var i=arguments[0],o=new Array(i.length).fill(null),a=0;a<i.length;a++)o[a]=new O(Math.round((i[a].x-this._offsetX)*this._scaleFactor),Math.round((i[a].y-this._offsetY)*this._scaleFactor),i[a].z);return Rt.removeRepeatedPoints(o)}},Xr.prototype.isIntegerPrecision=function(){return 1===this._scaleFactor},Xr.prototype.getNodedSubstrings=function(){var t=this._noder.getNodedSubstrings();return this._isScaled&&this.rescale(t),t},Xr.prototype.computeNodes=function(t){var e=t;this._isScaled&&(e=this.scale(t)),this._noder.computeNodes(e)},Xr.prototype.interfaces_=function(){return[nr]},Xr.prototype.getClass=function(){return Xr};function Jr(t){this._li=new dt,this._segStrings=null,this._segStrings=t}var Zr={fact:{configurable:!0}};Jr.prototype.checkEndPtVertexIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next().getCoordinates();this.checkEndPtVertexIntersections(e[0],this._segStrings),this.checkEndPtVertexIntersections(e[e.length-1],this._segStrings)}else if(2===arguments.length)for(var n=arguments[0],r=arguments[1].iterator();r.hasNext();)for(var i=r.next().getCoordinates(),o=1;o<i.length-1;o++)if(i[o].equals(n))throw new at("found endpt/interior pt intersection at index "+o+" :pt "+n)},Jr.prototype.checkInteriorIntersections=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this._segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(2===arguments.length)for(var i=arguments[0],o=arguments[1],a=i.getCoordinates(),s=o.getCoordinates(),l=0;l<a.length-1;l++)for(var u=0;u<s.length-1;u++)this.checkInteriorIntersections(i,l,o,u);else if(4===arguments.length){var c=arguments[0],p=arguments[1],h=arguments[2],f=arguments[3];if(c===h&&p===f)return null;var d=c.getCoordinates()[p],y=c.getCoordinates()[p+1],g=h.getCoordinates()[f],_=h.getCoordinates()[f+1];if(this._li.computeIntersection(d,y,g,_),this._li.hasIntersection()&&(this._li.isProper()||this.hasInteriorIntersection(this._li,d,y)||this.hasInteriorIntersection(this._li,g,_)))throw new at("found non-noded intersection at "+d+"-"+y+" and "+g+"-"+_)}},Jr.prototype.checkValid=function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},Jr.prototype.checkCollapses=function(){if(0===arguments.length)for(var t=this._segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(1===arguments.length)for(var n=arguments[0].getCoordinates(),r=0;r<n.length-2;r++)this.checkCollapse(n[r],n[r+1],n[r+2])},Jr.prototype.hasInteriorIntersection=function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var i=t.getIntersection(r);if(!i.equals(e)&&!i.equals(n))return!0}return!1},Jr.prototype.checkCollapse=function(t,e,n){if(t.equals(n))throw new at("found non-noded collapse at "+Jr.fact.createLineString([t,e,n]))},Jr.prototype.interfaces_=function(){return[]},Jr.prototype.getClass=function(){return Jr},Zr.fact.get=function(){return new ze},Object.defineProperties(Jr,Zr);function Kr(t,e,n){this._li=null,this._pt=null,this._originalPt=null,this._ptScaled=null,this._p0Scaled=null,this._p1Scaled=null,this._scaleFactor=null,this._minx=null,this._maxx=null,this._miny=null,this._maxy=null,this._corner=new Array(4).fill(null),this._safeEnv=null;var r=t,i=e,o=n;if(this._originalPt=r,this._pt=r,this._scaleFactor=i,this._li=o,i<=0)throw new b("Scale factor must be non-zero");1!==i&&(this._pt=new O(this.scale(r.x),this.scale(r.y)),this._p0Scaled=new O,this._p1Scaled=new O),this.initCorners(this._pt)}var $r={SAFE_ENV_EXPANSION_FACTOR:{configurable:!0}};Kr.prototype.intersectsScaled=function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),i=Math.min(t.y,e.y),o=Math.max(t.y,e.y),a=this._maxx<n||this._minx>r||this._maxy<i||this._miny>o;if(a)return!1;var s=this.intersectsToleranceSquare(t,e);return rt.isTrue(!(a&&s),"Found bad envelope test"),s},Kr.prototype.initCorners=function(t){this._minx=t.x-.5,this._maxx=t.x+.5,this._miny=t.y-.5,this._maxy=t.y+.5,this._corner[0]=new O(this._maxx,this._maxy),this._corner[1]=new O(this._minx,this._maxy),this._corner[2]=new O(this._minx,this._miny),this._corner[3]=new O(this._maxx,this._miny)},Kr.prototype.intersects=function(t,e){return 1===this._scaleFactor?this.intersectsScaled(t,e):(this.copyScaled(t,this._p0Scaled),this.copyScaled(e,this._p1Scaled),this.intersectsScaled(this._p0Scaled,this._p1Scaled))},Kr.prototype.scale=function(t){return Math.round(t*this._scaleFactor)},Kr.prototype.getCoordinate=function(){return this._originalPt},Kr.prototype.copyScaled=function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},Kr.prototype.getSafeEnvelope=function(){var t;return null===this._safeEnv&&(t=Kr.SAFE_ENV_EXPANSION_FACTOR/this._scaleFactor,this._safeEnv=new Z(this._originalPt.x-t,this._originalPt.x+t,this._originalPt.y-t,this._originalPt.y+t)),this._safeEnv},Kr.prototype.intersectsPixelClosure=function(t,e){return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.hasIntersection()||(this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.hasIntersection()))))},Kr.prototype.intersectsToleranceSquare=function(t,e){var n=!1,r=!1;return this._li.computeIntersection(t,e,this._corner[0],this._corner[1]),!!(this._li.isProper()||(this._li.computeIntersection(t,e,this._corner[1],this._corner[2]),this._li.isProper()||(this._li.hasIntersection()&&(n=!0),this._li.computeIntersection(t,e,this._corner[2],this._corner[3]),this._li.isProper()||(this._li.hasIntersection()&&(r=!0),this._li.computeIntersection(t,e,this._corner[3],this._corner[0]),this._li.isProper()||n&&r||t.equals(this._pt)||e.equals(this._pt)))))},Kr.prototype.addSnappedNode=function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return!!this.intersects(n,r)&&(t.addIntersection(this.getCoordinate(),e),!0)},Kr.prototype.interfaces_=function(){return[]},Kr.prototype.getClass=function(){return Kr},$r.SAFE_ENV_EXPANSION_FACTOR.get=function(){return.75},Object.defineProperties(Kr,$r);function Qr(){this.tempEnv1=new Z,this.selectedSegment=new Kn}Qr.prototype.select=function(){var t;1===arguments.length||2===arguments.length&&(t=arguments[1],arguments[0].getLineSegment(t,this.selectedSegment),this.select(this.selectedSegment))},Qr.prototype.interfaces_=function(){return[]},Qr.prototype.getClass=function(){return Qr};function ti(t){this._index=null,this._index=t}var ei={HotPixelSnapAction:{configurable:!0}};ti.prototype.snap=function(){if(1===arguments.length){var t=arguments[0];return this.snap(t,null,-1)}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2],i=e.getSafeEnvelope(),o=new ii(e,n,r);return this._index.query(i,{interfaces_:function(){return[An]},visitItem:function(t){t.select(i,o)}}),o.isNodeAdded()}},ti.prototype.interfaces_=function(){return[]},ti.prototype.getClass=function(){return ti},ei.HotPixelSnapAction.get=function(){return ii},Object.defineProperties(ti,ei);function ni(t){this._li=null,this._interiorIntersections=null,this._li=t,this._interiorIntersections=new Ft}var ri,ii=((ri=Qr)&&(oi.__proto__=ri),((oi.prototype=Object.create(ri&&ri.prototype)).constructor=oi).prototype.isNodeAdded=function(){return this._isNodeAdded},oi.prototype.select=function(){if(2!==arguments.length)return ri.prototype.select.apply(this,arguments);var t=arguments[1],e=arguments[0].getContext();if(null!==this._parentEdge&&e===this._parentEdge&&t===this._hotPixelVertexIndex)return null;this._isNodeAdded=this._hotPixel.addSnappedNode(e,t)},oi.prototype.interfaces_=function(){return[]},oi.prototype.getClass=function(){return oi},oi);function oi(){ri.call(this),this._hotPixel=null,this._parentEdge=null,this._hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this._hotPixel=t,this._parentEdge=e,this._hotPixelVertexIndex=n}ni.prototype.processIntersections=function(t,e,n,r){if(t===n&&e===r)return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];if(this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()){for(var l=0;l<this._li.getIntersectionNum();l++)this._interiorIntersections.add(this._li.getIntersection(l));t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)}},ni.prototype.isDone=function(){return!1},ni.prototype.getInteriorIntersections=function(){return this._interiorIntersections},ni.prototype.interfaces_=function(){return[jr]},ni.prototype.getClass=function(){return ni};function ai(t){this._pm=null,this._li=null,this._scaleFactor=null,this._noder=null,this._pointSnapper=null,this._nodedSegStrings=null;var e=t;this._pm=e,this._li=new dt,this._li.setPrecisionModel(e),this._scaleFactor=e.getScale()}ai.prototype.checkCorrectness=function(t){var e=Zn.getNodedSubstrings(t),n=new Jr(e);try{n.checkValid()}catch(t){if(!(t instanceof H))throw t;t.printStackTrace()}},ai.prototype.getNodedSubstrings=function(){return Zn.getNodedSubstrings(this._nodedSegStrings)},ai.prototype.snapRound=function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},ai.prototype.findInteriorIntersections=function(t,e){var n=new ni(e);return this._noder.setSegmentIntersector(n),this._noder.computeNodes(t),n.getInteriorIntersections()},ai.prototype.computeVertexSnaps=function(){if(N(arguments[0],At))for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.computeVertexSnaps(e)}else if(arguments[0]instanceof Zn)for(var n=arguments[0],r=n.getCoordinates(),i=0;i<r.length;i++){var o=new Kr(r[i],this._scaleFactor,this._li);this._pointSnapper.snap(o,n,i)&&n.addIntersection(r[i],i)}},ai.prototype.computeNodes=function(t){this._nodedSegStrings=t,this._noder=new ar,this._pointSnapper=new ti(this._noder.getIndex()),this.snapRound(t,this._li)},ai.prototype.computeIntersectionSnaps=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new Kr(n,this._scaleFactor,this._li);this._pointSnapper.snap(r)}},ai.prototype.interfaces_=function(){return[nr]},ai.prototype.getClass=function(){return ai};function si(t,e){var n;this._argGeom=null,this._distance=null,this._bufParams=new ir,this._resultGeometry=null,this._saveException=null,1===arguments.length?this._argGeom=t:2===arguments.length&&(n=e,this._argGeom=t,this._bufParams=n)}var li={CAP_ROUND:{configurable:!0},CAP_BUTT:{configurable:!0},CAP_FLAT:{configurable:!0},CAP_SQUARE:{configurable:!0},MAX_PRECISION_DIGITS:{configurable:!0}};si.prototype.bufferFixedPrecision=function(t){var e=new Xr(new ai(new De(1)),t.getScale()),n=new Hr(this._bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this._resultGeometry=n.buffer(this._argGeom,this._distance)},si.prototype.bufferReducedPrecision=function(){var t,e,n;if(0===arguments.length){for(var r=si.MAX_PRECISION_DIGITS;0<=r;r--){try{this.bufferReducedPrecision(r)}catch(r){if(!(r instanceof tn))throw r;this._saveException=r}if(null!==this._resultGeometry)return null}throw this._saveException}1===arguments.length&&(t=arguments[0],e=si.precisionScaleFactor(this._argGeom,this._distance,t),n=new De(e),this.bufferFixedPrecision(n))},si.prototype.computeGeometry=function(){if(this.bufferOriginalPrecision(),null!==this._resultGeometry)return null;var t=this._argGeom.getFactory().getPrecisionModel();t.getType()===De.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},si.prototype.setQuadrantSegments=function(t){this._bufParams.setQuadrantSegments(t)},si.prototype.bufferOriginalPrecision=function(){try{var t=new Hr(this._bufParams);this._resultGeometry=t.buffer(this._argGeom,this._distance)}catch(t){if(!(t instanceof at))throw t;this._saveException=t}},si.prototype.getResultGeometry=function(t){return this._distance=t,this.computeGeometry(),this._resultGeometry},si.prototype.setEndCapStyle=function(t){this._bufParams.setEndCapStyle(t)},si.prototype.interfaces_=function(){return[]},si.prototype.getClass=function(){return si},si.bufferOp=function(){if(2===arguments.length){var t=arguments[1];return new si(arguments[0]).getResultGeometry(t)}if(3===arguments.length){if(Number.isInteger(arguments[2])&&arguments[0]instanceof bt&&"number"==typeof arguments[1]){var e=arguments[1],n=arguments[2],r=new si(arguments[0]);return r.setQuadrantSegments(n),r.getResultGeometry(e)}if(arguments[2]instanceof ir&&arguments[0]instanceof bt&&"number"==typeof arguments[1]){var i=arguments[1];return new si(arguments[0],arguments[2]).getResultGeometry(i)}}else if(4===arguments.length){var o=arguments[1],a=arguments[2],s=arguments[3],l=new si(arguments[0]);return l.setQuadrantSegments(a),l.setEndCapStyle(s),l.getResultGeometry(o)}},si.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),i=M.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY()))+2*(0<e?e:0),o=n-Math.trunc(Math.log(i)/Math.log(10)+1);return Math.pow(10,o)},li.CAP_ROUND.get=function(){return ir.CAP_ROUND},li.CAP_BUTT.get=function(){return ir.CAP_FLAT},li.CAP_FLAT.get=function(){return ir.CAP_FLAT},li.CAP_SQUARE.get=function(){return ir.CAP_SQUARE},li.MAX_PRECISION_DIGITS.get=function(){return 12},Object.defineProperties(si,li);function ui(){this._pt=[new O,new O],this._distance=m.NaN,this._isNull=!0}ui.prototype.getCoordinates=function(){return this._pt},ui.prototype.getCoordinate=function(t){return this._pt[t]},ui.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},ui.prototype.initialize=function(){var t,e,n,r,i;0===arguments.length?this._isNull=!0:2===arguments.length?(t=arguments[0],e=arguments[1],this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1):3===arguments.length&&(n=arguments[0],r=arguments[1],i=arguments[2],this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1)},ui.prototype.getDistance=function(){return this._distance},ui.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},ui.prototype.interfaces_=function(){return[]},ui.prototype.getClass=function(){return ui};function ci(){}ci.prototype.interfaces_=function(){return[]},ci.prototype.getClass=function(){return ci},ci.computeDistance=function(){if(arguments[2]instanceof ui&&arguments[0]instanceof me&&arguments[1]instanceof O)for(var t=arguments[1],e=arguments[2],n=arguments[0].getCoordinates(),r=new Kn,i=0;i<n.length-1;i++){r.setCoordinates(n[i],n[i+1]);var o=r.closestPoint(t);e.setMinimum(o,t)}else if(arguments[2]instanceof ui&&arguments[0]instanceof xe&&arguments[1]instanceof O){var a=arguments[0],s=arguments[1],l=arguments[2];ci.computeDistance(a.getExteriorRing(),s,l);for(var u=0;u<a.getNumInteriorRing();u++)ci.computeDistance(a.getInteriorRingN(u),s,l)}else if(arguments[2]instanceof ui&&arguments[0]instanceof bt&&arguments[1]instanceof O){var c=arguments[0],p=arguments[1],h=arguments[2];if(c instanceof me)ci.computeDistance(c,p,h);else if(c instanceof xe)ci.computeDistance(c,p,h);else if(c instanceof ce)for(var f=c,d=0;d<f.getNumGeometries();d++){var y=f.getGeometryN(d);ci.computeDistance(y,p,h)}else h.setMinimum(c.getCoordinate(),p)}else{var g,_,m;arguments[2]instanceof ui&&arguments[0]instanceof Kn&&arguments[1]instanceof O&&(g=arguments[1],_=arguments[2],m=arguments[0].closestPoint(g),_.setMinimum(m,g))}};function pi(t){this._maxPtDist=new ui,this._inputGeom=t||null}var hi={MaxPointDistanceFilter:{configurable:!0},MaxMidpointDistanceFilter:{configurable:!0}};pi.prototype.computeMaxMidpointDistance=function(t){var e=new di(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},pi.prototype.computeMaxVertexDistance=function(t){var e=new fi(this._inputGeom);t.apply(e),this._maxPtDist.setMaximum(e.getMaxPointDistance())},pi.prototype.findDistance=function(t){return this.computeMaxVertexDistance(t),this.computeMaxMidpointDistance(t),this._maxPtDist.getDistance()},pi.prototype.getDistancePoints=function(){return this._maxPtDist},pi.prototype.interfaces_=function(){return[]},pi.prototype.getClass=function(){return pi},hi.MaxPointDistanceFilter.get=function(){return fi},hi.MaxMidpointDistanceFilter.get=function(){return di},Object.defineProperties(pi,hi);var fi=function(t){this._maxPtDist=new ui,this._minPtDist=new ui,this._geom=t||null};fi.prototype.filter=function(t){this._minPtDist.initialize(),ci.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},fi.prototype.getMaxPointDistance=function(){return this._maxPtDist},fi.prototype.interfaces_=function(){return[Ct]},fi.prototype.getClass=function(){return fi};var di=function(t){this._maxPtDist=new ui,this._minPtDist=new ui,this._geom=t||null};di.prototype.filter=function(t,e){if(0===e)return null;var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=new O((n.x+r.x)/2,(n.y+r.y)/2);this._minPtDist.initialize(),ci.computeDistance(this._geom,i,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},di.prototype.isDone=function(){return!1},di.prototype.isGeometryChanged=function(){return!1},di.prototype.getMaxPointDistance=function(){return this._maxPtDist},di.prototype.interfaces_=function(){return[ue]},di.prototype.getClass=function(){return di};function yi(t){this._comps=t||null}yi.prototype.filter=function(t){t instanceof xe&&this._comps.add(t)},yi.prototype.interfaces_=function(){return[le]},yi.prototype.getClass=function(){return yi},yi.getPolygons=function(){if(1===arguments.length)return yi.getPolygons(arguments[0],new Ft);if(2===arguments.length){var t=arguments[0],e=arguments[1];return t instanceof xe?e.add(t):t instanceof ce&&t.apply(new yi(e)),e}};function gi(t,e){var n;this._lines=null,this._isForcedToLineString=!1,1===arguments.length?this._lines=t:2===arguments.length&&(n=e,this._lines=t,this._isForcedToLineString=n)}gi.prototype.filter=function(t){if(this._isForcedToLineString&&t instanceof Ee){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this._lines.add(e),null}t instanceof me&&this._lines.add(t)},gi.prototype.setForceToLineString=function(t){this._isForcedToLineString=t},gi.prototype.interfaces_=function(){return[vt]},gi.prototype.getClass=function(){return gi},gi.getGeometry=function(){if(1===arguments.length){var t=arguments[0];return t.getFactory().buildGeometry(gi.getLines(t))}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry(gi.getLines(e,n))}},gi.getLines=function(){if(1===arguments.length)return gi.getLines(arguments[0],!1);if(2===arguments.length){if(N(arguments[0],At)&&N(arguments[1],At)){for(var t=arguments[1],e=arguments[0].iterator();e.hasNext();){var n=e.next();gi.getLines(n,t)}return t}if(arguments[0]instanceof bt&&"boolean"==typeof arguments[1]){var r=arguments[0],i=arguments[1],o=new Ft;return r.apply(new gi(o,i)),o}if(arguments[0]instanceof bt&&N(arguments[1],At)){var a=arguments[0],s=arguments[1];return a instanceof me?s.add(a):a.apply(new gi(s)),s}}else if(3===arguments.length){if("boolean"==typeof arguments[2]&&N(arguments[0],At)&&N(arguments[1],At)){for(var l=arguments[1],u=arguments[2],c=arguments[0].iterator();c.hasNext();){var p=c.next();gi.getLines(p,l,u)}return l}if("boolean"==typeof arguments[2]&&arguments[0]instanceof bt&&N(arguments[1],At)){var h=arguments[1],f=arguments[2];return arguments[0].apply(new gi(h,f)),h}}};function _i(t){if(this._boundaryRule=Et.OGC_SFS_BOUNDARY_RULE,this._isIn=null,this._numBoundaries=null,0!==arguments.length&&1===arguments.length){var e=t;if(null===e)throw new b("Rule must be non-null");this._boundaryRule=e}}_i.prototype.locateInternal=function(){if(arguments[0]instanceof O&&arguments[1]instanceof xe){var t=arguments[0],e=arguments[1];if(e.isEmpty())return A.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===A.EXTERIOR)return A.EXTERIOR;if(r===A.BOUNDARY)return A.BOUNDARY;for(var i=0;i<e.getNumInteriorRing();i++){var o=e.getInteriorRingN(i),a=this.locateInPolygonRing(t,o);if(a===A.INTERIOR)return A.EXTERIOR;if(a===A.BOUNDARY)return A.BOUNDARY}return A.INTERIOR}if(arguments[0]instanceof O&&arguments[1]instanceof me){var s=arguments[0],l=arguments[1];if(!l.getEnvelopeInternal().intersects(s))return A.EXTERIOR;var u=l.getCoordinates();return l.isClosed()||!s.equals(u[0])&&!s.equals(u[u.length-1])?_t.isOnLine(s,u)?A.INTERIOR:A.EXTERIOR:A.BOUNDARY}if(arguments[0]instanceof O&&arguments[1]instanceof be){var c=arguments[0];return arguments[1].getCoordinate().equals2D(c)?A.INTERIOR:A.EXTERIOR}},_i.prototype.locateInPolygonRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?_t.locatePointInRing(t,e.getCoordinates()):A.EXTERIOR},_i.prototype.intersects=function(t,e){return this.locate(t,e)!==A.EXTERIOR},_i.prototype.updateLocationInfo=function(t){t===A.INTERIOR&&(this._isIn=!0),t===A.BOUNDARY&&this._numBoundaries++},_i.prototype.computeLocation=function(t,e){if(e instanceof be&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof me)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof xe)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof pe)for(var n=e,r=0;r<n.getNumGeometries();r++){var i=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,i))}else if(e instanceof Pe)for(var o=e,a=0;a<o.getNumGeometries();a++){var s=o.getGeometryN(a);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof ce)for(var l=new Pr(e);l.hasNext();){var u=l.next();u!==e&&this.computeLocation(t,u)}},_i.prototype.locate=function(t,e){return e.isEmpty()?A.EXTERIOR:e instanceof me||e instanceof xe?this.locateInternal(t,e):(this._isIn=!1,this._numBoundaries=0,this.computeLocation(t,e),this._boundaryRule.isInBoundary(this._numBoundaries)?A.BOUNDARY:0<this._numBoundaries||this._isIn?A.INTERIOR:A.EXTERIOR)},_i.prototype.interfaces_=function(){return[]},_i.prototype.getClass=function(){return _i};function mi(){var t,e,n;this._component=null,this._segIndex=null,this._pt=null,2===arguments.length?mi.call(this,arguments[0],mi.INSIDE_AREA,arguments[1]):3===arguments.length&&(t=arguments[0],e=arguments[1],n=arguments[2],this._component=t,this._segIndex=e,this._pt=n)}var vi={INSIDE_AREA:{configurable:!0}};mi.prototype.isInsideArea=function(){return this._segIndex===mi.INSIDE_AREA},mi.prototype.getCoordinate=function(){return this._pt},mi.prototype.getGeometryComponent=function(){return this._component},mi.prototype.getSegmentIndex=function(){return this._segIndex},mi.prototype.interfaces_=function(){return[]},mi.prototype.getClass=function(){return mi},vi.INSIDE_AREA.get=function(){return-1},Object.defineProperties(mi,vi);function bi(t){this._pts=t||null}bi.prototype.filter=function(t){t instanceof be&&this._pts.add(t)},bi.prototype.interfaces_=function(){return[le]},bi.prototype.getClass=function(){return bi},bi.getPoints=function(){if(1===arguments.length){var t=arguments[0];return t instanceof be?Dn.singletonList(t):bi.getPoints(t,new Ft)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e instanceof be?n.add(e):e instanceof ce&&e.apply(new bi(n)),n}};function wi(t){this._locations=null,this._locations=t}wi.prototype.filter=function(t){(t instanceof be||t instanceof me||t instanceof xe)&&this._locations.add(new mi(t,0,t.getCoordinate()))},wi.prototype.interfaces_=function(){return[le]},wi.prototype.getClass=function(){return wi},wi.getLocations=function(t){var e=new Ft;return t.apply(new wi(e)),e};function xi(t,e,n){var r,i,o;this._geom=null,this._terminateDistance=0,this._ptLocator=new _i,this._minDistanceLocation=null,this._minDistance=m.MAX_VALUE,2===arguments.length?(this._geom=[t,e],this._terminateDistance=0):3===arguments.length&&(r=t,i=e,o=n,this._geom=new Array(2).fill(null),this._geom[0]=r,this._geom[1]=i,this._terminateDistance=o)}xi.prototype.computeContainmentDistance=function(){if(0===arguments.length){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this._minDistance<=this._terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(2===arguments.length){var e=arguments[0],n=arguments[1],r=1-e,i=yi.getPolygons(this._geom[e]);if(0<i.size()){var o=wi.getLocations(this._geom[r]);if(this.computeContainmentDistance(o,i,n),this._minDistance<=this._terminateDistance)return this._minDistanceLocation[r]=n[0],this._minDistanceLocation[e]=n[1],null}}else if(3===arguments.length)if(arguments[2]instanceof Array&&N(arguments[0],Mt)&&N(arguments[1],Mt)){for(var a=arguments[0],s=arguments[1],l=arguments[2],u=0;u<a.size();u++)for(var c=a.get(u),p=0;p<s.size();p++)if(this.computeContainmentDistance(c,s.get(p),l),this._minDistance<=this._terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof mi&&arguments[1]instanceof xe){var h=arguments[0],f=arguments[1],d=arguments[2],y=h.getCoordinate();if(A.EXTERIOR!==this._ptLocator.locate(y,f))return d[this._minDistance=0]=h,d[1]=new mi(f,y),null}},xi.prototype.computeMinDistanceLinesPoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},xi.prototype.computeFacetDistance=function(){var t=new Array(2).fill(null),e=gi.getLines(this._geom[0]),n=gi.getLines(this._geom[1]),r=bi.getPoints(this._geom[0]),i=bi.getPoints(this._geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,i,t),this.updateMinDistance(t,!1),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this._minDistance<=this._terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,i,t),void this.updateMinDistance(t,!1))))},xi.prototype.nearestLocations=function(){return this.computeMinDistance(),this._minDistanceLocation},xi.prototype.updateMinDistance=function(t,e){if(null===t[0])return null;e?(this._minDistanceLocation[0]=t[1],this._minDistanceLocation[1]=t[0]):(this._minDistanceLocation[0]=t[0],this._minDistanceLocation[1]=t[1])},xi.prototype.nearestPoints=function(){return this.computeMinDistance(),[this._minDistanceLocation[0].getCoordinate(),this._minDistanceLocation[1].getCoordinate()]},xi.prototype.computeMinDistance=function(){if(0===arguments.length){if(null!==this._minDistanceLocation)return null;if(this._minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this._minDistance<=this._terminateDistance)return null;this.computeFacetDistance()}else if(3===arguments.length)if(arguments[2]instanceof Array&&arguments[0]instanceof me&&arguments[1]instanceof be){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this._minDistance)return null;for(var r=t.getCoordinates(),i=e.getCoordinate(),o=0;o<r.length-1;o++){var a,s=_t.distancePointLine(i,r[o],r[o+1]);if(s<this._minDistance&&(this._minDistance=s,a=new Kn(r[o],r[o+1]).closestPoint(i),n[0]=new mi(t,o,a),n[1]=new mi(e,0,i)),this._minDistance<=this._terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof me&&arguments[1]instanceof me){var l=arguments[0],u=arguments[1],c=arguments[2];if(l.getEnvelopeInternal().distance(u.getEnvelopeInternal())>this._minDistance)return null;for(var p=l.getCoordinates(),h=u.getCoordinates(),f=0;f<p.length-1;f++)for(var d=0;d<h.length-1;d++){var y,g,_,m=_t.distanceLineLine(p[f],p[f+1],h[d],h[d+1]);if(m<this._minDistance&&(this._minDistance=m,y=new Kn(p[f],p[f+1]),g=new Kn(h[d],h[d+1]),_=y.closestPoints(g),c[0]=new mi(l,f,_[0]),c[1]=new mi(u,d,_[1])),this._minDistance<=this._terminateDistance)return null}}},xi.prototype.computeMinDistancePoints=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o),s=i.getCoordinate().distance(a.getCoordinate());if(s<this._minDistance&&(this._minDistance=s,n[0]=new mi(i,0,i.getCoordinate()),n[1]=new mi(a,0,a.getCoordinate())),this._minDistance<=this._terminateDistance)return null}},xi.prototype.distance=function(){if(null===this._geom[0]||null===this._geom[1])throw new b("null geometries are not supported");return this._geom[0].isEmpty()||this._geom[1].isEmpty()?0:(this.computeMinDistance(),this._minDistance)},xi.prototype.computeMinDistanceLines=function(t,e,n){for(var r=0;r<t.size();r++)for(var i=t.get(r),o=0;o<e.size();o++){var a=e.get(o);if(this.computeMinDistance(i,a,n),this._minDistance<=this._terminateDistance)return null}},xi.prototype.interfaces_=function(){return[]},xi.prototype.getClass=function(){return xi},xi.distance=function(t,e){return new xi(t,e).distance()},xi.isWithinDistance=function(t,e,n){return new xi(t,e,n).distance()<=n},xi.nearestPoints=function(t,e){return new xi(t,e).nearestPoints()};function Ci(){this._pt=[new O,new O],this._distance=m.NaN,this._isNull=!0}Ci.prototype.getCoordinates=function(){return this._pt},Ci.prototype.getCoordinate=function(t){return this._pt[t]},Ci.prototype.setMinimum=function(){if(1===arguments.length){var t=arguments[0];this.setMinimum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r<this._distance&&this.initialize(e,n,r)}},Ci.prototype.initialize=function(){var t,e,n,r,i;0===arguments.length?this._isNull=!0:2===arguments.length?(t=arguments[0],e=arguments[1],this._pt[0].setCoordinate(t),this._pt[1].setCoordinate(e),this._distance=t.distance(e),this._isNull=!1):3===arguments.length&&(n=arguments[0],r=arguments[1],i=arguments[2],this._pt[0].setCoordinate(n),this._pt[1].setCoordinate(r),this._distance=i,this._isNull=!1)},Ci.prototype.toString=function(){return tt.toLineString(this._pt[0],this._pt[1])},Ci.prototype.getDistance=function(){return this._distance},Ci.prototype.setMaximum=function(){if(1===arguments.length){var t=arguments[0];this.setMaximum(t._pt[0],t._pt[1])}else if(2===arguments.length){var e=arguments[0],n=arguments[1];if(this._isNull)return this.initialize(e,n),null;var r=e.distance(n);r>this._distance&&this.initialize(e,n,r)}},Ci.prototype.interfaces_=function(){return[]},Ci.prototype.getClass=function(){return Ci};function Ei(){}Ei.prototype.interfaces_=function(){return[]},Ei.prototype.getClass=function(){return Ei},Ei.computeDistance=function(){if(arguments[2]instanceof Ci&&arguments[0]instanceof me&&arguments[1]instanceof O)for(var t=arguments[0],e=arguments[1],n=arguments[2],r=new Kn,i=t.getCoordinates(),o=0;o<i.length-1;o++){r.setCoordinates(i[o],i[o+1]);var a=r.closestPoint(e);n.setMinimum(a,e)}else if(arguments[2]instanceof Ci&&arguments[0]instanceof xe&&arguments[1]instanceof O){var s=arguments[0],l=arguments[1],u=arguments[2];Ei.computeDistance(s.getExteriorRing(),l,u);for(var c=0;c<s.getNumInteriorRing();c++)Ei.computeDistance(s.getInteriorRingN(c),l,u)}else if(arguments[2]instanceof Ci&&arguments[0]instanceof bt&&arguments[1]instanceof O){var p=arguments[0],h=arguments[1],f=arguments[2];if(p instanceof me)Ei.computeDistance(p,h,f);else if(p instanceof xe)Ei.computeDistance(p,h,f);else if(p instanceof ce)for(var d=p,y=0;y<d.getNumGeometries();y++){var g=d.getGeometryN(y);Ei.computeDistance(g,h,f)}else f.setMinimum(p.getCoordinate(),h)}else{var _,m,v;arguments[2]instanceof Ci&&arguments[0]instanceof Kn&&arguments[1]instanceof O&&(_=arguments[1],m=arguments[2],v=arguments[0].closestPoint(_),m.setMinimum(v,_))}};function Pi(t,e){this._g0=null,this._g1=null,this._ptDist=new Ci,this._densifyFrac=0;var n=e;this._g0=t,this._g1=n}var Oi={MaxPointDistanceFilter:{configurable:!0},MaxDensifiedByFractionDistanceFilter:{configurable:!0}};Pi.prototype.getCoordinates=function(){return this._ptDist.getCoordinates()},Pi.prototype.setDensifyFraction=function(t){if(1<t||t<=0)throw new b("Fraction is not in range (0.0 - 1.0]");this._densifyFrac=t},Pi.prototype.compute=function(t,e){this.computeOrientedDistance(t,e,this._ptDist),this.computeOrientedDistance(e,t,this._ptDist)},Pi.prototype.distance=function(){return this.compute(this._g0,this._g1),this._ptDist.getDistance()},Pi.prototype.computeOrientedDistance=function(t,e,n){var r,i=new Ti(e);t.apply(i),n.setMaximum(i.getMaxPointDistance()),0<this._densifyFrac&&(r=new Si(e,this._densifyFrac),t.apply(r),n.setMaximum(r.getMaxPointDistance()))},Pi.prototype.orientedDistance=function(){return this.computeOrientedDistance(this._g0,this._g1,this._ptDist),this._ptDist.getDistance()},Pi.prototype.interfaces_=function(){return[]},Pi.prototype.getClass=function(){return Pi},Pi.distance=function(){if(2===arguments.length)return new Pi(arguments[0],arguments[1]).distance();if(3===arguments.length){var t=arguments[2],e=new Pi(arguments[0],arguments[1]);return e.setDensifyFraction(t),e.distance()}},Oi.MaxPointDistanceFilter.get=function(){return Ti},Oi.MaxDensifiedByFractionDistanceFilter.get=function(){return Si},Object.defineProperties(Pi,Oi);var Ti=function(t){this._maxPtDist=new Ci,this._minPtDist=new Ci,this._euclideanDist=new Ei,this._geom=null;this._geom=t};Ti.prototype.filter=function(t){this._minPtDist.initialize(),Ei.computeDistance(this._geom,t,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)},Ti.prototype.getMaxPointDistance=function(){return this._maxPtDist},Ti.prototype.interfaces_=function(){return[Ct]},Ti.prototype.getClass=function(){return Ti};var Si=function(t,e){this._maxPtDist=new Ci,this._minPtDist=new Ci,this._geom=null,this._numSubSegs=0;var n=e;this._geom=t,this._numSubSegs=Math.trunc(Math.round(1/n))};Si.prototype.filter=function(t,e){if(0===e)return null;for(var n=t.getCoordinate(e-1),r=t.getCoordinate(e),i=(r.x-n.x)/this._numSubSegs,o=(r.y-n.y)/this._numSubSegs,a=0;a<this._numSubSegs;a++){var s=n.x+a*i,l=n.y+a*o,u=new O(s,l);this._minPtDist.initialize(),Ei.computeDistance(this._geom,u,this._minPtDist),this._maxPtDist.setMaximum(this._minPtDist)}},Si.prototype.isDone=function(){return!1},Si.prototype.isGeometryChanged=function(){return!1},Si.prototype.getMaxPointDistance=function(){return this._maxPtDist},Si.prototype.interfaces_=function(){return[ue]},Si.prototype.getClass=function(){return Si};function Ii(t,e,n){this._minValidDistance=null,this._maxValidDistance=null,this._minDistanceFound=null,this._maxDistanceFound=null,this._isValid=!0,this._errMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._bufDistance=e||null,this._result=n||null}var Ai={VERBOSE:{configurable:!0},MAX_DISTANCE_DIFF_FRAC:{configurable:!0}};Ii.prototype.checkMaximumDistance=function(t,e,n){var r,i=new Pi(e,t);i.setDensifyFraction(.25),this._maxDistanceFound=i.orientedDistance(),this._maxDistanceFound>n&&(this._isValid=!1,r=i.getCoordinates(),this._errorLocation=r[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too large ("+this._maxDistanceFound+" at "+tt.toLineString(r[0],r[1])+")")},Ii.prototype.isValid=function(){var t=Math.abs(this._bufDistance),e=Ii.MAX_DISTANCE_DIFF_FRAC*t;return this._minValidDistance=t-e,this._maxValidDistance=t+e,!(!this._input.isEmpty()&&!this._result.isEmpty())||(0<this._bufDistance?this.checkPositiveValid():this.checkNegativeValid(),Ii.VERBOSE&&q.out.println("Min Dist= "+this._minDistanceFound+"  err= "+(1-this._minDistanceFound/this._bufDistance)+"  Max Dist= "+this._maxDistanceFound+"  err= "+(this._maxDistanceFound/this._bufDistance-1)),this._isValid)},Ii.prototype.checkNegativeValid=function(){if(!(this._input instanceof xe||this._input instanceof Pe||this._input instanceof ce))return null;var t=this.getPolygonLines(this._input);if(this.checkMinimumDistance(t,this._result,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(t,this._result,this._maxValidDistance)},Ii.prototype.getErrorIndicator=function(){return this._errorIndicator},Ii.prototype.checkMinimumDistance=function(t,e,n){var r,i=new xi(t,e,n);this._minDistanceFound=i.distance(),this._minDistanceFound<n&&(this._isValid=!1,r=i.nearestPoints(),this._errorLocation=i.nearestPoints()[1],this._errorIndicator=t.getFactory().createLineString(r),this._errMsg="Distance between buffer curve and input is too small ("+this._minDistanceFound+" at "+tt.toLineString(r[0],r[1])+" )")},Ii.prototype.checkPositiveValid=function(){var t=this._result.getBoundary();if(this.checkMinimumDistance(this._input,t,this._minValidDistance),!this._isValid)return null;this.checkMaximumDistance(this._input,t,this._maxValidDistance)},Ii.prototype.getErrorLocation=function(){return this._errorLocation},Ii.prototype.getPolygonLines=function(t){for(var e=new Ft,n=new gi(e),r=yi.getPolygons(t).iterator();r.hasNext();)r.next().apply(n);return t.getFactory().buildGeometry(e)},Ii.prototype.getErrorMessage=function(){return this._errMsg},Ii.prototype.interfaces_=function(){return[]},Ii.prototype.getClass=function(){return Ii},Ai.VERBOSE.get=function(){return!1},Ai.MAX_DISTANCE_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Ii,Ai);function Li(t,e,n){this._isValid=!0,this._errorMsg=null,this._errorLocation=null,this._errorIndicator=null,this._input=t||null,this._distance=e||null,this._result=n||null}var Ni={VERBOSE:{configurable:!0},MAX_ENV_DIFF_FRAC:{configurable:!0}};Li.prototype.isValid=function(){return this.checkPolygonal(),this._isValid&&(this.checkExpectedEmpty(),this._isValid&&(this.checkEnvelope(),this._isValid&&(this.checkArea(),this._isValid&&this.checkDistance()))),this._isValid},Li.prototype.checkEnvelope=function(){if(this._distance<0)return null;var t=this._distance*Li.MAX_ENV_DIFF_FRAC;0===t&&(t=.001);var e=new Z(this._input.getEnvelopeInternal());e.expandBy(this._distance);var n=new Z(this._result.getEnvelopeInternal());n.expandBy(t),n.contains(e)||(this._isValid=!1,this._errorMsg="Buffer envelope is incorrect",this._errorIndicator=this._input.getFactory().toGeometry(n)),this.report("Envelope")},Li.prototype.checkDistance=function(){var t=new Ii(this._input,this._distance,this._result);t.isValid()||(this._isValid=!1,this._errorMsg=t.getErrorMessage(),this._errorLocation=t.getErrorLocation(),this._errorIndicator=t.getErrorIndicator()),this.report("Distance")},Li.prototype.checkArea=function(){var t=this._input.getArea(),e=this._result.getArea();0<this._distance&&e<t&&(this._isValid=!1,this._errorMsg="Area of positive buffer is smaller than input",this._errorIndicator=this._result),this._distance<0&&t<e&&(this._isValid=!1,this._errorMsg="Area of negative buffer is larger than input",this._errorIndicator=this._result),this.report("Area")},Li.prototype.checkPolygonal=function(){this._result instanceof xe||this._result instanceof Pe||(this._isValid=!1),this._errorMsg="Result is not polygonal",this._errorIndicator=this._result,this.report("Polygonal")},Li.prototype.getErrorIndicator=function(){return this._errorIndicator},Li.prototype.getErrorLocation=function(){return this._errorLocation},Li.prototype.checkExpectedEmpty=function(){return 2<=this._input.getDimension()||0<this._distance?null:(this._result.isEmpty()||(this._isValid=!1,this._errorMsg="Result is non-empty",this._errorIndicator=this._result),void this.report("ExpectedEmpty"))},Li.prototype.report=function(t){if(!Li.VERBOSE)return null;q.out.println("Check "+t+": "+(this._isValid?"passed":"FAILED"))},Li.prototype.getErrorMessage=function(){return this._errorMsg},Li.prototype.interfaces_=function(){return[]},Li.prototype.getClass=function(){return Li},Li.isValidMsg=function(t,e,n){var r=new Li(t,e,n);return r.isValid()?null:r.getErrorMessage()},Li.isValid=function(t,e,n){return!!new Li(t,e,n).isValid()},Ni.VERBOSE.get=function(){return!1},Ni.MAX_ENV_DIFF_FRAC.get=function(){return.012},Object.defineProperties(Li,Ni);function Mi(t,e){this._pts=null,this._data=null;var n=e;this._pts=t,this._data=n}Mi.prototype.getCoordinates=function(){return this._pts},Mi.prototype.size=function(){return this._pts.length},Mi.prototype.getCoordinate=function(t){return this._pts[t]},Mi.prototype.isClosed=function(){return this._pts[0].equals(this._pts[this._pts.length-1])},Mi.prototype.getSegmentOctant=function(t){return t===this._pts.length-1?-1:Yn.octant(this.getCoordinate(t),this.getCoordinate(t+1))},Mi.prototype.setData=function(t){this._data=t},Mi.prototype.getData=function(){return this._data},Mi.prototype.toString=function(){return tt.toLineString(new Ae(this._pts))},Mi.prototype.interfaces_=function(){return[Xn]},Mi.prototype.getClass=function(){return Mi};function Di(t){this._findAllIntersections=!1,this._isCheckEndSegmentsOnly=!1,this._li=null,this._interiorIntersection=null,this._intSegments=null,this._intersections=new Ft,this._intersectionCount=0,this._keepIntersections=!0,this._li=t,this._interiorIntersection=null}Di.prototype.getInteriorIntersection=function(){return this._interiorIntersection},Di.prototype.setCheckEndSegmentsOnly=function(t){this._isCheckEndSegmentsOnly=t},Di.prototype.getIntersectionSegments=function(){return this._intSegments},Di.prototype.count=function(){return this._intersectionCount},Di.prototype.getIntersections=function(){return this._intersections},Di.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Di.prototype.setKeepIntersections=function(t){this._keepIntersections=t},Di.prototype.processIntersections=function(t,e,n,r){if(!this._findAllIntersections&&this.hasIntersection())return null;if(t===n&&e===r)return null;if(this._isCheckEndSegmentsOnly&&!this.isEndSegment(t,e)&&!this.isEndSegment(n,r))return null;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&this._li.isInteriorIntersection()&&(this._intSegments=new Array(4).fill(null),this._intSegments[0]=i,this._intSegments[1]=o,this._intSegments[2]=a,this._intSegments[3]=s,this._interiorIntersection=this._li.getIntersection(0),this._keepIntersections&&this._intersections.add(this._interiorIntersection),this._intersectionCount++)},Di.prototype.isEndSegment=function(t,e){return 0===e||e>=t.size()-2},Di.prototype.hasIntersection=function(){return null!==this._interiorIntersection},Di.prototype.isDone=function(){return!this._findAllIntersections&&null!==this._interiorIntersection},Di.prototype.interfaces_=function(){return[jr]},Di.prototype.getClass=function(){return Di},Di.createAllIntersectionsFinder=function(t){var e=new Di(t);return e.setFindAllIntersections(!0),e},Di.createAnyIntersectionFinder=function(t){return new Di(t)},Di.createIntersectionCounter=function(t){var e=new Di(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e};function Ri(t){this._li=new dt,this._segStrings=null,this._findAllIntersections=!1,this._segInt=null,this._isValid=!0,this._segStrings=t}Ri.prototype.execute=function(){if(null!==this._segInt)return null;this.checkInteriorIntersections()},Ri.prototype.getIntersections=function(){return this._segInt.getIntersections()},Ri.prototype.isValid=function(){return this.execute(),this._isValid},Ri.prototype.setFindAllIntersections=function(t){this._findAllIntersections=t},Ri.prototype.checkInteriorIntersections=function(){this._isValid=!0,this._segInt=new Di(this._li),this._segInt.setFindAllIntersections(this._findAllIntersections);var t=new ar;if(t.setSegmentIntersector(this._segInt),t.computeNodes(this._segStrings),this._segInt.hasIntersection())return this._isValid=!1,null},Ri.prototype.checkValid=function(){if(this.execute(),!this._isValid)throw new tn(this.getErrorMessage(),this._segInt.getInteriorIntersection())},Ri.prototype.getErrorMessage=function(){if(this._isValid)return"no intersections found";var t=this._segInt.getIntersectionSegments();return"found non-noded intersection between "+tt.toLineString(t[0],t[1])+" and "+tt.toLineString(t[2],t[3])},Ri.prototype.interfaces_=function(){return[]},Ri.prototype.getClass=function(){return Ri},Ri.computeIntersections=function(t){var e=new Ri(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()};function ji(){this._nv=null;var t=arguments[0];this._nv=new Ri(ji.toSegmentStrings(t))}ji.prototype.checkValid=function(){this._nv.checkValid()},ji.prototype.interfaces_=function(){return[]},ji.prototype.getClass=function(){return ji},ji.toSegmentStrings=function(t){for(var e=new Ft,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Mi(r.getCoordinates(),r))}return e},ji.checkValid=function(t){new ji(t).checkValid()};function ki(t){this._mapOp=t}ki.prototype.map=function(t){for(var e=new Ft,n=0;n<t.getNumGeometries();n++){var r=this._mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ze.toGeometryArray(e))},ki.prototype.interfaces_=function(){return[]},ki.prototype.getClass=function(){return ki},ki.map=function(t,e){return new ki(e).map(t)};function Fi(t,e,n){this._op=null,this._geometryFactory=null,this._ptLocator=null,this._lineEdgesList=new Ft,this._resultLineList=new Ft;var r=e,i=n;this._op=t,this._geometryFactory=r,this._ptLocator=i}Fi.prototype.collectLines=function(t){for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this._lineEdgesList),this.collectBoundaryTouchEdge(n,t,this._lineEdgesList)}},Fi.prototype.labelIsolatedLine=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._op.getArgGeometry(e));t.getLabel().setLocation(e,n)},Fi.prototype.build=function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this._resultLineList},Fi.prototype.collectLineEdge=function(t,e,n){var r=t.getLabel(),i=t.getEdge();t.isLineEdge()&&(t.isVisited()||!Ao.isResultOfOp(r,e)||i.isCovered()||(n.add(i),t.setVisitedEdge(!0)))},Fi.prototype.findCoveredLineEdges=function(){for(var t=this._op.getGraph().getNodes().iterator();t.hasNext();)t.next().getEdges().findCoveredLineEdges();for(var e=this._op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n,r=e.next(),i=r.getEdge();r.isLineEdge()&&!i.isCoveredSet()&&(n=this._op.isCoveredByA(r.getCoordinate()),i.setCovered(n))}},Fi.prototype.labelIsolatedLines=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},Fi.prototype.buildLines=function(t){for(var e=this._lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=this._geometryFactory.createLineString(n.getCoordinates());this._resultLineList.add(r),n.setInResult(!0)}},Fi.prototype.collectBoundaryTouchEdge=function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(rt.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(Ao.isResultOfOp(r,e)&&e===Ao.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},Fi.prototype.interfaces_=function(){return[]},Fi.prototype.getClass=function(){return Fi};function Bi(t,e){this._op=null,this._geometryFactory=null,this._resultPointList=new Ft;var n=e;this._op=t,this._geometryFactory=n}Bi.prototype.filterCoveredNodeToPoint=function(t){var e,n=t.getCoordinate();this._op.isCoveredByLA(n)||(e=this._geometryFactory.createPoint(n),this._resultPointList.add(e))},Bi.prototype.extractNonCoveredResultNodes=function(t){for(var e=this._op.getGraph().getNodes().iterator();e.hasNext();){var n,r=e.next();r.isInResult()||r.isIncidentEdgeInResult()||0!==r.getEdges().getDegree()&&t!==Ao.INTERSECTION||(n=r.getLabel(),Ao.isResultOfOp(n,t)&&this.filterCoveredNodeToPoint(r))}},Bi.prototype.build=function(t){return this.extractNonCoveredResultNodes(t),this._resultPointList},Bi.prototype.interfaces_=function(){return[]},Bi.prototype.getClass=function(){return Bi};function Gi(){this._inputGeom=null,this._factory=null,this._pruneEmptyGeometry=!0,this._preserveGeometryCollectionType=!0,this._preserveCollections=!1,this._preserveType=!1}Gi.prototype.transformPoint=function(t,e){return this._factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},Gi.prototype.transformPolygon=function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);null!==r&&r instanceof Ee&&!r.isEmpty()||(n=!1);for(var i=new Ft,o=0;o<t.getNumInteriorRing();o++){var a=this.transformLinearRing(t.getInteriorRingN(o),t);null===a||a.isEmpty()||(a instanceof Ee||(n=!1),i.add(a))}if(n)return this._factory.createPolygon(r,i.toArray([]));var s=new Ft;return null!==r&&s.add(r),s.addAll(i),this._factory.buildGeometry(s)},Gi.prototype.createCoordinateSequence=function(t){return this._factory.getCoordinateSequenceFactory().create(t)},Gi.prototype.getInputGeometry=function(){return this._inputGeom},Gi.prototype.transformMultiLineString=function(t,e){for(var n=new Ft,r=0;r<t.getNumGeometries();r++){var i=this.transformLineString(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Gi.prototype.transformCoordinates=function(t,e){return this.copy(t)},Gi.prototype.transformLineString=function(t,e){return this._factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},Gi.prototype.transformMultiPoint=function(t,e){for(var n=new Ft,r=0;r<t.getNumGeometries();r++){var i=this.transformPoint(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Gi.prototype.transformMultiPolygon=function(t,e){for(var n=new Ft,r=0;r<t.getNumGeometries();r++){var i=this.transformPolygon(t.getGeometryN(r),t);null!==i&&(i.isEmpty()||n.add(i))}return this._factory.buildGeometry(n)},Gi.prototype.copy=function(t){return t.copy()},Gi.prototype.transformGeometryCollection=function(t,e){for(var n=new Ft,r=0;r<t.getNumGeometries();r++){var i=this.transform(t.getGeometryN(r));null!==i&&(this._pruneEmptyGeometry&&i.isEmpty()||n.add(i))}return this._preserveGeometryCollectionType?this._factory.createGeometryCollection(ze.toGeometryArray(n)):this._factory.buildGeometry(n)},Gi.prototype.transform=function(t){if(this._inputGeom=t,this._factory=t.getFactory(),t instanceof be)return this.transformPoint(t,null);if(t instanceof Ce)return this.transformMultiPoint(t,null);if(t instanceof Ee)return this.transformLinearRing(t,null);if(t instanceof me)return this.transformLineString(t,null);if(t instanceof pe)return this.transformMultiLineString(t,null);if(t instanceof xe)return this.transformPolygon(t,null);if(t instanceof Pe)return this.transformMultiPolygon(t,null);if(t instanceof ce)return this.transformGeometryCollection(t,null);throw new b("Unknown Geometry subtype: "+t.getClass().getName())},Gi.prototype.transformLinearRing=function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(null===n)return this._factory.createLinearRing(null);var r=n.size();return 0<r&&r<4&&!this._preserveType?this._factory.createLineString(n):this._factory.createLinearRing(n)},Gi.prototype.interfaces_=function(){return[]},Gi.prototype.getClass=function(){return Gi};function zi(){var t,e,n;this._snapTolerance=0,this._srcPts=null,this._seg=new Kn,this._allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof me&&"number"==typeof arguments[1]?(t=arguments[1],zi.call(this,arguments[0].getCoordinates(),t)):arguments[0]instanceof Array&&"number"==typeof arguments[1]&&(e=arguments[0],n=arguments[1],this._srcPts=e,this._isClosed=zi.isClosed(e),this._snapTolerance=n)}zi.prototype.snapVertices=function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;r<n;r++){var i=t.get(r),o=this.findSnapForVertex(i,e);null!==o&&(t.set(r,new O(o)),0===r&&this._isClosed&&t.set(t.size()-1,new O(o)))}},zi.prototype.findSnapForVertex=function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this._snapTolerance)return e[n]}return null},zi.prototype.snapTo=function(t){var e=new Gt(this._srcPts);return this.snapVertices(e,t),this.snapSegments(e,t),e.toCoordinateArray()},zi.prototype.snapSegments=function(t,e){if(0===e.length)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;r<n;r++){var i=e[r],o=this.findSegmentIndexToSnap(i,t);0<=o&&t.add(o+1,new O(i),!1)}},zi.prototype.findSegmentIndexToSnap=function(t,e){for(var n=m.MAX_VALUE,r=-1,i=0;i<e.size()-1;i++){if(this._seg.p0=e.get(i),this._seg.p1=e.get(i+1),this._seg.p0.equals2D(t)||this._seg.p1.equals2D(t)){if(this._allowSnappingToSourceVertices)continue;return-1}var o=this._seg.distance(t);o<this._snapTolerance&&o<n&&(n=o,r=i)}return r},zi.prototype.setAllowSnappingToSourceVertices=function(t){this._allowSnappingToSourceVertices=t},zi.prototype.interfaces_=function(){return[]},zi.prototype.getClass=function(){return zi},zi.isClosed=function(t){return!(t.length<=1)&&t[0].equals2D(t[t.length-1])};function Ui(t){this._srcGeom=t||null}var Vi={SNAP_PRECISION_FACTOR:{configurable:!0}};Ui.prototype.snapTo=function(t,e){var n=this.extractTargetCoordinates(t);return new Wi(e,n).transform(this._srcGeom)},Ui.prototype.snapToSelf=function(t,e){var n=this.extractTargetCoordinates(this._srcGeom),r=new Wi(t,n,!0).transform(this._srcGeom),i=r;return e&&N(i,ve)&&(i=r.buffer(0)),i},Ui.prototype.computeSnapTolerance=function(t){return this.computeMinimumSegmentLength(t)/10},Ui.prototype.extractTargetCoordinates=function(t){for(var e=new f,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},Ui.prototype.computeMinimumSegmentLength=function(t){for(var e=m.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);r<e&&(e=r)}return e},Ui.prototype.interfaces_=function(){return[]},Ui.prototype.getClass=function(){return Ui},Ui.snap=function(t,e,n){var r=new Array(2).fill(null),i=new Ui(t);r[0]=i.snapTo(e,n);var o=new Ui(e);return r[1]=o.snapTo(r[0],n),r},Ui.computeOverlaySnapTolerance=function(){if(1===arguments.length){var t,e=arguments[0],n=Ui.computeSizeBasedSnapTolerance(e),r=e.getPrecisionModel();return r.getType()!==De.FIXED||n<(t=1/r.getScale()*2/1.415)&&(n=t),n}if(2===arguments.length){var i=arguments[0],o=arguments[1];return Math.min(Ui.computeOverlaySnapTolerance(i),Ui.computeOverlaySnapTolerance(o))}},Ui.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal();return Math.min(e.getHeight(),e.getWidth())*Ui.SNAP_PRECISION_FACTOR},Ui.snapToSelf=function(t,e,n){return new Ui(t).snapToSelf(e,n)},Vi.SNAP_PRECISION_FACTOR.get=function(){return 1e-9},Object.defineProperties(Ui,Vi);function Hi(){this._isFirst=!0,this._commonMantissaBitsCount=53,this._commonBits=0,this._commonSignExp=null}var qi,Wi=((qi=Gi)&&(Yi.__proto__=qi),((Yi.prototype=Object.create(qi&&qi.prototype)).constructor=Yi).prototype.snapLine=function(t,e){var n=new zi(t,this._snapTolerance);return n.setAllowSnappingToSourceVertices(this._isSelfSnap),n.snapTo(e)},Yi.prototype.transformCoordinates=function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this._snapPts);return this._factory.getCoordinateSequenceFactory().create(r)},Yi.prototype.interfaces_=function(){return[]},Yi.prototype.getClass=function(){return Yi},Yi);function Yi(t,e,n){qi.call(this),this._snapTolerance=t||null,this._snapPts=e||null,this._isSelfSnap=void 0!==n&&n}Hi.prototype.getCommon=function(){return m.longBitsToDouble(this._commonBits)},Hi.prototype.add=function(t){var e=m.doubleToLongBits(t);return this._isFirst?(this._commonBits=e,this._commonSignExp=Hi.signExpBits(this._commonBits),this._isFirst=!1,null):Hi.signExpBits(e)!==this._commonSignExp?(this._commonBits=0,null):(this._commonMantissaBitsCount=Hi.numCommonMostSigMantissaBits(this._commonBits,e),void(this._commonBits=Hi.zeroLowerBits(this._commonBits,64-(12+this._commonMantissaBitsCount))))},Hi.prototype.toString=function(){if(1===arguments.length){var t=arguments[0],e=m.longBitsToDouble(t),n="0000000000000000000000000000000000000000000000000000000000000000"+m.toBinaryString(t),r=n.substring(n.length-64);return r.substring(0,1)+"  "+r.substring(1,12)+"(exp) "+r.substring(12)+" [ "+e+" ]"}},Hi.prototype.interfaces_=function(){return[]},Hi.prototype.getClass=function(){return Hi},Hi.getBit=function(t,e){return 0!=(t&1<<e)?1:0},Hi.signExpBits=function(t){return t>>52},Hi.zeroLowerBits=function(t,e){return t&~((1<<e)-1)},Hi.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;0<=r;r--){if(Hi.getBit(t,r)!==Hi.getBit(e,r))return n;n++}return 52};function Xi(){this._commonCoord=null,this._ccFilter=new Zi}var Ji={CommonCoordinateFilter:{configurable:!0},Translater:{configurable:!0}};Xi.prototype.addCommonBits=function(t){var e=new Ki(this._commonCoord);t.apply(e),t.geometryChanged()},Xi.prototype.removeCommonBits=function(t){if(0===this._commonCoord.x&&0===this._commonCoord.y)return t;var e=new O(this._commonCoord);e.x=-e.x,e.y=-e.y;var n=new Ki(e);return t.apply(n),t.geometryChanged(),t},Xi.prototype.getCommonCoordinate=function(){return this._commonCoord},Xi.prototype.add=function(t){t.apply(this._ccFilter),this._commonCoord=this._ccFilter.getCommonCoordinate()},Xi.prototype.interfaces_=function(){return[]},Xi.prototype.getClass=function(){return Xi},Ji.CommonCoordinateFilter.get=function(){return Zi},Ji.Translater.get=function(){return Ki},Object.defineProperties(Xi,Ji);var Zi=function(){this._commonBitsX=new Hi,this._commonBitsY=new Hi};Zi.prototype.filter=function(t){this._commonBitsX.add(t.x),this._commonBitsY.add(t.y)},Zi.prototype.getCommonCoordinate=function(){return new O(this._commonBitsX.getCommon(),this._commonBitsY.getCommon())},Zi.prototype.interfaces_=function(){return[Ct]},Zi.prototype.getClass=function(){return Zi};var Ki=function(t){this.trans=null;this.trans=t};Ki.prototype.filter=function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},Ki.prototype.isDone=function(){return!1},Ki.prototype.isGeometryChanged=function(){return!0},Ki.prototype.interfaces_=function(){return[ue]},Ki.prototype.getClass=function(){return Ki};function $i(t,e){this._geom=new Array(2).fill(null),this._snapTolerance=null,this._cbr=null,this._geom[0]=t,this._geom[1]=e,this.computeSnapTolerance()}$i.prototype.selfSnap=function(t){return new Ui(t).snapTo(t,this._snapTolerance)},$i.prototype.removeCommonBits=function(t){this._cbr=new Xi,this._cbr.add(t[0]),this._cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this._cbr.removeCommonBits(t[0].copy()),e[1]=this._cbr.removeCommonBits(t[1].copy()),e},$i.prototype.prepareResult=function(t){return this._cbr.addCommonBits(t),t},$i.prototype.getResultGeometry=function(t){var e=this.snap(this._geom),n=Ao.overlayOp(e[0],e[1],t);return this.prepareResult(n)},$i.prototype.checkValid=function(t){t.isValid()||q.out.println("Snapped geometry is invalid")},$i.prototype.computeSnapTolerance=function(){this._snapTolerance=Ui.computeOverlaySnapTolerance(this._geom[0],this._geom[1])},$i.prototype.snap=function(t){var e=this.removeCommonBits(t);return Ui.snap(e[0],e[1],this._snapTolerance)},$i.prototype.interfaces_=function(){return[]},$i.prototype.getClass=function(){return $i},$i.overlayOp=function(t,e,n){return new $i(t,e).getResultGeometry(n)},$i.union=function(t,e){return $i.overlayOp(t,e,Ao.UNION)},$i.intersection=function(t,e){return $i.overlayOp(t,e,Ao.INTERSECTION)},$i.symDifference=function(t,e){return $i.overlayOp(t,e,Ao.SYMDIFFERENCE)},$i.difference=function(t,e){return $i.overlayOp(t,e,Ao.DIFFERENCE)};function Qi(t,e){this._geom=new Array(2).fill(null),this._geom[0]=t,this._geom[1]=e}Qi.prototype.getResultGeometry=function(t){var e=null,n=!1,r=null;try{e=Ao.overlayOp(this._geom[0],this._geom[1],t),n=!0}catch(t){if(!(t instanceof at))throw t;r=t}if(!n)try{e=$i.overlayOp(this._geom[0],this._geom[1],t)}catch(t){throw t instanceof at?r:t}return e},Qi.prototype.interfaces_=function(){return[]},Qi.prototype.getClass=function(){return Qi},Qi.overlayOp=function(t,e,n){return new Qi(t,e).getResultGeometry(n)},Qi.union=function(t,e){return Qi.overlayOp(t,e,Ao.UNION)},Qi.intersection=function(t,e){return Qi.overlayOp(t,e,Ao.INTERSECTION)},Qi.symDifference=function(t,e){return Qi.overlayOp(t,e,Ao.SYMDIFFERENCE)},Qi.difference=function(t,e){return Qi.overlayOp(t,e,Ao.DIFFERENCE)};function to(t,e){this.mce=null,this.chainIndex=null;var n=e;this.mce=t,this.chainIndex=n}to.prototype.computeIntersections=function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},to.prototype.interfaces_=function(){return[]},to.prototype.getClass=function(){return to};function eo(){var t,e,n,r,i;this._label=null,this._xValue=null,this._eventType=null,this._insertEvent=null,this._deleteEventIndex=null,this._obj=null,2===arguments.length?(t=arguments[0],e=arguments[1],this._eventType=eo.DELETE,this._xValue=t,this._insertEvent=e):3===arguments.length&&(n=arguments[0],r=arguments[1],i=arguments[2],this._eventType=eo.INSERT,this._label=n,this._xValue=r,this._obj=i)}var no={INSERT:{configurable:!0},DELETE:{configurable:!0}};eo.prototype.isDelete=function(){return this._eventType===eo.DELETE},eo.prototype.setDeleteEventIndex=function(t){this._deleteEventIndex=t},eo.prototype.getObject=function(){return this._obj},eo.prototype.compareTo=function(t){return this._xValue<t._xValue?-1:this._xValue>t._xValue?1:this._eventType<t._eventType?-1:this._eventType>t._eventType?1:0},eo.prototype.getInsertEvent=function(){return this._insertEvent},eo.prototype.isInsert=function(){return this._eventType===eo.INSERT},eo.prototype.isSameLabel=function(t){return null!==this._label&&this._label===t._label},eo.prototype.getDeleteEventIndex=function(){return this._deleteEventIndex},eo.prototype.interfaces_=function(){return[C]},eo.prototype.getClass=function(){return eo},no.INSERT.get=function(){return 1},no.DELETE.get=function(){return 2},Object.defineProperties(eo,no);function ro(){}ro.prototype.interfaces_=function(){return[]},ro.prototype.getClass=function(){return ro};function io(t,e,n){this._hasIntersection=!1,this._hasProper=!1,this._hasProperInterior=!1,this._properIntersectionPoint=null,this._li=null,this._includeProper=null,this._recordIsolated=null,this._isSelfIntersection=null,this._numIntersections=0,this.numTests=0,this._bdyNodes=null,this._isDone=!1,this._isDoneWhenProperInt=!1;var r=e,i=n;this._li=t,this._includeProper=r,this._recordIsolated=i}io.prototype.isTrivialIntersection=function(t,e,n,r){if(t===n&&1===this._li.getIntersectionNum()){if(io.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var i=t.getNumPoints()-1;if(0===e&&r===i||0===r&&e===i)return!0}}return!1},io.prototype.getProperIntersectionPoint=function(){return this._properIntersectionPoint},io.prototype.setIsDoneIfProperInt=function(t){this._isDoneWhenProperInt=t},io.prototype.hasProperInteriorIntersection=function(){return this._hasProperInterior},io.prototype.isBoundaryPointInternal=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next().getCoordinate();if(t.isIntersection(r))return!0}return!1},io.prototype.hasProperIntersection=function(){return this._hasProper},io.prototype.hasIntersection=function(){return this._hasIntersection},io.prototype.isDone=function(){return this._isDone},io.prototype.isBoundaryPoint=function(t,e){return!(null===e||!this.isBoundaryPointInternal(t,e[0])&&!this.isBoundaryPointInternal(t,e[1]))},io.prototype.setBoundaryNodes=function(t,e){this._bdyNodes=new Array(2).fill(null),this._bdyNodes[0]=t,this._bdyNodes[1]=e},io.prototype.addIntersections=function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var i=t.getCoordinates()[e],o=t.getCoordinates()[e+1],a=n.getCoordinates()[r],s=n.getCoordinates()[r+1];this._li.computeIntersection(i,o,a,s),this._li.hasIntersection()&&(this._recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this._numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this._includeProper&&this._li.isProper()||(t.addIntersections(this._li,e,0),n.addIntersections(this._li,r,1)),this._li.isProper()&&(this._properIntersectionPoint=this._li.getIntersection(0).copy(),this._hasProper=!0,this._isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this._li,this._bdyNodes)||(this._hasProperInterior=!0))))},io.prototype.interfaces_=function(){return[]},io.prototype.getClass=function(){return io},io.isAdjacentSegments=function(t,e){return 1===Math.abs(t-e)};function oo(){this._min=m.POSITIVE_INFINITY,this._max=m.NEGATIVE_INFINITY}var ao,so=((ao=ro)&&(uo.__proto__=ao),((uo.prototype=Object.create(ao&&ao.prototype)).constructor=uo).prototype.prepareEvents=function(){Dn.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},uo.prototype.computeIntersections=function(){if(1===arguments.length){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else{var r,i,o,a,s;3===arguments.length&&(arguments[2]instanceof io&&N(arguments[0],Mt)&&N(arguments[1],Mt)?(r=arguments[0],i=arguments[1],o=arguments[2],this.addEdges(r,r),this.addEdges(i,i),this.computeIntersections(o)):"boolean"==typeof arguments[2]&&N(arguments[0],Mt)&&arguments[1]instanceof io&&(a=arguments[0],s=arguments[1],arguments[2]?this.addEdges(a,null):this.addEdges(a),this.computeIntersections(s)))}},uo.prototype.addEdge=function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),i=0;i<r.length-1;i++){var o=new to(n,i),a=new eo(e,n.getMinX(i),o);this.events.add(a),this.events.add(new eo(n.getMaxX(i),a))}},uo.prototype.processOverlaps=function(t,e,n,r){for(var i=n.getObject(),o=t;o<e;o++){var a,s=this.events.get(o);s.isInsert()&&(a=s.getObject(),n.isSameLabel(s)||(i.computeIntersections(a,r),this.nOverlaps++))}},uo.prototype.addEdges=function(){if(1===arguments.length)for(var t=arguments[0].iterator();t.hasNext();){var e=t.next();this.addEdge(e,e)}else if(2===arguments.length)for(var n=arguments[1],r=arguments[0].iterator();r.hasNext();){var i=r.next();this.addEdge(i,n)}},uo.prototype.interfaces_=function(){return[]},uo.prototype.getClass=function(){return uo},uo),lo={NodeComparator:{configurable:!0}};function uo(){ao.call(this),this.events=new Ft,this.nOverlaps=null}oo.prototype.getMin=function(){return this._min},oo.prototype.intersects=function(t,e){return!(this._min>e||this._max<t)},oo.prototype.getMax=function(){return this._max},oo.prototype.toString=function(){return tt.toLineString(new O(this._min,0),new O(this._max,0))},oo.prototype.interfaces_=function(){return[]},oo.prototype.getClass=function(){return oo},lo.NodeComparator.get=function(){return co},Object.defineProperties(oo,lo);var co=function(){};co.prototype.compare=function(t,e){var n=(t._min+t._max)/2,r=(e._min+e._max)/2;return n<r?-1:r<n?1:0},co.prototype.interfaces_=function(){return[P]},co.prototype.getClass=function(){return co};function po(){this._leaves=new Ft,this._root=null,this._level=0}var ho,fo,yo=((fo=oo)&&(mo.__proto__=fo),((mo.prototype=Object.create(fo&&fo.prototype)).constructor=mo).prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;n.visitItem(this._item)},mo.prototype.interfaces_=function(){return[]},mo.prototype.getClass=function(){return mo},mo),go=((ho=oo)&&(_o.__proto__=ho),((_o.prototype=Object.create(ho&&ho.prototype)).constructor=_o).prototype.buildExtent=function(t,e){this._min=Math.min(t._min,e._min),this._max=Math.max(t._max,e._max)},_o.prototype.query=function(t,e,n){if(!this.intersects(t,e))return null;null!==this._node1&&this._node1.query(t,e,n),null!==this._node2&&this._node2.query(t,e,n)},_o.prototype.interfaces_=function(){return[]},_o.prototype.getClass=function(){return _o},_o);function _o(){ho.call(this),this._node1=null,this._node2=null;var t=arguments[0],e=arguments[1];this._node1=t,this._node2=e,this.buildExtent(this._node1,this._node2)}function mo(){fo.call(this),this._item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this._min=t,this._max=e,this._item=n}po.prototype.buildTree=function(){Dn.sort(this._leaves,new oo.NodeComparator);for(var t,e=this._leaves,n=new Ft;;){if(this.buildLevel(e,n),1===n.size())return n.get(0);t=e,e=n,n=t}},po.prototype.insert=function(t,e,n){if(null!==this._root)throw new Error("Index cannot be added to once it has been queried");this._leaves.add(new yo(t,e,n))},po.prototype.query=function(t,e,n){this.init(),this._root.query(t,e,n)},po.prototype.buildRoot=function(){if(null!==this._root)return null;this._root=this.buildTree()},po.prototype.printNode=function(t){q.out.println(tt.toLineString(new O(t._min,this._level),new O(t._max,this._level)))},po.prototype.init=function(){if(null!==this._root)return null;this.buildRoot()},po.prototype.buildLevel=function(t,e){this._level++,e.clear();for(var n=0;n<t.size();n+=2){var r,i=t.get(n);null===(n+1<t.size()?t.get(n):null)?e.add(i):(r=new go(t.get(n),t.get(n+1)),e.add(r))}},po.prototype.interfaces_=function(){return[]},po.prototype.getClass=function(){return po};function vo(){this._items=new Ft}vo.prototype.visitItem=function(t){this._items.add(t)},vo.prototype.getItems=function(){return this._items},vo.prototype.interfaces_=function(){return[An]},vo.prototype.getClass=function(){return vo};function bo(t){this._index=null;var e=t;if(!N(e,ve))throw new b("Argument must be Polygonal");this._index=new Co(e)}var wo={SegmentVisitor:{configurable:!0},IntervalIndexedGeometry:{configurable:!0}};bo.prototype.locate=function(t){var e=new gt(t),n=new xo(e);return this._index.query(t.y,t.y,n),e.getLocation()},bo.prototype.interfaces_=function(){return[Er]},bo.prototype.getClass=function(){return bo},wo.SegmentVisitor.get=function(){return xo},wo.IntervalIndexedGeometry.get=function(){return Co},Object.defineProperties(bo,wo);var xo=function(t){this._counter=null;this._counter=t};xo.prototype.visitItem=function(t){var e=t;this._counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},xo.prototype.interfaces_=function(){return[An]},xo.prototype.getClass=function(){return xo};var Co=function(t){this._index=new po;this.init(t)};Co.prototype.init=function(t){for(var e=gi.getLines(t).iterator();e.hasNext();){var n=e.next().getCoordinates();this.addLine(n)}},Co.prototype.addLine=function(t){for(var e=1;e<t.length;e++){var n=new Kn(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),i=Math.max(n.p0.y,n.p1.y);this._index.insert(r,i,n)}},Co.prototype.query=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new vo;return this._index.query(t,e,n),n.getItems()}var r,i,o;3===arguments.length&&(r=arguments[0],i=arguments[1],o=arguments[2],this._index.query(r,i,o))},Co.prototype.interfaces_=function(){return[]},Co.prototype.getClass=function(){return Co};function Eo(t,e,n){var r,i,o,a,s,l,u;this._li=new dt,this._resultPrecisionModel=null,this._arg=null,1===arguments.length?(r=t,this.setComputationPrecision(r.getPrecisionModel()),this._arg=new Array(1).fill(null),this._arg[0]=new Oo(0,r)):2===arguments.length?(o=e,a=Et.OGC_SFS_BOUNDARY_RULE,0<=(i=t).getPrecisionModel().compareTo(o.getPrecisionModel())?this.setComputationPrecision(i.getPrecisionModel()):this.setComputationPrecision(o.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Oo(0,i,a),this._arg[1]=new Oo(1,o,a)):3===arguments.length&&(l=e,u=n,0<=(s=t).getPrecisionModel().compareTo(l.getPrecisionModel())?this.setComputationPrecision(s.getPrecisionModel()):this.setComputationPrecision(l.getPrecisionModel()),this._arg=new Array(2).fill(null),this._arg[0]=new Oo(0,s,u),this._arg[1]=new Oo(1,l,u))}var Po,Oo=((Po=Pn)&&(To.__proto__=Po),((To.prototype=Object.create(Po&&Po.prototype)).constructor=To).prototype.insertBoundaryPoint=function(t,e){var n=this._nodes.addNode(e).getLabel(),r=1;n.getLocation(t,Je.ON)===A.BOUNDARY&&r++;var i=To.determineBoundary(this._boundaryNodeRule,r);n.setLocation(t,i)},To.prototype.computeSelfNodes=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(3===arguments.length){var n=arguments[1],r=arguments[2],i=new io(arguments[0],!0,!1);i.setIsDoneIfProperInt(r);var o=this.createEdgeSetIntersector(),a=this._parentGeom instanceof Ee||this._parentGeom instanceof xe||this._parentGeom instanceof Pe,s=n||!a;return o.computeIntersections(this._edges,i,s),this.addSelfIntersectionNodes(this._argIndex),i}},To.prototype.computeSplitEdges=function(t){for(var e=this._edges.iterator();e.hasNext();)e.next().eiList.addSplitEdges(t)},To.prototype.computeEdgeIntersections=function(t,e,n){var r=new io(e,n,!0);return r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes()),this.createEdgeSetIntersector().computeIntersections(this._edges,t._edges,r),r},To.prototype.getGeometry=function(){return this._parentGeom},To.prototype.getBoundaryNodeRule=function(){return this._boundaryNodeRule},To.prototype.hasTooFewPoints=function(){return this._hasTooFewPoints},To.prototype.addPoint=function(){var t,e;arguments[0]instanceof be?(t=arguments[0].getCoordinate(),this.insertPoint(this._argIndex,t,A.INTERIOR)):arguments[0]instanceof O&&(e=arguments[0],this.insertPoint(this._argIndex,e,A.INTERIOR))},To.prototype.addPolygon=function(t){this.addPolygonRing(t.getExteriorRing(),A.EXTERIOR,A.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,A.INTERIOR,A.EXTERIOR)}},To.prototype.addEdge=function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this._argIndex,e[0],A.BOUNDARY),this.insertPoint(this._argIndex,e[e.length-1],A.BOUNDARY)},To.prototype.addLineString=function(t){var e=Rt.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this._invalidPoint=e[0],null;var n=new Wr(e,new on(this._argIndex,A.INTERIOR));this._lineEdgeMap.put(t,n),this.insertEdge(n),rt.isTrue(2<=e.length,"found LineString with single point"),this.insertBoundaryPoint(this._argIndex,e[0]),this.insertBoundaryPoint(this._argIndex,e[e.length-1])},To.prototype.getInvalidPoint=function(){return this._invalidPoint},To.prototype.getBoundaryPoints=function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var i=r.next();e[n++]=i.getCoordinate().copy()}return e},To.prototype.getBoundaryNodes=function(){return null===this._boundaryNodes&&(this._boundaryNodes=this._nodes.getBoundaryNodes(this._argIndex)),this._boundaryNodes},To.prototype.addSelfIntersectionNode=function(t,e,n){if(this.isBoundaryNode(t,e))return null;n===A.BOUNDARY&&this._useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n)},To.prototype.addPolygonRing=function(t,e,n){if(t.isEmpty())return null;var r=Rt.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this._invalidPoint=r[0],null;var i=e,o=n;_t.isCCW(r)&&(i=n,o=e);var a=new Wr(r,new on(this._argIndex,A.BOUNDARY,i,o));this._lineEdgeMap.put(t,a),this.insertEdge(a),this.insertPoint(this._argIndex,r[0],A.BOUNDARY)},To.prototype.insertPoint=function(t,e,n){var r=this._nodes.addNode(e),i=r.getLabel();null===i?r._label=new on(t,n):i.setLocation(t,n)},To.prototype.createEdgeSetIntersector=function(){return new so},To.prototype.addSelfIntersectionNodes=function(t){for(var e=this._edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),i=n.eiList.iterator();i.hasNext();){var o=i.next();this.addSelfIntersectionNode(t,o.coord,r)}},To.prototype.add=function(){if(1!==arguments.length)return Po.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Pe&&(this._useBoundaryDeterminationRule=!1),t instanceof xe)this.addPolygon(t);else if(t instanceof me)this.addLineString(t);else if(t instanceof be)this.addPoint(t);else if(t instanceof Ce)this.addCollection(t);else if(t instanceof pe)this.addCollection(t);else if(t instanceof Pe)this.addCollection(t);else{if(!(t instanceof ce))throw new Error(t.getClass().getName());this.addCollection(t)}},To.prototype.addCollection=function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},To.prototype.locate=function(t){return N(this._parentGeom,ve)&&50<this._parentGeom.getNumGeometries()?(null===this._areaPtLocator&&(this._areaPtLocator=new bo(this._parentGeom)),this._areaPtLocator.locate(t)):this._ptLocator.locate(t,this._parentGeom)},To.prototype.findEdge=function(){if(1!==arguments.length)return Po.prototype.findEdge.apply(this,arguments);var t=arguments[0];return this._lineEdgeMap.get(t)},To.prototype.interfaces_=function(){return[]},To.prototype.getClass=function(){return To},To.determineBoundary=function(t,e){return t.isInBoundary(e)?A.BOUNDARY:A.INTERIOR},To);function To(){var t,e,n,r,i,o;Po.call(this),this._parentGeom=null,this._lineEdgeMap=new je,this._boundaryNodeRule=null,this._useBoundaryDeterminationRule=!0,this._argIndex=null,this._boundaryNodes=null,this._hasTooFewPoints=!1,this._invalidPoint=null,this._areaPtLocator=null,this._ptLocator=new _i,2===arguments.length?(t=arguments[0],e=arguments[1],n=Et.OGC_SFS_BOUNDARY_RULE,this._argIndex=t,this._parentGeom=e,this._boundaryNodeRule=n,null!==e&&this.add(e)):3===arguments.length&&(r=arguments[0],i=arguments[1],o=arguments[2],this._argIndex=r,this._parentGeom=i,this._boundaryNodeRule=o,null!==i&&this.add(i))}Eo.prototype.getArgGeometry=function(t){return this._arg[t].getGeometry()},Eo.prototype.setComputationPrecision=function(t){this._resultPrecisionModel=t,this._li.setPrecisionModel(this._resultPrecisionModel)},Eo.prototype.interfaces_=function(){return[]},Eo.prototype.getClass=function(){return Eo};function So(){}So.prototype.interfaces_=function(){return[]},So.prototype.getClass=function(){return So},So.map=function(){if(arguments[0]instanceof bt&&N(arguments[1],So.MapOp)){for(var t=arguments[0],e=arguments[1],n=new Ft,r=0;r<t.getNumGeometries();r++){var i=e.map(t.getGeometryN(r));null!==i&&n.add(i)}return t.getFactory().buildGeometry(n)}if(N(arguments[0],At)&&N(arguments[1],So.MapOp)){for(var o=arguments[0],a=arguments[1],s=new Ft,l=o.iterator();l.hasNext();){var u=l.next(),c=a.map(u);null!==c&&s.add(c)}return s}},So.MapOp=function(){};var Io,Ao=((Io=Eo)&&(Lo.__proto__=Io),((Lo.prototype=Object.create(Io&&Io.prototype)).constructor=Lo).prototype.insertUniqueEdge=function(t){var e,n,r,i=this._edgeList.findEqualEdge(t);null!==i?(e=i.getLabel(),n=t.getLabel(),i.isPointwiseEqual(t)||(n=new on(t.getLabel())).flip(),(r=i.getDepth()).isNull()&&r.add(e),r.add(n),e.merge(n)):this._edgeList.add(t)},Lo.prototype.getGraph=function(){return this._graph},Lo.prototype.cancelDuplicateResultEdges=function(){for(var t=this._graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},Lo.prototype.isCoveredByLA=function(t){return!!this.isCovered(t,this._resultLineList)||!!this.isCovered(t,this._resultPolyList)},Lo.prototype.computeGeometry=function(t,e,n,r){var i=new Ft;return i.addAll(t),i.addAll(e),i.addAll(n),i.isEmpty()?Lo.createEmptyResult(r,this._arg[0].getGeometry(),this._arg[1].getGeometry(),this._geomFact):this._geomFact.buildGeometry(i)},Lo.prototype.mergeSymLabels=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().mergeSymLabels()},Lo.prototype.isCovered=function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(this._ptLocator.locate(t,r)!==A.EXTERIOR)return!0}return!1},Lo.prototype.replaceCollapsedEdges=function(){for(var t=new Ft,e=this._edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this._edgeList.addAll(t)},Lo.prototype.updateNodeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},Lo.prototype.getResultGeometry=function(t){return this.computeOverlay(t),this._resultGeom},Lo.prototype.insertUniqueEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},Lo.prototype.computeOverlay=function(t){this.copyPoints(0),this.copyPoints(1),this._arg[0].computeSelfNodes(this._li,!1),this._arg[1].computeSelfNodes(this._li,!1),this._arg[0].computeEdgeIntersections(this._arg[1],this._li,!0);var e=new Ft;this._arg[0].computeSplitEdges(e),this._arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),ji.checkValid(this._edgeList.getEdges()),this._graph.addEdges(this._edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new On(this._geomFact);n.add(this._graph),this._resultPolyList=n.getPolygons();var r=new Fi(this,this._geomFact,this._ptLocator);this._resultLineList=r.build(t);var i=new Bi(this,this._geomFact,this._ptLocator);this._resultPointList=i.build(t),this._resultGeom=this.computeGeometry(this._resultPointList,this._resultLineList,this._resultPolyList,t)},Lo.prototype.labelIncompleteNode=function(t,e){var n=this._ptLocator.locate(t.getCoordinate(),this._arg[e].getGeometry());t.getLabel().setLocation(e,n)},Lo.prototype.copyPoints=function(t){for(var e=this._arg[t].getNodeIterator();e.hasNext();){var n=e.next();this._graph.addNode(n.getCoordinate()).setLabel(t,n.getLabel().getLocation(t))}},Lo.prototype.findResultAreaEdges=function(t){for(var e=this._graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&Lo.isResultOfOp(r.getLocation(0,Je.RIGHT),r.getLocation(1,Je.RIGHT),t)&&n.setInResult(!0)}},Lo.prototype.computeLabelsFromDepths=function(){for(var t=this._edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var i=0;i<2;i++)n.isNull(i)||!n.isArea()||r.isNull(i)||(0===r.getDelta(i)?n.toLine(i):(rt.isTrue(!r.isNull(i,Je.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(i,Je.LEFT,r.getLocation(i,Je.LEFT)),rt.isTrue(!r.isNull(i,Je.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(i,Je.RIGHT,r.getLocation(i,Je.RIGHT))))}}},Lo.prototype.computeLabelling=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();)t.next().getEdges().computeLabelling(this._arg);this.mergeSymLabels(),this.updateNodeLabelling()},Lo.prototype.labelIncompleteNodes=function(){for(var t=this._graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getLabel();e.isIsolated()&&(n.isNull(0)?this.labelIncompleteNode(e,0):this.labelIncompleteNode(e,1)),e.getEdges().updateLabelling(n)}},Lo.prototype.isCoveredByA=function(t){return!!this.isCovered(t,this._resultPolyList)},Lo.prototype.interfaces_=function(){return[]},Lo.prototype.getClass=function(){return Lo},Lo);function Lo(){var t=arguments[0],e=arguments[1];Io.call(this,t,e),this._ptLocator=new _i,this._geomFact=null,this._resultGeom=null,this._graph=null,this._edgeList=new Rr,this._resultPolyList=new Ft,this._resultLineList=new Ft,this._resultPointList=new Ft,this._graph=new Pn(new Nr),this._geomFact=t.getFactory()}Ao.overlayOp=function(t,e,n){return new Ao(t,e).getResultGeometry(n)},Ao.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return Ao.createEmptyResult(Ao.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return ki.map(t,{interfaces_:function(){return[So.MapOp]},map:function(t){return t.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Qi.overlayOp(t,e,Ao.INTERSECTION)},Ao.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ao.createEmptyResult(Ao.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Qi.overlayOp(t,e,Ao.SYMDIFFERENCE)},Ao.resultDimension=function(t,e,n){var r=e.getDimension(),i=n.getDimension(),o=-1;switch(t){case Ao.INTERSECTION:o=Math.min(r,i);break;case Ao.UNION:o=Math.max(r,i);break;case Ao.DIFFERENCE:o=r;break;case Ao.SYMDIFFERENCE:o=Math.max(r,i)}return o},Ao.createEmptyResult=function(t,e,n,r){var i=null;switch(Ao.resultDimension(t,e,n)){case-1:i=r.createGeometryCollection(new Array(0).fill(null));break;case 0:i=r.createPoint();break;case 1:i=r.createLineString();break;case 2:i=r.createPolygon()}return i},Ao.difference=function(t,e){return t.isEmpty()?Ao.createEmptyResult(Ao.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Qi.overlayOp(t,e,Ao.DIFFERENCE))},Ao.isResultOfOp=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return Ao.isResultOfOp(n,r,e)}if(3===arguments.length){var i=arguments[0],o=arguments[1];switch(i===A.BOUNDARY&&(i=A.INTERIOR),o===A.BOUNDARY&&(o=A.INTERIOR),arguments[2]){case Ao.INTERSECTION:return i===A.INTERIOR&&o===A.INTERIOR;case Ao.UNION:return i===A.INTERIOR||o===A.INTERIOR;case Ao.DIFFERENCE:return i===A.INTERIOR&&o!==A.INTERIOR;case Ao.SYMDIFFERENCE:return i===A.INTERIOR&&o!==A.INTERIOR||i!==A.INTERIOR&&o===A.INTERIOR}return!1}},Ao.INTERSECTION=1,Ao.UNION=2,Ao.DIFFERENCE=3,Ao.SYMDIFFERENCE=4;function No(t,e){this._g=null,this._boundaryDistanceTolerance=null,this._linework=null,this._ptLocator=new _i,this._seg=new Kn;var n=t,r=e;this._g=n,this._boundaryDistanceTolerance=r,this._linework=this.extractLinework(n)}No.prototype.isWithinToleranceOfBoundary=function(t){for(var e=0;e<this._linework.getNumGeometries();e++)for(var n=this._linework.getGeometryN(e).getCoordinateSequence(),r=0;r<n.size()-1;r++)if(n.getCoordinate(r,this._seg.p0),n.getCoordinate(r+1,this._seg.p1),this._seg.distance(t)<=this._boundaryDistanceTolerance)return!0;return!1},No.prototype.getLocation=function(t){return this.isWithinToleranceOfBoundary(t)?A.BOUNDARY:this._ptLocator.locate(t,this._g)},No.prototype.extractLinework=function(t){var e=new Mo;t.apply(e);var n=e.getLinework(),r=ze.toLineStringArray(n);return t.getFactory().createMultiLineString(r)},No.prototype.interfaces_=function(){return[]},No.prototype.getClass=function(){return No};var Mo=function(){this._linework=null,this._linework=new Ft};Mo.prototype.getLinework=function(){return this._linework},Mo.prototype.filter=function(t){if(t instanceof xe){var e=t;this._linework.add(e.getExteriorRing());for(var n=0;n<e.getNumInteriorRing();n++)this._linework.add(e.getInteriorRingN(n))}},Mo.prototype.interfaces_=function(){return[le]},Mo.prototype.getClass=function(){return Mo};function Do(t){this._g=null,this._doLeft=!0,this._doRight=!0,this._g=t}Do.prototype.extractPoints=function(t,e,n){for(var r=t.getCoordinates(),i=0;i<r.length-1;i++)this.computeOffsetPoints(r[i],r[i+1],e,n)},Do.prototype.setSidesToGenerate=function(t,e){this._doLeft=t,this._doRight=e},Do.prototype.getPoints=function(t){for(var e=new Ft,n=gi.getLines(this._g).iterator();n.hasNext();){var r=n.next();this.extractPoints(r,t,e)}return e},Do.prototype.computeOffsetPoints=function(t,e,n,r){var i,o,a=e.x-t.x,s=e.y-t.y,l=Math.sqrt(a*a+s*s),u=n*a/l,c=n*s/l,p=(e.x+t.x)/2,h=(e.y+t.y)/2;this._doLeft&&(i=new O(p-c,h+u),r.add(i)),this._doRight&&(o=new O(p+c,h-u),r.add(o))},Do.prototype.interfaces_=function(){return[]},Do.prototype.getClass=function(){return Do};function Ro(){this._geom=null,this._locFinder=null,this._location=new Array(3).fill(null),this._invalidLocation=null,this._boundaryDistanceTolerance=Ro.TOLERANCE,this._testCoords=new Ft;var t=arguments[0],e=arguments[1],n=arguments[2];this._boundaryDistanceTolerance=Ro.computeBoundaryDistanceTolerance(t,e),this._geom=[t,e,n],this._locFinder=[new No(this._geom[0],this._boundaryDistanceTolerance),new No(this._geom[1],this._boundaryDistanceTolerance),new No(this._geom[2],this._boundaryDistanceTolerance)]}var jo={TOLERANCE:{configurable:!0}};Ro.prototype.reportResult=function(t,e,n){q.out.println("Overlay result invalid - A:"+A.toLocationSymbol(e[0])+" B:"+A.toLocationSymbol(e[1])+" expected:"+(n?"i":"e")+" actual:"+A.toLocationSymbol(e[2]))},Ro.prototype.isValid=function(t){return this.addTestPts(this._geom[0]),this.addTestPts(this._geom[1]),this.checkValid(t)},Ro.prototype.checkValid=function(){if(1===arguments.length){for(var t=arguments[0],e=0;e<this._testCoords.size();e++){var n=this._testCoords.get(e);if(!this.checkValid(t,n))return this._invalidLocation=n,!1}return!0}if(2===arguments.length){var r=arguments[0],i=arguments[1];return this._location[0]=this._locFinder[0].getLocation(i),this._location[1]=this._locFinder[1].getLocation(i),this._location[2]=this._locFinder[2].getLocation(i),!!Ro.hasLocation(this._location,A.BOUNDARY)||this.isValidResult(r,this._location)}},Ro.prototype.addTestPts=function(t){var e=new Do(t);this._testCoords.addAll(e.getPoints(5*this._boundaryDistanceTolerance))},Ro.prototype.isValidResult=function(t,e){var n=Ao.isResultOfOp(e[0],e[1],t),r=!(n^e[2]===A.INTERIOR);return r||this.reportResult(t,e,n),r},Ro.prototype.getInvalidLocation=function(){return this._invalidLocation},Ro.prototype.interfaces_=function(){return[]},Ro.prototype.getClass=function(){return Ro},Ro.hasLocation=function(t,e){for(var n=0;n<3;n++)if(t[n]===e)return!0;return!1},Ro.computeBoundaryDistanceTolerance=function(t,e){return Math.min(Ui.computeSizeBasedSnapTolerance(t),Ui.computeSizeBasedSnapTolerance(e))},Ro.isValid=function(t,e,n,r){return new Ro(t,e,r).isValid(n)},jo.TOLERANCE.get=function(){return 1e-6},Object.defineProperties(Ro,jo);function ko(t){this._geomFactory=null,this._skipEmpty=!1,this._inputGeoms=null,this._geomFactory=ko.extractFactory(t),this._inputGeoms=t}ko.prototype.extractElements=function(t,e){if(null===t)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this._skipEmpty&&r.isEmpty()||e.add(r)}},ko.prototype.combine=function(){for(var t=new Ft,e=this._inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return 0===t.size()?null!==this._geomFactory?this._geomFactory.createGeometryCollection(null):null:this._geomFactory.buildGeometry(t)},ko.prototype.interfaces_=function(){return[]},ko.prototype.getClass=function(){return ko},ko.combine=function(){return 1===arguments.length?new ko(arguments[0]).combine():2===arguments.length?new ko(ko.createList(arguments[0],arguments[1])).combine():3===arguments.length?new ko(ko.createList(arguments[0],arguments[1],arguments[2])).combine():void 0},ko.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},ko.createList=function(){if(2===arguments.length){var t=arguments[0],e=arguments[1],n=new Ft;return n.add(t),n.add(e),n}if(3===arguments.length){var r=arguments[0],i=arguments[1],o=arguments[2],a=new Ft;return a.add(r),a.add(i),a.add(o),a}};function Fo(t){this._inputPolys=null,this._geomFactory=null,this._inputPolys=t,null===this._inputPolys&&(this._inputPolys=new Ft)}var Bo={STRTREE_NODE_CAPACITY:{configurable:!0}};Fo.prototype.reduceToGeometries=function(t){for(var e=new Ft,n=t.iterator();n.hasNext();){var r=n.next(),i=null;N(r,Mt)?i=this.unionTree(r):r instanceof bt&&(i=r),e.add(i)}return e},Fo.prototype.extractByEnvelope=function(t,e,n){for(var r=new Ft,i=0;i<e.getNumGeometries();i++){var o=e.getGeometryN(i);o.getEnvelopeInternal().intersects(t)?r.add(o):n.add(o)}return this._geomFactory.buildGeometry(r)},Fo.prototype.unionOptimized=function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r))return ko.combine(t,e);if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var i=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,i)},Fo.prototype.union=function(){if(null===this._inputPolys)throw new Error("union() method cannot be called twice");if(this._inputPolys.isEmpty())return null;this._geomFactory=this._inputPolys.iterator().next().getFactory();for(var t=new Un(Fo.STRTREE_NODE_CAPACITY),e=this._inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this._inputPolys=null;var r=t.itemsTree();return this.unionTree(r)},Fo.prototype.binaryUnion=function(){if(1===arguments.length){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(3===arguments.length){var e=arguments[0],n=arguments[1],r=arguments[2];if(r-n<=1){var i=Fo.getGeometry(e,n);return this.unionSafe(i,null)}if(r-n==2)return this.unionSafe(Fo.getGeometry(e,n),Fo.getGeometry(e,n+1));var o=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,o),s=this.binaryUnion(e,o,r);return this.unionSafe(a,s)}},Fo.prototype.repeatedUnion=function(t){for(var e=null,n=t.iterator();n.hasNext();)var r=n.next(),e=null===e?r.copy():e.union(r);return e},Fo.prototype.unionSafe=function(t,e){return null===t&&null===e?null:null===t?e.copy():null===e?t.copy():this.unionOptimized(t,e)},Fo.prototype.unionActual=function(t,e){return Fo.restrictToPolygons(t.union(e))},Fo.prototype.unionTree=function(t){var e=this.reduceToGeometries(t);return this.binaryUnion(e)},Fo.prototype.unionUsingEnvelopeIntersection=function(t,e,n){var r=new Ft,i=this.extractByEnvelope(n,t,r),o=this.extractByEnvelope(n,e,r),a=this.unionActual(i,o);return r.add(a),ko.combine(r)},Fo.prototype.bufferUnion=function(){if(1===arguments.length){var t=arguments[0];return t.get(0).getFactory().buildGeometry(t).buffer(0)}if(2===arguments.length){var e=arguments[0],n=arguments[1];return e.getFactory().createGeometryCollection([e,n]).buffer(0)}},Fo.prototype.interfaces_=function(){return[]},Fo.prototype.getClass=function(){return Fo},Fo.restrictToPolygons=function(t){if(N(t,ve))return t;var e=yi.getPolygons(t);return 1===e.size()?e.get(0):t.getFactory().createMultiPolygon(ze.toPolygonArray(e))},Fo.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Fo.union=function(t){return new Fo(t).union()},Bo.STRTREE_NODE_CAPACITY.get=function(){return 4},Object.defineProperties(Fo,Bo);function Go(){}Go.prototype.interfaces_=function(){return[]},Go.prototype.getClass=function(){return Go},Go.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return Ao.createEmptyResult(Ao.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Qi.overlayOp(t,e,Ao.UNION)},t.GeoJSONReader=qe,t.GeoJSONWriter=Xe,t.OverlayOp=Ao,t.UnionOp=Go,t.BufferOp=si,Object.defineProperty(t,"__esModule",{value:!0})},"object"==s(e)&&void 0!==t?a(e):(i=[e],void 0===(o="function"==typeof(r=a)?r.apply(e,i):r)||(t.exports=o))},function(t,e,n){"use strict";var M=n(9),D=n(254),R=n(255);function T(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=o,e.resolve=function(t,e){return o(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?o(t,!1,!0).resolveObject(e):e},e.format=function(t){R.isString(t)&&(t=o(t));return t instanceof T?t.format():T.prototype.format.call(t)},e.Url=T;var j=/^([a-z0-9.+-]+:)/i,r=/:[0-9]*$/,k=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),F=["'"].concat(i),B=["%","/","?",";","#"].concat(F),G=["/","?","#"],z=/^[+a-z0-9A-Z_-]{0,63}$/,U=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,V={javascript:!0,"javascript:":!0},H={javascript:!0,"javascript:":!0},q={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},W=n(256);function o(t,e,n){if(t&&R.isObject(t)&&t instanceof T)return t;var r=new T;return r.parse(t,e,n),r}T.prototype.parse=function(t,e,n){if(!R.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+M(t));var r=t.indexOf("?"),i=-1!==r&&r<t.indexOf("#")?"?":"#",o=t.split(i);o[0]=o[0].replace(/\\/g,"/");var a=(a=t=o.join(i)).trim();if(!n&&1===t.split("#").length){var s=k.exec(a);if(s)return this.path=a,this.href=a,this.pathname=s[1],s[2]?(this.search=s[2],this.query=e?W.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var l,u,c=j.exec(a);if(c&&(l=(c=c[0]).toLowerCase(),this.protocol=l,a=a.substr(c.length)),(n||c||a.match(/^\/\/[^@\/]+@[^@\/]+/))&&(!(u="//"===a.substr(0,2))||c&&H[c]||(a=a.substr(2),this.slashes=!0)),!H[c]&&(u||c&&!q[c])){for(var p,h,f=-1,d=0;d<G.length;d++){-1!==(y=a.indexOf(G[d]))&&(-1===f||y<f)&&(f=y)}-1!==(h=-1===f?a.lastIndexOf("@"):a.lastIndexOf("@",f))&&(p=a.slice(0,h),a=a.slice(h+1),this.auth=decodeURIComponent(p)),f=-1;for(var y,d=0;d<B.length;d++){-1!==(y=a.indexOf(B[d]))&&(-1===f||y<f)&&(f=y)}-1===f&&(f=a.length),this.host=a.slice(0,f),a=a.slice(f),this.parseHost(),this.hostname=this.hostname||"";var g="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!g)for(var _=this.hostname.split(/\./),d=0,m=_.length;d<m;d++){var v=_[d];if(v&&!v.match(z)){for(var b="",w=0,x=v.length;w<x;w++)127<v.charCodeAt(w)?b+="x":b+=v[w];if(!b.match(z)){var C=_.slice(0,d),E=_.slice(d+1),P=v.match(U);P&&(C.push(P[1]),E.unshift(P[2])),E.length&&(a="/"+E.join(".")+a),this.hostname=C.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),g||(this.hostname=D.toASCII(this.hostname));var O=this.port?":"+this.port:"",T=this.hostname||"";this.host=T+O,this.href+=this.host,g&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!V[l])for(d=0,m=F.length;d<m;d++){var S,I=F[d];-1!==a.indexOf(I)&&((S=encodeURIComponent(I))===I&&(S=escape(I)),a=a.split(I).join(S))}var A=a.indexOf("#");-1!==A&&(this.hash=a.substr(A),a=a.slice(0,A));var L,N=a.indexOf("?");return-1!==N?(this.search=a.substr(N),this.query=a.substr(N+1),e&&(this.query=W.parse(this.query)),a=a.slice(0,N)):e&&(this.search="",this.query={}),a&&(this.pathname=a),q[l]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(O=this.pathname||"",L=this.search||"",this.path=O+L),this.href=this.format(),this},T.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,o="";this.host?i=t+this.host:this.hostname&&(i=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&R.isObject(this.query)&&Object.keys(this.query).length&&(o=W.stringify(this.query));var a=this.search||o&&"?"+o||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||q[e])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i=i||"",r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+i+(n=n.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+r},T.prototype.resolve=function(t){return this.resolveObject(o(t,!1,!0)).format()},T.prototype.resolveObject=function(t){var e;R.isString(t)&&((e=new T).parse(t,!1,!0),t=e);for(var n,r,i=new T,o=Object.keys(this),a=0;a<o.length;a++){var s=o[a];i[s]=this[s]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(i[c]=t[c])}return q[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!q[t.protocol]){for(var p=Object.keys(t),h=0;h<p.length;h++){var f=p[h];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||H[t.protocol])i.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),i.pathname=d.join("/")}return i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,(i.pathname||i.search)&&(n=i.pathname||"",r=i.search||"",i.path=n+r),i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var y=i.pathname&&"/"===i.pathname.charAt(0),g=t.host||t.pathname&&"/"===t.pathname.charAt(0),_=g||y||i.host&&t.pathname,m=_,v=i.pathname&&i.pathname.split("/")||[],d=t.pathname&&t.pathname.split("/")||[],b=i.protocol&&!q[i.protocol];if(b&&(i.hostname="",i.port=null,i.host&&(""===v[0]?v[0]=i.host:v.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),_=_&&(""===d[0]||""===v[0])),g)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,v=d;else if(d.length)(v=v||[]).pop(),v=v.concat(d),i.search=t.search,i.query=t.query;else if(!R.isNullOrUndefined(t.search)){return b&&(i.hostname=i.host=v.shift(),(P=!!(i.host&&0<i.host.indexOf("@"))&&i.host.split("@"))&&(i.auth=P.shift(),i.host=i.hostname=P.shift())),i.search=t.search,i.query=t.query,R.isNull(i.pathname)&&R.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!v.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var w=v.slice(-1)[0],x=(i.host||t.host||1<v.length)&&("."===w||".."===w)||""===w,C=0,E=v.length;0<=E;E--)"."===(w=v[E])?v.splice(E,1):".."===w?(v.splice(E,1),C++):C&&(v.splice(E,1),C--);if(!_&&!m)for(;C--;)v.unshift("..");!_||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),x&&"/"!==v.join("/").substr(-1)&&v.push("");var P,O=""===v[0]||v[0]&&"/"===v[0].charAt(0);return b&&(i.hostname=i.host=!O&&v.length?v.shift():"",(P=!!(i.host&&0<i.host.indexOf("@"))&&i.host.split("@"))&&(i.auth=P.shift(),i.host=i.hostname=P.shift())),(_=_||i.host&&v.length)&&!O&&v.unshift(""),v.length?i.pathname=v.join("/"):(i.pathname=null,i.path=null),R.isNull(i.pathname)&&R.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},T.prototype.parseHost=function(){var t=this.host,e=r.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,n){"use strict";var r,i=n(9),o="object"===("undefined"==typeof Reflect?"undefined":i(Reflect))?Reflect:null,c=o&&"function"==typeof o.apply?o.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,t.exports.once=function(i,o){return new Promise(function(t,e){function n(){void 0!==r&&i.removeListener("error",r),t([].slice.call(arguments))}var r;"error"!==o&&(r=function(t){i.removeListener(o,n),e(t)},i.once("error",r)),i.once(o,n)})},(s.EventEmitter=s).prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+i(t))}function p(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var i,o,a,s;return u(n),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a?(a=o[e]=n,++t._eventsCount):("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),0<(i=p(t))&&a.length>i&&!a.warned&&(a.warned=!0,(s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit")).name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,console&&console.warn)),t}function f(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=function(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}.bind(r);return i.listener=n,r.wrapFn=i}function d(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):g(i,i.length)}function y(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return p(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r,i="error"===t,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){if(0<e.length&&(r=e[0]),r instanceof Error)throw r;var a=new Error("Unhandled error."+(r?" ("+r.message+")":""));throw a.context=r,a}var s=o[t];if(void 0===s)return!1;if("function"==typeof s)c(s,this,e);else for(var l=s.length,u=g(s,l),n=0;n<l;++n)c(u[n],this,e);return!0},s.prototype.addListener=function(t,e){return h(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return h(this,t,e,!0)},s.prototype.once=function(t,e){return u(e),this.on(t,f(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,f(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,o,a;if(u(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;0<=o;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n=this._events;if(void 0===n)return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){for(var r,i=Object.keys(n),o=0;o<i.length;++o)"removeListener"!==(r=i[o])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(o=e.length-1;0<=o;o--)this.removeListener(t,e[o]);return this},s.prototype.listeners=function(t){return d(this,t,!0)},s.prototype.rawListeners=function(t){return d(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},s.prototype.listenerCount=y,s.prototype.eventNames=function(){return 0<this._eventsCount?r(this._events):[]}},function(x,t,C){"use strict";(function(t,e){var _=C(101);function p(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;t.entry=null;for(;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}x.exports=c;var s,l=!t.browser&&-1<["v0.10","v0.9."].indexOf(t.version.slice(0,5))?setImmediate:_.nextTick;c.WritableState=u;var n=Object.create(C(90));n.inherits=C(61);var r={deprecate:C(264)},i=C(165),m=C(102).Buffer,v=e.Uint8Array||function(){};var o,a=C(166);function b(){}function u(t,e){s=s||C(67),t=t||{};var n=e instanceof s;this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=t.writableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var a=(this.destroyed=!1)===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;{var o;(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0})(n),e?function(t,e,n,r,i){--e.pendingcb,n?(_.nextTick(i,r),_.nextTick(g,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),g(t,e))}(t,n,r,e,i):((o=d(n))||n.corked||n.bufferProcessing||!n.bufferedRequest||f(t,n),r?l(h,t,n,o,i):h(t,n,o,i))}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new p(this)}function c(t){if(s=s||C(67),!(o.call(c,this)||this instanceof s))return new c(t);this._writableState=new u(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),i.call(this)}function w(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function h(t,e,n,r){var i,o;n||(i=t,0===(o=e).length&&o.needDrain&&(o.needDrain=!1,i.emit("drain"))),e.pendingcb--,r(),g(t,e)}function f(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var a=0,s=!0;n;)(i[a]=n).isBuf||(s=!1),n=n.next,a+=1;i.allBuffers=s,w(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new p(e),e.bufferedRequestCount=0}else{for(;n;){var l=n.chunk,u=n.encoding,c=n.callback;if(w(t,e,!1,e.objectMode?1:l.length,l,u,c),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function d(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function y(e,n){e._final(function(t){n.pendingcb--,t&&e.emit("error",t),n.prefinished=!0,e.emit("prefinish"),g(e,n)})}function g(t,e){var n,r,i=d(e);return i&&(n=t,(r=e).prefinished||r.finalCalled||("function"==typeof n._final?(r.pendingcb++,r.finalCalled=!0,_.nextTick(y,n,r)):(r.prefinished=!0,n.emit("prefinish"))),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}n.inherits(c,i),u.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(u.prototype,"buffer",{get:r.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(c,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===c&&(t&&t._writableState instanceof u)}})):o=function(t){return t instanceof this},c.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},c.prototype.write=function(t,e,n){var r,i,o,a,s,l,u,c,p,h,f,d=this._writableState,y=!1,g=!d.objectMode&&(r=t,m.isBuffer(r)||r instanceof v);return g&&!m.isBuffer(t)&&(i=t,t=m.from(i)),"function"==typeof e&&(n=e,e=null),e=g?"buffer":e||d.defaultEncoding,"function"!=typeof n&&(n=b),d.ended?(p=this,h=n,f=new Error("write after end"),p.emit("error",f),_.nextTick(h,f)):(g||(o=this,a=d,l=n,c=!(u=!0),null===(s=t)?c=new TypeError("May not write null values to stream"):"string"==typeof s||void 0===s||a.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c&&(o.emit("error",c),_.nextTick(l,c),u=!1),u))&&(d.pendingcb++,y=function(t,e,n,r,i,o){{var a;n||(a=function(t,e,n){t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=m.from(e,n));return e}(e,r,i),r!==a&&(n=!0,i="buffer",r=a))}var s=e.objectMode?1:r.length;e.length+=s;var l=e.length<e.highWaterMark;l||(e.needDrain=!0);{var u;e.writing||e.corked?(u=e.lastBufferedRequest,e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1):w(t,e,!1,s,r,i,o)}return l}(this,d,g,t,e,n)),y},c.prototype.cork=function(){this._writableState.corked++},c.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||f(this,t))},c.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(-1<["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),c.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},c.prototype._writev=null,c.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,e=t=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,g(t,e),n&&(e.finished?_.nextTick(n):t.once("finish",n));e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),c.prototype.destroy=a.destroy,c.prototype._undestroy=a.undestroy,c.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,C(60),C(44))},function(t,e){function n(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}n.keys=function(){return[]},n.resolve=n,(t.exports=n).id=128},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),i=n(105),o=(a.prototype.fromJSON=function(t){this._JSONObject=r.default(t),this.id=t.id||i.default(),this._JSONObject.id=this.id},a.prototype.toJSON=function(){var e=this;if(this.defaultProps){var t=Object.getOwnPropertyNames(this.defaultProps),n={};return t.forEach(function(t){JSON.stringify(e.defaultProps[t].value)!==JSON.stringify(e[t])&&(n[t]=e[t])}),n}return this._JSONObject},a.prototype.resetProperty=function(t,e){this._JSONObject[t]=r.default(e)},a.prototype.destory=function(t){this._isDestroyed=!0},a.prototype.isDestroyed=function(){return this._isDestroyed},Object.defineProperty(a.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!1,configurable:!0}),a);function a(){this._isDestroyed=!1}e.default=o},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(12),s=n(19),l=n(45),u=n(289),c=(o=s.default,i(p,o),p.prototype.getValue=function(){return this.value},p);function p(t){var e=o.call(this)||this;try{if(t.class)e.value=t;else{if(!a.isObject(t))throw"Node options is error.";if(!t.type)throw"Node options type is not defined.";if(!t.obj)throw"Node options obj is not defined.";o.prototype.fromJSON.call(e,t);var n="";t.type.split("_").forEach(function(t){n+=t.charAt(0).toUpperCase()+t.slice(1)}),e.value=new u.default[n](t.obj)}e.type=l.default.NODE}catch(t){}return e}e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(i.prototype.getJsonSchema=function(){var e=this,t=this._feature.getPropertyNames();if(t){var n={type:"object",properties:{}};return t.forEach(function(t){n.properties[t]={type:typeof e._feature.getProperty(t)}}),n}},i.prototype.getProperties=function(){var e=this,t=this._feature.getPropertyNames();if(t){var n={};return t.forEach(function(t){n[t]=e._feature.getProperty(t)}),n}},i);function i(t){this._feature=t}e.default=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a,o=n(19),s=n(11),l=n(8),u=n(91),c=n(106),p=n(109),h=n(110),f=n(107),d=n(108),y=n(22),g=n(16),_=n(182),m=n(12),v=n(20),b=n(63),w=(a=o.default,i(x,a),Object.defineProperty(x.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"styles",{get:function(){return this._styles},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"onLoaded",{get:function(){return this._onLoaded},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"children",{get:function(){return this._children},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"extent",{get:function(){function e(t){n>t[0]&&(n=t[0]),r<t[0]&&(r=t[0]),i<t[1]&&(i=t[1]),o>t[1]&&(o=t[1])}var n=180,r=-180,i=-90,o=90;return this._children.forEach(function(t){t.position?e(t.position):t.positions&&t.positions.forEach(function(t){e(t)})}),new b.default(n,o,r,i)},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"request",{get:function(){return this._dataSource.request},enumerable:!1,configurable:!0}),x.prototype._createBillboardFromEntity=function(t,n){var r=t.properties&&C(t.properties),i={};return Object.getOwnPropertyNames(n).forEach(function(t){var e;m.isFunction(n[t])?(e=n[t](r),i[t]=e):i[t]=n[t]}),i.position=this._getPointPositionFromEntity(t),i.properties=r,new u.default(i)},x.prototype._createPointFromEntity=function(t,n){var r=t.properties&&C(t.properties),i={};return Object.getOwnPropertyNames(n).forEach(function(t){var e;m.isFunction(n[t])?(e=n[t](r),i[t]=e):i[t]=n[t]}),i.position=this._getPointPositionFromEntity(t),i.properties=r,new c.default(i)},x.prototype._createModelFromEntity=function(t,n){var r=t.properties&&C(t.properties),i={};return Object.getOwnPropertyNames(n).forEach(function(t){var e;m.isFunction(n[t])?(e=n[t](r),i[t]=e):i[t]=n[t]}),i.position=this._getPointPositionFromEntity(t),i.properties=r,new p.default(i)},x.prototype._createLabelFromEntity=function(t,n){var r=t.properties&&C(t.properties),i={};return Object.getOwnPropertyNames(n).forEach(function(t){var e;m.isFunction(n[t])?(e=n[t](r),i[t]=e):i[t]=n[t]}),i.position=this._getPointPositionFromEntity(t),i.properties=r,new h.default(i)},x.prototype._createPolylineFromEntity=function(t,n){var r=t.properties&&C(t.properties),i={};return Object.getOwnPropertyNames(n).forEach(function(t){var e;m.isFunction(n[t])?(e=n[t](r),i[t]=e):i[t]=n[t]}),i.positions=this._getPolylinePositionFromEntity(t),i.properties=r,new f.default(i)},x.prototype._createPolygonFromEntity=function(t,n){var r=t.properties&&C(t.properties),i={};return Object.getOwnPropertyNames(n).forEach(function(t){var e;m.isFunction(n[t])?(e=n[t](r),i[t]=e):i[t]=n[t]}),i.positions=this._getPolygonPositionFromEntity(t),i.properties=r,new d.default(i)},x.prototype._getPointPositionFromEntity=function(t){if(t.position){var e=t.position._value;return y.default.cartesianToDegrees(e)}return t.geometry.coordinates},x.prototype._getPolylinePositionFromEntity=function(t){if(t.polyline){var e=[];return t.polyline.positions._value.forEach(function(t){e.push(y.default.cartesianToDegrees(t))}),e}return t.geometry.coordinates},x.prototype._getPolygonPositionFromEntity=function(t){if(t.polygon){var e=[];return t.polygon.hierarchy._value.positions.forEach(function(t){e.push(y.default.cartesianToDegrees(t))}),e}var n=[];return t.geometry.coordinates.forEach(function(t){t.forEach(function(t){n.push(t)})}),n},x.prototype._getGeometryType=function(t){return t.billboard?_.default.POINT:t.polyline?_.default.LINESTRING:t.polygon?_.default.POLYGON:void 0},x.prototype._getPointStyleType=function(t){switch(!0){case m.isObject(t.point):return s.default.POINT;case m.isObject(t.billboard):return s.default.BILLBOARD;case m.isObject(t.model):return s.default.MODEL;case m.isObject(t.label):return s.default.LABEL;default:return t.point={},s.default.POINT}},x.prototype._getPolylineStyleType=function(t){switch(!0){case m.isObject(t.polyline):return s.default.POLYLINE;default:return t.polyline={},s.default.POLYLINE}},x.prototype._getPolygonStyleType=function(t){switch(!0){case m.isObject(t.polygon):return s.default.POLYGON;default:return t.polygon={},s.default.POLYGON}},x);function x(t){var n=a.call(this)||this;n._children=[],a.prototype.fromJSON.call(n,t),n.type=s.default.GEOJSON,n.class=g.default.DATA_SOURCE;var e=t||{};if(e.ur)throw" options url is not defined.";n._url=e.url,n._show=l.defaultValue(e.show,!0),n._onLoaded=new l.Event,e.styles=e.styles||{};var r=n._getPointStyleType(e.styles),i=n._getPolylineStyleType(e.styles),o=n._getPolygonStyleType(e.styles);return E(n,e.styles),n.value=new l.CustomDataSource,n.value.show=n._show,n._dataSource=new l.GeoJsonDataSource,m.isObject(n._url)?(n._url.features.forEach(function(t){var e;switch(t.geometry.type){case _.default.POINT:switch(r){case s.default.POINT:e=n._createPointFromEntity(t,n._styles.point||{});break;case s.default.BILLBOARD:e=n._createBillboardFromEntity(t,n._styles.billboard||{});break;case s.default.MODEL:e=n._createModelFromEntity(t,n._styles.model||{});break;case s.default.LABEL:e=n._createLabelFromEntity(t,n._styles.label||{})}break;case _.default.LINESTRING:switch(i){case s.default.POLYLINE:e=n._createPolylineFromEntity(t,n._styles.polyline||{})}break;case _.default.POLYGON:switch(o){case s.default.POLYGON:e=n._createPolygonFromEntity(t,n._styles.polygon||{})}}e&&(n._children.push(e),n.value.entities.add(e.value))}),n._onLoaded.raiseEvent(n)):n._dataSource.load(n._url).then(function(t){t.entities.values.forEach(function(t){var e;switch(n._getGeometryType(t)){case _.default.POINT:switch(r){case s.default.POINT:e=n._createPointFromEntity(t,n._styles.point||{});break;case s.default.BILLBOARD:e=n._createBillboardFromEntity(t,n._styles.billboard||{});break;case s.default.MODEL:e=n._createModelFromEntity(t,n._styles.model||{});break;case s.default.LABEL:e=n._createLabelFromEntity(t,n._styles.label||{})}break;case _.default.LINESTRING:switch(i){case s.default.POLYLINE:e=n._createPolylineFromEntity(t,n._styles.polyline||{})}break;case _.default.POLYGON:switch(o){case s.default.POLYGON:e=n._createPolygonFromEntity(t,n._styles.polygon||{})}}e&&(n._children.push(e),n.value.entities.add(e.value))}),n._onLoaded.raiseEvent(n)}),n}var C=function(e){if(e.propertyNames){var t=e.propertyNames,n={};return t.forEach(function(t){n[t]=e[t].getValue()}),n}return e},E=function(e,t){e._styles=e.styles||{},t.point&&(e.styles.point={},v.definedProperties(e.styles.point,c.default.defaultProps,t.point,function(t){var n=t.name,r=t.value;e._children.forEach(function(t){var e;t instanceof c.default&&(m.isFunction(r)?(e=r(t.properties),t[n]=e):t[n]=r)})})),t.billboard&&(e.styles.billboard={},v.definedProperties(e.styles.billboard,u.default.defaultProps,t.billboard,function(t){var n=t.name,r=t.value;e._children.forEach(function(t){var e;t instanceof u.default&&(m.isFunction(r)?(e=r(t.properties),t[n]=e):t[n]=r)})})),t.model&&(e.styles.model={},v.definedProperties(e.styles.model,p.default.defaultProps,t.model,function(t){var n=t.name,r=t.value;e._children.forEach(function(t){var e;t instanceof p.default&&(m.isFunction(r)?(e=r(t.properties),t[n]=e):t[n]=r)})})),t.label&&(e.styles.label={},v.definedProperties(e.styles.label,h.default.defaultProps,t.label,function(t){var n=t.name,r=t.value;e._children.forEach(function(t){var e;t instanceof h.default&&(m.isFunction(r)?(e=r(t.properties),t[n]=e):t[n]=r)})})),t.polyline&&(e.styles.polyline={},v.definedProperties(e.styles.polyline,f.default.defaultProps,t.polyline,function(t){var n=t.name,r=t.value;e._children.forEach(function(t){var e;t instanceof f.default&&(m.isFunction(r)?(e=r(t.properties),t[n]=e):t[n]=r)})})),t.polygon&&(e.styles.polygon={},v.definedProperties(e.styles.polygon,d.default.defaultProps,t.polygon,function(t){var n=t.name,r=t.value;e._children.forEach(function(t){var e;t instanceof d.default&&(m.isFunction(r)?(e=r(t.properties),t[n]=e):t[n]=r)})}))};e.default=w},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},p=this&&this.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(19),S=n(8),l=n(11),u=n(183),c=n(16),I=n(26),h=n(12),f=n(20),g=n(22),_=n(27),d=n(134),y=function(t){for(var f=[],n=[],d=[],e=0;e<t.length-1;e++){var r=_.default(t[e]),i=_.default(t[e+1]);r[2]||r.push(0),i[2]||i.push(0),f.push(p(r,i))}var y=0,o=1/0,a=0,s=0;f.forEach(function(t){var e=g.default.distanceByDegrees([t[0],t[1],t[2]],[t[3],t[4],t[5]]);e<o?(a=o,o=e):e<a&&e!=o&&(a=e),n.push(e),s+=e});y=s/o<5e3?o:a;if(10<n.length&&5e3<s/a){for(var l=n.length/10,u=0,n=n.sort(function(t,e){return t-e}),e=0;e<l;e++)u+=n[e];y=u/l}n.forEach(function(t,e){if(6===f[e].length)for(var n=f[e][0],r=f[e][1],i=f[e][2],o=f[e][3],a=f[e][4],s=f[e][5],l=t/y,u=0;u<l;u++){var c=S.Math.lerp(n,o,u/l),p=S.Math.lerp(r,a,u/l),h=S.Math.lerp(i,s,u/l);d.push([c,p,h])}else for(n=f[e][0],r=f[e][1],o=f[e][2],a=f[e][3],l=t/y,u=0;u<l;u++){c=S.Math.lerp(n,o,u/l),p=S.Math.lerp(r,a,u/l);d.push([c,p])}});var c=_.default(t[t.length-1]);return c[2]||c.push(0),d.push(c),d},m=function(t,e,n,r){var i=[],o=I.arrayToCartesianPosition(t),a=I.arrayToCartesianPosition(e),s=180*t[0]/Math.PI,l=180*t[1]/Math.PI,u=180*e[0]/Math.PI,c=180*e[1]/Math.PI,p=Math.sqrt((s-u)*(s-u)+(l-c)*(l-c))*n*100,h=S.Cartesian3.clone(o),f=S.Cartesian3.clone(a),d=S.Cartesian3.distance(h,S.Cartesian3.ZERO),y=S.Cartesian3.distance(f,S.Cartesian3.ZERO);if(S.Cartesian3.normalize(h,h),S.Cartesian3.normalize(f,f),0==S.Cartesian3.distance(h,f))return i;var g=S.Cartesian3.angleBetween(h,f);i.push(o);for(var _=1,m=r-1;_<m;_++){var v=_/(r-1),b=1-v,w=Math.sin(b*g)/Math.sin(g),x=Math.sin(v*g)/Math.sin(g),C=S.Cartesian3.multiplyByScalar(h,w,new S.Cartesian3),E=S.Cartesian3.multiplyByScalar(f,x,new S.Cartesian3),P=S.Cartesian3.add(C,E,new S.Cartesian3),O=v*Math.PI,T=d*b+y*v+Math.sin(O)*p,P=S.Cartesian3.multiplyByScalar(P,T,P);i.push(P)}return i.push(a),i},v=function(t,e,u,n){var r=[[t[0],t[1]],[e[0],e[1]]],i=r[1][0],o=r[1][1];r[3]=[i,o];function a(t,e){var n,r,i,o,a=_(t,e)/3,s=[t[0],t[1]],l=u;return o=t[0]!=e[0]&&t[1]!=e[1]?(i=(e[1]-t[1])/(e[0]-t[0]),Math.atan(i)):t[0]==e[0]?(t[1]<=e[1]?1:-1)*Math.PI/2:0,t[0]<=e[0]?(o-=l,n=Math.round(Math.cos(o)*a),r=Math.round(Math.sin(o)*a),s[0]+=n,s[1]+=r):(o+=l,n=Math.round(Math.cos(o)*a),r=Math.round(Math.sin(o)*a),s[0]-=n,s[1]-=r),s}var g=function(t,e,n,r,i,o,a){var s=.5*(n-t),l=.5*(r-e);return(2*(e-n)+s+l)*a+(-3*(e-n)-2*s-l)*o+s*i+e},_=function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))};r[1]=a(r[0],r[3]),r[2]=a(r[3],r[0]),(r=function(t,e,n){for(var r=t.length,i=[],o=1;o<r;o++)_(t[o-1],t[o]);for(var a=e,o=0;o<a;o++){var s=o/(a-1)*(n?r:r-1),l=Math.floor(s),u=s-l,c=void 0,p=t[l%r],h=void 0,f=void 0,f=n?(c=t[(l-1+r)%r],h=t[(l+1)%r],t[(l+2)%r]):(c=t[0===l?l:l-1],h=t[r-2<l?r-1:l+1],t[r-3<l?r-1:l+2]),d=u*u,y=u*d;i.push([g(c[0],p[0],h[0],f[0],u,d,y),g(c[1],p[1],h[1],f[1],u,d,y)])}return i}(r,n,!1))[r.length-1]=[i,o];var s=[];return r.forEach(function(t){s.push(I.arrayToCartesianPosition(t))}),s},b={convert:function(t){var e=t.color,n=t.duration,r=t.image,i=t.opacity,o=t.dynamicPointColor,a=t.dynamicPointScale,s=S.Color.fromCssColorString(e).withAlpha(i).toCssColorString();return new u.default({color:s,duration:n,image:r,dynamicPointColor:o,dynamicPointScale:a})},convertParams:["color","duration","image","opacity","dynamicPointColor","dynamicPointScale"],target:"polyline.material"},w={convert:function(t){var e=t.positions,n=void 0===d.default.GEOGRAPHIC_INTERPOLATION&&5===t.angularityFactor?-.2:t.angularityFactor,r=t.numberOfVertex,i=t.smoothness,o=t.interpolationType;return 2===e.length&&n&&0<r?(o===d.default.MERCATOR_INTERPOLATION?m:v)(e[0],e[1],n,r):(i&&(e=y(e)),I.arrayToCartesianPositions(e))},convertParams:["positions","angularityFactor","numberOfVertex","smoothness","interpolationType"],target:"polyline.positions"},x={type:{type:"string",value:l.default.OD_LINE,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},positions:o({type:"array",value:null,required:!0},w),angularityFactor:o({type:"number",value:5},w),numberOfVertex:o({type:"number",value:50},w),width:{type:"number",value:5,target:"polyline.width"},color:o({type:"string",value:"rgb(255,0,0)"},b),duration:o({type:"number",value:2e3},b),image:o({type:"number",value:null},b),clampToGround:{type:"boolean",value:!1,target:"polyline.clampToGround"},show:{type:"boolean",value:!0},opacity:o({type:"number",value:1},b),showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:I.arrayToDistanceDisplayCondition,target:"polyline.distanceDisplayCondition"},smoothness:o({type:"boolean",value:!0},w),dynamicPointColor:o({type:"string",value:"rgb(255,0,0)"},b),dynamicPointScale:o({type:"number",value:2},b),interpolationType:o({type:"string",value:d.default.MERCATOR_INTERPOLATION},w),properties:{type:"object",value:{}}},C=(a=s.default,i(E,a),E);function E(t){var e=a.call(this)||this;try{if(a.prototype.fromJSON.call(e,t),!h.isObject(t))throw"error: ODLine. The options is not a Object.";if(!t.positions)throw"error: ODLine. The positions of options is not defined.";f.definedProperties(e,x,t);var n=f.getPerOptions(e,x,t);e.value=new S.Entity(n)}catch(t){}return e}C.defaultProps=x,e.default=C},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).GEOGRAPHIC_INTERPOLATION="geographic_interpolation",i.MERCATOR_INTERPOLATION="mercator_interpolation",e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={encrypt:function(t){for(var e=String.fromCharCode(t.charCodeAt(0)+t.length),n=1;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)+t.charCodeAt(n-1));return escape(e)},unencrypt:function(t){t=unescape(t);for(var e=String.fromCharCode(t.charCodeAt(0)-t.length),n=1;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)-e.charCodeAt(n-1));return e}};e.default=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(307),l=n(8),u=n(16),c=n(11),p=(o=a.default,i(h,o),Object.defineProperty(h.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.value.position=l.Cartesian3.fromDegrees(t[0],t[1],t[2]||0),this.resetProperty("positons",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this.value.ellipse.semiMinorAxis=t,this.value.ellipse.semiMajorAxis=t,this.resetProperty("radius",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this.value.ellipse.material=new s.default({duration:this._duration,color:this._color,exponential:this._exponential}),this.resetProperty("color",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"duration",{get:function(){return this._duration},set:function(t){this._duration=t,this.value.ellipse.material=new s.default({duration:this._duration,color:this._color,exponential:this._exponential}),this.resetProperty("duration",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"exponential",{get:function(){return this._exponential},set:function(t){this._exponential=t,this.value.ellipse.material=new s.default({duration:this._duration,color:this._color,exponential:this._exponential}),this.resetProperty("exponential",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"show",{get:function(){return this._show},set:function(t){this._show=t,this.value.show=t,this.resetProperty("show",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"showByDistance",{get:function(){return this._showByDistance},set:function(t){this._showByDistance=t,this.value.ellipse.distanceDisplayCondition=new l.DistanceDisplayCondition(t[0],t[1]),this.resetProperty("showByDistance",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this.resetProperty("properties",t)},enumerable:!1,configurable:!0}),h);function h(t){var e=o.call(this)||this;try{o.prototype.fromJSON.call(e,t),e.type=c.default.CIRCLE_SPREAD,e.class=u.default.ENTITY;var n=t||{};if(e._position=n.position,e._radius=n.radius||100,e._duration=n.duration||2e3,e._color=n.color||"rgb(255,0,0)",e._exponential=n.exponential||1,e._show=n.show,e._showByDistance=n.showByDistance||[0,Number.MAX_VALUE],e._properties=n.properties||{},!e._position)throw"Point options position is not defined.";e.value=new l.Entity({show:e._show,position:l.Cartesian3.fromDegrees(e._position[0],e._position[1],e._position[2]||0),ellipse:{semiMinorAxis:e._radius,semiMajorAxis:e._radius,material:new s.default({duration:e._duration,color:e._color,exponential:e._exponential}),classificationType:l.ClassificationType.BOTH,distanceDisplayCondition:new l.DistanceDisplayCondition(e._showByDistance[0],e._showByDistance[1])}})}catch(t){}return e}e.default=p},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(16),u=n(12),c=n(20),p=n(8),h=n(26),f=n(27),d={type:{type:"string",value:s.default.POINT_PRIMITIVE_COLLECTION,readonly:!0},class:{type:"string",value:l.default.PRIMITIVE_COLLECTION,readonly:!0},data:{type:"array",value:[],readonly:!0},position:{type:"function|array",value:null,convert:h.arrayToCartesianPosition},pixelSize:{type:"function|number",value:1},color:{type:"function|string",value:"rgb(255,255,255)",convert:function(t){var e=t.color,n=t.opacity;return p.Color.fromCssColorString(e).withAlpha(n)},convertParams:["color","opacity"]},outlineColor:{type:"function|string",value:"rgb(0,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return p.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"]},outlineWidth:{type:"function|number",value:0},show:{type:"function|boolean",value:!0},opacity:{type:"function|number",value:1,convert:function(t){var e=t.color,n=t.outlineColor,r=t.opacity;switch(t.target){case"color":return p.Color.fromCssColorString(e).withAlpha(r);case"outlineColor":return p.Color.fromCssColorString(n).withAlpha(r)}return null},convertParams:["color","outlineColor","opacity"],target:["color","outlineColor"]},showByDistance:{type:"function|array",value:[0,Number.MAX_VALUE],convert:h.arrayToDistanceDisplayCondition,target:"distanceDisplayCondition"},properties:{type:"object",value:{}}},y=(o=a.default,i(g,o),g.prototype.add=function(t){var e;u.isObject(t)&&(this._data.push(t),e=c.getPerOptions(this,d,f.default(t)),this.value.add(e))},g.prototype.remove=function(e){var t,n;u.isObject(e)&&(t=this.data.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)}),(n=this.value.get(t))&&(this.value.remove(n),this._data.splice(t,1)))},g.prototype.removeAll=function(){this.value.removeAll(),this._data=[]},g.prototype.getPrimitiveOptions=function(t){for(var n=this,r=-1,e=0,i=this.value.length;e<i;e++)if(t===this.value.get(e)){r=e;break}if(0<=r){var o={};return Object.getOwnPropertyNames(d).forEach(function(t){var e=c.returnAvailableValue(n[t],d[t].value);o[t]=u.isFunction(e)?e(n.data[r]):e}),o.properties=this.data[r],o}},g);function g(t){var l=o.call(this)||this;try{if(o.prototype.fromJSON.call(l,t),!u.isObject(t))throw"error: PointPrimitiveCollection. The options is not a Object.";if(!t.data)throw"error: PointPrimitiveCollection. The data of options is not defined.";c.definedProperties(l,d,t,function(t){var o=t.name,a=(t.value,t.convert),s=t.convertParams;t.target.forEach(function(t){for(var e=0,n=l.value.length;e<n;e++){var r=c.getFullOptions(d,f.default(l.data[e])),i=c.getConvertParams(l,s,o,r,t);s&&(i.target=t),l.value.get(e)[t]=a(i)}})}),l.value=new p.PointPrimitiveCollection,l.data.forEach(function(t){var e=c.getPerOptions(l,d,f.default(t));l.value.add(e)})}catch(t){}return l}y.defaultProps=d,e.default=y},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});function a(t){var e=t.textFill,n=t.textOutline;return e&&n?y.LabelStyle.FILL_AND_OUTLINE:!e&&n?y.LabelStyle.OUTLINE:y.LabelStyle.FILL}var s,l=n(19),u=n(11),c=n(16),p=n(12),y=n(8),h=n(26),f=n(62),d=n(92),g=n(51),_=n(93),m=n(20),v={convert:function(t){var e=t.animate,l=t.minScale,u=t.maxScale,c=t.duration,p=t.pixelSize,h=t.delay,f=2*(u-l)*p/c,d=new Date;return e?new y.CallbackProperty(function(){var t=c+h,e=((new Date).getTime()-d.getTime())%t,n=e/t,r=(1-l)/(u-l),i=(u-1)/(u-l),o=(.5-h/t/2)*r,a=(.5-h/t/2)*i,s=p;return n<a?s+=f*e:a<=n&&n<2*a?s=s*u-f*(e-i/2*c):n<1-o&&1-2*o<n?s-=f*(e-h-i*c):1-2*o<n&&(s=s*l+f*(e-h-(i+r/2)*c)),s},!1):p},convertParams:["animate","minScale","maxScale","duration","pixelSize","delay"],target:"point.pixelSize"},b={type:{type:"string",value:u.default.DYNAMIC_POINT,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:h.arrayToCartesianPosition},animate:o({type:"boolean",value:!0},v),minScale:o({type:"number",value:.8},v),maxScale:o({type:"number",value:1.2},v),duration:o({type:"number",value:2e3},v),delay:o({type:"number",value:2e3},v),pixelSize:o({type:"number",value:15},v),color:{type:"string",value:"rgb(255,255,255)",convert:h.stringToColor,target:"point.color"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:h.stringToColor,target:"point.outlineColor"},outlineWidth:{type:"number",value:0,convert:function(t){return t=0===t?-1:t},target:"point.outlineWidth"},text:{type:"string",value:null,target:"label.text"},textFont:{type:"string",value:"12px Microsoft YaHei",target:"label.font"},textFill:{type:"boolean",value:!0,convert:a,convertParams:["textFill","textOutline"],target:"label.style"},textOutline:{type:"boolean",value:!0,convert:a,convertParams:["textFill","textOutline"],target:"label.style"},textFillColor:{type:"string",value:"rgb(255,255,255)",convert:h.stringToColor,target:"label.fillColor"},textOutlineColor:{type:"string",value:"rgb(0,0,0)",convert:h.stringToColor,target:"label.outlineColor"},textOutlineWidth:{type:"number",value:3,target:"label.outlineWidth"},textPixelOffset:{type:"array",value:[0,0],convert:h.arrayToCartesian2,target:"label.pixelOffset"},textHorizontalOrigin:{type:"string",value:f.default.CENTER,convert:d.default,target:"label.horizontalOrigin"},textVerticalOrigin:{type:"string",value:g.default.CENTER,convert:_.default,target:"label.verticalOrigin"},show:{type:"boolean",value:!0},opacity:{type:"number",value:1,convert:function(t){function e(t){var e=h.stringToColor(t),n=e.withAlpha(a);return 1!==e.alpha?n.withAlpha(e.alpha):n}var n=t.color,r=t.outlineColor,i=t.textFillColor,o=t.textOutlineColor,a=t.opacity;switch(t.target){case"point.color":return e(n);case"point.outlineColor":return e(r);case"label.fillColor":return e(i);case"label.outlineColor":return e(o)}},convertParams:["color","outlineColor","textFillColor","textOutlineColor","opacity"],target:["point.color","point.outlineColor","label.fillColor","label.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:h.arrayToDistanceDisplayCondition,target:["point.distanceDisplayCondition","label.distanceDisplayCondition"]},properties:{type:"object",value:{}}},w=(s=l.default,i(x,s),x);function x(t){var e=s.call(this)||this;try{if(s.prototype.fromJSON.call(e,t),!p.isObject(t))throw"error: DynamicPoint. The options is not a Object.";if(!t.position)throw"error: DynamicPoint. The position of options is not defined.";m.definedProperties(e,b,t);var n=m.getPerOptions(e,b,t);e.value=new y.Entity(n)}catch(t){}return e}w.defaultProps=b,e.default=w},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var l,o,a=n(11),s=n(16),u=n(19),c=n(8),p=n(20),h=n(12),f=n(26),d=n(310);(o=l=l||{})[o.CONVERT_DATA=1]="CONVERT_DATA",o[o.CONVERT_CONFIGURE=2]="CONVERT_CONFIGURE",o[o.CONVERT_DATA_MAX=3]="CONVERT_DATA_MAX",o[o.CONVERT_DATA_MIN=4]="CONVERT_DATA_MIN",o[o.CONVERT_SHOW=5]="CONVERT_SHOW",o[o.CONVERT_SHOW_BY_DISTANCE=6]="CONVERT_SHOW_BY_DISTANCE";var y,g={type:{type:"string",value:a.default.HEAT_MAP,readonly:!0},class:{type:"string",value:s.default.ENTITY,readonly:!0},data:{type:"array",value:null,convert:l.CONVERT_DATA},position:{type:"function|array",value:null,required:!0,convert:l.CONVERT_DATA},positionValue:{type:"function|number",value:null,required:!0,convert:l.CONVERT_DATA},minValue:{type:"function|number",value:null,convert:l.CONVERT_DATA_MIN},maxValue:{type:"function|number",value:null,convert:l.CONVERT_DATA_MAX},radius:{type:"function|number",value:10,convert:l.CONVERT_DATA},gradient:{type:"function|object",value:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"rgb(255,255,0)",1:"rgb(255,0,0)"},convert:l.CONVERT_CONFIGURE},blur:{type:"function|number",value:.85,convert:l.CONVERT_CONFIGURE},opacity:{type:"function|number",value:0,convert:l.CONVERT_CONFIGURE},minOpacity:{type:"function|number",value:0,convert:l.CONVERT_CONFIGURE},maxOpacity:{type:"function|number",value:1,convert:l.CONVERT_CONFIGURE},show:{type:"boolean",value:!0,convert:l.CONVERT_SHOW},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:l.CONVERT_SHOW_BY_DISTANCE},properties:{type:"object",value:{}}},_=(y=u.default,i(m,y),m.prototype.addData=function(t){h.isObject(t)&&(this.data.push(t),this.resetCanvas())},m.prototype.removeData=function(e){var t;!h.isObject(e)||0<=(t=this.data.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)}))&&(this.data.splice(t,1),this.resetCanvas())},m.prototype._getHeatMapParams=function(t){function o(t,e){var n=h.isFunction(a[t])?a[t](e):a[t];return n}var a=this,s=[];t.forEach(function(t){var e=o("position",t),n=o("positionValue",t),r=o("radius",t),i=a._wgs84PointToHeatmapPoint(e);i.value=n,i.radius=r,s.push(i)});var e=o("gradient",t),n=o("blur",t),r=o("opacity",t),i=o("minOpacity",t),l=o("maxOpacity",t);this._minValue||(this._minValue=this._getDefaultMinValue);var u=o("minValue",t);return this._maxValue||(this._maxValue=this._getDefaultMaxValue),{gradient:e,blur:n,opacity:r,minOpacity:i,maxOpacity:l,min:u,max:o("maxValue",t),data:s}},m.prototype._createHeatMapInstance=function(t){var e=this._getContainer(this._width,this._height);this._heatmapInstance=d.create({container:e,gradient:t.gradient,blur:t.blur,opacity:t.opacity,minOpacity:t.minOpacity,maxOpacity:t.maxOpacity}),this._canvas=e.children[0]},m.prototype._setHeatMapData=function(t){this._heatmapInstance.setData({min:t.min,max:t.max,data:t.data})},m.prototype._getBounds=function(){return this.bounds||(this._bounds=this._getDefaultBounds),h.isFunction(this._bounds)?this._bounds(this._data):this._bounds},m.prototype._getMaxRadius=function(t,e){var n=this;this._radius||(this._radius=e<t?t/60:e/60);var r=0;return this.data.forEach(function(t){t=0;t=h.isFunction(n._radius)?n._radius(t):n._radius,r<t&&(r=t)}),r},m.prototype._getDefaultBounds=function(t){var n=this,r=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE;return t.forEach(function(t){var e=h.isFunction(n._position)?n._position(t):n._position;e[0]<r&&(r=e[0]),e[0]>i&&(i=e[0]),e[1]<o&&(o=e[1]),e[1]>a&&(a=e[1])}),[r,o,i,a]},m.prototype._getDefaultMinValue=function(t){var n=this,r=Number.MAX_VALUE;return t.forEach(function(t){var e=h.isFunction(n.positionValue)?n.positionValue(t):n.positionValue;e<r&&(r=e)}),r},m.prototype._getDefaultMaxValue=function(t){var n=this,r=Number.MIN_VALUE;return t.forEach(function(t){var e=h.isFunction(n.positionValue)?n.positionValue(t):n.positionValue;r<e&&(r=e)}),r},m.prototype._getWidthAndHeight=function(t){var e=0<t[2]&&t[0]<0?t[2]+Math.abs(t[0]):Math.abs(t[2]-t[0]),n=0<t[3]&&t[1]<0?t[3]+Math.abs(t[1]):Math.abs(t[3]-t[1]);return this._factor=1,n<e&&2e3<e?(this._factor=e/2e3,n/this._factor<700&&(this._factor=n/700)):e<n&&2e3<n?(this._factor=n/2e3,e/this._factor<700&&(this._factor=e/700)):e<n&&e<700?(this._factor=e/700,2e3<n/this._factor&&(this._factor=n/2e3)):n<e&&n<700&&(this._factor=n/700,2e3<e/this._factor&&(this._factor=e/2e3)),{width:e/=this._factor,height:n/=this._factor}},m.prototype._getContainer=function(t,e){var n=document.createElement("div");return n.setAttribute("style","width: "+t+"px; height: "+e+"px; margin: 0px; display: none;"),document.getElementsByClassName("xt-earth-viewer")[0].appendChild(n),n},m.prototype._wgs84ToMercatorBB=function(t){var e=new c.WebMercatorProjection,n=e.project(c.Cartographic.fromDegrees(t[2],t[3])),r=e.project(c.Cartographic.fromDegrees(t[0],t[1]));return[r.x,r.y,n.x,n.y]},m.prototype._wgs84PointToHeatmapPoint=function(t){var e=(new c.WebMercatorProjection).project(c.Cartographic.fromDegrees(t[0],t[1])),n={};return n.x=Math.round((e.x-this._xoffset)/this._factor+1.5*this._maxRadius),n.y=Math.round((e.y-this._yoffset)/this._factor+1.5*this._maxRadius),n.y=this._height-n.y,n},m.prototype._mercatorToWgs84BB=function(t){var e=new c.WebMercatorProjection,n=e.unproject(new c.Cartesian3(t[0],t[1],0)),r=e.unproject(new c.Cartesian3(t[2],t[3],0));return[c.Math.toDegrees(n.longitude),c.Math.toDegrees(n.latitude),c.Math.toDegrees(r.longitude),c.Math.toDegrees(r.latitude)]},m.prototype._resetMBounds=function(t,e,n){return this._xoffset=t[0],this._yoffset=t[1],[t[0]-n*e,t[1]-n*e,t[2]+n*e,t[3]+n*e]},m);function m(t){var o=y.call(this)||this;o.resetCanvas=function(){var t=o._getBounds(),e=o._wgs84ToMercatorBB(t),n=(o._getWidthAndHeight(e),o._resetMBounds(e,o._factor,1.5*o._maxRadius)),r=o._mercatorToWgs84BB(n),i=o._getHeatMapParams(o.data);o._heatmapInstance.repaint(),o._setHeatMapData(i),o._heatmapInstance.repaint(),o.value.rectangle.coordinates=c.Rectangle.fromDegrees(r[0],r[1],r[2],r[3]),o.value.rectangle.material.image=o._canvas};try{y.prototype.fromJSON.call(o,t),p.definedProperties(o,g,t,function(t){var e=t.convert,n=t.name;switch(e){case l.CONVERT_DATA:o.resetCanvas();break;case l.CONVERT_CONFIGURE:var r=void 0;r=h.isFunction(o[n])?o[n](o.data):o[n];var i={};i[n]=r,o._heatmapInstance.configure(i),o.value.rectangle.material.image=o._canvas;break;case l.CONVERT_DATA_MAX:r=void 0;r=h.isFunction(o[n])?o[n](o.data):o[n],o._heatmapInstance.setDataMax(r),o.value.rectangle.material.image=o._canvas;break;case l.CONVERT_DATA_MIN:r=void 0;r=h.isFunction(o[n])?o[n](o.data):o[n],o._heatmapInstance.setDataMin(r),o.value.rectangle.material.image=o._canvas;break;case l.CONVERT_SHOW:o.value.show=o[n];break;case l.CONVERT_SHOW_BY_DISTANCE:o.value.rectangle.distanceDisplayCondition=f.arrayToDistanceDisplayCondition(o[n])}}),0===o.data.length&&o.data.push({position:[0,0],value:0});var e=o._getBounds(),n=o._wgs84ToMercatorBB(e),r=o._getWidthAndHeight(n);o._maxRadius=o._getMaxRadius(r.width,r.height);var i=o._resetMBounds(n,o._factor,1.5*o._maxRadius),a=o._mercatorToWgs84BB(i);o._width=Math.round(r.width+3*o._maxRadius),o._height=Math.round(r.height+3*o._maxRadius);var s=o._getHeatMapParams(o.data);o._createHeatMapInstance(s),o._setHeatMapData(s),o.value=new c.Entity({show:o._show,rectangle:{coordinates:c.Rectangle.fromDegrees(a[0],a[1],a[2],a[3]),material:new c.ImageMaterialProperty({image:o._canvas,transparent:!0}),distanceDisplayCondition:f.arrayToDistanceDisplayCondition(o._showByDistance)}})}catch(t){}return o}e.default=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=r.Event,o=r.createPropertyDescriptor,a=r.defined,s=r.Property,l=r.Material,u=r.Color,c=n(312),p=n(76),h=!0,f=(d.prototype.getType=function(t){return this.PolylineTrailLinkType},d.prototype.getValue=function(t,e){var n=this;return a(e)||(e={}),setTimeout(function(){e.color=s.getValueOrClonedDefault(n._color,t,u.WHITE,e.color),e.image=n._image,e.time=((new Date).getTime()-n._time)%n._duration/n._duration},this._delay),e},d.prototype.equals=function(t){return this===t||t instanceof d&&s.equals(this._color,t._color)},Object.defineProperty(d.prototype,"isConstant",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"definitionChanged",{get:function(){return this._definitionChanged},enumerable:!1,configurable:!0}),d.prototype.addMaterial=function(){l._materialCache.addMaterial(this.PolylineTrailLinkType,{fabric:{type:this.PolylineTrailLinkType,uniforms:{color:this.color._value,animate:this._animate,image:this._image,time:0,orientation:this._orientation},source:c},translucent:function(t){return!0}})},d);function d(t){var e;switch(this.PolylineTrailLinkType="PolylineTrailLink",this._definitionChanged=new i,this._color=void 0,this._colorSubscription=void 0,this.color=u.fromCssColorString(t.color),this._animate=t.animate,this._duration=t.duration,this._delay=t.delay,this._time=(new Date).getTime(),this._image=t.image||function(){var t=document.createElement("canvas");t.height=50,t.width=500;var e=t.getContext("2d"),n=e.createLinearGradient(0,0,t.width,0);return n.addColorStop(0,"rgba(255, 255, 255, 0.4)"),n.addColorStop(1,"rgb(255, 0, 0)"),e.fillStyle=n,e.fillRect(0,0,t.width,t.height),t.toDataURL()}(),t.orientation||p.default.UP){case p.default.UP:this._orientation=0;break;case p.default.DOWN:this._orientation=1;break;case p.default.LEFT:this._orientation=2;break;case p.default.RIGHT:this._orientation=3;break;default:this._orientation=0}h?(this.addMaterial(),h=!1):((e=l._materialCache._materials.PolylineTrailLink.fabric.uniforms).animate=this._animate,e.image=this._image,e.orientation=this._orientation)}Object.defineProperties(f.prototype,{color:o("color")}),e.default=f},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});function o(t){var e=t.textFill,n=t.textOutline;return e&&n?u.LabelStyle.FILL_AND_OUTLINE:!e&&n?u.LabelStyle.OUTLINE:u.LabelStyle.FILL}var a,s=n(19),l=n(11),u=n(8),c=n(16),p=n(26),h=n(62),f=n(92),d=n(51),y=n(93),g=n(20),_=n(111),m=n(22),v=n(12),b={type:{type:"string",value:l.default.WAVE_POINT,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:p.arrayToCartesianPosition},pixelSize:{type:"number",value:15,target:"point.pixelSize"},color:{type:"string",value:"rgb(255,255,255)",convert:p.stringToColor,target:"point.color"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:p.stringToColor,target:"point.outlineColor"},outlineWidth:{type:"number",value:0,convert:function(t){return t=0===t?-1:t},target:"point.outlineWidth"},text:{type:"string",value:null,target:"label.text"},textFont:{type:"string",value:"12px Microsoft YaHei",target:"label.font"},textFill:{type:"boolean",value:!0,convert:o,convertParams:["textFill","textOutline"],target:"label.style"},textOutline:{type:"boolean",value:!0,convert:o,convertParams:["textFill","textOutline"],target:"label.style"},textFillColor:{type:"string",value:"rgb(255,255,255)",convert:p.stringToColor,target:"label.fillColor"},textOutlineColor:{type:"string",value:"rgb(0,0,0)",convert:p.stringToColor,target:"label.outlineColor"},textOutlineWidth:{type:"number",value:3,target:"label.outlineWidth"},textPixelOffset:{type:"array",value:[0,0],convert:p.arrayToCartesian2,target:"label.pixelOffset"},textHorizontalOrigin:{type:"string",value:h.default.CENTER,convert:f.default,target:"label.horizontalOrigin"},textVerticalOrigin:{type:"string",value:d.default.CENTER,convert:y.default,target:"label.verticalOrigin"},show:{type:"boolean",value:!0},opacity:{type:"number",value:1,convert:function(t){var e=t.color,n=t.outlineColor,r=t.textFillColor,i=t.textOutlineColor,o=t.opacity;switch(t.target){case"point.color":return p.stringToColor(e).withAlpha(o);case"point.outlineColor":return p.stringToColor(n).withAlpha(o);case"label.fillColor":return p.stringToColor(r).withAlpha(o);case"label.outlineColor":return p.stringToColor(i).withAlpha(o)}},convertParams:["color","outlineColor","textFillColor","textOutlineColor","opacity"],target:["point.color","point.outlineColor","label.fillColor","label.outlineColor"]},minScale:{type:"number",value:1},maxScale:{type:"number",value:2},animate:{type:"boolean",value:!0},duration:{type:"number",value:1e3},delay:{type:"number",value:0},properties:{type:"object",value:{}}},w=(a=s.default,i(x,a),Object.defineProperty(x.prototype,"addEvent",{get:function(){return this._addEvent},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"removeEvent",{get:function(){return this._removeEvent},enumerable:!1,configurable:!0}),x.prototype.removeDOM=function(){var t=document.getElementById(this._earth.containerId).getElementsByClassName("xt-earth-widget")[0];this._p&&(t.removeChild(this._p),this._earth.render.unbind(_.default.POST_RENDER,this._key))},x.prototype.createWavePoint=function(){var i=this,t=document.getElementById(this._earth.containerId).getElementsByClassName("xt-earth-widget")[0];this.removeDOM();var o=document.createElement("p");o.id="p-"+this._guid;var e=Number(Math.round(this._pixelSize));o.style.position="absolute",o.style.left="50%",o.style.top="50%",o.style.borderRadius="50%",o.style.margin="0px",o.style.pointerEvents="none",o.style.opacity=this._opacity.toString(),o.style.opacity=this._animate?1:0,this._p=o;var n,r=document.styleSheets[0];Object.values(r.cssRules).find(function(t){return t.name==="wave-point-"+i._guid})||(n=this._duration/(this._duration+this._delay)*100,r.insertRule("#p-"+this._guid+'::before { content: ""; box-shadow: 0px 0px '+e+"px "+this._color+" inset; width: "+e+"px; height: "+e+"px; display: "+(this._show?"block":"none")+"; border-radius: 50%; animation: wave-point-"+this._guid+" "+(this._duration+this._delay)/1e3+"s infinite;}",0),r.insertRule("#p-"+this._guid+'::after { content: ""; box-shadow: 0px 0px '+e+"px "+this._color+" inset; width: "+e+"px; height: "+e+"px; display: "+(this._show?"block":"none")+"; border-radius: 50%; position: absolute; top: 0; right: 0; animation: wave-point2-"+this._guid+" "+(this._duration+this._delay)/1e3+"s infinite;}",0),r.insertRule("@keyframes wave-point-"+this._guid+" {\n                0% {\n                    transform: scale(1);\n                    opacity: 0.9;\n                }\n                "+n+"% {\n                    transform: scale("+this._minScale+");\n                    opacity: 0;\n                }\n                100% {\n                    ransform: scale(1);\n                    opacity: 0;\n                }\n            }",0),r.insertRule("@keyframes wave-point2-"+this._guid+" {\n                0% {\n                    transform: scale(1);\n                    opacity: 0.9;\n                }\n                "+n+"% {\n                    transform: scale("+this._maxScale+");\n                    opacity: 0;\n                }\n                100% {\n                    transform: scale(1);\n                    opacity: 0;\n                }\n            }",0)),t.appendChild(o);var a=Object.values(r.cssRules),s=a.find(function(t){return t.name==="wave-point-"+i._guid}),l=a.find(function(t){return t.name==="wave-point2-"+i._guid}),u=a.find(function(t){return t.selectorText==="#p-"+i._guid+"::after"}),c=a.find(function(t){return t.selectorText==="#p-"+i._guid+"::before"});s[1].style.transform="scale("+this._minScale+")",l[1].style.transform="scale("+this._maxScale+")",u.style.width=e+"px",u.style.height=e+"px",u.style.display=this._show?"block":"none",u.style.boxShadow="0px 0px "+e/2+"px "+this._color+" inset",u.style.animation="wave-point2-"+this._guid+" "+(this._duration+this._delay)/1e3+"s infinite",u.style.animationDelay=this._delay,c.style.width=e+"px",c.style.height=e+"px",c.style.display=this._show?"block":"none",c.style.boxShadow="0px 0px "+e/2+"px "+this._color+" inset",c.style.animation="wave-point-"+this._guid+" "+(this._duration+this._delay)/1e3+"s infinite",c.style.animationDelay=this._delay,this._key=this._earth.render.bind(_.default.POST_RENDER,function(t){var e,n,r;!i._position||(e=i._earth.coordinateToScreenCoordinate(i._position))&&(n=e[0],r=e[1],n&&r&&(o.style.left=n-.5*o.clientWidth+"px",o.style.top=r-.5*o.clientHeight+"px"))})},x);function x(t){var l=a.call(this)||this;try{if(a.prototype.fromJSON.call(l,t),!v.isObject(t))throw new TypeError("error: WavePoint. The options is not a Object.");if(!t.position)throw new TypeError("error: WavePoint. The position of options is not defined.");l._position=t.position,l._pixelSize=u.defaultValue(t.pixelSize,1),l._color=u.defaultValue(t.color,"rgb(255,255,255)"),l._show=u.defaultValue(t.show,!0),l._opacity=u.defaultValue(t.opacity,1),l._minScale=u.defaultValue(t.minScale,1),l._maxScale=u.defaultValue(t.maxScale,2),l._animate=u.defaultValue(t.animate,!0),l._duration=u.defaultValue(t.duration,1e3),l._delay=u.defaultValue(t.delay,0),l._addEvent=new u.Event,l._removeEvent=new u.Event,g.definedProperties(l,b,t,function(t){var e,n=t.name,r=t.value,i=t.convert,o=t.target,a=v.isArray(o)?o[0]:n,s=r;"minScale"===n||"maxScale"===n||"animate"===n||"duration"===n||"delay"===n?l.createWavePoint():"position"===n?(l.createWavePoint(),l.value.position=m.default.degreesToCartesian(r)):"pixelSize"===n?(l.createWavePoint(),l.value.point.pixelSize=r):"color"===n?(l.createWavePoint(),l.value.point.color=p.stringToColor(r)):"show"===n?(l.createWavePoint(),l.value.point.show=r,l.value.label.show=r):"opacity"===n?(l.createWavePoint(),l.value.point.color=l.value.point.color._value.withAlpha(r),l.value.point.outlineColor=l.value.point.outlineColor._value.withAlpha(r),l.value.label.fillColor=l.value.label.fillColor._value.withAlpha(r),l.value.label.outlineColor=l.value.label.outlineColor._value.withAlpha(r)):1===(e=a.split(".")).length?l.value[a]=i?i(s):s:2===e.length&&(l.value[e[0]][e[1]]=i?i(s):s)});var e=g.getPerOptions(l,b,t);l.value=new u.Entity(e),l._guid=l.value.id,l._addEvent.addEventListener(function(t){l._earth=t._earth,l.createWavePoint()}),l._removeEvent.addEventListener(function(){l.removeDOM()})}catch(t){}return l}w.defaultProps=b,e.default=w},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(64),o=n(11),a=n(27),s=n(28),l=(Object.defineProperty(u.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),u.prototype.start=function(){var n=this,r=this;r._drawGeometry=new i.default(r._earth,{addVertex:function(t){if(0===r._options.positions.length){r._options.positions.push(t,a.default(t));var e=n._group.add({type:o.default.POLYLINE,obj:r._options});return r._drawStart.raiseEvent({object:e,position:t}),e}r._options.positions.push(t)},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._options.positions;r._drawEnd.raiseEvent({object:r.object,position:a.default(t[t.length-1])}),t.pop(),t.pop()},destroyed:function(t){t&&(t.value.positions=n._options.positions)}})},u.prototype.finish=function(){this._drawGeometry.destory()},u.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._vertexCollection.removeAll(),t._drawMode=s.default.NONE)},u.prototype.setOptions=function(t,e){this._options=Object.assign(this._options,t),this._options.positions&&0<this._options.positions.length&&(this._drawGeometry.vertexCollection.fromDegrees(this._options.positions),e&&(e.dynamic=!0))},u);function u(t,e){this._options={positions:[],width:1,clampToGround:!1,color:"rgb(67,178,160)",dynamic:!0},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new r.Event,this._drawStart=new r.Event}e.default=l},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).CLICK="click",i.DOUBLE_CLICK="double_click",i.HOVER="hover",e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(Object.defineProperty(i.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"target",{get:function(){return this._target},set:function(t){this._target=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t},enumerable:!1,configurable:!0}),i);function i(t){this._callback=t.callback,this._enabled=t.enabled,this._target=t.target,this._delay=t.delay}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getInfoFromPicked=void 0;var r=n(11),i=n(131),o=n(335);e.getInfoFromPicked=function(t,e){var n;switch(t){case r.default.FEATURE_MODEL_TILESET:return{jsonSchema:(n=new i.default(e)).getJsonSchema(),properties:n.getProperties()};case r.default.MODEL:return{jsonSchema:(n=new o.default(e)).getJsonSchema(),properties:n.getProperties()};case r.default.ARTIFICIAL_MODEL_TILESET:return{jsonSchema:(n=new i.default(e.pickId.object)).getJsonSchema(),properties:n.getProperties()}}return{}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f=n(8),r={loadText:function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(),e.responseText},getFullscreenQuad:function(){return new f.Geometry({attributes:new f.GeometryAttributes({position:new f.GeometryAttribute({componentDatatype:f.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}),st:new f.GeometryAttribute({componentDatatype:f.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,1,0,1,1,0,1])})}),indices:new Uint32Array([3,2,0,0,2,1])})},createTexture:function(t,e){var n;return f.defined(e)&&((n={}).arrayBufferView=e,t.source=n),new f.Texture(t)},createFramebuffer:function(t,e,n){return new f.Framebuffer({context:t,colorTextures:[e],depthTexture:n})},createRawRenderState:function(t){var e={viewport:t.viewport,depthTest:t.depthTest,depthMask:t.depthMask,blending:t.blending};return f.Appearance.getDefaultRenderState(!0,!1,e)},viewRectangleToLonLatRange:function(t){var e,n={},r=f.Math.mod(t.west,f.Math.TWO_PI),i=f.Math.mod(t.east,f.Math.TWO_PI),o=t.width,a=o>f.Math.THREE_PI_OVER_TWO?(e=0,f.Math.TWO_PI):i-r<o?(e=r)+o:(e=r,i);n.lon={min:f.Math.toDegrees(e),max:f.Math.toDegrees(a)};var s=t.south,l=t.north,u=t.height,c=u>f.Math.PI/12?u/2:0,p=f.Math.clampToLatitudeRange(s-c),h=f.Math.clampToLatitudeRange(l+c);return p<-f.Math.PI_OVER_THREE&&(p=-f.Math.PI_OVER_TWO),h>f.Math.PI_OVER_THREE&&(h=f.Math.PI_OVER_TWO),n.lat={min:f.Math.toDegrees(p),max:f.Math.toDegrees(h)},n}};e.default=r},function(t,e,n){"use strict";function r(t){t.offset%4!=0&&t.skip(4-t.offset%4)}t.exports.notNetcdf=function(t,e){if(t)throw new TypeError("Not a valid NetCDF v3.x file: ".concat(e))},t.exports.padding=r,t.exports.readName=function(t){var e=t.readUint32(),n=t.readChars(e);return r(t),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(115),o=n(11),a=n(27),s=n(28),l=(Object.defineProperty(u.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),u.prototype.start=function(){var n=this;this._drawGeometry=new i.default(this._earth,{addVertex:function(t){if(1!==n._options.positions.length)return n._options.positions.length,void n._options.positions.push(t);n._options.positions.push(t,a.default(t).map(function(t,e){return 0!==e&&1!==e||(t+=1e-8),t}));var e=n._group.add({type:o.default.POLYGON,obj:n._options});return n._drawStart.raiseEvent({object:e,position:t}),e},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._options.positions;n._drawEnd.raiseEvent({object:n.object,position:a.default(t[t.length-1])}),t.pop(),t.pop()},destroyed:function(t){t.positions=n._options.positions}})},u.prototype.finish=function(){this._drawGeometry.destory()},u.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._vertexCollection.removeAll(),t._drawMode=s.default.NONE)},u.prototype.setOptions=function(t,e){this._options=Object.assign(this._options,t),this._options.positions&&0<this._options.positions.length&&(this._drawGeometry.vertexCollection.fromDegrees(this._options.positions),e&&(e.dynamic=!0))},u);function u(t,e){this._options={positions:[],fill:!0,material:{color:"rgb(67,178,160)"},outline:!0,outlineColor:"rgb(255,255,255)",outlineWidth:1,clampToGround:!1,dynamic:!0},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new r.Event,this._drawStart=new r.Event}e.default=l},function(t,e,n){"use strict";function r(t,e){this.name="PointError",this.points=e=e||[],this.message=t||"Invalid Points!";for(var n=0;n<e.length;n++)this.message+=" "+i.toString(e[n])}var i=n(150);(r.prototype=new Error).constructor=r,t.exports=r},function(t,e,n){"use strict";function r(t){return"("+t.x+";"+t.y+")"}t.exports={toString:function(t){var e=t.toString();return"[object Object]"===e?r(t):e},toStringBase:r,compare:function(t,e){return t.y===e.y?t.x-e.x:t.y-e.y},equals:function(t,e){return t.x===e.x&&t.y===e.y}}},function(t,e,n){"use strict";function r(t,e,n){this.points_=[t,e,n],this.neighbors_=[null,null,null],this.interior_=!1,this.constrained_edge=[!1,!1,!1],this.delaunay_edge=[!1,!1,!1]}var i=n(150).toString;r.prototype.toString=function(){return"["+i(this.points_[0])+i(this.points_[1])+i(this.points_[2])+"]"},r.prototype.GetPoint=r.prototype.getPoint=function(t){return this.points_[t]},r.prototype.getPoints=function(){return this.points_},r.prototype.getNeighbor=function(t){return this.neighbors_[t]},r.prototype.containsPoint=function(t){var e=this.points_;return t===e[0]||t===e[1]||t===e[2]},r.prototype.containsEdge=function(t){return this.containsPoint(t.p)&&this.containsPoint(t.q)},r.prototype.containsPoints=function(t,e){return this.containsPoint(t)&&this.containsPoint(e)},r.prototype.isInterior=function(){return this.interior_},r.prototype.setInterior=function(t){return this.interior_=t,this},r.prototype.markNeighborPointers=function(t,e,n){var r=this.points_;if(t===r[2]&&e===r[1]||t===r[1]&&e===r[2])this.neighbors_[0]=n;else if(t===r[0]&&e===r[2]||t===r[2]&&e===r[0])this.neighbors_[1]=n;else{if(!(t===r[0]&&e===r[1]||t===r[1]&&e===r[0]))throw new Error("poly2tri Invalid Triangle.markNeighborPointers() call");this.neighbors_[2]=n}},r.prototype.markNeighbor=function(t){var e=this.points_;t.containsPoints(e[1],e[2])?(this.neighbors_[0]=t).markNeighborPointers(e[1],e[2],this):t.containsPoints(e[0],e[2])?(this.neighbors_[1]=t).markNeighborPointers(e[0],e[2],this):t.containsPoints(e[0],e[1])&&(this.neighbors_[2]=t).markNeighborPointers(e[0],e[1],this)},r.prototype.clearNeighbors=function(){this.neighbors_[0]=null,this.neighbors_[1]=null,this.neighbors_[2]=null},r.prototype.clearDelaunayEdges=function(){this.delaunay_edge[0]=!1,this.delaunay_edge[1]=!1,this.delaunay_edge[2]=!1},r.prototype.pointCW=function(t){var e=this.points_;return t===e[0]?e[2]:t===e[1]?e[0]:t===e[2]?e[1]:null},r.prototype.pointCCW=function(t){var e=this.points_;return t===e[0]?e[1]:t===e[1]?e[2]:t===e[2]?e[0]:null},r.prototype.neighborCW=function(t){return t===this.points_[0]?this.neighbors_[1]:t===this.points_[1]?this.neighbors_[2]:this.neighbors_[0]},r.prototype.neighborCCW=function(t){return t===this.points_[0]?this.neighbors_[2]:t===this.points_[1]?this.neighbors_[0]:this.neighbors_[1]},r.prototype.getConstrainedEdgeCW=function(t){return t===this.points_[0]?this.constrained_edge[1]:t===this.points_[1]?this.constrained_edge[2]:this.constrained_edge[0]},r.prototype.getConstrainedEdgeCCW=function(t){return t===this.points_[0]?this.constrained_edge[2]:t===this.points_[1]?this.constrained_edge[0]:this.constrained_edge[1]},r.prototype.getConstrainedEdgeAcross=function(t){return t===this.points_[0]?this.constrained_edge[0]:t===this.points_[1]?this.constrained_edge[1]:this.constrained_edge[2]},r.prototype.setConstrainedEdgeCW=function(t,e){t===this.points_[0]?this.constrained_edge[1]=e:t===this.points_[1]?this.constrained_edge[2]=e:this.constrained_edge[0]=e},r.prototype.setConstrainedEdgeCCW=function(t,e){t===this.points_[0]?this.constrained_edge[2]=e:t===this.points_[1]?this.constrained_edge[0]=e:this.constrained_edge[1]=e},r.prototype.getDelaunayEdgeCW=function(t){return t===this.points_[0]?this.delaunay_edge[1]:t===this.points_[1]?this.delaunay_edge[2]:this.delaunay_edge[0]},r.prototype.getDelaunayEdgeCCW=function(t){return t===this.points_[0]?this.delaunay_edge[2]:t===this.points_[1]?this.delaunay_edge[0]:this.delaunay_edge[1]},r.prototype.setDelaunayEdgeCW=function(t,e){t===this.points_[0]?this.delaunay_edge[1]=e:t===this.points_[1]?this.delaunay_edge[2]=e:this.delaunay_edge[0]=e},r.prototype.setDelaunayEdgeCCW=function(t,e){t===this.points_[0]?this.delaunay_edge[2]=e:t===this.points_[1]?this.delaunay_edge[0]=e:this.delaunay_edge[1]=e},r.prototype.neighborAcross=function(t){return t===this.points_[0]?this.neighbors_[0]:t===this.points_[1]?this.neighbors_[1]:this.neighbors_[2]},r.prototype.oppositePoint=function(t,e){var n=t.pointCW(e);return this.pointCW(n)},r.prototype.legalize=function(t,e){var n=this.points_;if(t===n[0])n[1]=n[0],n[0]=n[2],n[2]=e;else if(t===n[1])n[2]=n[1],n[1]=n[0],n[0]=e;else{if(t!==n[2])throw new Error("poly2tri Invalid Triangle.legalize() call");n[0]=n[2],n[2]=n[1],n[1]=e}},r.prototype.index=function(t){var e=this.points_;if(t===e[0])return 0;if(t===e[1])return 1;if(t===e[2])return 2;throw new Error("poly2tri Invalid Triangle.index() call")},r.prototype.edgeIndex=function(t,e){var n=this.points_;if(t===n[0]){if(e===n[1])return 2;if(e===n[2])return 1}else if(t===n[1]){if(e===n[2])return 0;if(e===n[0])return 2}else if(t===n[2]){if(e===n[0])return 1;if(e===n[1])return 0}return-1},r.prototype.markConstrainedEdgeByIndex=function(t){this.constrained_edge[t]=!0},r.prototype.markConstrainedEdgeByEdge=function(t){this.markConstrainedEdgeByPoints(t.p,t.q)},r.prototype.markConstrainedEdgeByPoints=function(t,e){var n=this.points_;e===n[0]&&t===n[1]||e===n[1]&&t===n[0]?this.constrained_edge[2]=!0:e===n[0]&&t===n[2]||e===n[2]&&t===n[0]?this.constrained_edge[1]=!0:(e===n[1]&&t===n[2]||e===n[2]&&t===n[1])&&(this.constrained_edge[0]=!0)},t.exports=r},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}},function(t,e,n){t.exports=n(293)},function(t,e,n){function o(t){for(var e,n,r=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function a(t){if(55296<=t&&t<=57343)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value")}function s(t,e){return p(t>>e&63|128)}function r(){if(u<=c)throw Error("Invalid byte index");var t=255&l[c];if(c++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}var i,l,u,c,p;i=e,p=String.fromCharCode,i.version="3.0.0",i.encode=function(t){for(var e=o(t),n=e.length,r=-1,i="";++r<n;)i+=function(t){if(0==(4294967168&t))return p(t);var e="";return 0==(4294965248&t)?e=p(t>>6&31|192):0==(4294901760&t)?(a(t),e=p(t>>12&15|224),e+=s(t,6)):0==(4292870144&t)&&(e=p(t>>18&7|240),e+=s(t,12),e+=s(t,6)),e+=p(63&t|128)}(e[r]);return i},i.decode=function(t){l=o(t),u=l.length,c=0;for(var e,n=[];!1!==(e=function(){var t,e;if(u<c)throw Error("Invalid byte index");if(c==u)return!1;if(t=255&l[c],c++,0==(128&t))return t;if(192==(224&t)){if(128<=(e=(31&t)<<6|r()))return e;throw Error("Invalid continuation byte")}if(224==(240&t)){if(2048<=(e=(15&t)<<12|r()<<6|r()))return a(e),e;throw Error("Invalid continuation byte")}if(240==(248&t)&&65536<=(e=(7&t)<<18|r()<<12|r()<<6|r())&&e<=1114111)return e;throw Error("Invalid UTF-8 detected")}());)n.push(e);return function(t){for(var e,n=t.length,r=-1,i="";++r<n;)65535<(e=t[r])&&(i+=p((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=p(e);return i}(n)}},function(t,e,n){"use strict";var r=n(248),i=n.n(r),o=n(249),a=n.n(o)()(i.a);a.push([t.i,"","",{version:3,sources:[],names:[],mappings:"",sourceRoot:""}]),e.a=a},,function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,p=n?i-1:0,h=n?-1:1,f=t[e+p];for(p+=h,o=f&(1<<-c)-1,f>>=-c,c+=s;0<c;o=256*o+t[e+p],p+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;0<c;a=256*a+t[e+p],p+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,p=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),2<=(e+=1<=a+p?h/l:h*Math.pow(2,1-p))*l&&(a++,l/=2),c<=a+p?(s=0,a=c):1<=a+p?(s=(e*l-1)*Math.pow(2,i),a+=p):(s=e*Math.pow(2,p-1)*Math.pow(2,i),a=0));8<=i;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;0<u;t[n+f]=255&a,f+=d,a/=256,u-=8);t[n+f-d]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,n,i){(function(l){var u=i(260),t=i(163),c=i(267),e=i(268),p=i(125),r=n;r.request=function(t,e){t="string"==typeof t?p.parse(t):c(t);var n=-1===l.location.protocol.search(/^https?:$/)?"http:":"",r=t.protocol||n,i=t.hostname||t.host,o=t.port,a=t.path||"/";i&&-1!==i.indexOf(":")&&(i="["+i+"]"),t.url=(i?r+"//"+i:"")+(o?":"+o:"")+a,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var s=new u(t);return e&&s.on("response",e),s},r.get=function(t,e){var n=r.request(t,e);return n.end(),n},r.ClientRequest=u,r.IncomingMessage=t.IncomingMessage,r.Agent=function(){},r.Agent.defaultMaxSockets=4,r.globalAgent=new r.Agent,r.STATUS_CODES=e,r.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,i(44))},function(t,s,e){(function(t){s.fetch=a(t.fetch)&&a(t.ReadableStream),s.writableStream=a(t.WritableStream),s.abortController=a(t.AbortController),s.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),s.blobConstructor=!0}catch(t){}var e;function n(){if(void 0!==e)return e;if(t.XMLHttpRequest){e=new t.XMLHttpRequest;try{e.open("GET",t.XDomainRequest?"/":"https://example.com")}catch(t){e=null}}else e=null;return e}function r(t){var e=n();if(!e)return!1;try{return e.responseType=t,e.responseType===t}catch(t){}return!1}var i=void 0!==t.ArrayBuffer,o=i&&a(t.ArrayBuffer.prototype.slice);function a(t){return"function"==typeof t}s.arraybuffer=s.fetch||i&&r("arraybuffer"),s.msstream=!s.fetch&&o&&r("ms-stream"),s.mozchunkedarraybuffer=!s.fetch&&i&&r("moz-chunked-arraybuffer"),s.overrideMimeType=s.fetch||!!n()&&a(n().overrideMimeType),s.vbArray=a(t.VBArray),e=null}).call(this,e(44))},function(t,n,r){(function(u,c,p){var h=r(162),t=r(61),f=r(89),s=n.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},e=n.IncomingMessage=function(t,e,n,r){var i,o,a=this;if(f.Readable.call(a),a._mode=n,a.headers={},a.rawHeaders=[],a.trailers={},a.rawTrailers=[],a.on("end",function(){u.nextTick(function(){a.emit("close")})}),"fetch"===n){if(a._fetchResponse=e,a.url=e.url,a.statusCode=e.status,a.statusMessage=e.statusText,e.headers.forEach(function(t,e){a.headers[e.toLowerCase()]=t,a.rawHeaders.push(e,t)}),h.writableStream){var s=new WritableStream({write:function(n){return new Promise(function(t,e){a._destroyed?e():a.push(new p(n))?t():a._resumeFetch=t})},close:function(){c.clearTimeout(r),a._destroyed||a.push(null)},abort:function(t){a._destroyed||a.emit("error",t)}});try{return void e.body.pipeTo(s).catch(function(t){c.clearTimeout(r),a._destroyed||a.emit("error",t)})}catch(t){}}var l=e.body.getReader();!function e(){l.read().then(function(t){if(!a._destroyed){if(t.done)return c.clearTimeout(r),void a.push(null);a.push(new p(t.value)),e()}}).catch(function(t){c.clearTimeout(r),a._destroyed||a.emit("error",t)})}()}else{a._xhr=t,a._pos=0,a.url=t.responseURL,a.statusCode=t.status,a.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach(function(t){var e,n=t.match(/^([^:]+):\s*(.*)/);n&&("set-cookie"===(e=n[1].toLowerCase())?(void 0===a.headers[e]&&(a.headers[e]=[]),a.headers[e].push(n[2])):void 0!==a.headers[e]?a.headers[e]+=", "+n[2]:a.headers[e]=n[2],a.rawHeaders.push(n[1],n[2]))}),a._charset="x-user-defined",h.overrideMimeType||(!(i=a.rawHeaders["mime-type"])||(o=i.match(/;\s*charset=([^;])(;|$)/))&&(a._charset=o[1].toLowerCase()),a._charset||(a._charset="utf-8"))}};t(e,f.Readable),e.prototype._read=function(){var t=this._resumeFetch;t&&(this._resumeFetch=null,t())},e.prototype._onXHRProgress=function(){var e=this,t=e._xhr,n=null;switch(e._mode){case"text:vbarray":if(t.readyState!==s.DONE)break;try{n=new c.VBArray(t.responseBody).toArray()}catch(t){}if(null!==n){e.push(new p(n));break}case"text":try{n=t.responseText}catch(t){e._mode="text:vbarray";break}if(n.length>e._pos){var r=n.substr(e._pos);if("x-user-defined"===e._charset){for(var i=new p(r.length),o=0;o<r.length;o++)i[o]=255&r.charCodeAt(o);e.push(i)}else e.push(r,e._charset);e._pos=n.length}break;case"arraybuffer":if(t.readyState!==s.DONE||!t.response)break;n=t.response,e.push(new p(new Uint8Array(n)));break;case"moz-chunked-arraybuffer":if(n=t.response,t.readyState!==s.LOADING||!n)break;e.push(new p(new Uint8Array(n)));break;case"ms-stream":if(n=t.response,t.readyState!==s.LOADING)break;var a=new c.MSStreamReader;a.onprogress=function(){a.result.byteLength>e._pos&&(e.push(new p(new Uint8Array(a.result.slice(e._pos)))),e._pos=a.result.byteLength)},a.onload=function(){e.push(null)},a.readAsArrayBuffer(n)}e._xhr.readyState===s.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,r(60),r(44),r(55).Buffer)},function(M,t,D){"use strict";(function(t,g){var _=D(101);M.exports=h;var a,m=D(159);h.ReadableState=o;function v(t,e){return t.listeners(e).length}D(126).EventEmitter;var i=D(165),u=D(102).Buffer,c=t.Uint8Array||function(){};var e=Object.create(D(90));e.inherits=D(61);var s,n=D(261),b=void 0,b=n&&n.debuglog?n.debuglog("stream"):function(){},l=D(262),r=D(166);e.inherits(h,i);var p=["error","close","destroy","pause","resume"];function o(t,e){t=t||{};var n=e instanceof(a=a||D(67));this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=t.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:n&&(i||0===i)?i:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new l,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(s=s||D(167).StringDecoder,this.decoder=new s(t.encoding),this.encoding=t.encoding)}function h(t){if(a=a||D(67),!(this instanceof h))return new h(t);this._readableState=new o(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),i.call(this)}function f(t,e,n,r,i){var o,a,s,l=t._readableState;return null===e?(l.reading=!1,function(t,e){if(e.ended)return;{var n;!e.decoder||(n=e.decoder.end())&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,x(t)}(t,l)):(i||(o=function(t,e){var n;(function(t){return u.isBuffer(t)||t instanceof c})(e)||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk"));return n}(l,e)),o?t.emit("error",o):l.objectMode||e&&0<e.length?("string"==typeof e||l.objectMode||Object.getPrototypeOf(e)===u.prototype||(a=e,e=u.from(a)),r?l.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):d(t,l,e,!0):l.ended?t.emit("error",new Error("stream.push() after EOF")):(l.reading=!1,l.decoder&&!n?(e=l.decoder.write(e),l.objectMode||0!==e.length?d(t,l,e,!1):E(t,l)):d(t,l,e,!1))):r||(l.reading=!1)),!(s=l).ended&&(s.needReadable||s.length<s.highWaterMark||0===s.length)}function d(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&x(t)),E(t,e)}Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),h.prototype.destroy=r.destroy,h.prototype._undestroy=r.undestroy,h.prototype._destroy=function(t,e){this.push(null),e(t)},h.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=u.from(t,e),e=""),n=!0),f(this,t,e,!1,n)},h.prototype.unshift=function(t){return f(this,t,null,!0,!1)},h.prototype.isPaused=function(){return!1===this._readableState.flowing},h.prototype.setEncoding=function(t){return s=s||D(167).StringDecoder,this._readableState.decoder=new s(t),this._readableState.encoding=t,this};var y=8388608;function w(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=(y<=(n=t)?n=y:(n--,n|=n>>>1,n|=n>>>2,n|=n>>>4,n|=n>>>8,n|=n>>>16,n++),n)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0));var n}function x(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(b("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?_.nextTick(C,t):C(t))}function C(t){b("emit readable"),t.emit("readable"),S(t)}function E(t,e){e.readingMore||(e.readingMore=!0,_.nextTick(P,t,e))}function P(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(b("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function O(t){b("readable nexttick read 0"),t.read(0)}function T(t,e){e.reading||(b("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),S(t),e.flowing&&!e.reading&&t.read(0)}function S(t){var e=t._readableState;for(b("flow",e.flowing);e.flowing&&null!==t.read(););}function I(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():(n?function(t,e){var n=e.head,r=1,i=n.data;t-=i.length;for(;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0===(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n).data=o.slice(a);break}++r}return e.length-=r,i}:function(t,e){var n=u.allocUnsafe(t),r=e.head,i=1;r.data.copy(n),t-=r.data.length;for(;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0===(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r).data=o.slice(a);break}++i}return e.length-=i,n})(t,e);return r}(t,e.buffer,e.decoder),n);var n}function A(t){var e=t._readableState;if(0<e.length)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,_.nextTick(L,e,t))}function L(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function N(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}h.prototype.read=function(t){b("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return b("read: emitReadable",e.length,e.ended),(0===e.length&&e.ended?A:x)(this),null;if(0===(t=w(t,e))&&e.ended)return 0===e.length&&A(this),null;var r,i=e.needReadable;return b("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&b("length less than watermark",i=!0),e.ended||e.reading?b("reading or ended",i=!1):i&&(b("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=w(n,e))),null===(r=0<t?I(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&A(this)),null!==r&&this.emit("data",r),r},h.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},h.prototype.pipe=function(n,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=n;break;case 1:i.pipes=[i.pipes,n];break;default:i.pipes.push(n)}i.pipesCount+=1,b("pipe count=%d opts=%j",i.pipesCount,t);var e=(!t||!1!==t.end)&&n!==g.stdout&&n!==g.stderr?a:y;function o(t,e){b("onunpipe"),t===r&&e&&!1===e.hasUnpiped&&(e.hasUnpiped=!0,b("cleanup"),n.removeListener("close",f),n.removeListener("finish",d),n.removeListener("drain",l),n.removeListener("error",h),n.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",y),r.removeListener("data",p),u=!0,!i.awaitDrain||n._writableState&&!n._writableState.needDrain||l())}function a(){b("onend"),n.end()}i.endEmitted?_.nextTick(e):r.once("end",e),n.on("unpipe",o);var s,l=(s=r,function(){var t=s._readableState;b("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&v(s,"data")&&(t.flowing=!0,S(s))});n.on("drain",l);var u=!1;var c=!1;function p(t){b("ondata"),(c=!1)!==n.write(t)||c||((1===i.pipesCount&&i.pipes===n||1<i.pipesCount&&-1!==N(i.pipes,n))&&!u&&(b("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,c=!0),r.pause())}function h(t){b("onerror",t),y(),n.removeListener("error",h),0===v(n,"error")&&n.emit("error",t)}function f(){n.removeListener("finish",d),y()}function d(){b("onfinish"),n.removeListener("close",f),y()}function y(){b("unpipe"),r.unpipe(n)}return r.on("data",p),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?m(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(n,"error",h),n.once("close",f),n.once("finish",d),n.emit("pipe",r),i.flowing||(b("pipe resume"),r.resume()),n},h.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t=t||e.pipes,e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n)),this;if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=N(e.pipes,t);return-1===a||(e.pipes.splice(a,1),--e.pipesCount,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n)),this},h.prototype.addListener=h.prototype.on=function(t,e){var n,r=i.prototype.on.call(this,t,e);return"data"===t?!1!==this._readableState.flowing&&this.resume():"readable"===t&&((n=this._readableState).endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&x(this):_.nextTick(O,this))),r},h.prototype.resume=function(){var t,e,n=this._readableState;return n.flowing||(b("resume"),n.flowing=!0,t=this,(e=n).resumeScheduled||(e.resumeScheduled=!0,_.nextTick(T,t,e))),this},h.prototype.pause=function(){return b("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(b("pause"),this._readableState.flowing=!1,this.emit("pause")),this},h.prototype.wrap=function(e){var n=this,r=this._readableState,i=!1;for(var t in e.on("end",function(){var t;b("wrapped end"),!r.decoder||r.ended||(t=r.decoder.end())&&t.length&&n.push(t),n.push(null)}),e.on("data",function(t){b("wrapped data"),r.decoder&&(t=r.decoder.write(t)),r.objectMode&&null==t||(r.objectMode||t&&t.length)&&(n.push(t)||(i=!0,e.pause()))}),e)void 0===this[t]&&"function"==typeof e[t]&&(this[t]=function(t){return function(){return e[t].apply(e,arguments)}}(t));for(var o=0;o<p.length;o++)e.on(p[o],this.emit.bind(this,p[o]));return this._read=function(t){b("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),h._fromList=I}).call(this,D(44),D(60))},function(t,e,n){t.exports=n(126).EventEmitter},function(t,e,n){"use strict";var o=n(101);function a(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,r=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return r||i?e?e(t):!t||this._writableState&&this._writableState.errorEmitted||o.nextTick(a,this,t):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?(o.nextTick(a,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";var r=n(102).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}function a(t){var e;switch(this.encoding=o(t),this.encoding){case"utf16le":this.text=u,this.end=c,e=4;break;case"utf8":this.fillLast=l,e=4;break;case"base64":this.text=p,this.end=h,e=3;break;default:return this.write=f,void(this.end=d)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function l(t){var e=this.lastTotal-this.lastNeed,n=function(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(1<t.lastNeed&&1<e.length){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(2<t.lastNeed&&2<e.length&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){if((t.length-e)%2!=0)return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1);var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(55296<=r&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}function c(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function p(t,e){var n=(t.length-e)%3;return 0==n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1==n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function f(t){return t.toString(this.encoding)}function d(t){return t&&t.length?this.write(t):""}(e.StringDecoder=a).prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},a.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},a.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);if(0<=i)return 0<i&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(0<=(i=s(e[r])))return 0<i&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(0<=(i=s(e[r])))return 0<i&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=o;var r=n(67),i=Object.create(n(90));function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:function(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,(n.writecb=null)!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var n=this;"function"==typeof this._flush?this._flush(function(t,e){s(n,t,e)}):s(this,null,null)}function s(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(61),i.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,n){var r,i=this._transformState;i.writecb=n,i.writechunk=t,i.writeencoding=e,i.transforming||(r=this._readableState,(i.needTransform||r.needReadable||r.length<r.highWaterMark)&&this._read(r.highWaterMark))},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,function(t){e(t),n.emit("close")})}},function(C,t,E){"use strict";(function(e){var o=E(9),t=E(276);function a(t,e){if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0}function s(t){return e.Buffer&&"function"==typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}var c=E(170),r=Object.prototype.hasOwnProperty,p=Array.prototype.slice,n="foo"===function(){}.name;function l(t){return Object.prototype.toString.call(t)}function u(t){if(!s(t)&&"function"==typeof e.ArrayBuffer){if("function"==typeof ArrayBuffer.isView)return ArrayBuffer.isView(t);if(t)return t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer)}}var h=C.exports=_,i=/\s*function\s+([^\(\s]*)\s*/;function f(t){if(c.isFunction(t)){if(n)return t.name;var e=t.toString().match(i);return e&&e[1]}}function d(t,e){return"string"!=typeof t||t.length<e?t:t.slice(0,e)}function y(t){if(n||!c.isFunction(t))return c.inspect(t);var e=f(t);return"[Function"+(e?": "+e:"")+"]"}function g(t,e,n,r,i){throw new h.AssertionError({message:n,actual:t,expected:e,operator:r,stackStartFunction:i})}function _(t,e){t||g(t,!0,e,"==",h.ok)}function m(t,e,n,r){if(t===e)return!0;if(s(t)&&s(e))return 0===a(t,e);if(c.isDate(t)&&c.isDate(e))return t.getTime()===e.getTime();if(c.isRegExp(t)&&c.isRegExp(e))return t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase;if(null!==t&&"object"===o(t)||null!==e&&"object"===o(e)){if(u(t)&&u(e)&&l(t)===l(e)&&!(t instanceof Float32Array||t instanceof Float64Array))return 0===a(new Uint8Array(t.buffer),new Uint8Array(e.buffer));if(s(t)!==s(e))return!1;var i=(r=r||{actual:[],expected:[]}).actual.indexOf(t);return-1!==i&&i===r.expected.indexOf(e)||(r.actual.push(t),r.expected.push(e),function(t,e,n,r){if(null==t||null==e)return!1;if(c.isPrimitive(t)||c.isPrimitive(e))return t===e;if(n&&Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;var i=v(t),o=v(e);if(i&&!o||!i&&o)return!1;if(i)return t=p.call(t),e=p.call(e),m(t,e,n);var a,s,l=x(t),u=x(e);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;0<=s;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;0<=s;s--)if(a=l[s],!m(t[a],e[a],n,r))return!1;return!0}(t,e,n,r))}return n?t===e:t==e}function v(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function b(t,e){if(t&&e){if("[object RegExp]"==Object.prototype.toString.call(e))return e.test(t);try{if(t instanceof e)return 1}catch(t){}if(!Error.isPrototypeOf(e))return!0===e.call({},t)}}function w(t,e,n,r){var i;if("function"!=typeof e)throw new TypeError('"block" argument must be a function');"string"==typeof n&&(r=n,n=null),i=function(t){var e;try{t()}catch(t){e=t}return e}(e),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),t&&!i&&g(i,n,"Missing expected exception"+r);var o="string"==typeof r,a=!t&&i&&!n;if((!t&&c.isError(i)&&o&&b(i,n)||a)&&g(i,n,"Got unwanted exception"+r),t&&i&&n&&!b(i,n)||!t&&i)throw i}h.AssertionError=function(t){var e;this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=d(y((e=this).actual),128)+" "+e.operator+" "+d(y(e.expected),128),this.generatedMessage=!0);var n,r,i,o,a,s=t.stackStartFunction||g;Error.captureStackTrace?Error.captureStackTrace(this,s):(n=new Error).stack&&(a=n.stack,r=f(s),0<=(i=a.indexOf("\n"+r))&&(o=a.indexOf("\n",i+1),a=a.substring(o+1)),this.stack=a)},c.inherits(h.AssertionError,Error),h.fail=g,h.ok=_,h.equal=function(t,e,n){t!=e&&g(t,e,n,"==",h.equal)},h.notEqual=function(t,e,n){t==e&&g(t,e,n,"!=",h.notEqual)},h.deepEqual=function(t,e,n){m(t,e,!1)||g(t,e,n,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(t,e,n){m(t,e,!0)||g(t,e,n,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(t,e,n){m(t,e,!1)&&g(t,e,n,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function t(e,n,r){m(e,n,!0)&&g(e,n,r,"notDeepStrictEqual",t)},h.strictEqual=function(t,e,n){t!==e&&g(t,e,n,"===",h.strictEqual)},h.notStrictEqual=function(t,e,n){t===e&&g(t,e,n,"!==",h.notStrictEqual)},h.throws=function(t,e,n){w(!0,t,e,n)},h.doesNotThrow=function(t,e,n){w(!1,t,e,n)},h.ifError=function(t){if(t)throw t},h.strict=t(function t(e,n){e||g(e,!0,n,"==",t)},h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var x=Object.keys||function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e}}).call(this,E(44))},function(t,S,I){(function(a){var e=I(9),n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},s=/%[sdj%]/g;S.format=function(t){if(!b(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(l(arguments[n]));return e.join(" ")}for(var n=1,r=arguments,i=r.length,o=String(t).replace(s,function(t){if("%%"===t)return"%";if(i<=n)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}}),a=r[n];n<i;a=r[++n])m(a)||!c(a)?o+=" "+a:o+=" "+l(a);return o},S.deprecate=function(t,e){if(void 0!==a&&!0===a.noDeprecation)return t;if(void 0===a)return function(){return S.deprecate(t,e).apply(this,arguments)};var n=!1;return function(){if(!n){if(a.throwDeprecation)throw new Error(e);a.traceDeprecation,n=!0}return t.apply(this,arguments)}};var r,i={};function l(t,e){var n={seen:[],stylize:u};return 3<=arguments.length&&(n.depth=arguments[2]),4<=arguments.length&&(n.colors=arguments[3]),_(e)?n.showHidden=e:e&&S._extend(n,e),w(n.showHidden)&&(n.showHidden=!1),w(n.depth)&&(n.depth=2),w(n.colors)&&(n.colors=!1),w(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),f(n,t,n.depth)}function o(t,e){var n=l.styles[e];return n?"["+l.colors[n][0]+"m"+t+"["+l.colors[n][1]+"m":t}function u(t,e){return t}function f(e,n,r){if(e.customInspect&&n&&P(n.inspect)&&n.inspect!==S.inspect&&(!n.constructor||n.constructor.prototype!==n)){var t=n.inspect(r,e);return b(t)||(t=f(e,t,r)),t}var i=function(t,e){if(w(e))return t.stylize("undefined","undefined");if(b(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}if(v(e))return t.stylize(""+e,"number");if(_(e))return t.stylize(""+e,"boolean");if(m(e))return t.stylize("null","null")}(e,n);if(i)return i;var o,a=Object.keys(n),s=(o={},a.forEach(function(t,e){o[t]=!0}),o);if(e.showHidden&&(a=Object.getOwnPropertyNames(n)),E(n)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return d(n);if(0===a.length){if(P(n)){var l=n.name?": "+n.name:"";return e.stylize("[Function"+l+"]","special")}if(x(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(C(n))return e.stylize(Date.prototype.toString.call(n),"date");if(E(n))return d(n)}var u,c="",p=!1,h=["{","}"];return g(n)&&(p=!0,h=["[","]"]),P(n)&&(c=" [Function"+(n.name?": "+n.name:"")+"]"),x(n)&&(c=" "+RegExp.prototype.toString.call(n)),C(n)&&(c=" "+Date.prototype.toUTCString.call(n)),E(n)&&(c=" "+d(n)),0!==a.length||p&&0!=n.length?r<0?x(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),u=p?function(e,n,r,i,t){for(var o=[],a=0,s=n.length;a<s;++a)O(n,String(a))?o.push(y(e,n,r,i,String(a),!0)):o.push("");return t.forEach(function(t){t.match(/^\d+$/)||o.push(y(e,n,r,i,t,!0))}),o}(e,n,r,s,a):a.map(function(t){return y(e,n,r,s,t,p)}),e.seen.pop(),function(t,e,n){if(60<t.reduce(function(t,e){return 0<=e.indexOf("\n")&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0))return n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1];return n[0]+e+" "+t.join(", ")+" "+n[1]}(u,c,h)):h[0]+c+h[1]}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function y(t,e,n,r,i,o){var a,s,l=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]};if(l.get?s=l.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):l.set&&(s=t.stylize("[Setter]","special")),O(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(l.value)<0?-1<(s=m(n)?f(t,l.value,null):f(t,l.value,n-1)).indexOf("\n")&&(s=o?s.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+s.split("\n").map(function(t){return"   "+t}).join("\n")):s=t.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return s;a=(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),t.stylize(a,"string"))}return a+": "+s}function g(t){return Array.isArray(t)}function _(t){return"boolean"==typeof t}function m(t){return null===t}function v(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return void 0===t}function x(t){return c(t)&&"[object RegExp]"===p(t)}function c(t){return"object"===e(t)&&null!==t}function C(t){return c(t)&&"[object Date]"===p(t)}function E(t){return c(t)&&("[object Error]"===p(t)||t instanceof Error)}function P(t){return"function"==typeof t}function p(t){return Object.prototype.toString.call(t)}S.debuglog=function(t){return w(r)&&(r=a.env.NODE_DEBUG||""),t=t.toUpperCase(),i[t]||(new RegExp("\\b"+t+"\\b","i").test(r)?(a.pid,i[t]=function(){S.format.apply(S,arguments)}):i[t]=function(){}),i[t]},(S.inspect=l).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},S.isArray=g,S.isBoolean=_,S.isNull=m,S.isNullOrUndefined=function(t){return null==t},S.isNumber=v,S.isString=b,S.isSymbol=function(t){return"symbol"===e(t)},S.isUndefined=w,S.isRegExp=x,S.isObject=c,S.isDate=C,S.isError=E,S.isFunction=P,S.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"===e(t)||void 0===t},S.isBuffer=I(277);function O(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S.log=function(){},S.inherits=I(278),S._extend=function(t,e){if(!e||!c(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var h="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function T(t,e){var n;return t||((n=new Error("Promise was rejected with a falsy value")).reason=t,t=n),e(t)}S.promisify=function(o){if("function"!=typeof o)throw new TypeError('The "original" argument must be of type Function');if(h&&o[h]){var t;if("function"!=typeof(t=o[h]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,h,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var n,r,t=new Promise(function(t,e){n=t,r=e}),e=[],i=0;i<arguments.length;i++)e.push(arguments[i]);e.push(function(t,e){t?r(t):n(e)});try{o.apply(this,e)}catch(t){r(t)}return t}return Object.setPrototypeOf(t,Object.getPrototypeOf(o)),h&&Object.defineProperty(t,h,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(o))},S.promisify.custom=h,S.callbackify=function(o){if("function"!=typeof o)throw new TypeError('The "original" argument must be of type Function');function t(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);var n=t.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");function r(){return n.apply(i,arguments)}var i=this;o.apply(this,t).then(function(t){a.nextTick(r,null,t)},function(t){a.nextTick(T,t,r)})}return Object.setPrototypeOf(t,Object.getPrototypeOf(o)),Object.defineProperties(t,n(o)),t}}).call(this,I(60))},function(t,e,n){"use strict";t.exports=function(t,e,n,r){for(var i=65535&t|0,o=t>>>16&65535|0,a=0;0!==n;){for(n-=a=2e3<n?2e3:n;o=o+(i=i+e[r++]|0)|0,--a;);i%=65521,o%=65521}return i|o<<16|0}},function(t,e,n){"use strict";var s=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,r){var i=s,o=r+n;t^=-1;for(var a=r;a<o;a++)t=t>>>8^i[255&(t^e[a])];return-1^t}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(290),u=n(8),c=n(16),p=(o=a.default,i(h,o),Object.defineProperty(h.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=t,this.value.alpha=t,this.resetProperty("alpha",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"brightness",{get:function(){return this._brightness},set:function(t){this._brightness=t,this.value.brightness=t,this.resetProperty("brightness",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"contrast",{get:function(){return this._contrast},set:function(t){this._contrast=t,this.value.contrast=t,this.resetProperty("contrast",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"hue",{get:function(){return this._hue},set:function(t){this._hue=t,this.value.hue=t,this.resetProperty("hue",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"saturation",{get:function(){return this._saturation},set:function(t){this._saturation=t,this.value.saturation=t,this.resetProperty("saturation",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"gamma",{get:function(){return this._gamma},set:function(t){this._gamma=t,this.value.gamma=t,this.resetProperty("gamma",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"colorToAlpha",{get:function(){return this._colorToAlpha},set:function(t){this._colorToAlpha=t,this.value.colorToAlpha=t?u.Color.fromCssColorString(t):void 0,this.resetProperty("colorToAlpha",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"colorToAlphaThreshold",{get:function(){return this._colorToAlphaThreshold},set:function(t){this._colorToAlphaThreshold=t,this.value.colorToAlphaThreshold=t,this.resetProperty("colorToAlphaThreshold",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"show",{get:function(){return this._show},set:function(t){this._show=t,this.value.show=t,this.resetProperty("show",t)},enumerable:!1,configurable:!0}),h);function h(t){var e=o.call(this)||this;try{if(!t.imagery)throw"options imagery is not defined.";var n=t,r=n.imagery;e._alpha=n.alpha||1,e._brightness=n.brightness||1,e._contrast=n.contrast||1,e._hue=n.hue||0,e._saturation=n.saturation||1,e._gamma=n.gamma||1,e._colorToAlpha=n.colorToAlpha||void 0,e._colorToAlphaThreshold=n.colorToAlphaThreshold||.004,e._show=u.defaultValue(n.show,!0);var i={imagery:r,alpha:e._alpha,brightness:e._brightness,contrast:e._contrast,hue:e._hue,saturation:e._saturation,gamma:e._gamma,colorToAlpha:e._colorToAlpha?u.Color.fromCssColorString(e._colorToAlpha):void 0,colorToAlphaThreshold:e._colorToAlphaThreshold,show:e._show};o.prototype.fromJSON.call(e,i),e.type=s.default.IMAGERY_LAYER,e.class=c.default.IMAGERY_LAYER,delete i.imagery,e.value=new u.ImageryLayer(new l.default(r).value,i)}catch(t){}return e}e.default=p},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).URL_TEMPLATE="url_template",i.WEB_MAP_TILE_SERVICE="web_map_tile_service",i.ARCGIS_MAP_SERVER="arcgis_map_server",i.MAPBOX_VECTOR_TILE="mapbox_vector_tile",i.BAIDU_MAP_SERVICE="baidu_map_service",i.AMAP_MAP_SERVICE="amap_map_service",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).Geographic="geographic",i.GEOGRAPHIC="geographic",i.WebMercator="web_mercator",i.WEB_MERCATOR="web_mercator",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).NONE="none",i.CLAMP_TO_GROUND="clamp_to_ground",i.RELATIVE_TO_GROUND="relative_to_ground",e.default=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(8),o=n(19),l=n(11),u=n(131),c=n(12),p=n(16),h=(a=o.default,i(f,a),Object.defineProperty(f.prototype,"position",{get:function(){return this._getPosition()},set:function(t){this._position=t,this._updatePosition(this._position),this._updateOrientation(this._orientation),this._updateScale(this._scale),this.resetProperty("pisition",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"url",{get:function(){return this._url},set:function(t){this._url=t,this.value.url=t,this.resetProperty("url",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"definition",{get:function(){return this._definition},set:function(t){this._definition=t,this.value.maximumScreenSpaceError=t,this.resetProperty("definition",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"shadows",{get:function(){return this._shadows},set:function(t){this._shadows=t,this.value.shadows=t,this.resetProperty("shadows",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation=t,this._updatePosition(this._position),this._updateOrientation(this._orientation),this._updateScale(this._scale),this.resetProperty("orientation",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"scale",{get:function(){return this._getScale()},set:function(t){this._scale=t,this._updatePosition(this._position),this._updateOrientation(this._orientation),this._updateScale(this._scale),this.resetProperty("scale",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"show",{get:function(){return this._show},set:function(t){this._show=t,this.value.show=t,this.resetProperty("show",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"showByDistance",{get:function(){return this._showByDistance},set:function(t){this._showByDistance=t,this.resetProperty("showByCondition",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t,this._style&&(this.value.style=new s.Cesium3DTileStyle(this._style)),this.resetProperty("style",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"onLoad",{get:function(){return this._onLoad},enumerable:!1,configurable:!0}),f.prototype._updatePosition=function(t){var e=s.Cartesian3.fromDegrees(t[0],t[1],t[2]),n=s.Transforms.eastNorthUpToFixedFrame(e);this.value.root.transform=n},f.prototype._updateOrientation=function(t){var e=s.Matrix3.fromRotationZ(s.Math.toRadians(t[0])),n=s.Matrix3.fromRotationY(s.Math.toRadians(-t[1])),r=s.Matrix3.fromRotationX(s.Math.toRadians(t[2])),i=s.Matrix4.clone(this.value.root.transform);s.Matrix4.multiplyByMatrix3(i,e,i),s.Matrix4.multiplyByMatrix3(i,n,i),s.Matrix4.multiplyByMatrix3(i,r,i),this.value.root.transform=i},f.prototype._updateScale=function(t){var e=s.Matrix3.fromScale(new s.Cartesian3(t,t,t)),n=s.Matrix4.clone(this.value.root.transform);s.Matrix4.multiplyByMatrix3(n,e,n),this.value.root.transform=n},f.prototype._getPosition=function(){var t=s.Cartographic.fromCartesian(this.value.boundingSphere.center);return[Number(s.Math.toDegrees(t.longitude).toFixed(10)),Number(s.Math.toDegrees(t.latitude).toFixed(10)),Number(t.height.toFixed(5))]},f.prototype._getScale=function(){var t=s.Matrix4.getScale(this.value.root.transform,new s.Cartesian3);return Number(t.x.toFixed(5))},f.prototype._getRotation=function(){},f);function f(t){var e=a.call(this)||this,i=e;a.prototype.fromJSON.call(e,t),e.type=l.default.ARTIFICIAL_MODEL_TILESET,e.class=p.default.PRIMITIVE;var n=t||{};if(e._url=n.url,e._definition=n.definition||10,e._shadows=n.shadows||s.ShadowMode.ENABLED,e._position=n.position,e._orientation=n.orientation||[0,0,0],e._scale=n.scale,e._show=void 0===n.show||n.show,e._style=n.style,e._onLoad=new s.Event,e._showByDistance=n.showByDistance,e._onSchemaCompleted=n.onSchemaCompleted,!e._url)return e;e.value=new s.Cesium3DTileset({url:e._url,show:e._show,modelMatrix:s.Matrix4.IDENTITY,shadows:e._shadows,maximumScreenSpaceError:e._definition});var o=function(t){var e,n=t.content,r=n.featuresLength;!i._schema&&0<r&&(e=new u.default(n.getFeature(0)),i._schema=e.getJsonSchema(),c.isFunction(i._onSchemaCompleted)&&i._onSchemaCompleted(i._schema),i.value.tileVisible.removeEventListener(o))};return e.value.tileVisible.addEventListener(o),e._style&&(e.value.style=new s.Cesium3DTileStyle(e._style)),e.value.readyPromise.then(function(t){i._position=i._position||e._getPosition(),i._position&&(i._updatePosition(e._position),i._onLoad.raiseEvent(e.value)),i._orientation&&i._updateOrientation(i._orientation),i._scale&&i._updateScale(i._scale)}).otherwise(function(t){}),e}e.default=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(22),c=n(16),p=(o=a.default,i(h,o),h.prototype.setDynamicPositions=function(t){this._dynamic=!0,this._positions=t,this.value.polyline.positions=new l.CallbackProperty(this._updatePositions,!1)},Object.defineProperty(h.prototype,"positions",{get:function(){return this._positions},set:function(t){this._positions=t,this.value.polyline.positions=u.default.coordinateArrayToPositions(t),this.resetProperty("positions",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.value.polyline.width=t,this.resetProperty("width",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"granularity",{get:function(){return this._granularity},set:function(t){this._granularity=t,this.value.polyline.granularity=t,this.resetProperty("granularity",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"classificationType",{get:function(){return this._classificationType},set:function(t){this._classificationType=t,this.value.polyline.classificationType=t,this.resetProperty("classificationType",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"clampToGround",{get:function(){return this._clampToGround},set:function(t){this._clampToGround=this.value,this.value.polyline.clampToGround=t,this.resetProperty("clampToGround",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"material",{get:function(){return this._material},set:function(t){this._material=Object.assign(this._material,t),t.color&&(this.value.polyline.material.color=l.Color.fromCssColorString(t.color)),t.glowPower&&(this.value.polyline.material.glowPower=t.glowPower),t.taperPower&&(this.value.polyline.material.taperPower=t.taperPower),this.resetProperty("material",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"show",{get:function(){return this._show},set:function(t){this._show=t,this.value.show=t,this.resetProperty("show",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"showByDistance",{get:function(){return this._showByDistance},set:function(t){this._showByDistance=t,this.value.distanceDisplayCondition=new l.DistanceDisplayCondition(t[0],t[1]),this.resetProperty("showByDistance",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this.resetProperty("properties",t)},enumerable:!1,configurable:!0}),h);function h(t){var e=o.call(this)||this;e._updatePositions=function(){return e.resetProperty("positions",e._positions),u.default.coordinateArrayToPositions(e._positions)};try{o.prototype.fromJSON.call(e,t),e.type=s.default.POLYLINE_GLOW,e.class=c.default.ENTITY;var n=t||{};if(e._positions=n.positions,e._width=n.width||1,e._classificationType=n.classificationType||l.ClassificationType.BOTH,e._clampToGround=n.clampToGround||!1,e._show=void 0===n.show||n.show,e._showByDistance=n.showByDistance||[0,Number.MAX_VALUE],e._properties=n.properties||{},e._material=new l.PolylineGlowMaterialProperty({color:n.material.color?l.Color.fromCssColorString(n.material.color):l.Color.WHITE,glowPower:n.material.glowPower||.25,taperPower:n.material.taperPower||1}),e._dynamic=n.dynamic||!1,!e._positions)throw"PolylineGlow options positions is not defined.";e.value=new l.Entity({show:e._show,polyline:{positions:e._dynamic?new l.CallbackProperty(e._updatePositions,!1):u.default.coordinateArrayToPositions(e._positions),width:e._width,material:e._material,classificationType:e._classificationType,clampToGround:e._clampToGround,distanceDisplayCondition:new l.DistanceDisplayCondition(e._showByDistance[0],e._showByDistance[1])}})}catch(t){}return e}e.default=p},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(16),u=n(8),c=n(22),p=(o=a.default,i(h,o),h.prototype.setDynamicPositions=function(t){this._dynamic=!0,this._positions=t,this.value.polyline.positions=new u.CallbackProperty(this._updatePositions,!1)},Object.defineProperty(h.prototype,"positions",{get:function(){return this._positions},set:function(t){this._positions=t,this.value.polyline.positions=c.default.coordinateArrayToPositions(this._positions),this.resetProperty("positions",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.value.polyline.width=t,this.resetProperty("width",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"granularity",{get:function(){return this._granularity},set:function(t){this._granularity=t,this.value.polyline.granularity=t,this.resetProperty("granularity",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"classificationType",{get:function(){return this._classificationType},set:function(t){this._classificationType=t,this.value.polyline.classificationType=t,this.resetProperty("classificationType",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"clampToGround",{get:function(){return this._clampToGround},set:function(t){this._clampToGround=this.value,this.value.polyline.clampToGround=t,this.resetProperty("clampToGround",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"material",{get:function(){return this._material},set:function(t){this._material=Object.assign(this._material,t),t&&(this.value.polyline.material=u.Color.fromCssColorString(t)),this.resetProperty("material",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"show",{get:function(){return this._show},set:function(t){this._show=t,this.value.show=t,this.resetProperty("show",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"showByDistance",{get:function(){return this._showByDistance},set:function(t){this._showByDistance=t,this.value.distanceDisplayCondition=new u.DistanceDisplayCondition(t[0],t[1]),this.resetProperty("showByDistance",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this.resetProperty("properties",t)},enumerable:!1,configurable:!0}),h);function h(t){var e=o.call(this)||this;e._updatePositions=function(){return e.resetProperty("positions",e._positions),c.default.coordinateArrayToPositions(e._positions)};try{o.prototype.fromJSON.call(e,t),e.type=s.default.POLYLINE_ARROW,e.class=l.default.ENTITY;var n=t||{};if(e._positions=n.positions,e._width=n.width||1,e._classificationType=n.classificationType||u.ClassificationType.BOTH,e._clampToGround=n.clampToGround||!1,e._show=void 0===n.show||n.show,e._showByDistance=n.showByDistance||[0,Number.MAX_VALUE],e._properties=n.properties||{},e._material=new u.PolylineArrowMaterialProperty(n.material.color?u.Color.fromCssColorString(n.material.color):u.Color.WHITE),e._dynamic=n.dynamic||!1,!e._positions)throw"PolylineArrow options positions is not defined.";e.value=new u.Entity({show:e._show,polyline:{positions:e._dynamic?new u.CallbackProperty(e._updatePositions,!1):c.default.coordinateArrayToPositions(e._positions),width:e._width,material:e._material,classificationType:e._classificationType,clampToGround:e._clampToGround,distanceDisplayCondition:new u.DistanceDisplayCondition(e._showByDistance[0],e._showByDistance[1])}})}catch(t){}return e}e.default=p},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(16),u=n(8),c=n(22),p=(o=a.default,i(h,o),h.prototype.setDynamicPositions=function(t){this._dynamic=!0,this._positions=t,this.value.polyline.positions=new u.CallbackProperty(this._updatePositions,!1)},Object.defineProperty(h.prototype,"positions",{get:function(){return this._positions},set:function(t){this._positions=t,this.value.polyline.positions=c.default.coordinateArrayToPositions(this._positions),this.resetProperty("positions",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.value.polyline.width=t,this.resetProperty("width",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"granularity",{get:function(){return this._granularity},set:function(t){this._granularity=t,this.value.polyline.granularity=t,this.resetProperty("granularity",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"classificationType",{get:function(){return this._classificationType},set:function(t){this._classificationType=t,this.value.polyline.classificationType=t,this.resetProperty("classificationType",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"clampToGround",{get:function(){return this._clampToGround},set:function(t){this._clampToGround=this.value,this.value.polyline.clampToGround=t,this.resetProperty("clampToGround",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"material",{get:function(){return this._material},set:function(t){this._material=Object.assign(this._material,t),t.color&&(this.value.polyline.material.color=u.Color.fromCssColorString(t.color)),t.gapColor&&(this.value.polyline.material.gapColor=u.Color.fromCssColorString(t.gapColor)),t.dashLength&&(this.value.polyline.material.dashLength=t.dashLength),t.dashPattern&&(this.value.polyline.material.dashPattern=t.dashPattern),this.resetProperty("material",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"show",{get:function(){return this._show},set:function(t){this._show=t,this.value.show=t,this.resetProperty("show",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"showByDistance",{get:function(){return this._showByDistance},set:function(t){this._showByDistance=t,this.value.distanceDisplayCondition=new u.DistanceDisplayCondition(t[0],t[1]),this.resetProperty("showByDistance",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this.resetProperty("properties",t)},enumerable:!1,configurable:!0}),h);function h(t){var e=o.call(this)||this;e._updatePositions=function(){return e.resetProperty("positions",e._positions),c.default.coordinateArrayToPositions(e._positions)};try{o.prototype.fromJSON.call(e,t),e.type=s.default.POLYLINE_DASH,e.class=l.default.ENTITY;var n=t||{};if(e._positions=n.positions,e._width=n.width||1,e._classificationType=n.classificationType||u.ClassificationType.BOTH,e._clampToGround=n.clampToGround||!1,e._show=void 0===n.show||n.show,e._showByDistance=n.showByDistance||[0,Number.MAX_VALUE],e._properties=n.properties||{},e._material=new u.PolylineDashMaterialProperty({color:n.material.color?u.Color.fromCssColorString(n.material.color):u.Color.WHITE,gapColor:n.material.gapColor?u.Color.fromCssColorString(n.material.gapColor):u.Color.TRANSPARENT,dashLength:n.material.dashLength||16,dashPattern:n.material.dashPattern||255}),e._dynamic=n.dynamic||!1,!e._positions)throw"PolylineDash options positions is not defined!";e.value=new u.Entity({show:e._show,polyline:{positions:e._dynamic?new u.CallbackProperty(e._updatePositions,!1):c.default.coordinateArrayToPositions(e._positions),width:e._width,material:e._material,classificationType:e._classificationType,clampToGround:e._clampToGround,distanceDisplayCondition:new u.DistanceDisplayCondition(e._showByDistance[0],e._showByDistance[1])}})}catch(t){}return e}e.default=p},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(22),c=n(16),p=(o=a.default,i(h,o),h.prototype.setDynamicPositions=function(t){this._dynamic=!0,this._positions=t,this.value.polyline.positions=new l.CallbackProperty(this._updatePositions,!1)},Object.defineProperty(h.prototype,"positions",{get:function(){return this._positions},set:function(t){this._positions=t,this.value.polyline.positions=u.default.coordinateArrayToPositions(this._positions),this.resetProperty("positions",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.value.polyline.width=t,this.resetProperty("width",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"granularity",{get:function(){return this._granularity},set:function(t){this._granularity=t,this.value.polyline.granularity=t,this.resetProperty("granularity",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"classificationType",{get:function(){return this._classificationType},set:function(t){this._classificationType=t,this.value.polyline.classificationType=t,this.resetProperty("classificationType",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"clampToGround",{get:function(){return this._clampToGround},set:function(t){this._clampToGround=this.value,this.value.polyline.clampToGround=t,this.resetProperty("clampToGround",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"material",{get:function(){return this._material},set:function(t){this._material=Object.assign(this._material,t),t.color&&(this.value.polyline.material.color=l.Color.fromCssColorString(t.color)),t.outlineColor&&(this.value.polyline.material.outlineColor=l.Color.fromCssColorString(t.outlineColor)),t.outlineWidth&&(this.value.polyline.material.outlineWidth=t.outlineWidth),this.resetProperty("material",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"show",{get:function(){return this._show},set:function(t){this._show=t,this.value.show=t,this.resetProperty("show",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"showByDistance",{get:function(){return this._showByDistance},set:function(t){this._showByDistance=t,this.value.distanceDisplayCondition=new l.DistanceDisplayCondition(t[0],t[1]),this.resetProperty("showByDistance",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this.resetProperty("properties",t)},enumerable:!1,configurable:!0}),h);function h(t){var e=o.call(this)||this;e._updatePositions=function(){return e.resetProperty("positions",e._positions),u.default.coordinateArrayToPositions(e._positions)};try{o.prototype.fromJSON.call(e,t),e.type=s.default.POLYLINE_OUTLINE,e.class=c.default.ENTITY;var n=t||{};if(e._positions=n.positions,e._width=n.width||1,e._classificationType=n.classificationType||l.ClassificationType.BOTH,e._clampToGround=n.clampToGround||!1,e._show=void 0===n.show||n.show,e._showByDistance=n.showByDistance||[0,Number.MAX_VALUE],e._properties=n.properties||{},e._material=new l.PolylineOutlineMaterialProperty({color:n.material.color?l.Color.fromCssColorString(n.material.color):l.Color.WHITE,outlineColor:n.material.outlineColor?l.Color.fromCssColorString(n.material.outlineColor):l.Color.WHITE,outlineWidth:n.material.outlineWidth||1}),e._dynamic=n.dynamic||!1,!e._positions)throw"PolylineOutline options positions is not defined.";e.value=new l.Entity({show:e._show,polyline:{positions:e._dynamic?new l.CallbackProperty(e._updatePositions,!1):u.default.coordinateArrayToPositions(e._positions),width:e._width,material:e._material,classificationType:e._classificationType,clampToGround:e._clampToGround,distanceDisplayCondition:new l.DistanceDisplayCondition(e._showByDistance[0],e._showByDistance[1])}})}catch(t){}return e}e.default=p},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).POINT="Point",i.LINESTRING="LineString",i.POLYGON="Polygon",e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(t){var e=t.pointColor,n=t.pointScale,r=t.lineColor,n=1<n?n:1,i=document.createElement("canvas");i.height=50*n,i.width=Math.floor(5e3);var o=i.getContext("2d");return o.fillStyle=r||"rgba(255, 255, 255, 1)",o.fillRect(0,25*(n-1),i.width,50),o.fillStyle=e||"rgb(255, 255, 255)",o.arc(i.width/2,i.height/2,25*n,0,2*Math.PI),o.fill(),i.toDataURL()}var i=n(8),o=n(304),a=(s.prototype.getType=function(t){return i.Material.PolylineFlowLinkType},s.prototype.getValue=function(t,e){return i.defined(e)||(e={}),e.color=i.Property.getValueOrClonedDefault(this._color,t,i.Color.WHITE,e.color),e.image=this._image,t&&(void 0===this._time&&(this._time=t.secondsOfDay),e.time=1e3*(t.secondsOfDay-this._time)/this._duration),e},s.prototype.equals=function(t){return this===t||t instanceof s&&i.Property.equals(this._color,t._color)},Object.defineProperty(s.prototype,"isConstant",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"definitionChanged",{get:function(){return this._definitionChanged},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"duration",{get:function(){return this._duration},set:function(t){this._duration=t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"image",{get:function(){return this._image},set:function(t){this._image=t},enumerable:!1,configurable:!0}),s);function s(t){this._definitionChanged=new i.Event,this._color=void 0,this._colorSubscription=void 0,this.color=i.Color.fromCssColorString(t.color),this._duration=t.duration||1e3,this._dynamicPointScale=t.dynamicPointScale,this._dynamicPointColor=t.dynamicPointColor,this._time=void 0,this._image=t.image||r({lineColor:t.color,pointColor:this._dynamicPointColor,pointScale:this._dynamicPointScale})}Object.defineProperties(a.prototype,{color:i.createPropertyDescriptor("color")}),i.Material.PolylineFlowLinkType="PolylineFlowLink",i.Material._materialCache.addMaterial(i.Material.PolylineFlowLinkType,{fabric:{type:i.Material.PolylineFlowLinkType,uniforms:{color:new i.Color(1,0,0,1),image:r({pointColor:"rgba(255, 255, 255, 1)",pointScale:1.5,lineColor:"rgba(255, 255, 255, 1)"}),time:0},source:o},translucent:function(){return!0}}),e.default=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(8),s=n(19),l=n(11),u=n(22),c=n(16),p=(o=s.default,i(h,o),Object.defineProperty(h.prototype,"url",{get:function(){return this._url},set:function(t){this._url=t,this.value.url=t,this.resetProperty("url",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"altitude",{get:function(){return this._altitude},set:function(t){this._altitude=t,this._resetAltitude(t),this.resetProperty("altitude",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"definition",{get:function(){return this._definition},set:function(t){this._definition=t,this.value.maximumScreenSpaceError=t,this.resetProperty("definition",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"shadows",{get:function(){return this._shadows},set:function(t){this._shadows=t,this.value.shadows=t,this.resetProperty("shadows",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"wireframe",{get:function(){return this._wireframe},set:function(t){this._wireframe=t,this.value.debugWireframe=t,this.resetProperty("wireframe",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"show",{get:function(){return this._show},set:function(t){this._show=t,this.value.show=t,this.resetProperty("show",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"showByDistance",{get:function(){return this._showByDistance},set:function(t){this._showByDistance=t,this.resetProperty("showByCondition",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"position",{get:function(){return u.default.cartesianToDegrees(this.value.boundingSphere.center)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"skipLevelOfDetail",{get:function(){return this._skipLevelOfDetail},set:function(t){this._skipLevelOfDetail=t,this.value.skipLevelOfDetail=t,this.resetProperty("skipLevelOfDetail",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"baseScreenSpaceError",{get:function(){return this._baseScreenSpaceError},set:function(t){this._baseScreenSpaceError=t,this.value.baseScreenSpaceError=t,this.resetProperty("baseScreenSpaceError",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"skipScreenSpaceErrorFactor",{get:function(){return this._skipScreenSpaceErrorFactor},set:function(t){this._skipScreenSpaceErrorFactor=t,this.value.skipScreenSpaceErrorFactor=t,this.resetProperty("skipScreenSpaceErrorFactor",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"skipLevels",{get:function(){return this._skipLevels},set:function(t){this._skipLevels=t,this.value.skipLevels=t,this.resetProperty("skipLevels",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"onLoad",{get:function(){return this._onLoad},enumerable:!1,configurable:!0}),h.prototype._resetAltitude=function(t){var e=this.value.boundingSphere,n=a.Cartographic.fromCartesian(e.center),r=a.Cartesian3.fromRadians(n.longitude,n.latitude,0),i=a.Cartesian3.fromRadians(n.longitude,n.latitude,t),o=a.Cartesian3.subtract(i,r,new a.Cartesian3);this.value.modelMatrix=a.Matrix4.fromTranslation(o)},h.prototype._updatePosition=function(t){var e=a.Cartesian3.fromDegrees(t[0],t[1],t[2]),n=a.Transforms.eastNorthUpToFixedFrame(e);this.value.root.transform=n},h.prototype._getPosition=function(){var t=a.Cartographic.fromCartesian(this.value.boundingSphere.center);return[Number(a.Math.toDegrees(t.longitude).toFixed(10)),Number(a.Math.toDegrees(t.latitude).toFixed(10)),Number(t.height.toFixed(5))]},h);function h(t){var e=o.call(this)||this;try{var n=e;o.prototype.fromJSON.call(e,t),e.type=l.default.REAL_SCENCE_MODEL_TILESET,e.class=c.default.PRIMITIVE;var r=t||{};if(e._url=r.url,e._definition=r.definition||1,e._shadows=r.shadows||a.ShadowMode.ENABLED,e._position=r.position,e._altitude=r.altitude,e._wireframe=r.wireframe||!1,e._showByDistance=r.showByDistance,e._show=void 0===r.show||r.show,e._skipLevelOfDetail=a.defaultValue(r.skipLevelOfDetail,!0),e._baseScreenSpaceError=a.defaultValue(r.baseScreenSpaceError,1024),e._skipScreenSpaceErrorFactor=a.defaultValue(r.skipScreenSpaceErrorFactor,16),e._skipLevels=a.defaultValue(r.skipLevels,1),e._onLoad=new a.Event,!e._url)throw"RealSceneModelTileset options url is not defined.";e.value=new a.Cesium3DTileset({show:e._show,url:e._url,shadows:e._shadows,maximumScreenSpaceError:e._definition,skipLevelOfDetail:e._skipLevelOfDetail,baseScreenSpaceError:e._baseScreenSpaceError,skipScreenSpaceErrorFactor:e._skipScreenSpaceErrorFactor,skipLevels:e._skipLevels}),e.value.readyPromise.then(function(t){n._position&&n._updatePosition(e._position),n._altitude&&n._resetAltitude(n._altitude),e._onLoad.raiseEvent(e.value)}).otherwise(function(t){})}catch(t){}return e}e.default=p},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var l,u=n(8),o=n(19),c=n(11),p=n(131),a=n(22),h=n(135),f=n(305),d=n(16),y=(l=o.default,i(g,l),Object.defineProperty(g.prototype,"url",{get:function(){return this._url},set:function(t){this._url=t,this.value.url=t,this.resetProperty("url",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"clampToGround",{get:function(){return this._clampToGround},set:function(t){this._clampToGround=t,this.value.classificationType=!0===this._clampToGround?u.ClassificationType.BOTH:void 0,this.resetProperty("clampToGround",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"altitude",{get:function(){return this._altitude},set:function(t){this._altitude=t,this._resetAltitude(t),this.resetProperty("altitude",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"definition",{get:function(){return this._definition},set:function(t){this._definition=t,this.value.maximumScreenSpaceError=t,this.resetProperty("definition",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"shadows",{get:function(){return this._shadows},set:function(t){this._shadows=t,this.value.shadows=t,this.resetProperty("shadows",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"color",{get:function(){return this._color},set:function(t){var e;this._color=t,this.value.style&&this.value.style.color&&(e=this._getStyleParams(),this.value.style=new u.Cesium3DTileStyle(e)),this.resetProperty("color",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"showCondition",{get:function(){return this._showCondition},set:function(t){this._showCondition=t,this.value.style&&this.value.style.show&&(this.value.style.show=t),this.resetProperty("showCondition",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"show",{get:function(){return this._show},set:function(t){this._show=t,this.value.show=t,this.resetProperty("show",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"showByDistance",{get:function(){return this._showByDistance},set:function(t){this._showByDistance=t,this.resetProperty("showByDistance",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"luminanceAtZenith",{get:function(){return this._luminanceAtZenith},set:function(t){this._luminanceAtZenith=t,this.value.luminanceAtZenith=t,this.resetProperty("luminanceAtZenith",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"scatteringIntensity",{get:function(){return this._scatteringIntensity},set:function(t){this._scatteringIntensity=t,this.value.imageBasedLightingFactor=new u.Cartesian2(this._scatteringIntensity,this._specularIntensity),this.resetProperty("scatteringIntensity",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"specularIntensity",{get:function(){return this._specularIntensity},set:function(t){this._specularIntensity=t,this.value.imageBasedLightingFactor=new u.Cartesian2(this._scatteringIntensity,this._specularIntensity),this.resetProperty("specularIntensity",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"lightColor",{get:function(){return this._lightColor},set:function(t){this._lightColor=t;var e=u.Color.fromCssColorString(this._lightColor);this.value.lightColor=new u.Cartesian3(e.red,e.green,e.blue),this.resetProperty("lightColor",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"scienceFiction",{get:function(){return this._scienceFiction},set:function(t){this._scienceFictionSpec.setValue(t),this.value.customShader=this._scienceFictionSpec.enabled?h.default.unencrypt(this._scienceFictionSpec.getFragmentShader()):"",this.resetProperty("scienceFiction",t)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"position",{get:function(){return a.default.cartesianToDegrees(this.value.boundingSphere.center)},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"customShader",{get:function(){return this._customShader},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onLoad",{get:function(){return this._onLoad},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onSchemaCompleted",{get:function(){return this._onSchemaCompleted},enumerable:!1,configurable:!0}),g.prototype._resetAltitude=function(t){var e=this.value.boundingSphere,n=u.Cartographic.fromCartesian(e.center),r=u.Cartesian3.fromRadians(n.longitude,n.latitude,0),i=u.Cartesian3.fromRadians(n.longitude,n.latitude,t),o=u.Cartesian3.subtract(i,r,new u.Cartesian3);this.value.modelMatrix=u.Matrix4.fromTranslation(o)},g.prototype._getStyleParams=function(){var t={};return this._color&&(t.color=this._color),this._showCondition&&(t.show=this._showCondition),t!=={}?t:void 0},g.prototype._watchScienceFiction=function(){function e(){return r._scienceFictionSpec.enabled?h.default.unencrypt(r._scienceFictionSpec.getFragmentShader()):""}function n(){r.resetProperty("scienceFiction",r._scienceFictionSpec.getValue())}var r=this;this._scienceFiction=this._scienceFictionSpec.getValue(),Object.defineProperty(this._scienceFiction,"enabled",{get:function(){return r._scienceFictionSpec.enabled},set:function(t){r._scienceFictionSpec.enabled=t,r.value.customShader=e(),n()}}),Object.defineProperty(this._scienceFiction,"frequency",{get:function(){return r._scienceFictionSpec.frequency},set:function(t){r._scienceFictionSpec.frequency=t,r.value.customShader=e(),n()}}),Object.defineProperty(this._scienceFiction,"gradientIntensity",{get:function(){return r._scienceFictionSpec.gradientIntensity},set:function(t){r._scienceFictionSpec.gradientIntensity=t,r.value.customShader=e(),n()}}),Object.defineProperty(this._scienceFiction,"lineFrequency",{get:function(){return r._scienceFictionSpec.lineFrequency},set:function(t){r._scienceFictionSpec.lineFrequency=t,r.value.customShader=e(),n()}}),Object.defineProperty(this._scienceFiction,"lineWidth",{get:function(){return r._scienceFictionSpec.lineWidth},set:function(t){r._scienceFictionSpec.lineWidth=t,r.value.customShader=e(),n()}})},g);function g(t){var i=l.call(this)||this;i._scienceFiction={};try{l.prototype.fromJSON.call(i,t),i.type=c.default.FEATURE_MODEL_TILESET,i.class=d.default.PRIMITIVE;var e=t||{};i._url=e.url,i._clampToGround=e.clampToGround||!1,i._definition=e.definition||10,i._shadows=e.shadows||u.ShadowMode.ENABLED,i._color=e.color||"rgba(255,255,255,1)",i._showCondition=e.showCondition,i._altitude=e.altitude||0,i._show=void 0===e.show||e.show,i._showByDistance=e.showByDistance,i._customShader=e.customShader||void 0,i._luminanceAtZenith=e.luminanceAtZenith||.2,i._scatteringIntensity=e.scatteringIntensity||1,i._specularIntensity=e.specularIntensity||1,i._lightColor=e.lightColor;var n=(n=e.scienceFiction)||{enabled:!1};if(i._onLoad=new u.Event,i._onSchemaCompleted=new u.Event,i._scienceFictionSpec=new f.default(s({},n)),i._watchScienceFiction(),i._customShader=i._customShader||n.enabled?h.default.unencrypt(i._scienceFictionSpec.getFragmentShader()):"",!i._url)throw"FeatureModelTileset options url is not defined.";var r=i._lightColor&&u.Color.fromCssColorString(i._lightColor);i.value=new u.Cesium3DTileset({show:i._show,url:i._url,shadows:i._shadows,maximumScreenSpaceError:i._definition,customShader:i._customShader,classificationType:!0===i._clampToGround?u.ClassificationType.BOTH:void 0,luminanceAtZenith:i._luminanceAtZenith,lightColor:r&&new u.Cartesian3(r.red,r.green,r.blue),imageBasedLightingFactor:new u.Cartesian2(i._scatteringIntensity,i._specularIntensity)});var o=function(t){var e,n=t.content,r=n.featuresLength;!i._schema&&0<r&&(e=new p.default(n.getFeature(0)),i._schema=e.getJsonSchema(),i._onSchemaCompleted.raiseEvent(i._schema),i.value.tileVisible.removeEventListener(o))};i.value.tileVisible.addEventListener(o),i.value.readyPromise.then(function(t){i._resetAltitude(i._altitude),i._onLoad.raiseEvent(i.value)}).otherwise(function(t){});var a=i._getStyleParams();a&&(i.value.style=new u.Cesium3DTileStyle(a))}catch(t){}return i}e.default=y},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).X="x",i.Y="y",i.Z="z",e.default=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(22),c=n(309),p=n(16),h=(o=a.default,i(f,o),Object.defineProperty(f.prototype,"positions",{get:function(){return this._positions},set:function(t){this._positions=t,this.value.geometryInstances.geometry=this._createGeometry(t),this.resetProperty("positions",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"baseWaterColor",{get:function(){return this._baseWaterColor},set:function(t){this._baseWaterColor=t,this.value.appearance=this._createCurrentAppearance(),this.resetProperty("baseWaterColor",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"normalMapUrl",{get:function(){return this._normalMapUrl},set:function(t){this._normalMapUrl=t,this.value.appearance=this._createCurrentAppearance(),this.resetProperty("normalMapUrl",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency=t,this.value.appearance=this._createCurrentAppearance(),this.resetProperty("frequency",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.value.appearance=this._createCurrentAppearance(),this.resetProperty("speed",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"amplitude",{get:function(){return this._amplitude},set:function(t){this._amplitude=t,this.value.appearance=this._createCurrentAppearance(),this.resetProperty("amplitude",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"specularIntensity",{get:function(){return this._specularIntensity},set:function(t){this._specularIntensity=t,this.value.appearance=this._createCurrentAppearance(),this.resetProperty("specularIntensity",t)},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"extent",{get:function(){var t=Math.min.apply(Math,this._positions.map(function(t){return t[0]})),e=Math.max.apply(Math,this._positions.map(function(t){return t[0]}));return[t,Math.min.apply(Math,this._positions.map(function(t){return t[1]})),e,Math.max.apply(Math,this._positions.map(function(t){return t[1]}))]},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this.resetProperty("properties",t)},enumerable:!1,configurable:!0}),f.prototype._createGeometry=function(t){return new l.PolygonGeometry({polygonHierarchy:new l.PolygonHierarchy(u.default.coordinateArrayToPositions(t)),perPositionHeight:!0})},f.prototype._createAppearance=function(t){return new l.EllipsoidSurfaceAppearance({material:new l.Material({fabric:{type:"Water",uniforms:{baseWaterColor:l.Color.fromCssColorString(t.baseWaterColor),normalMap:t.normalMap,frequency:t.frequency,speed:t.speed,amplitude:t.amplitude,specularIntensity:t.specularIntensity}}}),fragmentShaderSource:t.fragmentShaders})},f.prototype._createCurrentAppearance=function(){return this._createAppearance({baseWaterColor:this._baseWaterColor,normalMap:this._normalMapUrl,frequency:this._frequency,speed:this._speed,amplitude:this._amplitude,fragmentShader:c,specularIntensity:this._specularIntensity})},f);function f(t){var e=o.call(this)||this;try{o.prototype.fromJSON.call(e,t),e.type=s.default.DYNAMIC_WATER_SURFACE,e.class=p.default.PRIMITIVE;var n=t||{};e._positions=n.positions,e._normalMapUrl=CESIUM_BASE_URL+"Assets/Images/material/waterNormals.jpg",e._frequency=n.frequency||5e3,e._speed=n.speed||.05,e._amplitude=n.amplitude||2,e._baseWaterColor=n.baseWaterColor||"rgba(57,82, 139, 0.7)",e._specularIntensity=n.specularIntensity||.2,e._properties=n.properties||{},e.value=new l.Primitive({allowPicking:!1,geometryInstances:new l.GeometryInstance({geometry:e._createGeometry(e._positions)}),appearance:e._createCurrentAppearance(),asynchronous:!1})}catch(t){}return e}e.default=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(19),l=n(11),u=n(16),c=n(26),p=n(12),h=n(20),f=n(8),d=n(27),y={convert:function(t){var e=t.color,n=t.opacity;return new f.Material({fabric:{type:"Color",uniforms:{color:f.Color.fromCssColorString(e).withAlpha(n)}}})},convertParams:["color","opacity"],target:"material"},g={type:{type:"string",value:l.default.POLYLINE_PRIMITIVE_COLLECTION,readonly:!0},class:{type:"string",value:u.default.PRIMITIVE_COLLECTION,readonly:!0},data:{type:"array",value:[],readonly:!0},positions:{type:"function|array",value:null,convert:c.arrayToCartesianPositions},width:{type:"function|number",value:1,target:"width"},loop:{type:"function|boolean",value:!0,target:"loop"},color:o({type:"function|string",value:"rgb(255,255,0)"},y),show:{type:"function|boolean",value:!0},opacity:o({type:"function|number",value:1},y),showByDistance:{type:"function|array",value:[0,Number.MAX_VALUE],convert:c.arrayToDistanceDisplayCondition,target:"distanceDisplayCondition"},properties:{type:"object",value:{}}},_=(a=s.default,i(m,a),m.prototype.add=function(t){var e;p.isObject(t)&&(this._data.push(t),e=h.getPerOptions(this,g,d.default(t)),this.value.add(e))},m.prototype.remove=function(e){var t,n;p.isObject(e)&&(t=this.data.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)}),(n=this.value.get(t))&&(this.value.remove(n),this._data.splice(t,1)))},m.prototype.removeAll=function(){this.value.removeAll(),this._data=[]},m.prototype.getPrimitiveOptions=function(t){for(var n=this,r=-1,e=0,i=this.value.length;e<i;e++)if(t===this.value.get(e)){r=e;break}if(0<=r){var o={};return Object.getOwnPropertyNames(g).forEach(function(t){var e=returnAvailableValue(n[t],g[t].value);o[t]=isFunction(e)?e(n.data[r]):e}),o.properties=this.data[r],o}},m);function m(t){var l=a.call(this)||this;try{if(a.prototype.fromJSON.call(l,t),!p.isObject(t))throw"error: PolylinePrimitiveCollection. The options is not a Object.";if(!t.data)throw"error: PolylinePrimitiveCollection. The data of options is not defined.";h.definedProperties(l,g,t,function(t){var o=t.name,a=(t.value,t.convert),s=t.convertParams;t.target.forEach(function(t){for(var e=0,n=l.value.length;e<n;e++){var r=h.getFullOptions(g,d.default(l.data[e])),i=h.getConvertParams(l,s,o,r,t);s&&(i.target=t),l.value.get(e)[t]=a(i)}})}),l.value=new f.PolylineCollection,l.data.forEach(function(t){var e=h.getPerOptions(l,g,d.default(t));l.value.add(e)})}catch(t){}return l}_.defaultProps=g,e.default=_},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(16),u=n(12),c=n(20),p=n(8),h=n(26),f=n(27),d={type:{type:"string",value:s.default.BILLBOARD_PRIMITIVE_COLLECTION,readonly:!0},class:{type:"string",value:l.default.PRIMITIVE_COLLECTION,readonly:!0},data:{type:"array",value:[],readonly:!0},position:{type:"function|array",value:null,convert:h.arrayToCartesianPosition},image:{type:"function|string",value:null,required:!0,target:"image"},pixelOffset:{type:"function|array",value:[0,0],convert:h.arrayToCartesian2,target:"pixelOffset"},scale:{type:"function|number",value:1,target:"scale"},color:{type:"function|string",value:"rgb(255,255,255)",convert:h.stringToColor,target:"color"},rotation:{type:"function|number",value:0,convert:p.Math.toRadians,target:"rotation"},width:{type:"function|number",value:32,target:"width"},height:{type:"function|number",value:32,target:"height"},show:{type:"function|boolean",value:!0},opacity:{type:"function|number",value:1,convert:function(t){var e=t.color,n=t.opacity;return h.stringToColor(e).withAlpha(n)},convertParams:["color","opacity"],target:"color"},showByDistance:{type:"function|array",value:[0,Number.MAX_VALUE],convert:h.arrayToDistanceDisplayCondition,target:"distanceDisplayCondition"},properties:{type:"object",value:{}}},y=(o=a.default,i(g,o),g.prototype.add=function(t){var e;u.isObject(t)&&(this._data.push(t),e=c.getPerOptions(this,d,f.default(t)),this.value.add(e))},g.prototype.remove=function(e){var t,n;u.isObject(e)&&(t=this.data.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)}),(n=this.value.get(t))&&(this.value.remove(n),this._data.splice(t,1)))},g.prototype.removeAll=function(){this.value.removeAll(),this._data=[]},g.prototype.getPrimitiveOptions=function(t){for(var n=this,r=-1,e=0,i=this.value.length;e<i;e++)if(t===this.value.get(e)){r=e;break}if(0<=r){var o={};return Object.getOwnPropertyNames(d).forEach(function(t){var e=c.returnAvailableValue(n[t],d[t].value);o[t]=u.isFunction(e)?e(n.data[r]):e}),o.properties=this.data[r],o}},g);function g(t){var l=o.call(this)||this;try{if(o.prototype.fromJSON.call(l,t),!u.isObject(t))throw"error: BillboardPrimitiveCollection. The options is not a Object.";if(!t.data)throw"error: BillboardPrimitiveCollection. The data of options is not defined.";c.definedProperties(l,d,t,function(t){var o=t.name,a=(t.value,t.convert),s=t.convertParams;t.target.forEach(function(t){for(var e=0,n=l.value.length;e<n;e++){var r=c.getFullOptions(d,f.default(l.data[e])),i=c.getConvertParams(l,s,o,r,t);s&&(i.target=t),l.value.get(e)[t]=a(i)}})}),l.value=new p.BillboardCollection,l.data.forEach(function(t){var e=c.getPerOptions(l,d,f.default(t));l.value.add(e)})}catch(t){}return l}y.defaultProps=d,e.default=y},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});function o(t){var e=t.fill,n=t.outline;return e&&n?h.LabelStyle.FILL_AND_OUTLINE:!e&&n?h.LabelStyle.OUTLINE:h.LabelStyle.FILL}var a,s=n(19),l=n(11),u=n(16),c=n(12),p=n(20),h=n(8),f=n(26),d=n(27),y={type:{type:"string",value:l.default.LABEL_PRIMITIVE_COLLECTION,readonly:!0},class:{type:"string",value:u.default.PRIMITIVE_COLLECTION,readonly:!0},data:{type:"array",value:[],readonly:!0},position:{type:"function|array",value:null,convert:f.arrayToCartesianPosition},show:{type:"function|boolean",value:!0},scale:{type:"function|number",value:1,target:"scale"},showBackground:{type:"function|boolean",value:!1,target:"showBackground"},backgroundColor:{type:"function|string",value:"rgb(42,42,42)",convert:f.stringToColor,target:"backgroundColor"},backgroundPadding:{type:"function|array",value:[7,5],convert:f.arrayToCartesian2,target:"backgroundPadding"},pixelOffset:{type:"function|array",value:[0,0],convert:f.arrayToCartesian2,target:"pixelOffset"},eyeOffset:{type:"function|array",value:[0,0,0],convert:f.arrayToCartesian3,target:"eyeOffset"},text:{type:"function|string",value:null,target:"text"},font:{type:"function|string",value:"30px sans-serif",target:"font"},fill:{type:"function|boolean",value:!0,convert:o,convertParams:["fill","outline"],target:"style"},outline:{type:"function|boolean",value:!0,convert:o,convertParams:["fill","outline"],target:"style"},fillColor:{type:"function|string",value:"rgb(255,255,255)",convert:f.stringToColor,target:"fillColor"},outlineColor:{type:"function|string",value:"rgb(0,0,0)",convert:f.stringToColor,target:"outlineColor"},outlineWidth:{type:"function|number",value:1,target:"outlineWidth"},opacity:{type:"function|number",value:1,convert:function(t){var e=t.backgroundColor,n=t.fillColor,r=t.outlineColor,i=t.opacity;switch(t.target){case"backgroundColor":return f.stringToColor(e).withAlpha(i);case"fillColor":return f.stringToColor(n).withAlpha(i);case"outlineColor":return f.stringToColor(r).withAlpha(i)}},convertParams:["backgroundColor","fillColor","outlineColor","opacity"],target:["backgroundColor","fillColor","outlineColor"]},showByDistance:{type:"function|array",value:[0,Number.MAX_VALUE],convert:f.arrayToDistanceDisplayCondition,target:"distanceDisplayCondition"},properties:{type:"object",value:{}}},g=(a=s.default,i(_,a),_.prototype.add=function(t){var e;c.isObject(t)&&(this._data.push(t),e=p.getPerOptions(this,y,d.default(t)),this.value.add(e))},_.prototype.remove=function(e){var t,n;c.isObject(e)&&(t=this.data.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)}),(n=this.value.get(t))&&(this.value.remove(n),this._data.splice(t,1)))},_.prototype.removeAll=function(){this.value.removeAll(),this._data=[]},_.prototype.getPrimitiveOptions=function(t){for(var n=this,r=-1,e=0,i=this.value.length;e<i;e++)if(t===this.value.get(e)){r=e;break}if(0<=r){var o={};return Object.getOwnPropertyNames(y).forEach(function(t){var e=p.returnAvailableValue(n[t],y[t].value);o[t]=c.isFunction(e)?e(n.data[r]):e}),o.properties=this.data[r],o}},_);function _(t){var l=a.call(this)||this;try{if(a.prototype.fromJSON.call(l,t),!c.isObject(t))throw"error: LabelPrimitiveCollection. The options is not a Object.";if(!t.data)throw"error: LabelPrimitiveCollection. The data of options is not defined.";p.definedProperties(l,y,t,function(t){var o=t.name,a=(t.value,t.convert),s=t.convertParams;t.target.forEach(function(t){for(var e=0,n=l.value.length;e<n;e++){var r=p.getFullOptions(y,d.default(l.data[e])),i=p.getConvertParams(l,s,o,r,t);s&&(i.target=t),l.value.get(e)[t]=a(i)}})}),l.value=new h.LabelCollection,l.data.forEach(function(t){var e=p.getPerOptions(l,y,d.default(t));l.value.add(e)})}catch(t){}return l}g.defaultProps=y,e.default=g},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var s,o=n(19),l=n(11),u=n(16),c=n(12),a=n(8),p=a.Cartesian3,h=a.HeadingPitchRoll,f=a.Math,d=a.Transforms,y=a.ModelInstanceCollection,g=a.Matrix4,_=a.Event,m=a.defaultValue,v=a.PrimitiveCollection,b=(s=o.default,i(w,s),Object.defineProperty(w.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.changeModelInstanceCollection()},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation=t,this.changeModelInstanceCollection()},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t,this.changeModelInstanceCollection()},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"url",{get:function(){return this._url},set:function(t){this._url=t,this.changeModelInstanceCollection()},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"show",{get:function(){return this._show},set:function(t){this._show=t,this.changeModelInstanceCollection()},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this.resetProperty("properties",t)},enumerable:!1,configurable:!0}),w.prototype.changeModelInstanceCollection=function(){var o=this,a=[];this._data.forEach(function(t){var e=t.position||o._position,n=t.orientation||o._orientation,r=t.scale||o._scale,i=d.headingPitchRollToFixedFrame(p.fromDegrees(e[0],e[1],e[2]),new h(f.toRadians(Number(n[0])),f.toRadians(Number(n[1])),f.toRadians(Number(n[2]))));g.multiplyByUniformScale(i,r,i),a.push({modelMatrix:i})});var t=new y({instances:a,url:this._url,show:this._show}),e=this.value.get(0);this.value.remove(e),this.value.add(t)},w.prototype.add=function(t){c.isObject(t)&&(this._data.push(t),this.changeModelInstanceCollection())},w.prototype.remove=function(e){var t;c.isObject(e)&&(t=this._data.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)}),this._data.splice(t,1),this.changeModelInstanceCollection())},w.prototype.removeAll=function(){this.value.removeAll(),this._data=[]},w.prototype.getPrimitiveOptions=function(t){for(var e=-1,n=this.value.get(0)._instances,r=0,i=n.length;r<i;r++)if(t===n[r]){e=r;break}return this._data[e]},w);function w(t){var o=s.call(this)||this;try{if(s.prototype.fromJSON.call(o,t),o._onClick=new _,o._onHover=new _,o.type=l.default.MODEL_PRIMITIVE_COLLECTION,o.class=u.default.PRIMITIVE_COLLECTION,!c.isObject(t))throw"error: ModelPrimitiveCollection. The options is not a Object.";if(!t.data)throw"error: ModelPrimitiveCollection. The data of options is not defined.";var e=t||{};o._position=e.position,o._orientation=m(e.orientation,[0,0,0]),o._scale=m(e.scale,1),o._url=m(e.url,""),o._show=m(e.show,!0),o._properties=m(e.properties,{});var a=[];o._data=t.data,t.data.forEach(function(t){var e=t.position||o._position,n=t.orientation||o._orientation,r=t.scale||o._scale,i=d.headingPitchRollToFixedFrame(p.fromDegrees(e[0],e[1],e[2]),new h(f.toRadians(Number(n[0])),f.toRadians(Number(n[1])),f.toRadians(Number(n[2]))));g.multiplyByUniformScale(i,r,i),a.push({modelMatrix:i})});var n=new y({instances:a,url:o._url,show:o._show});o.value=new v,o.value.add(n)}catch(t){}return o}e.default=b},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(16),c=n(12),p=n(26),h=n(20),f={type:{type:"string",value:s.default.WALL,readonly:!0},class:{type:"string",value:u.default.ENTITY,readonly:!0},positions:{type:"array",value:null,convert:p.arrayToCartesianPositions,target:"wall.positions"},minimumHeights:{type:"array",value:null,target:"wall.minimumHeights"},maximumHeights:{type:"array",value:null,target:"wall.maximumHeights"},show:{type:"boolean",value:!0,target:"wall.show"},fill:{type:"boolean",value:!0,target:"wall.fill"},fillColor:{type:"string",value:"rgb(255,255,255)",convert:function(t){var e=t.fillColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"wall.material"},outline:{type:"boolean",value:!1,target:"wall.outline"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"wall.outlineColor"},outlineWidth:{type:"number",value:1,target:"wall.outlineWidth"},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"wall.material":return l.Color.fromCssColorString(e).withAlpha(r);case"wall.outlineColor":return l.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["wall.material","wall.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:"wall.distanceDisplayCondition"},properties:{type:"object",value:{}}},d=(o=a.default,i(y,o),Object.defineProperty(y.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),y);function y(t){var e=o.call(this)||this;try{if(o.prototype.fromJSON.call(e,t),e._onClick=new l.Event,e._onHover=new l.Event,!c.isObject(t))throw"error: Wall. The options is not a Object.";if(!t.positions)throw"error: Wall. The option of positions is not defined.";h.definedProperties(e,f,t);var n=h.getPerOptions(e,f,t);e.value=new l.Entity(n)}catch(t){}return e}d.defaultProps=f,e.default=d},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(16),c=n(12),p=n(26),h=n(20),f={type:{type:"string",value:s.default.BOX,readonly:!0},class:{type:"string",value:u.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:p.arrayToCartesianPosition},dimensions:{type:"array",value:null,convert:p.arrayToCartesian3,target:"box.dimensions"},show:{type:"boolean",value:!0,target:"box.show"},fill:{type:"boolean",value:!0,target:"box.fill"},fillColor:{type:"string",value:"rgb(255,255,255)",convert:function(t){var e=t.fillColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"box.material"},outline:{type:"boolean",value:!1,target:"box.outline"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"box.outlineColor"},outlineWidth:{type:"number",value:1,target:"box.outlineWidth"},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"box.material":return l.Color.fromCssColorString(e).withAlpha(r);case"box.outlineColor":return l.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["box.material","box.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:"box.distanceDisplayCondition"},properties:{type:"object",value:{}}},d=(o=a.default,i(y,o),Object.defineProperty(y.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),y);function y(t){var e=o.call(this)||this;try{if(o.prototype.fromJSON.call(e,t),e._onClick=new l.Event,e._onHover=new l.Event,!c.isObject(t))throw"error: Box. The options is not a Object.";if(!t.position)throw"error: Box. The position of options is not defined.";h.definedProperties(e,f,t);var n=h.getPerOptions(e,f,t);e.value=new l.Entity(n)}catch(t){}return e}d.defaultProps=f,e.default=d},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(16),c=n(12),p=n(26),h=n(20),f={type:{type:"string",value:s.default.CORRIDOR,readonly:!0},class:{type:"string",value:u.default.ENTITY,readonly:!0},positions:{type:"array",value:null,convert:p.arrayToCartesianPositions,target:"corridor.positions"},width:{type:"number",value:0,target:"corridor.width"},height:{type:"number",value:void 0,target:"corridor.height"},show:{type:"boolean",value:!0,target:"corridor.show"},fill:{type:"boolean",value:!0,target:"corridor.fill"},fillColor:{type:"string",value:"rgb(255,255,255)",convert:function(t){var e=t.fillColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"corridor.material"},outline:{type:"boolean",value:!1,target:"corridor.outline"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"corridor.outlineColor"},outlineWidth:{type:"number",value:1,target:"corridor.outlineWidth"},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"corridor.material":return l.Color.fromCssColorString(e).withAlpha(r);case"corridor.outlineColor":return l.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["corridor.material","corridor.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:"corridor.distanceDisplayCondition"},properties:{type:"object",value:{}}},d=(o=a.default,i(y,o),Object.defineProperty(y.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),y);function y(t){var e=o.call(this)||this;try{if(o.prototype.fromJSON.call(e,t),e._onClick=new l.Event,e._onHover=new l.Event,!c.isObject(t))throw"error: Corridor. The options is not a Object.";if(!t.positions)throw"error: Corridor. The option of positions is not defined.";h.definedProperties(e,f,t);var n=h.getPerOptions(e,f,t);n.corridor.classificationType=l.ClassificationType.BOTH,e.value=new l.Entity(n)}catch(t){}return e}d.defaultProps=f,e.default=d},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(16),c=n(12),p=n(26),h=n(20),f={type:{type:"string",value:s.default.CYLINDER,readonly:!0},class:{type:"string",value:u.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:p.arrayToCartesianPosition},length:{type:"number",value:0,target:"cylinder.length"},topRadius:{type:"number",value:0,target:"cylinder.topRadius"},bottomRadius:{type:"number",value:0,target:"cylinder.bottomRadius"},show:{type:"boolean",value:!0,target:"cylinder.show"},fill:{type:"boolean",value:!0,target:"cylinder.fill"},fillColor:{type:"string",value:"rgb(255,255,255)",convert:function(t){var e=t.fillColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"cylinder.material"},outline:{type:"boolean",value:!1,target:"cylinder.outline"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"cylinder.outlineColor"},outlineWidth:{type:"number",value:1,target:"cylinder.outlineWidth"},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"cylinder.material":return l.Color.fromCssColorString(e).withAlpha(r);case"cylinder.outlineColor":return l.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["cylinder.material","cylinder.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:"cylinder.distanceDisplayCondition"},properties:{type:"object",value:{}}},d=(o=a.default,i(y,o),Object.defineProperty(y.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),y);function y(t){var e=o.call(this)||this;try{if(o.prototype.fromJSON.call(e,t),e._onClick=new l.Event,e._onHover=new l.Event,!c.isObject(t))throw"error: Cylinder. The options is not a Object.";if(!t.position)throw"error: Cylinder. The position of options is not defined.";h.definedProperties(e,f,t);var n=h.getPerOptions(e,f,t);n.cylinder.classificationType=l.ClassificationType.BOTH,e.value=new l.Entity(n)}catch(t){}return e}d.defaultProps=f,e.default=d},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(16),c=n(12),p=n(26),h=n(20),f={type:{type:"string",value:s.default.ELLIPSE,readonly:!0},class:{type:"string",value:u.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:p.arrayToCartesianPosition},semiMajorAxis:{type:"number",value:0,target:"ellipse.semiMajorAxis"},semiMinorAxis:{type:"number",value:0,target:"ellipse.semiMinorAxis"},height:{type:"number",value:void 0,target:"ellipse.height"},rotation:{type:"number",value:0,convert:p.numberToRadis,target:"ellipse.rotation"},stRotation:{type:"number",value:0,convert:p.numberToRadis,target:"ellipse.stRotation"},show:{type:"boolean",value:!0,target:"ellipse.show"},fill:{type:"boolean",value:!0,target:"ellipse.fill"},fillColor:{type:"string",value:"rgb(255,255,255)",convert:function(t){var e=t.fillColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"ellipse.material"},outline:{type:"boolean",value:!1,target:"ellipse.outline"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"ellipse.outlineColor"},outlineWidth:{type:"number",value:1,target:"ellipse.outlineWidth"},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"ellipse.material":return l.Color.fromCssColorString(e).withAlpha(r);case"ellipse.outlineColor":return l.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["ellipse.material","ellipse.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:"ellipse.distanceDisplayCondition"},properties:{type:"object",value:{}}},d=(o=a.default,i(y,o),Object.defineProperty(y.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),y);function y(t){var e=o.call(this)||this;try{if(o.prototype.fromJSON.call(e,t),e._onClick=new l.Event,e._onHover=new l.Event,!c.isObject(t))throw"error: Ellipse. The options is not a Object.";if(!t.position)throw"error: Ellipse. The position of options is not defined.";h.definedProperties(e,f,t);var n=h.getPerOptions(e,f,t);n.ellipse.classificationType=l.ClassificationType.BOTH,e.value=new l.Entity(n)}catch(t){}return e}d.defaultProps=f,e.default=d},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(16),c=n(12),p=n(26),h=n(20),f={type:{type:"string",value:s.default.ELLIPSOID,readonly:!0},class:{type:"string",value:u.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:p.arrayToCartesianPosition},radii:{type:"number",value:0,convert:p.arrayToCartesian3,target:"ellipsoid.radii"},innerRadii:{type:"number",value:[1,1,1],convert:p.arrayToCartesian3,target:"ellipsoid.innerRadii"},minimumClock:{type:"number",value:0,target:"ellipsoid.minimumClock"},maximumClock:{type:"number",value:2*Math.PI,target:"ellipsoid.maximumClock"},minimumCone:{type:"number",value:0,target:"ellipsoid.minimumCone"},maximumCone:{type:"number",value:Math.PI,target:"ellipsoid.maximumCone"},show:{type:"boolean",value:!0,target:"ellipsoid.show"},fill:{type:"boolean",value:!0,target:"ellipsoid.fill"},fillColor:{type:"string",value:"rgb(255,255,255)",convert:function(t){var e=t.fillColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"ellipsoid.material"},outline:{type:"boolean",value:!1,target:"ellipsoid.outline"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"ellipsoid.outlineColor"},outlineWidth:{type:"number",value:1,target:"ellipsoid.outlineWidth"},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"ellipsoid.material":return l.Color.fromCssColorString(e).withAlpha(r);case"ellipsoid.outlineColor":return l.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["ellipsoid.material","ellipsoid.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:"ellipsoid.distanceDisplayCondition"},properties:{type:"object",value:{}}},d=(o=a.default,i(y,o),Object.defineProperty(y.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),y);function y(t){var e=o.call(this)||this;try{if(o.prototype.fromJSON.call(e,t),e._onClick=new l.Event,e._onHover=new l.Event,!c.isObject(t))throw"error: Ellipsoid. The options is not a Object.";if(!t.position)throw"error: Ellipsoid. The position of options is not defined.";h.definedProperties(e,f,t);var n=h.getPerOptions(e,f,t);e.value=new l.Entity(n)}catch(t){}return e}d.defaultProps=f,e.default=d},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});function o(t){var e=h.arrayToCartesian3(t.normal),n=t.distance;return new u.Plane(e,n)}var a,s=n(19),l=n(11),u=n(8),c=n(16),p=n(12),h=n(26),f=n(20),d={type:{type:"string",value:l.default.PLANE,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:h.arrayToCartesianPosition},dimensions:{type:"array",value:null,convert:h.arrayToCartesian2,target:"plane.dimensions"},normal:{type:"array",value:[1,0,0],convert:o,convertParams:["normal","distance"],target:"plane.plane"},distance:{type:"number",value:0,convert:o,convertParams:["normal","distance"],target:"plane.plane"},show:{type:"boolean",value:!0,target:"plane.show"},fill:{type:"boolean",value:!0,target:"plane.fill"},fillColor:{type:"string",value:"rgb(255,255,255)",convert:function(t){var e=t.fillColor,n=t.opacity;return u.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"plane.material"},outline:{type:"boolean",value:!1,target:"plane.outline"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return u.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"plane.outlineColor"},outlineWidth:{type:"number",value:1,target:"plane.outlineWidth"},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"plane.material":return u.Color.fromCssColorString(e).withAlpha(r);case"plane.outlineColor":return u.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["plane.material","plane.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:h.arrayToDistanceDisplayCondition,target:"plane.distanceDisplayCondition"},properties:{type:"object",value:{}}},y=(a=s.default,i(g,a),Object.defineProperty(g.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),g);function g(t){var e=a.call(this)||this;try{if(a.prototype.fromJSON.call(e,t),e._onClick=new u.Event,e._onHover=new u.Event,!p.isObject(t))throw"error: Plane. The options is not a Object.";if(!t.position)throw"error: Plane. The position of options is not defined.";f.definedProperties(e,d,t);var n=f.getPerOptions(e,d,t);e.value=new u.Entity(n)}catch(t){}return e}y.defaultProps=d,e.default=y},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(16),c=n(12),p=n(26),h=n(20),f={type:{type:"string",value:s.default.POLYLINE_VOLUME,readonly:!0},class:{type:"string",value:u.default.ENTITY,readonly:!0},positions:{type:"array",value:null,convert:p.arrayToCartesianPositions,target:"polylineVolume.positions"},shape:{type:"array",value:null,convert:function(t){return t.map(function(t){return p.arrayToCartesian2(t)})},target:"polylineVolume.shape"},show:{type:"boolean",value:!0,target:"polylineVolume.show"},fill:{type:"boolean",value:!0,target:"polylineVolume.fill"},fillColor:{type:"string",value:"rgb(255,255,255)",convert:function(t){var e=t.fillColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"polylineVolume.material"},outline:{type:"boolean",value:!1,target:"polylineVolume.outline"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"polylineVolume.outlineColor"},outlineWidth:{type:"number",value:1,target:"polylineVolume.outlineWidth"},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"polylineVolume.material":return l.Color.fromCssColorString(e).withAlpha(r);case"polylineVolume.outlineColor":return l.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["polylineVolume.material","polylineVolume.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:"polylineVolume.distanceDisplayCondition"},properties:{type:"object",value:{}}},d=(o=a.default,i(y,o),Object.defineProperty(y.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),y);function y(t){var e=o.call(this)||this;try{if(o.prototype.fromJSON.call(e,t),e._onClick=new l.Event,e._onHover=new l.Event,!c.isObject(t))throw"error: PolylineVolume. The options is not a Object.";if(!t.positions)throw"error: PolylineVolume. The option of positions is not defined.";h.definedProperties(e,f,t);var n=h.getPerOptions(e,f,t);e.value=new l.Entity(n)}catch(t){}return e}d.defaultProps=f,e.default=d},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(16),c=n(12),p=n(26),h=n(20),f={type:{type:"string",value:s.default.RECTANGLE,readonly:!0},class:{type:"string",value:u.default.ENTITY,readonly:!0},positions:{type:"array",value:null,convert:function(t){var e=[].concat.apply([],t);return l.Rectangle.fromDegrees(e[0],e[1],e[2],e[3])},target:"rectangle.coordinates"},height:{type:"number",value:void 0,target:"rectangle.height"},rotation:{type:"number",value:0,convert:p.numberToRadis,target:"rectangle.rotation"},stRotation:{type:"number",value:0,convert:p.numberToRadis,target:"rectangle.stRotation"},show:{type:"boolean",value:!0,target:"rectangle.show"},fill:{type:"boolean",value:!0,target:"rectangle.fill"},fillColor:{type:"string",value:"rgb(255,255,255)",convert:function(t){var e=t.fillColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"rectangle.material"},outline:{type:"boolean",value:!1,target:"rectangle.outline"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"rectangle.outlineColor"},outlineWidth:{type:"number",value:1,target:"rectangle.outlineWidth"},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"rectangle.material":return l.Color.fromCssColorString(e).withAlpha(r);case"rectangle.outlineColor":return l.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["rectangle.material","rectangle.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:"rectangle.distanceDisplayCondition"},properties:{type:"object",value:{}}},d=(o=a.default,i(y,o),Object.defineProperty(y.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(y.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),y);function y(t){var e=o.call(this)||this;try{if(o.prototype.fromJSON.call(e,t),e._onClick=new l.Event,e._onHover=new l.Event,!c.isObject(t))throw"error: Rectangle. The options is not a Object.";if(!t.positions)throw"error: Rectangle. The option of positions is not defined.";h.definedProperties(e,f,t);var n=h.getPerOptions(e,f,t);n.rectangle.classificationType=l.ClassificationType.BOTH,e.value=new l.Entity(n)}catch(t){}return e}d.defaultProps=f,e.default=d},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});function o(t){var e=t.textFill,n=t.textOutline;return e&&n?u.LabelStyle.FILL_AND_OUTLINE:!e&&n?u.LabelStyle.OUTLINE:u.LabelStyle.FILL}var a,s=n(19),l=n(11),u=n(8),c=n(92),p=n(93),h=n(202),f=n(12),d=n(16),y=n(26),g=n(20),_=n(94),m={type:{type:"string",value:l.default.BILLBOARD,readonly:!0},class:{type:"string",value:d.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:y.arrayToCartesianPosition},pixelOffset:{type:"array",value:[0,0],convert:y.arrayToCartesian2,target:"billboard.pixelOffset"},horizontalOrigin:{type:"string",value:u.HorizontalOrigin.CENTER,convert:c.default,target:"billboard.horizontalOrigin"},verticalOrigin:{type:"string",value:u.VerticalOrigin.CENTER,convert:p.default,target:"billboard.verticalOrigin"},scale:{type:"number",value:1,target:"billboard.scale"},color:{type:"string",value:"rgb(255,255,255)",convert:y.stringToColor,target:"billboard.color"},rotation:{type:"number",value:0,convert:u.Math.toRadians,target:"billboard.rotation"},width:{type:"number",value:32,target:"billboard.width"},height:{type:"number",value:32,target:"billboard.height"},text:{type:"string",value:null,target:"label.text"},textFont:{type:"string",value:"12px Microsoft YaHei",target:"label.font"},textFill:{type:"boolean",value:!0,convert:o,convertParams:["textFill","textOutline"],target:"label.style"},textOutline:{type:"boolean",value:!0,convert:o,convertParams:["textFill","textOutline"],target:"label.style"},textFillColor:{type:"string",value:"rgb(255,255,255)",convert:y.stringToColor,target:"label.fillColor"},textOutlineColor:{type:"string",value:"rgb(0,0,0)",convert:y.stringToColor,target:"label.outlineColor"},textOutlineWidth:{type:"number",value:3,target:"label.outlineWidth"},textPixelOffset:{type:"array",value:[0,0],convert:y.arrayToCartesian2,target:"label.pixelOffset"},textHorizontalOrigin:{type:"string",value:u.HorizontalOrigin.CENTER,convert:c.default,target:"label.horizontalOrigin"},textVerticalOrigin:{type:"string",value:u.VerticalOrigin.BOTTOM,convert:p.default,target:"label.verticalOrigin"},heightReference:{type:"string",value:u.HeightReference.NONE,convert:_.default,target:"billboard.heightReference"},disableDepthTestDistance:{type:"number",value:Number.POSITIVE_INFINITY,target:"billboard.disableDepthTestDistance"},show:{type:"boolean",value:!0},opacity:{type:"number",value:1,convert:function(t){var e=t.color,n=t.textFillColor,r=t.textOutlineColor,i=t.opacity;switch(t.target){case"billboard.color":return y.stringToColor(e).withAlpha(i);case"label.fillColor":return y.stringToColor(n).withAlpha(i);case"label.outlineColor":return y.stringToColor(r).withAlpha(i)}},convertParams:["color","textFillColor","textOutlineColor","opacity"],target:["billboard.color","label.fillColor","label.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:y.arrayToDistanceDisplayCondition,target:["billboard.distanceDisplayCondition","label.distanceDisplayCondition"]},properties:{type:"object",value:{}}},v=(a=s.default,i(b,a),Object.defineProperty(b.prototype,"imageType",{get:function(){return this._imageType},set:function(t){this._imageType=t,this.value.billboard.image=this._buildImage(this._imageType,this._imageSource,this._imageColor,this._imageSize),this.resetProperty("imageType",t)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"imageSource",{get:function(){return this._imageSource},set:function(t){this._imageSource=t,this.value.billboard.image=this._buildImage(this._imageType,this._imageSource,this._imageColor,this._imageSize),this.resetProperty("imageSource",t)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"imageColor",{get:function(){return this._imageColor},set:function(t){this._imageColor=t,this.value.billboard.image=this._buildImage(this._imageType,this._imageSource,this._imageColor,this._imageSize),this.resetProperty("imageColor",t)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"imageSize",{get:function(){return this._imageSize},set:function(t){this._imageSize=t,this.value.billboard.image=this._buildImage(this._imageType,this._imageSource,this._imageColor,this._imageSize),this.resetProperty("imageSize",t)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),b.prototype._buildImage=function(t,e,n,r){var i=new u.PinBuilder;switch(t){case h.default.COLOR:var o=u.Color.fromCssColorString(n);return i.fromColor(o,r);case h.default.TEXT:o=u.Color.fromCssColorString(n);return i.fromText(e,o,r);case h.default.URL:o=u.Color.fromCssColorString(n);return i.fromUrl(e,o,r)}},b);function b(t){var e=a.call(this)||this;try{if(a.prototype.fromJSON.call(e,t),e._onClick=new u.Event,e._onHover=new u.Event,!f.isObject(t))throw"error: Pin. The options is not a Object.";if(!t.position)throw"error: Pin. The position of options is not defined.";g.definedProperties(e,m,t);var n=g.getPerOptions(e,m,t);e._imageType=t.imageType||h.default.COLOR,e._imageSource=t.imageSource,e._imageColor=t.imageColor||"rgb(47, 214, 209)",e._imageSize=t.imageSize||10,n.billboard.image=e._buildImage(e._imageType,e._imageSource,e._imageColor,e._imageSize),e.value=new u.Entity(n)}catch(t){}return e}v.defaultProps=m,e.default=v},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).COLOR="color",i.TEXT="text",i.URL="url",i.CANVAS="canvas",e.default=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(19),l=n(11),u=n(8),c=n(16),p=n(26),h=n(20),f=n(12),d=n(75),y={convert:function(t){var e=t.positions,n=t.dynamic,r=t.target,i=d.default.algorithm.fineArrow(e[0],e[1]);return i.push(i[0]),"polygon.hierarchy"===r?!0===n?new u.CallbackProperty(function(){return new u.PolygonHierarchy(i)},!1):i:"polyline.positions"===r?!0===n?new u.CallbackProperty(function(){return i},!1):i:void 0},convertParams:["positions","dynamic"],target:["polygon.hierarchy","polyline.positions"]},g={type:{type:"string",value:l.default.STRAIGHT_ARROW,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},positions:o({type:"array",value:null},y),fill:{type:"boolean",value:!0,target:"polygon.fill"},fillColor:{type:"string",value:"rgb(70,180,160)",convert:function(t){var e=t.fillColor,n=t.opacity;return u.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"polygon.material"},outline:{type:"boolean",value:!0,target:"polyline.show"},outlineColor:{type:"string",value:"rgb(255,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return u.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"polyline.material"},outlineWidth:{type:"number",value:5,target:"polyline.width"},clampToGround:{type:"boolean",value:!1,convert:function(t){return!f.isBoolean(t)||!t},target:"polygon.perPositionHeight"},show:{type:"boolean",value:!0},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"polygon.material":return u.Color.fromCssColorString(e).withAlpha(r);case"polygon.outlineColor":return u.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["polygon.material","polygon.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:["polygon.distanceDisplayCondition","polyline.distanceDisplayCondition"]},dynamic:o({type:"boolean",value:!1},y),properties:{type:"object",value:{}}},_=(a=s.default,i(m,a),m);function m(t){var e=a.call(this)||this;e.defaultProps=g;try{if(a.prototype.fromJSON.call(e,t),!f.isObject(t))throw"error: StraightArrow. The options is not a Object.";if(!t.positions)throw"error: StraightArrow. The positions of options is not defined.";h.definedProperties(e,g,t);var n=h.getPerOptions(e,g,t);n.polygon.classificationType=u.ClassificationType.BOTH,n.polygon.shadows=u.ShadowMode.DISABLED,n.polygon.outline=!1,n.polyline.clampToGround=!0,e.value=new u.Entity(n)}catch(t){}return e}_.defaultProps=g,e.default=_},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(19),l=n(11),u=n(8),c=n(16),p=n(26),h=n(20),f=n(12),d=n(75),y={convert:function(t){var e=t.positions,n=t.dynamic,r=t.target,i=d.default.algorithm.tailedAttackArrow(e).polygonalPoint;return"polygon.hierarchy"===r?!0===n?new u.CallbackProperty(function(){return new u.PolygonHierarchy(i)},!1):i:"polyline.positions"===r?!0===n?new u.CallbackProperty(function(){return i},!1):i:void 0},convertParams:["positions","dynamic"],target:["polygon.hierarchy","polyline.positions"]},g={type:{type:"string",value:l.default.ATTACK_ARROW,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},positions:o({type:"array",value:null},y),fill:{type:"boolean",value:!0,target:"polygon.fill"},fillColor:{type:"string",value:"rgb(70,180,160)",convert:function(t){var e=t.fillColor,n=t.opacity;return u.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"polygon.material"},outline:{type:"boolean",value:!0,target:"polyline.show"},outlineColor:{type:"string",value:"rgb(255,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return u.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"polyline.material"},outlineWidth:{type:"number",value:5,target:"polyline.width"},clampToGround:{type:"boolean",value:!1,convert:function(t){return!f.isBoolean(t)||!t},target:"polygon.perPositionHeight"},show:{type:"boolean",value:!0},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"polygon.material":return u.Color.fromCssColorString(e).withAlpha(r);case"polygon.outlineColor":return u.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["polygon.material","polygon.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:["polygon.distanceDisplayCondition","polyline.distanceDisplayCondition"]},dynamic:o({type:"boolean",value:!1},y),properties:{type:"object",value:{}}},_=(a=s.default,i(m,a),m);function m(t){var e=a.call(this)||this;e.defaultProps=g;try{if(a.prototype.fromJSON.call(e,t),!f.isObject(t))throw"error: AttackArrow. The options is not a Object.";if(!t.positions)throw"error: AttackArrow. The positions of options is not defined.";h.definedProperties(e,g,t);var n=h.getPerOptions(e,g,t);n.polygon.classificationType=u.ClassificationType.BOTH,n.polygon.shadows=u.ShadowMode.DISABLED,n.polygon.outline=!1,n.polyline.clampToGround=!0,e.value=new u.Entity(n)}catch(t){}return e}_.defaultProps=g,e.default=_},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(19),l=n(11),u=n(8),c=n(16),p=n(26),h=n(20),f=n(12),d=n(75),y={convert:function(t){var e=t.positions,n=t.dynamic,r=t.target,i=d.default.algorithm.doubleArrow(e).polygonalPoint;return i.push(i[0]),"polygon.hierarchy"===r?!0===n?new u.CallbackProperty(function(){return new u.PolygonHierarchy(i)},!1):i:"polyline.positions"===r?!0===n?new u.CallbackProperty(function(){return i},!1):i:void 0},convertParams:["positions","dynamic"],target:["polygon.hierarchy","polyline.positions"]},g={type:{type:"string",value:l.default.PINCER_ARROW,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},positions:o({type:"array",value:null},y),fill:{type:"boolean",value:!0,target:"polygon.fill"},fillColor:{type:"string",value:"rgb(70,180,160)",convert:function(t){var e=t.fillColor,n=t.opacity;return u.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"polygon.material"},outline:{type:"boolean",value:!0,target:"polyline.show"},outlineColor:{type:"string",value:"rgb(255,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return u.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"polyline.material"},outlineWidth:{type:"number",value:5,target:"polyline.width"},clampToGround:{type:"boolean",value:!1,convert:function(t){return!f.isBoolean(t)||!t},target:"polygon.perPositionHeight"},show:{type:"boolean",value:!0},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"polygon.material":return u.Color.fromCssColorString(e).withAlpha(r);case"polygon.outlineColor":return u.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["polygon.material","polygon.outlineColor"]},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:["polygon.distanceDisplayCondition","polyline.distanceDisplayCondition"]},dynamic:o({type:"boolean",value:!1},y),properties:{type:"object",value:{}}},_=(a=s.default,i(m,a),m);function m(t){var e=a.call(this)||this;e.defaultProps=g;try{if(a.prototype.fromJSON.call(e,t),!f.isObject(t))throw"error: PincerArrow. The options is not a Object.";if(!t.positions)throw"error: PincerArrow. The positions of options is not defined.";h.definedProperties(e,g,t);var n=h.getPerOptions(e,g,t);n.polygon.classificationType=u.ClassificationType.BOTH,n.polygon.shadows=u.ShadowMode.DISABLED,n.polygon.outline=!1,n.polyline.clampToGround=!0,e.value=new u.Entity(n)}catch(t){}return e}_.defaultProps=g,e.default=_},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(19),l=n(11),u=n(8),c=n(16),p=n(12),h=n(26),f=n(20),d=n(140),y=n(76),g={convert:function(t){var e=t.color,n=t.animate,r=t.duration,i=t.delay,o=t.image,a=t.opacity,s=t.orientation,l=u.Color.fromCssColorString(e).withAlpha(a).toCssColorString();return new d.default({color:l,animate:n,duration:r,delay:i,image:o,orientation:s})},convertParams:["color","animate","duration","delay","image","opacity","orientation"],target:"wall.material"},_={type:{type:"string",value:l.default.DYNAMIC_WALL,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},positions:{type:"array",value:null,convert:h.arrayToCartesianPositions,target:"wall.positions"},minimumHeights:{type:"array",value:void 0,target:"wall.minimumHeights"},maximumHeights:{type:"array",value:void 0,target:"wall.maximumHeights"},color:o({type:"string",value:"rgb(255,0,0)"},g),animate:o({type:"boolean",value:!0},g),duration:o({type:"number",value:2e3},g),delay:o({type:"number",value:2e3},g),image:o({type:"string",value:""},g),opacity:o({type:"number",value:1},g),orientation:o({type:"string",value:y.default.UP},g),show:{type:"boolean",value:!0,target:"wall.show"},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:h.arrayToDistanceDisplayCondition,target:"wall.distanceDisplayCondition"},properties:{type:"object",value:{}}},m=(a=s.default,i(v,a),v);function v(t){var e=a.call(this)||this;try{if(a.prototype.fromJSON.call(e,t),!p.isObject(t))throw"error: DynamicWall. The options is not a Object.";if(!t.positions)throw"error: DynamicWall. The positions of options is not defined.";f.definedProperties(e,_,t);var n=f.getPerOptions(e,_,t);e.value=new u.Entity(n)}catch(t){}return e}m.defaultProps=_,e.default=m},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(19),l=n(11),u=n(8),c=n(16),p=n(12),h=n(26),f=n(20),d=n(140),y={convert:function(t){var e=t.color,n=t.animate,r=t.duration,i=t.delay,o=t.image,a=t.opacity,s=t.orientation,l=u.Color.fromCssColorString(e).withAlpha(a).toCssColorString();return new d.default({color:l,animate:n,duration:r,delay:i,image:o,orientation:s})},convertParams:["color","animate","duration","delay","image","opacity","orientation"],target:"ellipsoid.material"},g={type:{type:"string",value:l.default.DYNAMIC_ELLIPSOID,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:h.arrayToCartesianPosition},radii:{type:"array",value:0,convert:h.arrayToCartesian3,target:"ellipsoid.radii"},innerRadii:{type:"array",value:[1,1,1],convert:h.arrayToCartesian3,target:"ellipsoid.innerRadii"},minimumClock:{type:"number",value:0,target:"ellipsoid.minimumClock"},maximumClock:{type:"number",value:2*Math.PI,target:"ellipsoid.maximumClock"},minimumCone:{type:"number",value:0,target:"ellipsoid.minimumCone"},maximumCone:{type:"number",value:Math.PI,target:"ellipsoid.maximumCone"},color:o({type:"string",value:"rgb(255,0,0)"},y),animate:o({type:"boolean",value:!0},y),duration:o({type:"number",value:2e3},y),delay:o({type:"number",value:2e3},y),image:o({type:"string",value:""},y),opacity:o({type:"number",value:1},y),orientation:o({type:"string",value:"top"},y),show:{type:"boolean",value:!0,target:"ellipsoid.show"},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:h.arrayToDistanceDisplayCondition,target:"ellipsoid.distanceDisplayCondition"},properties:{type:"object",value:{}}},_=(a=s.default,i(m,a),m);function m(t){var e=a.call(this)||this;try{if(a.prototype.fromJSON.call(e,t),!p.isObject(t))throw"error: DynamicEllipsoid. The options is not a Object.";if(!t.position)throw"error: DynamicEllipsoid. The position of options is not defined.";f.definedProperties(e,g,t);var n=f.getPerOptions(e,g,t);e.value=new u.Entity(n)}catch(t){}return e}_.defaultProps=g,e.default=_},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a,s=n(19),l=n(11),u=n(8),c=n(16),p=n(12),h=n(26),f=n(20),d=.001,y={type:{type:"string",value:l.default.DYNAMIC_ELLIPSE,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:h.arrayToCartesianPosition},height:{type:"number",value:void 0,target:"ellipse.height"},show:{type:"boolean",value:!0,target:"ellipse.show"},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:h.arrayToDistanceDisplayCondition,target:"ellipse.distanceDisplayCondition"},properties:{type:"object",value:{}}},g=(a=s.default,i(_,a),Object.defineProperty(_.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this.value.ellipse.semiMajorAxis=t,this.value.ellipse.semiMinorAxis=t},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t;var e=u.Color.fromCssColorString(t).withAlpha(this._opacity);this.value.ellipse.material=e,this.value.ellipse.outlineColor=e,this._changeImage()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"opacity",{get:function(){return this._opacity},set:function(t){this._opacity=t;var e=u.Color.fromCssColorString(this._color).withAlpha(t);this.value.ellipse.material=e,this.value.ellipse.outlineColor=e,this._changeImage()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"animate",{get:function(){return this._animate},set:function(t){this._animate=t,this._changeRotate()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"duration",{get:function(){return this._duration},set:function(t){this._duration=t,this._changeRotate()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t,this._changeRotate()},enumerable:!1,configurable:!0}),_.prototype._changeRotate=function(){var t=this;clearTimeout(o),this._animate?o=setTimeout(function(){t.value.ellipse.stRotation=new u.CallbackProperty(function(){return 0!==t._duration&&(d-=u.Math.toRadians(360/(60*t._duration/1e3))),d<=-u.Math.toRadians(360)&&(d=0),d},!1)},this._delay):(clearTimeout(o),this.value.ellipse.stRotation=d)},_.prototype._changeImage=function(){this.value.ellipse.material=new u.ImageMaterialProperty({image:window.CESIUM_BASE_URL+"Assets/Images/material/circle.png",color:u.Color.fromCssColorString(this._color).withAlpha(this._opacity),transparent:new u.ConstantProperty(!0)})},_);function _(t){var e=a.call(this)||this;try{if(a.prototype.fromJSON.call(e,t),!p.isObject(t))throw"error: RadarScan. The options is not a Object.";if(!t.position)throw"error: RadarScan. The position of options is not defined.";e._radius=u.defaultValue(t.radius,1500),e._opacity=u.defaultValue(t.opacity,1),e._color=u.defaultValue(t.color,"rgb(255, 0, 0)"),e._animate=u.defaultValue(t.animate,!0),e._duration=u.defaultValue(t.duration,5e3),e._delay=u.defaultValue(t.delay,2e3),f.definedProperties(e,y,t);var n=f.getPerOptions(e,y,t),r=u.Color.fromCssColorString(e._color).withAlpha(e._opacity);n.ellipse.semiMajorAxis=e._radius,n.ellipse.semiMinorAxis=e._radius,n.ellipse.material=r,n.ellipse.outline=!0,n.ellipse.outlineColor=r,n.ellipse.outlineWidth=1,n.ellipse.classificationType=u.ClassificationType.BOTH,n.ellipse.zIndex=2,e.value=new u.Entity(n),e._changeImage(),e._changeRotate()}catch(t){}return e}g.defaultProps=y,e.default=g},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(11),l=n(8),u=n(16),c=n(12),p=n(26),h=n(20),f=.001,d=.001,y=.001,g={type:{type:"string",value:s.default.DYNAMIC_ELLIPSE,readonly:!0},class:{type:"string",value:u.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:p.arrayToCartesianPosition},semiMajorAxis:{type:"number",value:0,target:"ellipse.semiMajorAxis"},semiMinorAxis:{type:"number",value:0,target:"ellipse.semiMinorAxis"},height:{type:"number",value:void 0,target:"ellipse.height"},rotation:{type:"number",value:0,convert:p.numberToRadis,target:"ellipse.rotation"},stRotation:{type:"number",value:0,convert:p.numberToRadis,target:"ellipse.stRotation"},fill:{type:"boolean",value:!0,target:"ellipse.fill"},fillColor:{type:"string",value:"rgb(255,255,255)",convert:function(t){var e=t.fillColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["fillColor","opacity"],target:"ellipse.material"},outline:{type:"boolean",value:!1,target:"ellipse.outline"},outlineColor:{type:"string",value:"rgb(0,0,0)",convert:function(t){var e=t.outlineColor,n=t.opacity;return l.Color.fromCssColorString(e).withAlpha(n)},convertParams:["outlineColor","opacity"],target:"ellipse.outlineColor"},outlineWidth:{type:"number",value:1,target:"ellipse.outlineWidth"},opacity:{type:"number",value:1,convert:function(t){var e=t.fillColor,n=t.outlineColor,r=t.opacity;switch(t.target){case"ellipse.material":return l.Color.fromCssColorString(e).withAlpha(r);case"ellipse.outlineColor":return l.Color.fromCssColorString(n).withAlpha(r)}},convertParams:["fillColor","outlineColor","opacity"],target:["ellipse.material","ellipse.outlineColor"]},show:{type:"boolean",value:!0,target:"ellipse.show"},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:p.arrayToDistanceDisplayCondition,target:"ellipse.distanceDisplayCondition"},properties:{type:"object",value:{}}},_=(o=a.default,i(m,o),Object.defineProperty(m.prototype,"animate",{get:function(){return this._animate},set:function(t){this._animate=t,this._changeRotate(),this._changeScale()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"minScale",{get:function(){return this._minScale},set:function(t){this._minScale=t,this._changeScale()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"maxScale",{get:function(){return this._maxScale},set:function(t){this._maxScale=t,this._changeScale()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"scaleDuration",{get:function(){return this._scaleDuration},set:function(t){this._scaleDuration=t,this._changeScale()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"rotateDuration",{get:function(){return this._rotateDuration},set:function(t){this._rotateDuration=t,this._changeRotate()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t,this._changeScale(),this._changeRotate()},enumerable:!1,configurable:!0}),Object.defineProperty(m.prototype,"image",{get:function(){return this._image},set:function(t){this._image=t,this._changeImage()},enumerable:!1,configurable:!0}),m.prototype._changeScale=function(){var t=this;this._animate?setTimeout(function(){t.value.ellipse.semiMinorAxis=new l.CallbackProperty(function(){return 0!==t._scaleDuration&&(f+=t._semiMinorAxis*(t._maxScale-t._minScale)/(60*t._scaleDuration/1e3)),f>=t._semiMinorAxis*t._maxScale&&(f=t._semiMinorAxis*t._minScale),f},!1),t.value.ellipse.semiMajorAxis=new l.CallbackProperty(function(){return 0!==t._scaleDuration&&(d+=t._semiMajorAxis*(t._maxScale-t._minScale)/(60*t._scaleDuration/1e3)),d>=t._semiMajorAxis*t._maxScale&&(d=t._semiMajorAxis*t._minScale),d},!1)},this._delay):(this.value.ellipse.semiMinorAxis=this._semiMinorAxis,this.value.ellipse.semiMajorAxis=this._semiMajorAxis)},m.prototype._changeRotate=function(){var t=this;this._animate?setTimeout(function(){t.value.ellipse.stRotation=new l.CallbackProperty(function(){return 0!==t._rotateDuration&&(y+=l.Math.toRadians(360/(60*t._rotateDuration/1e3))),y>=l.Math.toRadians(360)&&(y=0),y},!1)},this._delay):this.value.ellipse.stRotation=y},m.prototype._changeImage=function(){this.value.ellipse.material=new l.ImageMaterialProperty({image:this._image,transparent:new l.ConstantProperty(!0)})},m);function m(t){var e=o.call(this)||this;try{if(o.prototype.fromJSON.call(e,t),!c.isObject(t))throw"error: DynamicEllipse. The options is not a Object.";if(!t.position)throw"error: DynamicEllipse. The position of options is not defined.";e._semiMinorAxis=t.semiMinorAxis,e._semiMajorAxis=t.semiMajorAxis,e._animate=void 0===t.animate||t.animate,e._minScale=void 0!==t.minScale?t.minScale:0,e._maxScale=void 0!==t.maxScale?t.maxScale:1,e._scaleDuration=void 0!==t.scaleDuration?t.scaleDuration:5e3,e._rotateDuration=void 0!==t.rotateDuration?t.rotateDuration:5e3,e._delay=void 0!==t.delay?t.delay:2e3,e._image=t.image,f=e._minScale*e._semiMinorAxis,d=e._minScale*e._semiMajorAxis,h.definedProperties(e,g,t);var n=h.getPerOptions(e,g,t);n.ellipse.classificationType=l.ClassificationType.BOTH,n.ellipse.zIndex=2,e.value=new l.Entity(n),t.image&&e._changeImage(),e._changeRotate(),e._changeScale()}catch(t){}return e}_.defaultProps=g,e.default=_},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var u,o=n(19),c=n(16),p=n(11),h=n(12),a=n(22),f=n(8),s=(u=o.default,i(l,u),Object.defineProperty(l.prototype,"position",{get:function(){return a.default.cartesianToDegrees(this._position)},set:function(t){this._position=f.Cartesian3.fromDegrees.apply(f.Cartesian3,t),this._changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t,this._changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"outlineColor",{get:function(){return this._outlineColor},set:function(t){this._outlineColor=t,this._changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"opacity",{get:function(){return this._opacity},set:function(t){this._opacity=t,this._changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"animate",{get:function(){return this._animate},set:function(t){this._animate=t,this._changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"duration",{get:function(){return this._duration},set:function(t){this._duration=t,this._changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t,this._changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this.resetProperty("properties",t)},enumerable:!1,configurable:!0}),l.prototype._changePrimitive=function(){var i=this;this._eventListener&&this._viewer.clock.onTick.removeEventListener(this._eventListener),this._viewer.scene.primitives.remove(this.value);var t=f.Transforms.eastNorthUpToFixedFrame(this._position),e=new f.GeometryInstance({geometry:new f.CylinderGeometry({length:this._length,topRadius:this._length,bottomRadius:0,slices:4}),attributes:{color:f.ColorGeometryInstanceAttribute.fromColor(f.Color.fromCssColorString(this._color).withAlpha(this._opacity))}}),n=new f.GeometryInstance({geometry:new f.CylinderOutlineGeometry({length:this._length,topRadius:this._length,bottomRadius:0,slices:4}),attributes:{color:f.ColorGeometryInstanceAttribute.fromColor(f.Color.fromCssColorString(this._outlineColor).withAlpha(this._opacity))}});this.value=new f.PrimitiveCollection,this.value.add(new f.Primitive({geometryInstances:[e],appearance:new f.PerInstanceColorAppearance({flat:!0}),modelMatrix:t})),this.value.add(new f.Primitive({geometryInstances:[n],appearance:new f.PerInstanceColorAppearance({flat:!0}),modelMatrix:t})),this._viewer.scene.primitives.add(this.value),this._degree=0;var o=360/(this._duration/1e3*60);this._animate&&(this._eventListener=this._viewer.clock.onTick.addEventListener(function(){var t=f.Transforms.eastNorthUpToFixedFrame(i._position);i._degree+=o;var e=f.Matrix3.fromRotationZ(f.Math.toRadians(i._degree)),n=f.Matrix4.fromRotationTranslation(e),r=f.Matrix4.multiply(t,n,new f.Matrix4);i.value._primitives.forEach(function(t){t.modelMatrix=r})}))},l);function l(t){var r=u.call(this)||this;r._degree=0;try{if(u.prototype.fromJSON.call(r,t),r.type=p.default.DYNAMIC_TETRAHEDRON,r.class=c.default.PRIMITIVE,!h.isObject(t))throw new TypeError("error: DynamicTetrahedron. The options is not a Object.");if(!t.earth)throw new TypeError("error: DynamicTetrahedron. The earth of options is not defined.");if(!t.position)throw new TypeError("error: DynamicTetrahedron. The position of options is not defined.");var e=t||{};r._viewer=r._viewer||e.earth._viewer;var n=e.position;r._position=f.Cartesian3.fromDegrees.apply(f.Cartesian3,n),r._length=f.defaultValue(e.length,1e3),r._opacity=f.defaultValue(e.opacity,1),r._color=f.defaultValue(e.color,"rgb(255, 0, 0)"),r._outlineColor=f.defaultValue(e.outlineColor,"rgb(255, 255, 255)"),r._animate=f.defaultValue(e.animate,!0),r._duration=f.defaultValue(e.duration,1e3),r._delay=f.defaultValue(e.delay,2e3),r._properties=f.defaultValue(e.properties,{});var i=f.Transforms.eastNorthUpToFixedFrame(r._position),o=new f.GeometryInstance({geometry:new f.CylinderGeometry({length:r._length,topRadius:r._length,bottomRadius:0,slices:4}),attributes:{color:f.ColorGeometryInstanceAttribute.fromColor(f.Color.fromCssColorString(r._color).withAlpha(r._opacity))}}),a=new f.GeometryInstance({geometry:new f.CylinderOutlineGeometry({length:r._length,topRadius:r._length,bottomRadius:0,slices:4}),attributes:{color:f.ColorGeometryInstanceAttribute.fromColor(f.Color.fromCssColorString(r._outlineColor).withAlpha(r._opacity))}});r.value=new f.PrimitiveCollection,r.value.add(new f.Primitive({geometryInstances:[o],appearance:new f.PerInstanceColorAppearance({flat:!0}),modelMatrix:i})),r.value.add(new f.Primitive({geometryInstances:[a],appearance:new f.PerInstanceColorAppearance({flat:!0}),modelMatrix:i}));var s=f.Transforms.eastNorthUpToFixedFrame(r._position),l=360/(r._duration/1e3*60);r._animate&&(r._eventListener=function(){r._degree+=l;var t=f.Matrix3.fromRotationZ(f.Math.toRadians(r._degree)),e=f.Matrix4.fromRotationTranslation(t),n=f.Matrix4.multiply(s,e,new f.Matrix4);r.value._primitives.forEach(function(t){t.modelMatrix=n})},r._viewer.clock.onTick.addEventListener(r._eventListener))}catch(t){}return r}e.default=s},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var l,o=n(19),u=n(16),c=n(11),p=n(8),h=n(12),f=n(76),d=n(313),a=(l=o.default,i(s,l),s.prototype.getListener=function(){var e=this;return function(){var t=e.value.appearance.material.uniforms.u_offset;e._orientation===f.default.DOWN?(t-=.001*e._speed)<-1&&(t=0):e._orientation===f.default.UP&&1<(t+=.001*e._speed)&&(t=0),e.value.appearance.material.uniforms.u_offset=t}},Object.defineProperty(s.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t;var e=p.Cartesian3.fromDegrees(this._position[0],this._position[1]),n=p.Matrix4.multiplyByTranslation(p.Transforms.eastNorthUpToFixedFrame(e),new p.Cartesian3(0,0,.5*this._length),new p.Matrix4);this.value.geometryInstances[0].modelMatrix=n},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t;var e=new p.CylinderGeometry({topRadius:0,bottomRadius:this._radius,length:this._length,vertexFormat:p.MaterialAppearance.MaterialSupport.TEXTURED.vertexFormat}),n=p.CylinderGeometry.createGeometry(e);this.value.geometryInstances[0].geometry=n},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t;var e=new p.CylinderGeometry({topRadius:0,bottomRadius:this._radius,length:this._length,vertexFormat:p.MaterialAppearance.MaterialSupport.TEXTURED.vertexFormat}),n=p.CylinderGeometry.createGeometry(e);this.value.geometryInstances[0].geometry=n},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"color",{get:function(){return this._color.toCssColorString()},set:function(t){this._color=p.Color.fromCssColorString(t),this.value.appearance.material.uniforms.u_color=this._color},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this._viewer.scene.preUpdate.removeEventListener(this.getListener()),this._viewer.scene.preUpdate.addEventListener(this.getListener())},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"thickness",{get:function(){return this._thickness},set:function(t){this._thickness=t,this.value.appearance.material.uniforms.u_thickness=this._thickness},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation=t,this._viewer.scene.preUpdate.removeEventListener(this.getListener()),this._viewer.scene.preUpdate.addEventListener(this.getListener())},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this.resetProperty("properties",t)},enumerable:!1,configurable:!0}),s);function s(t){var e=l.call(this)||this;try{if(l.prototype.fromJSON.call(e,t),e.type=c.default.DYNAMIC_RADAR,e.class=u.default.PRIMITIVE,!h.isObject(t))throw new TypeError("error: DynamicRadar. The options is not a Object.");if(!t.earth)throw new TypeError("error: DynamicRadar. The earth of options is not defined.");if(!t.position)throw new TypeError("error: DynamicRadar. The position of options is not defined.");var n=t||{};e._viewer=e._viewer||n.earth._viewer,e._position=n.position,e._radius=n.radius||400,e._length=n.length||400,e._color=n.color&&p.Color.fromCssColorString(n.color)||new p.Color(.2,1,0,1),e._speed=n.speed||1,e._thickness=n.thickness||.3,e._orientation=n.orientation||f.default.DOWN,e._properties=n.properties||{};var r=p.Cartesian3.fromDegrees(e._position[0],e._position[1]),i=p.Matrix4.multiplyByTranslation(p.Transforms.eastNorthUpToFixedFrame(r),new p.Cartesian3(0,0,.5*e._length),new p.Matrix4),o=new p.CylinderGeometry({topRadius:0,bottomRadius:e._radius,length:e._length,vertexFormat:p.MaterialAppearance.MaterialSupport.TEXTURED.vertexFormat}),a=p.CylinderGeometry.createGeometry(o),s=new p.GeometryInstance({geometry:a,modelMatrix:i});e.value=new p.Primitive({geometryInstances:[s],appearance:new p.MaterialAppearance({material:new p.Material({fabric:{type:"DynamicRadarShader",uniforms:{u_color:e._color,u_repeat:30,u_offset:0,u_thickness:e._thickness},source:d},translucent:!1}),faceForward:!1,closed:!0}),asynchronous:!1}),e._viewer.scene.preUpdate.addEventListener(e.getListener())}catch(t){}return e}e.default=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var p,o=n(19),h=n(16),f=n(11),d=n(8),y=n(12),g=n(76),_=n(314),a=(p=o.default,i(s,p),s.prototype.switchOrientation=function(t){var e;switch(t){case g.default.UP:e=0;break;case g.default.DOWN:e=1;break;case g.default.LEFT:e=2;break;case g.default.RIGHT:e=3;break;case g.default.UP_LEFT:e=4;break;case g.default.UP_RIGHT:e=5;break;case g.default.DOWN_LEFT:e=6;break;case g.default.DOWN_RIGHT:e=7;break;default:e=0}return e},Object.defineProperty(s.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"topRadius",{get:function(){return this._topRadius},set:function(t){this._topRadius=t,this.changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bottomRadius",{get:function(){return this._bottomRadius},set:function(t){this._bottomRadius=t,this.changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t,this.changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"color",{get:function(){return this._color.toCssColorString()},set:function(t){this._color=d.Color.fromCssColorString(t),this.value.get(0).appearance.material.uniforms.u_color=this._color},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.value.get(0).appearance.material.uniforms.u_speed=this._speed},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation=this.switchOrientation(t),this.value.get(0).appearance.material.uniforms.u_orientation=this._orientation},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this.resetProperty("properties",t)},enumerable:!1,configurable:!0}),s.prototype.changePrimitive=function(){var t=new d.CylinderGeometry({topRadius:this._topRadius,bottomRadius:this._bottomRadius,length:this._length,slices:6,vertexFormat:d.MaterialAppearance.MaterialSupport.TEXTURED.vertexFormat}),e=d.CylinderGeometry.createGeometry(t),n=d.Cartesian3.fromDegrees(this._position[0],this._position[1]),r=d.Matrix4.multiplyByScale(d.Transforms.eastNorthUpToFixedFrame(n),new d.Cartesian3(1,1,30),new d.Matrix4),i=d.Matrix3.fromRotationX(d.Math.toRadians(90)),r=d.Matrix4.multiplyByMatrix3(r,i,new d.Matrix4),o=new d.GeometryInstance({geometry:e,modelMatrix:r,id:"DynamicCylinderParticle"}),a=new d.Primitive({geometryInstances:[o],appearance:new d.MaterialAppearance({material:new d.Material({fabric:{type:"DynamicCylinderParticleShader",uniforms:{u_image:window.CESIUM_BASE_URL+"Assets/Images/material/particles.png",u_color:this._color,u_speed:this._speed,u_orientation:this._orientation},source:_},translucent:!0}),faceForward:!1,closed:!0}),asynchronous:!1}),s=this.value.get(0);this.value.remove(s),this.value.add(a)},s);function s(t){var e=p.call(this)||this;try{if(p.prototype.fromJSON.call(e,t),e.type=f.default.DYNAMIC_CYLINDER_PARTICLE,e.class=h.default.PRIMITIVE,!y.isObject(t))throw new TypeError("error: DynamicCylinderParticle. The options is not a Object.");if(!t.earth)throw new TypeError("error: DynamicCylinderParticle. The earth of options is not defined.");if(!t.position)throw new TypeError("error: DynamicCylinderParticle. The position of options is not defined.");var n=t||{};e._viewer=e._viewer||n.earth._viewer,e._viewer.scene.globe.depthTestAgainstTerrain=!0,e._position=n.position,e._topRadius=n.topRadius||200,e._bottomRadius=n.bottomRadius||200,e._length=n.length||1,e._color=n.color&&d.Color.fromCssColorString(n.color)||d.Color.YELLOW,e._speed=n.speed||1;var r=t.orientation||g.default.UP;e._orientation=e.switchOrientation(r),e._properties=n.properties||{};var i=d.Cartesian3.fromDegrees(e._position[0],e._position[1]),o=d.Matrix4.multiplyByScale(d.Transforms.eastNorthUpToFixedFrame(i),new d.Cartesian3(1,1,30),new d.Matrix4),a=d.Matrix3.fromRotationX(d.Math.toRadians(90)),o=d.Matrix4.multiplyByMatrix3(o,a,new d.Matrix4),s=new d.CylinderGeometry({topRadius:e._topRadius,bottomRadius:e._bottomRadius,length:e._length,slices:6,vertexFormat:d.MaterialAppearance.MaterialSupport.TEXTURED.vertexFormat}),l=d.CylinderGeometry.createGeometry(s),u=new d.GeometryInstance({geometry:l,modelMatrix:o,id:"DynamicCylinderParticle"}),c=new d.Primitive({geometryInstances:[u],appearance:new d.MaterialAppearance({material:new d.Material({fabric:{type:"DynamicCylinderParticleShader",uniforms:{u_image:window.CESIUM_BASE_URL+"Assets/Images/material/particles.png",u_color:e._color,u_speed:e._speed,u_orientation:e._orientation},source:_},translucent:!0}),faceForward:!1,closed:!0}),asynchronous:!1});e.value=new d.PrimitiveCollection,e.value.add(c)}catch(t){}return e}e.default=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var c,o=n(19),p=n(16),h=n(11),f=n(8),d=n(12),y=n(315),a=(c=o.default,i(s,c),Object.defineProperty(s.prototype,"position",{get:function(){return this._position},set:function(t){this._position=t,this.changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"topRadius",{get:function(){return this._topRadius},set:function(t){this._topRadius=t,this.changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"bottomRadius",{get:function(){return this._bottomRadius},set:function(t){this._bottomRadius=t,this.changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t,this.changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"slices",{get:function(){return this._slices},set:function(t){this._slices=t,this.changePrimitive()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"color",{get:function(){return this._color.toCssColorString()},set:function(t){this._color=f.Color.fromCssColorString(t),this.value.get(0).appearance.material.uniforms.u_color=this._color},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.value.get(0).appearance.material.uniforms.u_speed=this._speed},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this.resetProperty("properties",t)},enumerable:!1,configurable:!0}),s.prototype.changePrimitive=function(){var t=new f.CylinderGeometry({topRadius:this._topRadius,bottomRadius:this._bottomRadius,length:this._length,slices:this._slices,vertexFormat:f.MaterialAppearance.MaterialSupport.TEXTURED.vertexFormat}),e=f.CylinderGeometry.createGeometry(t),n=f.Cartesian3.fromDegrees(this._position[0],this._position[1]),r=f.Matrix4.multiplyByScale(f.Transforms.eastNorthUpToFixedFrame(n),new f.Cartesian3(1,1,1),new f.Matrix4),i=f.Matrix3.fromRotationX(f.Math.toRadians(0)),r=f.Matrix4.multiplyByMatrix3(r,i,new f.Matrix4),o=new f.GeometryInstance({geometry:e,modelMatrix:r,id:"DynamicFlickerCylinder"}),a=new f.Primitive({geometryInstances:[o],appearance:new f.MaterialAppearance({material:new f.Material({fabric:{type:"DynamicFlickerCylinderShader",uniforms:{u_color:this._color,u_speed:this._speed},source:y},translucent:!0}),faceForward:!1,closed:!0}),asynchronous:!1}),s=this.value.get(0);this.value.remove(s),this.value.add(a)},s);function s(t){var e=c.call(this)||this;try{if(c.prototype.fromJSON.call(e,t),e.type=h.default.DYNAMIC_FLICKER_CYLINDER,e.class=p.default.PRIMITIVE,!d.isObject(t))throw new TypeError("error: DynamicFlickerCylinder. The options is not a Object.");if(!t.earth)throw new TypeError("error: DynamicFlickerCylinder. The earth of options is not defined.");if(!t.position)throw new TypeError("error: DynamicFlickerCylinder. The position of options is not defined.");var n=t||{};e._viewer=e._viewer||n.earth._viewer,e._viewer.scene.globe.depthTestAgainstTerrain=!0,e._position=n.position,e._topRadius=void 0!==n.topRadius?n.topRadius:120,e._bottomRadius=void 0!==n.bottomRadius?n.bottomRadius:120,e._length=void 0!==n.length?n.length:200,e._slices=void 0!==n.slices?n.slices:128,e._color=n.color&&f.Color.fromCssColorString(n.color)||f.Color.YELLOW,e._speed=void 0!==n.speed?n.speed:1,e._properties=n.properties||{};var r=f.Cartesian3.fromDegrees(e._position[0],e._position[1]),i=f.Matrix4.multiplyByScale(f.Transforms.eastNorthUpToFixedFrame(r),new f.Cartesian3(1,1,1),new f.Matrix4),o=f.Matrix3.fromRotationX(f.Math.toRadians(0)),i=f.Matrix4.multiplyByMatrix3(i,o,new f.Matrix4),a=new f.CylinderGeometry({topRadius:e._topRadius,bottomRadius:e._bottomRadius,length:e._length,slices:e._slices,vertexFormat:f.MaterialAppearance.MaterialSupport.TEXTURED.vertexFormat}),s=f.CylinderGeometry.createGeometry(a),l=new f.GeometryInstance({geometry:s,modelMatrix:i,id:"DynamicFlickerCylinder"}),u=new f.Primitive({geometryInstances:[l],appearance:new f.MaterialAppearance({material:new f.Material({fabric:{type:"DynamicFlickerCylinderShader",uniforms:{u_color:e._color,u_speed:e._speed},source:y},translucent:!0}),faceForward:!1,closed:!0}),asynchronous:!1});e.value=new f.PrimitiveCollection,e.value.add(u)}catch(t){}return e}e.default=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});function o(t){var e=t.color,n=t.opacity,r=u.Color.fromCssColorString(e).withAlpha(n).toCssColorString();return new d.default({color:r})}var a,s=n(19),l=n(11),u=n(8),c=n(16),p=n(12),h=n(26),f=n(20),d=n(316),y={type:{type:"string",value:l.default.DYNAMIC_SPREAD_CYLINDER,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:h.arrayToCartesianPosition},length:{type:"number",value:0,target:"cylinder.length"},topRadius:{type:"number",value:0,target:"cylinder.topRadius"},bottomRadius:{type:"number",value:0,target:"cylinder.bottomRadius"},show:{type:"boolean",value:!0,target:"cylinder.show"},color:{type:"string",value:"rgb(255,255,255)",convert:o,convertParams:["color","opacity"],target:"cylinder.material"},opacity:{type:"number",value:1,convert:o,convertParams:["color","opacity"],target:"cylinder.material"},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:h.arrayToDistanceDisplayCondition,target:"cylinder.distanceDisplayCondition"},properties:{type:"object",value:{}}},g=(a=s.default,i(_,a),Object.defineProperty(_.prototype,"onClick",{get:function(){return this._onClick},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"onHover",{get:function(){return this._onHover},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"animate",{get:function(){return this._animate},set:function(t){this._animate=t,this._changeCylinder()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"minScale",{get:function(){return this._minScale},set:function(t){this._minScale=t,this._minLength=this.length*this._minScale,this._minRadius=this.radius*this._minScale,this._changeCylinder()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"maxScale",{get:function(){return this._maxScale},set:function(t){this._maxScale=t,this._maxLength=this.length*this._maxScale,this._maxRadius=this.radius*this._maxScale,this._changeCylinder()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"duration",{get:function(){return this._duration},set:function(t){this._duration=t,this._changeCylinder()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"delay",{get:function(){return this._delay},set:function(t){this._delay=t,this._changeCylinder()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"length",{get:function(){return this._curLength},set:function(t){this._maxLength=t*this._maxScale,this._minLength=t*this._minScale,this._changeCylinder()},enumerable:!1,configurable:!0}),Object.defineProperty(_.prototype,"radius",{get:function(){return this._curRadius},set:function(t){this._maxRadius=t*this._maxScale,this._minRadius=t*this._minScale,this._changeCylinder()},enumerable:!1,configurable:!0}),_.prototype._changeCylinder=function(){var t,e,n=this;this._animate?(t=0!==this._duration?this._maxLength/this._duration/60*1e3:0,e=0!==this._duration?this._maxRadius/this._duration/60*1e3:0,setTimeout(function(){n.value.cylinder.length=new u.CallbackProperty(function(){return n._curLength<=n._minLength?n._curLength=n._maxLength:n._curLength-=t,n._curLength},!1),n.value.cylinder.bottomRadius=new u.CallbackProperty(function(){return n._curRadius>=n._maxRadius?n._curRadius=n._minRadius:n._curRadius+=e,n.value.cylinder.topRadius=.97*n._curRadius,n._curRadius},!1)},this._delay)):(this.value.cylinder.length=this._maxLength,this.value.cylinder.bottomRadius=this._maxRadius,this.value.cylinder.topRadius=this._maxRadius)},_);function _(t){var e=a.call(this)||this;try{if(a.prototype.fromJSON.call(e,t),e._onClick=new u.Event,e._onHover=new u.Event,!p.isObject(t))throw"error: DynamicSpreadCylinder. The options is not a Object.";if(!t.position)throw"error: DynamicSpreadCylinder. The position of options is not defined.";f.definedProperties(e,y,t);var n=f.getPerOptions(e,y,t);n.cylinder.classificationType=u.ClassificationType.BOTH,e.value=new u.Entity(n),e._animate=void 0===t.animate||t.animate,e._minScale=void 0!==t.minScale?t.minScale:0,e._maxScale=void 0!==t.maxScale?t.maxScale:1,e._duration=void 0!==t.duration?t.duration:5e3,e._delay=void 0!==t.delay?t.delay:2e3,e._maxLength=void 0!==t.length?t.length*e._maxScale:400*e._maxScale,e._minLength=void 0!==t.length?t.length*e._minScale:400*e._minScale,e._curLength=e._maxLength,e._maxRadius=void 0!==t.radius?t.radius*e._maxScale:2e3*e._maxScale,e._minRadius=void 0!==t.radius?t.radius*e._minScale:2e3*e._minScale,e._curRadius=e._minRadius,e.value.cylinder.heightReference=u.HeightReference.CLAMP_TO_GROUND,e._changeCylinder()}catch(t){}return e}g.defaultProps=y,e.default=g},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});function a(t){var e=t.position,n=t.radius,r=new p.CircleOutlineGeometry({center:p.Cartesian3.fromDegrees(e[0],e[1],e[2]),radius:n,granularity:.001}),i=p.CircleOutlineGeometry.createGeometry(r).attributes.position.values,o=[].slice.call(i),a=v(i,o,e[2]);_=e[2],m=a.length;var s=b(a);return p.Cartesian3.fromDegreesArrayHeights(s)}var s,l=n(19),u=n(11),p=n(8),c=n(16),h=n(12),f=n(26),d=n(20),y=n(140),g=n(76),_=0,m=0,v=function(t,e,n){for(var r=t.length/3,i=[],o=0;o<r;o++)i[o]=[];for(var a=0,s=0;s<r;s++)for(var l=0;l<3&&(i[s][l]=e[a],!(++a>t.length-1));l++);for(var u=[],c=0;c<i.length;c++)u.push(new p.Cartesian3(i[c][0],i[c][1],i[c][2]));return u.push(new p.Cartesian3(i[0][0],i[0][1],i[0][2])),u.map(function(t){return w(t,n)})},b=function(t){for(;t.some(function(t){return Array.isArray(t)});)t=[].concat.apply([],t);return t},w=function(t,e){var n=p.Cartographic.fromCartesian(t);return[p.Math.toDegrees(n.longitude),p.Math.toDegrees(n.latitude),e]},x={convert:function(t){var e=t.color,n=t.animate,r=t.duration,i=t.delay,o=t.image,a=t.opacity,s=t.orientation,l=p.Color.fromCssColorString(e).withAlpha(a).toCssColorString();return new y.default({color:l,animate:n,duration:r,delay:i,image:o,orientation:s})},convertParams:["color","animate","duration","delay","image","opacity","orientation"],target:"wall.material"},C={type:{type:"string",value:u.default.DYNAMIC_ROTATE_CYLINDER,readonly:!0},class:{type:"string",value:c.default.ENTITY,readonly:!0},position:{type:"array",value:null,convert:a,convertParams:["position","radius"],target:"wall.positions"},radius:{type:"number",value:0,convert:a,convertParams:["position","radius"],target:"wall.positions"},length:{type:"number",value:0,convert:function(t){var e=t.target,n=_-t.length;switch(e){case"wall.minimumHeights":return Array.apply(null,Array(m)).map(function(){return n});case"wall.maximumHeights":return Array.apply(null,Array(m)).map(function(){return _})}},convertParams:["length"],target:["wall.minimumHeights","wall.maximumHeights"]},color:o({type:"string",value:"rgb(255,255,255)"},x),animate:o({type:"boolean",value:!0},x),duration:o({type:"number",value:2e3},x),delay:o({type:"number",value:2e3},x),image:o({type:"string",value:""},x),opacity:o({type:"number",value:1},x),orientation:o({type:"string",value:g.default.UP},x),show:{type:"boolean",value:!0,target:"wall.show"},showByDistance:{type:"array",value:[0,Number.MAX_VALUE],convert:f.arrayToDistanceDisplayCondition,target:"wall.distanceDisplayCondition"},properties:{type:"object",value:{}}},E=(s=l.default,i(P,s),P);function P(t){var e=s.call(this)||this;try{if(s.prototype.fromJSON.call(e,t),!h.isObject(t))throw"error: DynamicRotateCylinder. The options is not a Object.";if(!t.position)throw"error: DynamicRotateCylinder. The position of options is not defined.";d.definedProperties(e,C,t);var n=d.getPerOptions(e,C,t);e.value=new p.Entity(n)}catch(t){}return e}E.defaultProps=C,e.default=E},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),s=n(16),l=n(11),u=n(111),c=n(12),p=n(136),h=(o=a.default,i(f,o),f.prototype.createDivPoint=function(){var t,i=this,e=this._earth.coordinateToScreenCoordinate(this._p),n=e[0],r=e[1];this._divPoint?((t=document.getElementById("earthContainer")).removeChild(this._divPoint),t.removeChild(this._line),this._circleSpread.position=this._p,this._earth.render.unbind(u.default.POST_RENDER,this._key)):this._circleSpread=new p.default({position:this._p,radius:100,color:"rgba(255,0,0,0.8)",duration:2e3,exponential:1,show:!0,showByDistance:[0,Number.MAX_VALUE]}),this.createDIV(n,r,this._text),this.createLine(n,r),this._key=this._earth.render.bind(u.default.POST_RENDER,function(t){var e=i._earth.coordinateToScreenCoordinate(i._p),n=e[0],r=e[1];i._divPoint.style.left=n+i._lineWidth/2+"px",i._divPoint.style.top=r-i._height-i._lineHeight+"px",i._line.style.left=n+"px",i._line.style.top=r-i._lineHeight+"px"}),this.value=this._circleSpread.value},f.prototype.createDIV=function(t,e,n){var r=document.getElementById("earthContainer"),i=document.createElement("div");i.id="divPoint",i.style.position="absolute",i.style.left=t+this._lineWidth/2+"px",i.style.top=e-this._height-this._lineHeight+"px",i.style.width=this._width+"px",i.style.height=this._height+"px",i.style.fontSize=this._fontSize+"px",i.style.color=this._color,i.style.padding=this._padding+"px",i.style["background-image"]="url("+this._image+")",i.style["background-repeat"]="no-repeat",i.style["background-size"]=this._width+"px "+this._height+"px",i.innerText=n,this._divPoint=i,r.appendChild(i)},f.prototype.createLine=function(t,e){var n=document.getElementById("earthContainer"),r=document.createElement("div");r.id="line",r.style.position="absolute",r.style.left=t+"px",r.style.top=e-this._lineHeight+"px",r.style.width=this._lineWidth+"px",r.style.height=this._lineHeight+"px",r.style["background-image"]="url("+this._lineImage+")",r.style["background-repeat"]="no-repeat",r.style["background-size"]=this._lineWidth/2+"px "+this._lineHeight+"px",this._line=r,n.appendChild(r)},Object.defineProperty(f.prototype,"position",{get:function(){return this._p},set:function(t){this._p=t,this.createDivPoint()},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._divPoint.style.width=t+"px",this._divPoint.style["background-size"]=t+"px "+this._height+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._divPoint.style.height=t+"px",this._divPoint.style["background-size"]=this._width+"px "+t+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t,this._divPoint.style.fontSize=t+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._divPoint.style.color=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"padding",{get:function(){return this._padding},set:function(t){this._padding=t,this._divPoint.style.padding=this._padding+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"image",{get:function(){return this._image},set:function(t){this._image=t,this._divPoint.style["background-image"]="url("+t+")"},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){this._lineWidth=t,this._line.style.width=t+"px",this._line.style["background-size"]=t/2+"px "+this._lineHeight+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"lineHeight",{get:function(){return this._lineHeight},set:function(t){this._lineHeight=t,this._line.style.height=t+"px",this._line.style["background-size"]=this._lineWidth/2+"px "+t+"px"},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"lineImage",{get:function(){return this._lineImage},set:function(t){this._lineImage=t,this._line.style["background-image"]="url("+t+")"},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this._divPoint.innerText=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"properties",{get:function(){return this._properties},set:function(t){this._properties=t,this.resetProperty("properties",t)},enumerable:!1,configurable:!0}),f);function f(t){var e=o.call(this)||this;try{if(o.prototype.fromJSON.call(e,t),e.type=l.default.DIV_POINT,e.class=s.default.ENTITY,!c.isObject(t))throw new TypeError("error: DivPoint. The options is not a Object.");if(!t.earth)throw new TypeError("error: DivPoint. The earth of options is not defined.");var n=t||{};if(e._earth=n.earth,e._p=n.position,!e._p)throw"DivPoint options position is not defined.";e._width=n.width||100,e._height=n.height||100,e._fontSize=n.fontSize||20,e._color=n.color||"rgba(255, 255, 255, 1)",e._padding=n.padding||10,e._image=n.image||window.CESIUM_BASE_URL+"Assets/Images/material/LayerBorder.png",e._lineWidth=n.lineWidth||100,e._lineHeight=n.lineHeight||100,e._lineImage=n.lineImage||window.CESIUM_BASE_URL+"Assets/Images/material/Line.png",e._text=n.text||"",e._properties=n.properties||{},e.createDivPoint()}catch(t){}return e}e.default=h},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).NORMAL="normal",i.FIT="fit",e.default=r},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=r||{}).COORDINATE_TRANSFORM="coordinate_transform",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).FOG="fog",i.RAIN="rain",i.SNOW="snow",i.WIND="wind",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{})[i.GEOGRAPHIC_PROJECTION=0]="GEOGRAPHIC_PROJECTION",i[i.WEB_MERCATOR_PROJECTION=1]="WEB_MERCATOR_PROJECTION",e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(i.prototype.initMapv=function(){if(void 0===window.mapv)throw new ReferenceError("Please install mapv! \n Tips:npm install mapv and window.mapv = require('mapv')")},i.prototype.initEchartsGl=function(){if(void 0===window.echartsGl)throw new ReferenceError("Please install echarts-gl! \n Tips:npm install echarts-gl and window.echartsGl = require('echarts-gl/dist/echarts-gl.js')")},i.prototype.initEcharts=function(){if(void 0===window.echarts)throw new ReferenceError("Please install echarts! \n Tips:npm install echarts and window.echarts = require('echarts')")},i);function i(){}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),i=n(11),o=n(45),a=n(435),s=n(358),l=n(8),u=(c.prototype.open=function(){this.bufferAnalysis()},c.prototype.close=function(){this.earth.sceneTree.remove(this._group)},c.prototype.bufferAnalysis=function(){var t,e;0!==this._positions.length&&("point"===this._type?(t=s.point(this._positions),e=a.default(t,this._radius,{units:this._units}).geometry.coordinates[0],this._group.add({type:i.default.POINT,obj:{position:this._positions,color:"rgb(255,255,0)",pixelSize:10}}),this._group.add({type:i.default.POLYGON,obj:{positions:e,fill:!0,fillColor:"rgb(255,0,0)",opacity:.5,outline:!1,clampToGround:!0}})):"polyline"===this._type?(t=s.lineString(this._positions),e=a.default(t,this._radius,{units:this._units}).geometry.coordinates[0],this._group.add({type:i.default.POLYLINE,obj:{positions:this._positions,width:5,color:"rgb(255,255,0)"}}),this._group.add({type:i.default.POLYGON,obj:{positions:e,fill:!0,fillColor:"rgb(255,0,0)",opacity:.5,outline:!1,clampToGround:!0}})):"polygon"===this._type&&(t=s.polygon([this._positions]),e=a.default(t,this._radius,{units:this._units}).geometry.coordinates[0],this._group.add({type:i.default.POLYGON,obj:{positions:this._positions,fill:!0,fillColor:"rgb(255,255,0)",outline:!1,clampToGround:!0}}),this._group.add({type:i.default.POLYGON,obj:{positions:e,fill:!0,fillColor:"rgb(255,0,0)",opacity:.5,outline:!1,clampToGround:!0}})))},Object.defineProperty(c.prototype,"group",{get:function(){return this._group},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"type",{get:function(){return this._type},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"positions",{get:function(){return this._positions},set:function(t){this._positions=t,this.earth.sceneTree.remove(this._group),this.bufferAnalysis()},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this.earth.sceneTree.remove(this._group),this.bufferAnalysis()},enumerable:!1,configurable:!0}),Object.defineProperty(c.prototype,"units",{get:function(){return this._units},set:function(t){this._units=t,this.earth.sceneTree.remove(this._group),this.bufferAnalysis()},enumerable:!1,configurable:!0}),c);function c(t){if(this._type="",this._radius=0,this._units="meters",!r.isObject(t))throw new TypeError("error: BufferAnalysis. The options is not a Object.");if(!t.earth)throw new TypeError("error: BufferAnalysis. The earth of options is not defined.");if(!t.positions)throw new TypeError("error: BufferAnalysis. The positions of options is not defined.");var e=t||{};this.earth=e.earth,this._positions=e.positions,this._type=l.defaultValue(e.type,"point"),this._radius=l.defaultValue(e.radius,100),this._units=l.defaultValue(e.units,"meters"),this._group=this.earth.sceneTree.add({type:o.default.GROUP,children:[]})}e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),a=n(8),i=(o.prototype.open=function(){this.earth._viewer.scene.globe.enableLighting=!0,this._enableContour=!0,this.updateMaterial()},o.prototype.close=function(){this.earth._viewer.scene.globe.enableLighting=!1,this._enableContour=!1,this._shading="none",this.updateMaterial()},o.prototype.updateMaterial=function(){var t,e=this._enableContour,n=this._shading,r=this.earth._viewer.scene.globe,i=this._shadingUniforms,o=this._contourUniforms;e?((o="elevation"===n?((i=(t=this.getElevationContourMaterial()).materials.elevationRampMaterial.uniforms).minimumHeight=this._minHeight,i.maximumHeight=this._maxHeight,t.materials.contourMaterial.uniforms):"slope"===n?(i=(t=this.getSlopeContourMaterial()).materials.slopeRampMaterial.uniforms,t.materials.contourMaterial.uniforms):"aspect"===n?(i=(t=this.getAspectContourMaterial()).materials.aspectRampMaterial.uniforms,t.materials.contourMaterial.uniforms):(t=a.Material.fromType("ElevationContour")).uniforms).width=this._contourWidth,o.spacing=this._contourSpacing,o.color=this._contourColor):"elevation"===n?((i=(t=a.Material.fromType("ElevationRamp")).uniforms).minimumHeight=this._minHeight,i.maximumHeight=this._maxHeight):"slope"===n?i=(t=a.Material.fromType("SlopeRamp")).uniforms:"aspect"===n&&(i=(t=a.Material.fromType("AspectRamp")).uniforms),"none"!==n&&(i.image=this.getColorRamp(n)),r.material=t},o.prototype.getColorRamp=function(t){var e=document.createElement("canvas");e.width=100,e.height=1;var n,r=e.getContext("2d");"elevation"===t?n=this._elevationRamp:"slope"===t?n=this._slopeRamp:"aspect"===t&&(n=this._aspectRamp);var i=r.createLinearGradient(0,0,100,0);return i.addColorStop(n[0],"#000000"),i.addColorStop(n[1],"#2747E0"),i.addColorStop(n[2],"#D33B7D"),i.addColorStop(n[3],"#D33038"),i.addColorStop(n[4],"#FF9742"),i.addColorStop(n[5],"#ffd700"),i.addColorStop(n[6],"#ffffff"),r.fillStyle=i,r.fillRect(0,0,100,1),e},o.prototype.getElevationContourMaterial=function(){return new a.Material({fabric:{type:"ElevationColorContour",materials:{contourMaterial:{type:"ElevationContour"},elevationRampMaterial:{type:"ElevationRamp"}},components:{diffuse:"contourMaterial.alpha == 0.0 ? elevationRampMaterial.diffuse : contourMaterial.diffuse",alpha:"max(contourMaterial.alpha, elevationRampMaterial.alpha)"}},translucent:!1})},o.prototype.getSlopeContourMaterial=function(){return new a.Material({fabric:{type:"SlopeColorContour",materials:{contourMaterial:{type:"ElevationContour"},slopeRampMaterial:{type:"SlopeRamp"}},components:{diffuse:"contourMaterial.alpha == 0.0 ? slopeRampMaterial.diffuse : contourMaterial.diffuse",alpha:"max(contourMaterial.alpha, slopeRampMaterial.alpha)"}},translucent:!1})},o.prototype.getAspectContourMaterial=function(){return new a.Material({fabric:{type:"AspectColorContour",materials:{contourMaterial:{type:"ElevationContour"},aspectRampMaterial:{type:"AspectRamp"}},components:{diffuse:"contourMaterial.alpha == 0.0 ? aspectRampMaterial.diffuse : contourMaterial.diffuse",alpha:"max(contourMaterial.alpha, aspectRampMaterial.alpha)"}},translucent:!1})},Object.defineProperty(o.prototype,"enableContour",{get:function(){return this._enableContour},set:function(t){this._enableContour=t,this.updateMaterial()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"contourSpacing",{get:function(){return this._contourSpacing},set:function(t){this._contourSpacing=t,this.updateMaterial()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"contourWidth",{get:function(){return this._contourWidth},set:function(t){this._contourWidth=t,this.updateMaterial()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"shading",{get:function(){return this._shading},set:function(t){this._shading=t,this.updateMaterial()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"contourColor",{get:function(){return this._contourColor.toCssColorString()},set:function(t){this._contourColor=a.Color.fromCssColorString(t),this.updateMaterial()},enumerable:!1,configurable:!0}),o);function o(t){if(this._minHeight=-414,this._maxHeight=8777,this._contourUniforms={},this._shadingUniforms={},this._elevationRamp=[0,.045,.1,.15,.37,.54,1],this._slopeRamp=[0,.29,.5,Math.sqrt(2)/2,.87,.91,1],this._aspectRamp=[0,.2,.4,.6,.8,.9,1],!r.isObject(t))throw new TypeError("error: ContourLinesAnalysis. The options is not a Object.");if(!t.earth)throw new TypeError("error: ContourLinesAnalysis. The earth of options is not defined.");var e=t||{};this.earth=e.earth,this._enableContour=a.defaultValue(e.enableContour,!0),this._contourSpacing=a.defaultValue(e.contourSpacing,150),this._contourWidth=a.defaultValue(e.contourWidth,2),this._shading=a.defaultValue(e.shading,"elevation");var n=a.defaultValue(e.contourColor,"rgb(255,0,0)");this._contourColor=a.Color.fromCssColorString(n)}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(225),i=n(12),a=n(8),o=(s.prototype.open=function(){this.createEntityLayer(),this.showInundation(!1),this.setAnimate(!1)},s.prototype.close=function(){this.removeAll(),this._adapCoordi=[]},s.prototype.start=function(){var e=this;this.createEntityLayer(),this.showInundation(!1),this.setAnimate(!1),0===this._adapCoordi.length?(this._positions.forEach(function(t){e._adapCoordi.push(t[0],t[1])}),this.initialise()):(this.showInundation(!0),this.setAnimate(!0))},s.prototype.stop=function(){this.setAnimate(!1)},s.prototype.refresh=function(){this.removeAll(),this.initialise()},s.prototype.initialise=function(){this.addInundationArea(),this.addTimeEntity(),this.setViewerClock(),this.setInundationListener(),this.showInundation(!0),this.setAnimate(!0)},s.prototype.setAnimate=function(t){this.earth._viewer.clock.shouldAnimate=t},s.prototype.showInundation=function(t){a.defined(this._waterPolygonPrimitive)&&(this._waterPolygonPrimitive.show=t)},s.prototype.addInundationArea=function(){var t;this._waterPolygonPrimitive||(t=this.earth._viewer.entities.getById(this._layername),this._waterPolygonPrimitive=new r.WaterPolygonPrimitive(this.earth._viewer,this._adapCoordi,t,this._watername,this._waterMinAltitude),this._waterPolygonPrimitive.show=!1)},s.prototype.addTimeEntity=function(){var t=this.earth._viewer.entities.getById(this._layername);this._startTime=a.JulianDate.fromDate(new Date),this._stopTime=a.JulianDate.addSeconds(this._startTime,this._totalTime,new a.JulianDate);this.earth._viewer.entities.add({id:this._timename,parent:t,availability:new a.TimeIntervalCollection([new a.TimeInterval({start:this._startTime,stop:this._stopTime})]),altitude:this.computeAltitude()})},s.prototype.setViewerClock=function(){this.earth._viewer.clock.startTime=this._startTime.clone(),this.earth._viewer.clock.stopTime=this._stopTime.clone(),this.earth._viewer.clock.currentTime=this._startTime.clone(),this.earth._viewer.clock.clockRange=a.ClockRange.LOOP_STOP,this.earth._viewer.clock.multiplier=1,this.earth._viewer.clock.shouldAnimate=!0},s.prototype.setInundationListener=function(){var t,i=this,o=this.earth._viewer.entities.getById(this._timename);a.defined(o)&&a.defined(i._waterPolygonPrimitive)&&(t=this.earth._viewer.scene.postUpdate.addEventListener(function(t,e){var n=e.secondsOfDay-i._startTime.secondsOfDay,r=o.altitude.getValue(n);i._waterAltidute=Number((i._baseAltidute+r).toFixed(2)),i._waterPolygonPrimitive.extrudedHeight=r}),this._removeListener=t)},s.prototype.removeAll=function(){this.removeInundationListener(),this.cleanUpTempEntityLayer()},s.prototype.removeInundationListener=function(){this._removeListener&&this._removeListener(),this._removeListener=null},s.prototype.computeAltitude=function(){function t(){}var n=this;return t.prototype.getValue=function(t){var e=t/n._totalTime;return(n._waterMaxAltitude-n._waterMinAltitude)*e+n._waterMinAltitude},new t},s.prototype.createEntityLayer=function(){var t,e=this.earth._viewer.entities.getById(this._layername);a.defined(e)||(t=new a.Entity({id:this._layername}),this.earth._viewer.entities.add(t))},s.prototype.cleanUpTempEntityLayer=function(){var t=this.earth._viewer.entities.getById(this._layername);if(a.defined(t))for(var e=t._children.length-1;0<=e;e--)this.earth._viewer.entities.remove(t._children[e]),t._children.splice(e,1);this._waterPolygonPrimitive=null},Object.defineProperty(s.prototype,"positions",{get:function(){return this._positions},set:function(t){var e=this;this._positions=t,this._adapCoordi=[],this._positions.forEach(function(t){e._adapCoordi.push(t[0],t[1])}),this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"baseAltidute",{get:function(){return this._baseAltidute},set:function(t){this._baseAltidute=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"waterMinAltitude",{get:function(){return this._waterMinAltitude},set:function(t){this._waterMinAltitude=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"waterMaxAltitude",{get:function(){return this._waterMaxAltitude},set:function(t){this._waterMaxAltitude=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"totalTime",{get:function(){return this._totalTime},set:function(t){this._totalTime=t,this.refresh()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"waterAltidute",{get:function(){return this._waterAltidute},enumerable:!1,configurable:!0}),s);function s(t){if(this._layername="inundationlayer",this._timename="inundationtime",this._watername="waterarea",this._baseAltidute=120,this._adapCoordi=[],this._waterAltidute=this._baseAltidute+10,this._positions=[],!i.isObject(t))throw new TypeError("error: InundationAnalysis. The options is not a Object.");if(!t.earth)throw new TypeError("error: InundationAnalysis. The earth of options is not defined.");if(!t.positions)throw new TypeError("error: InundationAnalysis. The positions of options is not defined.");var e=t||{};this.earth=e.earth,this._positions=e.positions,this._baseAltidute=a.defaultValue(e.baseAltidute,120),this._waterMinAltitude=a.defaultValue(e.waterMinAltitude,10),this._waterMaxAltitude=a.defaultValue(e.waterMaxAltitude,50),this._totalTime=a.defaultValue(e.totalTime,10)}e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WaterPolygonPrimitive=e.TriangleLinePrimitive=e.PolygonPrimitive=e.PolyLinePrimitive=void 0;var a=n(8),r=(i.prototype._init=function(t){var e=this;this.options.polyline.positions=new a.CallbackProperty(function(){return e.positions},!1),t.entities.add(this.options)},i);function i(t,e,n,r,i){var o=i||{};this.options={parent:n,name:r,polyline:{clampToGround:o.clampToGround||!1,show:!0,positions:[],material:a.Color.CHARTREUSE,width:2}},this.positions=e,this._init(t)}e.PolyLinePrimitive=r;var o=(s.prototype._init=function(t){var e=this;this.options.polygon.hierarchy=new a.CallbackProperty(function(){return e.hierarchy},!1),t.entities.add(this.options)},s);function s(t,e,n,r){this.options={parent:n,name:r||"",polygon:{hierarchy:[],perPositionHeight:!0,material:a.Color.CHARTREUSE.withAlpha(.5)}},this.hierarchy=e,this._init(t)}e.PolygonPrimitive=o;var l=(u.prototype._init=function(t){var e=this;this.options.polyline.positions=new a.CallbackProperty(function(){return e.positions},!1),this.options.position=new a.CallbackProperty(function(){return e.positions[1].clone()},!1),this.options.label.text=new a.CallbackProperty(function(){var t=e.func(e.positions);return t+=e.param.unit},!1),t.entities.add(this.options)},u);function u(t,e,n,r,i,o){this.options={parent:n,name:r,polyline:{show:!0,positions:[],material:a.Color.GOLD,width:2},label:{font:"18px sans-serif",fillColor:a.Color.GOLD,style:a.LabelStyle.FILL_AND_OUTLINE,outlineWidth:2,verticalOrigin:a.VerticalOrigin.BOTTOM,pixelOffset:new a.Cartesian2(20,-40)}},this.positions=e,this.func=i,this.param=o,this._init(t)}e.TriangleLinePrimitive=l;var c=(p.prototype._init=function(t){function e(){return n.show}var n=this;this.options.polygon.extrudedHeight=new a.CallbackProperty(function(){return n.extrudedHeight},!1),this.options.polygon.show=new a.CallbackProperty(e,!1),this.options.show=new a.CallbackProperty(e,!1),t.entities.add(this.options)},p);function p(t,e,n,r,i){this.options={parent:n,name:r,show:!1,polygon:{show:!1,hierarchy:a.Cartesian3.fromDegreesArray(e),material:a.Color.CORNFLOWERBLUE.withAlpha(.8),perPositionHeight:!0,extrudedHeight:0}},this.extrudedHeight=i,this.show=!1,this._init(t)}e.WaterPolygonPrimitive=c},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{o(l.next(t))}catch(t){e(t)}}function i(t){try{o(l.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((l=l.apply(t,a||[])).next())})},m=this&&this.__generator||function(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),v=n(69),b=n(22),o=n(225),w=n(8),a=(s.prototype.start=function(){this.createLayerEntity(),this.profileAnalysis()},s.prototype.cleanup=function(){this._distanceArray=[],this._heightArray=[],this._sampleArray=[],this.cleanUpTempEntityLayer(),this.createLayerEntity()},s.prototype.appendPoint=function(t,e){var n={parent:this.earth._viewer.entities.getById(this._layername),position:t,point:{pixelSize:5,color:w.Color.RED,outlineColor:w.Color.WHITE,outlineWidth:2,heightReference:this._terrain?w.HeightReference.CLAMP_TO_GROUND:w.HeightReference.NONE}};e&&(n.id=e),this.earth._viewer.entities.add(n)},s.prototype.appendPolyline=function(t){var e=this.earth._viewer.entities.getById(this._layername);return new o.PolyLinePrimitive(this.earth._viewer,t,e,"",{clampToGround:!0})},s.prototype.profileAnalysis=function(){return r(this,void 0,void 0,function(){var e,n,r,i,o,a,s,l,u,c,p,h,f,d,y,g,_=this;return m(this,function(t){switch(t.label){case 0:if(0===this._startPoint.length||0===this._endPoint.length)return[2];for(this.appendPolyline([b.default.degreesToCartesian(this._startPoint),b.default.degreesToCartesian(this._endPoint)]),e=this._startPoint[0],n=this._startPoint[1],r=this._endPoint[0],i=this._endPoint[1],o=w.Cartographic.fromCartesian(b.default.degreesToCartesian(this._startPoint)),a=w.Cartographic.fromCartesian(b.default.degreesToCartesian(this._endPoint)),s=v.distanceBetween2Points(o,a),l=[],u=0;u<this._pointsNum;u++)c=w.Math.lerp(e,r,u/(this._pointsNum-1)),p=w.Math.lerp(n,i,u/(this._pointsNum-1)),h=w.Math.lerp(0,s,u/(this._pointsNum-1)),f=new w.Cartographic(w.Math.toRadians(c),w.Math.toRadians(p)),this._distanceArray.push(Number(h.toFixed(2))),this._terrain?l.push(f):(d=this.earth._viewer.scene.sampleHeight(f)||0,y=Number(d.toFixed(2)),this.appendPoint(b.default.degreesToCartesian([c,p,y])),this._heightArray.push(y),g=new w.Cartographic(c,p,y),this._sampleArray.push(g));return this._terrain?[4,w.sampleTerrain(this.earth._viewer.terrainProvider,11,l)]:[3,2];case 1:t.sent().forEach(function(t){var e=Number(t.height.toFixed(2)),n=[w.Math.toDegrees(t.longitude),w.Math.toDegrees(t.latitude),e];_.appendPoint(b.default.degreesToCartesian(n)),_._heightArray.push(e),_._sampleArray.push(n)}),t.label=2;case 2:return[2]}})})},s.prototype.createLayerEntity=function(){var t=new w.Entity({id:this._layername}),e=this.earth._viewer.entities.getById(this._layername);w.defined(e)||this.earth._viewer.entities.add(t)},s.prototype.cleanUpTempEntityLayer=function(){var t=this.earth._viewer.entities.getById(this._layername);if(w.defined(t))for(var e=t._children.length-1;0<=e;e--)this.earth._viewer.entities.remove(t._children[e]),t._children.splice(e,1)},Object.defineProperty(s.prototype,"startPoint",{get:function(){return this._startPoint},set:function(t){this._startPoint=t,this.cleanup(),this.start()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"endPoint",{get:function(){return this._endPoint},set:function(t){this._endPoint=t,this.cleanup(),this.start()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"terrain",{get:function(){return this._terrain},set:function(t){this._terrain=t,this.cleanup(),this.start()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"pointsNum",{get:function(){return this._pointsNum},set:function(t){this._pointsNum=t,this.cleanup(),this.start()},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"distanceArray",{get:function(){return this._distanceArray},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"heightArray",{get:function(){return this._heightArray},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"sampleArray",{get:function(){return this._sampleArray},enumerable:!1,configurable:!0}),s);function s(t){if(this._layername="profile",this._distanceArray=[],this._heightArray=[],this._sampleArray=[],!i.isObject(t))throw new TypeError("error: ProfileAnalysis. The options is not a Object.");if(!t.earth)throw new TypeError("error: ProfileAnalysis. The earth of options is not defined.");if(!t.startPoint)throw new TypeError("error: ProfileAnalysis. The startPoint of options is not defined.");if(!t.endPoint)throw new TypeError("error: ProfileAnalysis. The endPoint of options is not defined.");var e=t||{};this.earth=e.earth,this._startPoint=w.defaultValue(e.startPoint,[]),this._endPoint=w.defaultValue(e.endPoint,[]),this._terrain=w.defaultValue(e.terrain,!1),this._pointsNum=w.defaultValue(e.pointsNum,100)}e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),o=n(8),r=(a.prototype.open=function(){this.setViewerClock(),this.earth._viewer.shadows=!0,this.earth._viewer.clock.shouldAnimate=!0},a.prototype.close=function(){this.earth._viewer.shadows=!1,this.earth._viewer.clock.shouldAnimate=!1},a.prototype.start=function(){this.earth._viewer.clock.shouldAnimate=!0},a.prototype.stop=function(){this.earth._viewer.clock.shouldAnimate=!1},a.prototype.setViewerClock=function(){var t=this.getStartDateTime(),e=this.getEndDateTime();this.earth._viewer.clock.startTime=o.JulianDate.fromDate(t).clone(),this.earth._viewer.clock.stopTime=o.JulianDate.fromDate(e).clone(),this.earth._viewer.clock.currentTime=o.JulianDate.fromDate(t).clone(),this.earth._viewer.clock.clockRange=o.ClockRange.LOOP_STOP,this.earth._viewer.clock.multiplier=1e3,this.earth._viewer.clock.shouldAnimate=!0},a.prototype.getDefaultDateTime=function(t){var e=new Date,n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate();return new Date(n,r,i,t,0)},a.prototype.getStartDateTime=function(){var t=new Date(this._date.valueOf()),e=this._startTime.getHours(),n=this._startTime.getMinutes(),r=this._startTime.getSeconds();return t.setHours(e,n,r),t},a.prototype.getEndDateTime=function(){var t=new Date(this._date.valueOf()),e=this._endTime.getHours(),n=this._endTime.getMinutes(),r=this._endTime.getSeconds();return t.setHours(e,n,r),t},Object.defineProperty(a.prototype,"date",{get:function(){return this._date},set:function(t){this._date=t,this.open()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"startTime",{get:function(){return this._startTime.getHours()},set:function(t){this._startTime=this.getDefaultDateTime(t),this.open()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"endTime",{get:function(){return this._endTime.getHours()},set:function(t){this._endTime=this.getDefaultDateTime(t),this.open()},enumerable:!1,configurable:!0}),a);function a(t){if(!i.isObject(t))throw new TypeError("error: SolarAnalysis. The options is not a Object.");if(!t.earth)throw new TypeError("error: SolarAnalysis. The earth of options is not defined.");var e=t||{};this.earth=e.earth,this.earth._viewer.scene.shadowMap.size=20480,this._date=o.defaultValue(e.date,new Date);var n=o.defaultValue(e.startTime,6),r=o.defaultValue(e.endTime,18);this._startTime=this.getDefaultDateTime(n),this._endTime=this.getDefaultDateTime(r)}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),o=n(22),d=n(8),i=(a.prototype.start=function(){this.createLayerEntity(),this.doMining()},a.prototype.repair=function(){this.cleanDraw(),this._positions=[],this._model.value.clippingPlanes=new d.ClippingPlaneCollection,this.earth._viewer.scene.globe.clippingPlanes=new d.ClippingPlaneCollection},a.prototype.addPoint=function(t){var e=this.earth._viewer.entities.getById(this._layername);this.earth._viewer.entities.add({parent:e,position:d.Cartesian3.fromDegrees(t[0],t[1],t[2]),point:{pixelSize:5,color:d.Color.RED,outlineColor:d.Color.WHITE,outlineWidth:2,heightReference:d.HeightReference.NONE}})},a.prototype.doMining=function(){var t,u,c,e,n,r,p,h,i,f=this;0!==this._positions.length&&(t=d.Matrix4.getTranslation(this._model.value.root.transform,new d.Cartesian3),u=this._positions.map(function(t){return o.default.degreesToCartesian(t)}),c=this.getCenterFromArray(u),e=this.calculateOffsetXYByPoints(t,c),n=new d.Cartesian3(e.x,e.y,0),r=d.Matrix4.fromTranslation(n),p=this.calculateDirection(u),h=[],u.forEach(function(t,e){var n,r=null,r=e===u.length-1?u[0]:u[e+1],i=p?(n=r,t):(n=t,r),o=f.calculateABCFromPoints(c,n,i),a=new d.Plane(new d.Cartesian3(o.a,o.b,0),o.c),s=d.Plane.getPointDistance(a,new d.Cartesian3(0,0,0)),l=new d.ClippingPlane(new d.Cartesian3(o.a,o.b,0),s);h.push(l)}),i=new d.ClippingPlaneCollection({modelMatrix:r,planes:h,edgeWidth:1,edgeColor:d.Color.WHITE,enabled:!0}),this._model.value.clippingPlanes=i)},a.prototype.cleanDraw=function(){var t=this.earth._viewer.entities.getById(this._layername);if(d.defined(t))for(var e=t._children.length-1;0<=e;e--)this.earth._viewer.entities.remove(t._children[e]),t._children.splice(e,1)},a.prototype.createLayerEntity=function(){var t=new d.Entity({id:this._layername}),e=this.earth._viewer.entities.getById(this._layername);d.defined(e)||this.earth._viewer.entities.add(t)},a.prototype.calculateOffsetXYByPoints=function(t,e){var n=d.Cartographic.fromCartesian(t),r=d.Cartographic.fromCartesian(e),i=new d.EllipsoidGeodesic;i.setEndPoints(n,new d.Cartographic(r.longitude,n.latitude,n.height));var o=(r.longitude-n.longitude)/Math.abs(n.longitude-r.longitude)*i.surfaceDistance;return(i=new d.EllipsoidGeodesic).setEndPoints(n,new d.Cartographic(n.longitude,r.latitude,n.height)),{x:o,y:(r.latitude-n.latitude)/Math.abs(n.latitude-r.latitude)*i.surfaceDistance}},a.prototype.calculateABCFromPoints=function(t,e,n){var r=this.calculateOffsetXYByPoints(t,e),i=this.calculateOffsetXYByPoints(t,n),o=i.y-r.y,a=r.x-i.x,s=Math.sqrt(Math.pow(o,2)+Math.pow(a,2));return{a:o/s,b:a/s,c:(i.x*r.y-r.x*i.y)/s}},a.prototype.getCenterFromArray=function(t){var e=0,n=0,r=0;t.forEach(function(t){e+=t.x,n+=t.y,r+=t.z});var i=e/t.length,o=n/t.length,a=r/t.length;return new d.Cartesian3(i,o,a)},a.prototype.calculateDirection=function(c){var p=0;return c.forEach(function(t,e){var n,r,i=e===c.length-2?(n=t,r=c[c.length-1],c[0]):e===c.length-1?(n=t,r=c[0],c[1]):(n=t,r=c[e+1],c[e+2]),o=d.Cartographic.fromCartesian(n),a=d.Cartographic.fromCartesian(r),s=d.Cartographic.fromCartesian(i),l=(a.longitude-o.longitude)*(s.latitude-o.latitude)-(a.latitude-o.latitude)*(s.longitude-o.longitude),u=Math.sqrt(Math.pow(a.longitude-o.longitude,2)+Math.pow(a.latitude-o.latitude,2))+Math.sqrt(Math.pow(s.longitude-a.longitude,2)+Math.pow(s.latitude-a.latitude,2));p+=l*u}),p<0},Object.defineProperty(a.prototype,"positions",{get:function(){return this._positions},set:function(t){this._positions=t,this.start()},enumerable:!1,configurable:!0}),a);function a(t){if(this._layername="surfaceMining",!r.isObject(t))throw new TypeError("error: SurfaceMiningAnalysis. The options is not a Object.");if(!t.earth)throw new TypeError("error: SurfaceMiningAnalysis. The earth of options is not defined.");if(!t.positions)throw new TypeError("error: SurfaceMiningAnalysis. The positions of options is not defined.");if(!t.model)throw new TypeError("error: SurfaceMiningAnalysis. The model of options is not defined.");var e=t||{};this.earth=e.earth,this._positions=d.defaultValue(e.positions,[]),this._model=e.model}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(12),h=n(22),f=n(8),i=(o.prototype.start=function(){this.createEntityLayer(),this.riseHeight(this._height),this.visiableAnalysis()},o.prototype.cleanup=function(){this.cleanUpTempEntityLayer(),this.destoryEntityLayer()},o.prototype.visiableAnalysis=function(){var t,e,n,r,i,o,a,s,l,u,c,p;0!==this.startPoint.length&&0!==this.endPoint.length&&(t=!1,e=this.earth._viewer.entities.getById(this._layername),n=h.default.degreesToCartesian(this._startPoint),r=h.default.degreesToCartesian(this._endPoint),i=f.Cartesian3.normalize(f.Cartesian3.subtract(r,n,new f.Cartesian3),new f.Cartesian3),o=new f.Ray(n,i),a=this.earth._viewer.scene.pickFromRay(o,this.earth._viewer.entities.getById(this._layername)._children),s=this.earth._viewer.scene.globe.pick(o,this.earth._viewer.scene),l=a&&a.position||s,f.defined(l)?(u=f.Cartesian3.normalize(f.Cartesian3.subtract(r,n,new f.Cartesian3),new f.Cartesian3),c=f.Cartesian3.normalize(f.Cartesian3.subtract(r,l,new f.Cartesian3),new f.Cartesian3),u.x/Math.abs(u.x)!=c.x/Math.abs(c.x)||u.y/Math.abs(u.y)!=c.y/Math.abs(c.y)?t=!0:(p={parent:e,position:l,point:{pixelSize:15,color:f.Color.RED,heightReference:f.HeightReference.NONE}},this.earth._viewer.entities.add({parent:e,polyline:{positions:[n].concat([l]),width:5,material:f.Color.GREEN}}),this.earth._viewer.entities.add({parent:e,polyline:{positions:[r].concat([l]),width:5,material:f.Color.RED}}),this.earth._viewer.entities.add(p))):t=!0,t&&this.earth._viewer.entities.add({parent:e,polyline:{positions:[n].concat([r]),width:5,material:f.Color.GREEN}}))},o.prototype.riseHeight=function(t){0!==this._startPoint.length&&0!==this._endPoint.length&&(this.cleanUpTempEntityLayer(),f.defined(this._preHeight)||(this._preHeight=this._startPoint[2]),this._startPoint[2]=this._preHeight+t,this.addPoint(this._startPoint[0],this._startPoint[1],this._startPoint[2]),this.addPoint(this._endPoint[0],this._endPoint[1],this._endPoint[2]))},o.prototype.addPoint=function(t,e,n){var r={parent:this.earth._viewer.entities.getById(this._layername),position:f.Cartesian3.fromDegrees(t,e,n),point:{pixelSize:15,color:f.Color.YELLOW,heightReference:f.HeightReference.NONE}};this.earth._viewer.entities.add(r)},o.prototype.createEntityLayer=function(){var t,e=this.earth._viewer.entities.getById(this._layername);f.defined(e)||(t=new f.Entity({id:this._layername}),this.earth._viewer.entities.add(t))},o.prototype.cleanUpTempEntityLayer=function(){var t=this.earth._viewer.entities.getById(this._layername);if(f.defined(t))for(var e=t._children.length-1;0<=e;e--)this.earth._viewer.entities.remove(t._children[e]),t._children.splice(e,1)},o.prototype.destoryEntityLayer=function(){this.earth._viewer.entities.removeById(this._layername)},Object.defineProperty(o.prototype,"startPoint",{get:function(){return this._startPoint},set:function(t){this._startPoint=t,this._preHeight=t[2],this.start()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"endPoint",{get:function(){return this._endPoint},set:function(t){this._endPoint=t,this.start()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.start()},enumerable:!1,configurable:!0}),o);function o(t){if(this._layername="visibility",!r.isObject(t))throw new TypeError("error: VisibilityAnalysis. The options is not a Object.");if(!t.earth)throw new TypeError("error: VisibilityAnalysis. The earth of options is not defined.");if(!t.startPoint)throw new TypeError("error: VisibilityAnalysis. The startPoint of options is not defined.");if(!t.endPoint)throw new TypeError("error: VisibilityAnalysis. The endPoint of options is not defined.");var e=t||{};this.earth=e.earth,this._startPoint=f.defaultValue(e.startPoint,[]),this._endPoint=f.defaultValue(e.endPoint,[]),this._height=f.defaultValue(e.height,0)}e.default=i},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{o(l.next(t))}catch(t){e(t)}}function i(t){try{o(l.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((l=l.apply(t,a||[])).next())})},i=this&&this.__generator||function(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var l,o=n(8),u=n(370),a={loadData:function(e){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,s(e.ncFile)];case 1:return t.sent(),function(t){for(var e=t.ncolors,n=t.colorTable,r=new Float32Array(3*e),i=0;i<e;i++)r[3*i]=n[3*i],r[3*i+1]=n[3*i+1],r[3*i+2]=n[3*i+2];l.colorTable={},l.colorTable.colorNum=e,l.colorTable.array=r}(e.colorTableFile),[2,l]}})})},randomizeParticles:function(t,e){for(var n=new Float32Array(4*t),r=0;r<t;r++)n[4*r]=o.Math.randomBetween(e.lonRange.x,e.lonRange.y),n[4*r+1]=o.Math.randomBetween(e.latRange.x,e.latRange.y),n[4*r+2]=o.Math.randomBetween(l.lev.min,l.lev.max),n[4*r+3]=0;return n}};function s(t){return new Promise(function(a){var s=new XMLHttpRequest;s.open("GET",t),s.responseType="arraybuffer",s.onload=function(){function t(t){return t.reduce(function(t,e){return t[e.name]=e,t},{})}var e=new u(s.response);l={};var n=t(e.dimensions);l.dimensions={},l.dimensions.lon=n.lon.size,l.dimensions.lat=n.lat.size,l.dimensions.lev=n.lev.size;var r=t(e.variables),i=t(r.U.attributes),o=t(r.V.attributes);l.lon={},l.lon.array=new Float32Array(e.getDataVariable("lon").flat()),l.lon.min=Math.min.apply(Math,l.lon.array),l.lon.max=Math.max.apply(Math,l.lon.array),l.lat={},l.lat.array=new Float32Array(e.getDataVariable("lat").flat()),l.lat.min=Math.min.apply(Math,l.lat.array),l.lat.max=Math.max.apply(Math,l.lat.array),l.lev={},l.lev.array=new Float32Array(e.getDataVariable("lev").flat()),l.lev.min=Math.min.apply(Math,l.lev.array),l.lev.max=Math.max.apply(Math,l.lev.array),l.U={},l.U.array=new Float32Array(e.getDataVariable("U").flat()),l.U.min=i.min.value,l.U.max=i.max.value,l.V={},l.V.array=new Float32Array(e.getDataVariable("V").flat()),l.V.min=o.min.value,l.V.max=o.max.value,a(l)},s.send()})}e.default=a},function(t,e,n){"use strict";var i=n(147).notNetcdf,o={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};function a(t,e){if(1===t)return e();for(var n=new Array(t),r=0;r<t;r++)n[r]=e();return n}t.exports=o,t.exports.num2str=function(t){switch(Number(t)){case o.BYTE:return"byte";case o.CHAR:return"char";case o.SHORT:return"short";case o.INT:return"int";case o.FLOAT:return"float";case o.DOUBLE:return"double";default:return"undefined"}},t.exports.num2bytes=function(t){switch(Number(t)){case o.BYTE:case o.CHAR:return 1;case o.SHORT:return 2;case o.INT:case o.FLOAT:return 4;case o.DOUBLE:return 8;default:return-1}},t.exports.str2num=function(t){switch(String(t)){case"byte":return o.BYTE;case"char":return o.CHAR;case"short":return o.SHORT;case"int":return o.INT;case"float":return o.FLOAT;case"double":return o.DOUBLE;default:return-1}},t.exports.readType=function(t,e,n){switch(e){case o.BYTE:return t.readBytes(n);case o.CHAR:return 0!==(r=t.readChars(n)).charCodeAt(r.length-1)?r:r.substring(0,r.length-1);case o.SHORT:return a(n,t.readInt16.bind(t));case o.INT:return a(n,t.readInt32.bind(t));case o.FLOAT:return a(n,t.readFloat32.bind(t));case o.DOUBLE:return a(n,t.readFloat64.bind(t));default:return void i(!0,"non valid type ".concat(e))}var r}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n(8);var r=n(8),i=r.defaultValue,o=r.ClearCommand,a=r.Color,s=r.Pass,l=r.VertexArray,u=r.BufferUsage,c=r.ShaderProgram,p=r.RenderState,h=r.DrawCommand,f=r.Matrix4,d=r.ComputeCommand,y=r.defined,g=r.destroyObject,_=(m.prototype.createCommand=function(t){switch(this.commandType){case"Draw":var e=l.fromGeometry({context:t,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:u.STATIC_DRAW}),n=c.fromCache({context:t,attributeLocations:this.attributeLocations,vertexShaderSource:this.vertexShaderSource,fragmentShaderSource:this.fragmentShaderSource}),r=p.fromCache(this.rawRenderState);return new h({owner:this,vertexArray:e,primitiveType:this.primitiveType,uniformMap:this.uniformMap,modelMatrix:f.IDENTITY,shaderProgram:n,framebuffer:this.framebuffer,renderState:r,pass:s.OPAQUE});case"Compute":return new d({owner:this,fragmentShaderSource:this.fragmentShaderSource,uniformMap:this.uniformMap,outputTexture:this.outputTexture,persists:!0})}},m.prototype.setGeometry=function(t,e){this.geometry=e;var n=l.fromGeometry({context:t,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:u.STATIC_DRAW});this.commandToExecute.vertexArray=n},m.prototype.update=function(t){this.show&&(y(this.commandToExecute)||(this.commandToExecute=this.createCommand(t.context)),y(this.preExecute)&&this.preExecute(),y(this.clearCommand)&&t.commandList.push(this.clearCommand),t.commandList.push(this.commandToExecute))},m.prototype.isDestroyed=function(){return!1},m.prototype.destroy=function(){return y(this.commandToExecute)&&(this.commandToExecute.shaderProgram=this.commandToExecute.shaderProgram&&this.commandToExecute.shaderProgram.destroy()),g(this)},m);function m(t){this.commandType=t.commandType,this.geometry=t.geometry,this.attributeLocations=t.attributeLocations,this.primitiveType=t.primitiveType,this.uniformMap=t.uniformMap,this.vertexShaderSource=t.vertexShaderSource,this.fragmentShaderSource=t.fragmentShaderSource,this.rawRenderState=t.rawRenderState,this.framebuffer=t.framebuffer,this.outputTexture=t.outputTexture,this.autoClear=i(t.autoClear,!1),this.preExecute=t.preExecute,this.show=!0,this.commandToExecute=void 0,this.clearCommand=void 0,this.autoClear&&(this.clearCommand=new o({color:new a(0,0,0,0),depth:1,framebuffer:this.framebuffer,pass:s.OPAQUE}))}e.default=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(28),i=n(8),o=n(96),a=n(11),s=(Object.defineProperty(l.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),l.prototype.start=function(){var n=this;n._drawGeometry=new o.default(n._earth,function(t){n._options.position=t;var e=n._group.add({type:a.default.POINT,obj:n._options});return n._drawStart.raiseEvent({object:e,position:t}),n._drawEnd.raiseEvent({object:e,position:t}),e})},l.prototype.finish=function(){this._drawGeometry.destory()},l.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._drawMode=r.default.NONE)},l.prototype.setOptions=function(t){this._options=Object.assign(this._options,t)},l);function l(t,e){this._options={position:null,pixelSize:5,color:"rgb(255,0,0)",outlineColor:"rgb(0,0,0)",outlineWidth:0},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new i.Event,this._drawStart=new i.Event}e.default=s},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).DRAW_POINT="DrawPoint",i.DRAW_BILLBOARD="DrawBillborad",i.DRAW_MODEL="DrawModel",i.DRAW_ARTIFICIAL_MODEL_TILESET="DrawArtificialModelTileset",i.DRAW_POLYLINE="DrawPolyline",i.DRAW_POLYLINE_ARROW="DrawPolylineArrow",i.DRAW_POLYLINE_DASH="DrawPolylineDash",i.DRAW_POLYLINE_GLOW="DrawPolylineGlow",i.DRAW_POLYLINE_OUTLINE="DrawPolylineOutline",i.DRAW_POLYGON="draw_polygon",i.DRAW_STRAIGHT_ARROW="draw_straight_arrow",i.DRAW_ATTACK_ARROW="draw_attack_arrow",i.DRAW_PINCER_ARROW="draw_pincer_arrow",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).POINT="point",i.DISTANCE="distance",i.HEIGHT="height",i.AREA="area",i.TERRAIN_DISTANCE="terrain_distance",i.TERRAIN_AREA="terrain_area",i.VOLUME="volume",e.default=r},function(t,e,n){"use strict";n.r(e),Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},Array.prototype.mean=function(){for(var t=0,e=0;t<this.length;t++)e+=this[t];return e/this.length},Array.prototype.rep=function(t){return Array.apply(null,new Array(t)).map(Number.prototype.valueOf,this[0])},Array.prototype.pip=function(t,e){for(var n=!1,r=0,i=this.length-1;r<this.length;i=r++)this[r][1]>e!=this[i][1]>e&&t<(this[i][0]-this[r][0])*(e-this[r][1])/(this[i][1]-this[r][1])+this[r][0]&&(n=!n);return n};var m,r=((m={}).train=function(t,e,n,r,i,o){var a={t:t,x:e,y:n,nugget:0,range:0,sill:0,A:1/3,n:0};switch(r){case"gaussian":a.model=D;break;case"exponential":a.model=R;break;case"spherical":a.model=j}for(var s,l,u=t.length,c=Array((u*u-u)/2),p=0,h=0;p<u;p++)for(s=0;s<p;s++,h++)c[h]=Array(2),c[h][0]=Math.pow(Math.pow(e[p]-e[s],2)+Math.pow(n[p]-n[s],2),.5),c[h][1]=Math.abs(t[p]-t[s]);c.sort(function(t,e){return t[0]-e[0]}),a.range=c[(u*u-u)/2-1][0];var f=30<(u*u-u)/2?30:(u*u-u)/2,d=a.range/f,y=[0].rep(f),g=[0].rep(f);if(f<30)for(l=0;l<f;l++)y[l]=c[l][0],g[l]=c[l][1];else{for(l=h=s=p=0;p<f&&s<(u*u-u)/2;p++,h=0){for(;c[s][0]<=(p+1)*d&&(y[l]+=c[s][0],g[l]+=c[s][1],h++,!((u*u-u)/2<=++s)););0<h&&(y[l]/=h,g[l]/=h,l++)}if(l<2)return a}u=l,a.range=y[u-1]-y[0];var _=[1].rep(2*u),m=Array(u),v=a.A;for(p=0;p<u;p++){switch(r){case"gaussian":_[2*p+1]=1-Math.exp(-1/v*Math.pow(y[p]/a.range,2));break;case"exponential":_[2*p+1]=1-Math.exp(-1/v*y[p]/a.range);break;case"spherical":_[2*p+1]=y[p]/a.range*1.5-.5*Math.pow(y[p]/a.range,3)}m[p]=g[p]}var b=function(t,e,n){for(var r,i=Array(n*e),o=0;o<e;o++)for(r=0;r<n;r++)i[r*e+o]=t[o*n+r];return i}(_,u,2),w=A(b,_,2,u,2),x=(w=I(w,S(1/o,2),2,2)).slice(0);L(w,2)?N(w,2):(M(x,2),w=x);var C=A(A(w,b,2,2,u),m,2,u,1);a.nugget=C[0],a.sill=C[1]*a.range+a.nugget,a.n=e.length,u=e.length;var E=Array(u*u);for(p=0;p<u;p++){for(s=0;s<p;s++)E[p*u+s]=a.model(Math.pow(Math.pow(e[p]-e[s],2)+Math.pow(n[p]-n[s],2),.5),a.nugget,a.range,a.sill,a.A),E[s*u+p]=E[p*u+s];E[p*u+p]=a.model(0,a.nugget,a.range,a.sill,a.A)}var P=I(E,S(i,u),u,u),O=P.slice(0);L(P,u)?N(P,u):(M(O,u),P=O);var E=P.slice(0),T=A(P,t,u,u,1);return a.K=E,a.M=T,a},m.predict=function(t,e,n){for(var r=Array(n.n),i=0;i<n.n;i++)r[i]=n.model(Math.pow(Math.pow(t-n.x[i],2)+Math.pow(e-n.y[i],2),.5),n.nugget,n.range,n.sill,n.A);return A(r,n.M,1,n.n,1)[0]},m.variance=function(t,e,n){for(var r=Array(n.n),i=0;i<n.n;i++)r[i]=n.model(Math.pow(Math.pow(t-n.x[i],2)+Math.pow(e-n.y[i],2),.5),n.nugget,n.range,n.sill,n.A);return n.model(0,n.nugget,n.range,n.sill,n.A)+A(A(r,n.K,1,n.n,n.n),r,1,n.n,1)[0]},m.grid=function(t,e,n){var r,i,o=t.length;if(0!=o){for(var a,s,l=[t[0][0][0],t[0][0][0]],u=[t[0][0][1],t[0][0][1]],c=0;c<o;c++)for(r=0;r<t[c].length;r++)t[c][r][0]<l[0]&&(l[0]=t[c][r][0]),t[c][r][0]>l[1]&&(l[1]=t[c][r][0]),t[c][r][1]<u[0]&&(u[0]=t[c][r][1]),t[c][r][1]>u[1]&&(u[1]=t[c][r][1]);var p=Array(2),h=Array(2),f=Array(2),d=Array(2),y=Math.ceil((l[1]-l[0])/n),g=Math.ceil((u[1]-u[0])/n),_=Array(y+1);for(c=0;c<=y;c++)_[c]=Array(g+1);for(c=0;c<o;c++){for(f[0]=t[c][0][0],f[1]=f[0],d[0]=t[c][0][1],d[1]=d[0],r=1;r<t[c].length;r++)t[c][r][0]<f[0]&&(f[0]=t[c][r][0]),t[c][r][0]>f[1]&&(f[1]=t[c][r][0]),t[c][r][1]<d[0]&&(d[0]=t[c][r][1]),t[c][r][1]>d[1]&&(d[1]=t[c][r][1]);for(p[0]=Math.floor((f[0]-(f[0]-l[0])%n-l[0])/n),p[1]=Math.ceil((f[1]-(f[1]-l[1])%n-l[0])/n),h[0]=Math.floor((d[0]-(d[0]-u[0])%n-u[0])/n),h[1]=Math.ceil((d[1]-(d[1]-u[1])%n-u[0])/n),r=p[0];r<=p[1];r++)for(i=h[0];i<=h[1];i++)a=l[0]+r*n,s=u[0]+i*n,t[c].pip(a,s)&&(_[r][i]=m.predict(a,s,e))}return _.xlim=l,_.ylim=u,_.zlim=[e.t.min(),e.t.max()],_.width=n,_}},m.contour=function(t,e,n){},m.plot=function(t,e,n,r,i){var o=t.getContext("2d");o.clearRect(0,0,t.width,t.height);for(var a,s,l,u,c=[n[1]-n[0],r[1]-r[0],e.zlim[1]-e.zlim[0]],p=e.length,h=e[0].length,f=Math.ceil(e.width*t.width/(n[1]-n[0])),d=Math.ceil(e.width*t.height/(r[1]-r[0])),y=0;y<p;y++)for(a=0;a<h;a++)null!=e[y][a]&&(s=t.width*(y*e.width+e.xlim[0]-n[0])/c[0],l=t.height*(1-(a*e.width+e.ylim[0]-r[0])/c[1]),(u=(e[y][a]-e.zlim[0])/c[2])<0&&(u=0),1<u&&(u=1),o.fillStyle=i[Math.floor((i.length-1)*u)],o.fillRect(Math.round(s-f/2),Math.round(l-d/2),f,d))},m);function S(t,e){for(var n=[0].rep(e*e),r=0;r<e;r++)n[r*e+r]=t;return n}function I(t,e,n,r){for(var i,o=Array(n*r),a=0;a<n;a++)for(i=0;i<r;i++)o[a*r+i]=t[a*r+i]+e[a*r+i];return o}function A(t,e,n,r,i){for(var o,a,s=Array(n*i),l=0;l<n;l++)for(o=0;o<i;o++)for(a=s[l*i+o]=0;a<r;a++)s[l*i+o]+=t[l*r+a]*e[a*i+o];return s}function L(t,e){for(var n,r,i=Array(e),o=0;o<e;o++)i[o]=t[o*e+o];for(o=0;o<e;o++){for(n=0;n<o;n++)i[o]-=t[o*e+n]*t[o*e+n];if(i[o]<=0)return;for(i[o]=Math.sqrt(i[o]),n=o+1;n<e;n++){for(r=0;r<o;r++)t[n*e+o]-=t[n*e+r]*t[o*e+r];t[n*e+o]/=i[o]}}for(o=0;o<e;o++)t[o*e+o]=i[o];return 1}function N(t,e){for(var n,r,i,o=0;o<e;o++)for(t[o*e+o]=1/t[o*e+o],n=o+1;n<e;n++){for(i=0,r=o;r<n;r++)i-=t[n*e+r]*t[r*e+o];t[n*e+o]=i/t[n*e+n]}for(o=0;o<e;o++)for(n=o+1;n<e;n++)t[o*e+n]=0;for(o=0;o<e;o++){for(t[o*e+o]*=t[o*e+o],r=o+1;r<e;r++)t[o*e+o]+=t[r*e+o]*t[r*e+o];for(n=o+1;n<e;n++)for(r=n;r<e;r++)t[o*e+n]+=t[r*e+o]*t[r*e+n]}for(o=0;o<e;o++)for(n=0;n<o;n++)t[o*e+n]=t[n*e+o]}function M(t,e){for(var n,r,i,o,a,s,l,u,c,p,h=e,f=Array(e*e),d=Array(e),y=Array(e),g=Array(e),_=0;_<e;_++)for(i=0;i<e;i++)f[_*e+i]=_==i?1:0;for(i=0;i<e;i++)g[i]=0;for(_=0;_<e;_++){for(i=l=0;i<e;i++)if(1!=g[i])for(o=0;o<e;o++)0==g[o]&&Math.abs(t[i*e+o])>=l&&(l=Math.abs(t[i*e+o]),r=i,n=o);if(++g[n],r!=n){for(a=0;a<e;a++)p=t[r*e+a],t[r*e+a]=t[n*e+a],t[n*e+a]=p;for(a=0;a<h;a++)p=f[r*e+a],f[r*e+a]=f[n*e+a],f[n*e+a]=p}if(y[_]=r,0==t[(d[_]=n)*e+n])return;for(c=1/t[n*e+n],t[n*e+n]=1,a=0;a<e;a++)t[n*e+a]*=c;for(a=0;a<h;a++)f[n*e+a]*=c;for(s=0;s<e;s++)if(s!=n){for(u=t[s*e+n],a=t[s*e+n]=0;a<e;a++)t[s*e+a]-=t[n*e+a]*u;for(a=0;a<h;a++)f[s*e+a]-=f[n*e+a]*u}}for(a=e-1;0<=a;a--)if(y[a]!=d[a])for(o=0;o<e;o++)p=t[o*e+y[a]],t[o*e+y[a]]=t[o*e+d[a]],t[o*e+d[a]]=p;return 1}function D(t,e,n,r,i){return e+(r-e)/n*(1-Math.exp(-1/i*Math.pow(t/n,2)))}function R(t,e,n,r,i){return e+(r-e)/n*(1-Math.exp(-1/i*(t/n)))}function j(t,e,n,r){return n<t?e+(r-e)/n:e+(r-e)/n*(t/n*1.5-.5*Math.pow(t/n,3))}e.default=r},function(t,r,i){"use strict";(function(t){var e=t.poly2tri;r.noConflict=function(){return t.poly2tri=e,r},r.VERSION=i(410).version,r.PointError=i(149),r.Point=i(238),r.Triangle=i(151),r.SweepContext=i(411);var n=i(239);r.triangulate=n.triangulate,r.sweep={Triangulate:n.triangulate}}).call(this,i(44))},function(t,e,n){"use strict";function r(t,e){this.x=+t||0,this.y=+e||0,this._p2t_edge_list=null}var i=n(150);r.prototype.toString=function(){return i.toStringBase(this)},r.prototype.toJSON=function(){return{x:this.x,y:this.y}},r.prototype.clone=function(){return new r(this.x,this.y)},r.prototype.set_zero=function(){return this.x=0,this.y=0,this},r.prototype.set=function(t,e){return this.x=+t||0,this.y=+e||0,this},r.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},r.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},r.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},r.prototype.mul=function(t){return this.x*=t,this.y*=t,this},r.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},r.prototype.normalize=function(){var t=this.length();return this.x/=t,this.y/=t,t},r.prototype.equals=function(t){return this.x===t.x&&this.y===t.y},r.negate=function(t){return new r(-t.x,-t.y)},r.add=function(t,e){return new r(t.x+e.x,t.y+e.y)},r.sub=function(t,e){return new r(t.x-e.x,t.y-e.y)},r.mul=function(t,e){return new r(t*e.x,t*e.y)},r.cross=function(t,e){return"number"==typeof t?"number"==typeof e?t*e:new r(-t*e.y,t*e.x):"number"==typeof e?new r(e*t.y,-e*t.x):t.x*e.y-t.y*e.x},r.toString=i.toString,r.compare=i.compare,r.cmp=i.compare,r.equals=i.equals,r.dot=function(t,e){return t.x*e.x+t.y*e.y},t.exports=r},function(t,e,n){"use strict";var y=n(412),g=n(149),s=n(151),l=n(240).Node,r=n(413),u=r.EPSILON,_=r.Orientation,m=r.orient2d,v=r.inScanArea,c=r.isAngleObtuse;function b(t,e,n,r,i){if(!p(r,e,n)){var o=r.pointCCW(i),a=m(n,o,e);if(a===_.COLLINEAR)throw new g("poly2tri EdgeEvent: Collinear not supported!",[n,o,e]);var s=r.pointCW(i),l=m(n,s,e);if(l===_.COLLINEAR)throw new g("poly2tri EdgeEvent: Collinear not supported!",[n,s,e]);a===l?b(t,e,n,r=a===_.CW?r.neighborCCW(i):r.neighborCW(i),i):O(t,e,n,r,i)}}function p(t,e,n){var r=t.edgeIndex(e,n);if(-1!==r){t.markConstrainedEdgeByIndex(r);var i=t.getNeighbor(r);return i&&i.markConstrainedEdgeByPoints(e,n),1}}function h(t,e){var n=new s(e.prev.point,e.point,e.next.point);n.markNeighbor(e.prev.triangle),n.markNeighbor(e.triangle),t.addToMap(n),e.prev.next=e.next,e.next.prev=e.prev,w(t,n)||t.mapTriangleToNodes(n)}function w(t,e){for(var n=0;n<3;++n)if(!e.delaunay_edge[n]){var r=e.getNeighbor(n);if(r){var i=e.getPoint(n),o=r.oppositePoint(e,i),a=r.index(o);if(r.constrained_edge[a]||r.delaunay_edge[a]){e.constrained_edge[n]=r.constrained_edge[a];continue}if(function(t,e,n,r){var i=t.x-r.x,o=t.y-r.y,a=e.x-r.x,s=e.y-r.y,l=i*s-a*o;if(l<=0)return!1;var u=n.x-r.x,c=n.y-r.y,p=u*o-i*c;if(p<=0)return!1;return 0<(i*i+o*o)*(a*c-u*s)+(a*a+s*s)*p+(u*u+c*c)*l}(i,e.pointCCW(i),e.pointCW(i),o)){e.delaunay_edge[n]=!0,r.delaunay_edge[a]=!0,x(e,i,r,o);var s=!w(t,e);return s&&t.mapTriangleToNodes(e),!w(t,r)&&t.mapTriangleToNodes(r),e.delaunay_edge[n]=!1,r.delaunay_edge[a]=!1,1}}}}function x(t,e,n,r){var i=t.neighborCCW(e),o=t.neighborCW(e),a=n.neighborCCW(r),s=n.neighborCW(r),l=t.getConstrainedEdgeCCW(e),u=t.getConstrainedEdgeCW(e),c=n.getConstrainedEdgeCCW(r),p=n.getConstrainedEdgeCW(r),h=t.getDelaunayEdgeCCW(e),f=t.getDelaunayEdgeCW(e),d=n.getDelaunayEdgeCCW(r),y=n.getDelaunayEdgeCW(r);t.legalize(e,r),n.legalize(r,e),n.setDelaunayEdgeCCW(e,h),t.setDelaunayEdgeCW(e,f),t.setDelaunayEdgeCCW(r,d),n.setDelaunayEdgeCW(r,y),n.setConstrainedEdgeCCW(e,l),t.setConstrainedEdgeCW(e,u),t.setConstrainedEdgeCCW(r,c),n.setConstrainedEdgeCW(r,p),t.clearNeighbors(),n.clearNeighbors(),i&&n.markNeighbor(i),o&&t.markNeighbor(o),a&&t.markNeighbor(a),s&&n.markNeighbor(s),t.markNeighbor(n)}function f(t,e){var n=t.basin.left_highest?t.basin.left_node.point.y-e.point.y:t.basin.right_node.point.y-e.point.y;return t.basin.width>n?1:void 0}function d(t,e,n){h(t,n.next),n.next.point!==e.p&&m(e.q,n.next.point,e.p)===_.CCW&&m(n.point,n.next.point,n.next.next.point)===_.CCW&&d(t,e,n)}function C(t,e,n){m(n.next.point,n.next.next.point,n.next.next.next.point)===_.CCW?d(t,e,n.next):m(e.q,n.next.next.point,e.p)===_.CCW&&C(t,e,n.next)}function E(t,e,n){m(n.prev.point,n.prev.prev.point,n.prev.prev.prev.point)===_.CW?P(t,e,n.prev):m(e.q,n.prev.prev.point,e.p)===_.CW&&E(t,e,n.prev)}function P(t,e,n){h(t,n.prev),n.prev.point!==e.p&&m(e.q,n.prev.point,e.p)===_.CW&&m(n.point,n.prev.point,n.prev.prev.point)===_.CW&&P(t,e,n)}function O(t,e,n,r,i){var o=r.neighborAcross(i);y(o,"FLIP failed due to missing triangle!");var a,s,l,u,c,p,h,f=o.oppositePoint(r,i);if(r.getConstrainedEdgeAcross(i)){var d=r.index(i);throw new g("poly2tri Intersecting Constraints",[i,f,r.getPoint((d+1)%3),r.getPoint((d+2)%3)])}v(i,r.pointCCW(i),r.pointCW(i),f)?(x(r,i,o,f),t.mapTriangleToNodes(r),t.mapTriangleToNodes(o),i===n&&f===e?n===t.edge_event.constrained_edge.q&&e===t.edge_event.constrained_edge.p&&(r.markConstrainedEdgeByPoints(e,n),o.markConstrainedEdgeByPoints(e,n),w(t,r),w(t,o)):(a=m(n,f,e),l=r,u=o,c=i,p=f,O(s=t,e,n,r=a!==_.CCW?(h=l.edgeIndex(c,p),l.delaunay_edge[h]=!0,w(s,l),l.clearDelaunayEdges(),u):(h=u.edgeIndex(c,p),u.delaunay_edge[h]=!0,w(s,u),u.clearDelaunayEdges(),l),i))):(function t(e,n,r,i,o,a){var s=o.neighborAcross(a);y(s,"FLIP failed due to missing triangle");var l=s.oppositePoint(o,a);{var u;v(r,i.pointCCW(r),i.pointCW(r),l)?O(e,r,l,s,l):(u=T(n,r,s,l),t(e,n,r,i,s,u))}}(t,e,n,r,o,T(e,n,o,f)),b(t,e,n,r,i))}function T(t,e,n,r){var i=m(e,r,t);if(i===_.CW)return n.pointCCW(r);if(i===_.CCW)return n.pointCW(r);throw new g("poly2tri [Unsupported] nextFlipPoint: opposing point on constrained edge!",[e,r,t])}e.triangulate=function(t){t.initTriangulation(),t.createAdvancingFront(),function(t){var e,n=t.pointCount();for(e=1;e<n;++e)for(var r=t.getPoint(e),i=function(t,e){var n=t.locateNode(e),r=function(t,e,n){var r=new s(e,n.point,n.next.point);r.markNeighbor(n.triangle),t.addToMap(r);var i=new l(e);i.next=n.next,(i.prev=n).next.prev=i,n.next=i,w(t,r)||t.mapTriangleToNodes(r);return i}(t,e,n);e.x<=n.point.x+u&&h(t,n);return function(t,e){var n=e.next;for(;n.next&&!c(n.point,n.next.point,n.prev.point);)h(t,n),n=n.next;n=e.prev;for(;n.prev&&!c(n.point,n.next.point,n.prev.point);)h(t,n),n=n.prev;e.next&&e.next.next&&function(t){var e=t.point.x-t.next.next.point.x,n=t.point.y-t.next.next.point.y;return y(0<=n,"unordered y"),0<=e||Math.abs(e)<n}(e)&&function(t,e){m(e.point,e.next.point,e.next.next.point)===_.CCW?t.basin.left_node=e.next.next:t.basin.left_node=e.next;t.basin.bottom_node=t.basin.left_node;for(;t.basin.bottom_node.next&&t.basin.bottom_node.point.y>=t.basin.bottom_node.next.point.y;)t.basin.bottom_node=t.basin.bottom_node.next;if(t.basin.bottom_node===t.basin.left_node)return;t.basin.right_node=t.basin.bottom_node;for(;t.basin.right_node.next&&t.basin.right_node.point.y<t.basin.right_node.next.point.y;)t.basin.right_node=t.basin.right_node.next;if(t.basin.right_node===t.basin.bottom_node)return;t.basin.width=t.basin.right_node.point.x-t.basin.left_node.point.x,t.basin.left_highest=t.basin.left_node.point.y>t.basin.right_node.point.y,function t(e,n){if(f(e,n))return;h(e,n);{if(n.prev===e.basin.left_node&&n.next===e.basin.right_node)return;if(n.prev===e.basin.left_node){if(m(n.point,n.next.point,n.next.next.point)===_.CW)return;n=n.next}else if(n.next===e.basin.right_node){if(m(n.point,n.prev.point,n.prev.prev.point)===_.CCW)return;n=n.prev}else n=n.prev.point.y<n.next.point.y?n.prev:n.next}t(e,n)}(t,t.basin.bottom_node)}(t,e)}(t,r),r}(t,r),o=r._p2t_edge_list,a=0;o&&a<o.length;++a)!function(t,e,n){if(t.edge_event.constrained_edge=e,t.edge_event.right=e.p.x>e.q.x,p(n.triangle,e.p,e.q))return;(function(t,e,n){(t.edge_event.right?function(t,e,n){for(;n.next.point.x<e.p.x;)m(e.q,n.next.point,e.p)===_.CCW?function t(e,n,r){r.point.x<n.p.x&&(m(r.point,r.next.point,r.next.next.point)===_.CCW?d(e,n,r):(C(e,n,r),t(e,n,r)))}(t,e,n):n=n.next}:function(t,e,n){for(;n.prev.point.x>e.p.x;)m(e.q,n.prev.point,e.p)===_.CW?function t(e,n,r){r.point.x>n.p.x&&(m(r.point,r.prev.point,r.prev.prev.point)===_.CW?P(e,n,r):(E(e,n,r),t(e,n,r)))}(t,e,n):n=n.prev})(t,e,n)})(t,e,n),b(t,e.p,e.q,n.triangle,e.q)}(t,o[a],i)}(t),function(t){var e=t.front().head().next.triangle,n=t.front().head().next.point;for(;!e.getConstrainedEdgeCW(n);)e=e.neighborCCW(n);t.meshClean(e)}(t)}},function(t,e,n){"use strict";function r(t,e){this.head_=t,this.tail_=e,this.search_node_=t}r.prototype.head=function(){return this.head_},r.prototype.setHead=function(t){this.head_=t},r.prototype.tail=function(){return this.tail_},r.prototype.setTail=function(t){this.tail_=t},r.prototype.search=function(){return this.search_node_},r.prototype.setSearch=function(t){this.search_node_=t},r.prototype.findSearchNode=function(){return this.search_node_},r.prototype.locateNode=function(t){var e=this.search_node_;if(t<e.value){for(;e=e.prev;)if(t>=e.value)return this.search_node_=e}else for(;e=e.next;)if(t<e.value)return this.search_node_=e.prev,e.prev;return null},r.prototype.locatePoint=function(t){var e=t.x,n=this.findSearchNode(e),r=n.point.x;if(e===r){if(t!==n.point)if(t===n.prev.point)n=n.prev;else{if(t!==n.next.point)throw new Error("poly2tri Invalid AdvancingFront.locatePoint() call");n=n.next}}else if(e<r)for(;(n=n.prev)&&t!==n.point;);else for(;(n=n.next)&&t!==n.point;);return n&&(this.search_node_=n),n},t.exports=r,t.exports.Node=function(t,e){this.point=t,this.triangle=e||null,this.next=null,this.prev=null,this.value=t.x}},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).BUFFER_ANALYSIS="buffer_analysis",i.CONTOURLINES_ANALYSIS="contourlines_analysis",i.INUNDATION_ANALYSIS="inundation_analysis",i.PROFILE_ANALYSIS="profile_analysis",i.SOLAR_ANALYSIS="solar_analysis",i.SURFACEMINING_ANALYSIS="surfacemining_analysis",i.VISIBILITY_ANALYSIS="visibility_analysis",e.default=r},,function(t,e,n){"use strict";t.exports=i;var r=n(158);function i(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var o=4294967296,a=1/o;function s(t){return t.type===i.Bytes?t.readVarint()+t.pos:t.pos+1}function l(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function u(t,e,n){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.ceil(Math.log(e)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;t<=i;i--)n.buf[i+r]=n.buf[i]}function c(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function p(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function h(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function f(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function d(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function y(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function g(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function _(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function b(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,t(i,e,this),this.pos===o&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=v(this.buf,this.pos)+v(this.buf,this.pos+4)*o;return this.pos+=8,t},readSFixed64:function(){var t=v(this.buf,this.pos)+w(this.buf,this.pos+4)*o;return this.pos+=8,t},readFloat:function(){var t=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e=this.buf,n=e[this.pos++],r=127&n;return n<128?r:(r|=(127&(n=e[this.pos++]))<<7,n<128?r:(r|=(127&(n=e[this.pos++]))<<14,n<128?r:(r|=(127&(n=e[this.pos++]))<<21,n<128?r:function(t,e,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return l(t,r,e);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return l(t,r,e);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return l(t,r,e);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return l(t,r,e);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return l(t,r,e);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return l(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(r|=(15&e[this.pos])<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=function(t,e,n){var r,i,o,a="",s=e;for(;s<n;){var l=t[s],u=null,c=239<l?4:223<l?3:191<l?2:1;if(n<s+c)break;1===c?l<128&&(u=l):2===c?128==(192&(r=t[s+1]))&&(u=(31&l)<<6|63&r)<=127&&(u=null):3===c?(r=t[s+1],i=t[s+2],128==(192&r)&&128==(192&i)&&((u=(15&l)<<12|(63&r)<<6|63&i)<=2047||55296<=u&&u<=57343)&&(u=null)):4===c&&(r=t[s+1],i=t[s+2],o=t[s+3],128==(192&r)&&128==(192&i)&&128==(192&o)&&((u=(15&l)<<18|(63&r)<<12|(63&i)<<6|63&o)<=65535||1114112<=u)&&(u=null)),null===u?(u=65533,c=1):65535<u&&(u-=65536,a+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),a+=String.fromCharCode(u),s+=c}return a}(this.buf,this.pos,t);return this.pos=t,e},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){var n=s(this);for(t=t||[];this.pos<n;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){var e=s(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===i.Varint)for(;127<this.buf[this.pos++];);else if(e===i.Bytes)this.pos=this.readVarint()+this.pos;else if(e===i.Fixed32)this.pos+=4;else{if(e!==i.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e,n=this.length||16;n<this.pos+t;)n*=2;n!==this.length&&((e=new Uint8Array(n)).set(this.buf),this.buf=e,this.length=n)},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),b(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),b(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),b(this.buf,-1&t,this.pos),b(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),b(this.buf,-1&t,this.pos),b(this.buf,Math.floor(t*a),this.pos+4),this.pos+=8},writeVarint:function(t){268435455<(t=+t||0)||t<0?function(t,e){var n,r;0<=t?(n=t%4294967296|0,r=t/4294967296|0):(r=~(-t/4294967296),4294967295^(n=~(-t%4294967296))?n=n+1|0:r=r+1|(n=0));if(0x10000000000000000<=t||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e){e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos++]=127&t|128,t>>>=7,e.buf[e.pos]=127&t}(n,e),function(t,e){var n=(7&t)<<4;if(e.buf[e.pos++]|=n|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(r,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(127<t?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,n){for(var r,i,o=0;o<e.length;o++){if(55295<(r=e.charCodeAt(o))&&r<57344){if(!i){56319<r||o+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):i=r;continue}if(r<56320){t[n++]=239,t[n++]=191,t[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(t[n++]=239,t[n++]=191,t[n++]=189,i=null);r<128?t[n++]=r:(r<2048?t[n++]=r>>6|192:(r<65536?t[n++]=r>>12|224:(t[n++]=r>>18|240,t[n++]=r>>12&63|128),t[n++]=r>>6&63|128),t[n++]=63&r|128)}return n}(this.buf,t,this.pos);var n=this.pos-e;128<=n&&u(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),r.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),r.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var r=this.pos-n;128<=r&&u(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,n){this.writeTag(t,i.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){this.writeMessage(t,c,e)},writePackedSVarint:function(t,e){this.writeMessage(t,p,e)},writePackedBoolean:function(t,e){this.writeMessage(t,d,e)},writePackedFloat:function(t,e){this.writeMessage(t,h,e)},writePackedDouble:function(t,e){this.writeMessage(t,f,e)},writePackedFixed32:function(t,e){this.writeMessage(t,y,e)},writePackedSFixed32:function(t,e){this.writeMessage(t,g,e)},writePackedFixed64:function(t,e){this.writeMessage(t,_,e)},writePackedSFixed64:function(t,e){this.writeMessage(t,m,e)},writeBytesField:function(t,e){this.writeTag(t,i.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,i.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,i.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,i.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,i.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,i.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,i.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},function(t,e){function l(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}t.exports=function(s){return function(){var t=this,a=arguments;return new Promise(function(e,n){var r=s.apply(t,a);function i(t){l(r,e,n,i,o,"next",t)}function o(t){l(r,e,n,i,o,"throw",t)}i(void 0)})}}},function(t,e){var f={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},d=/(italic|oblique)$/i,y={};t.exports=function(t,e,n){var r=y[t];if(!r){Array.isArray(t)||(t=[t]);for(var i=400,o="normal",a=[],s=0,l=t.length;s<l;++s){var u=t[s].split(" "),c=u[u.length-1].toLowerCase();for(var p in"normal"==c||"italic"==c||"oblique"==c?(o=c,u.pop(),c=u[u.length-1].toLowerCase()):d.test(c)&&(c=c.replace(d,""),o=u[u.length-1].replace(c,"")),f)if(c==p||c==p.replace("-","")||c==p.replace("-"," ")){i=f[p],u.pop();break}"number"==typeof c&&(i=c);var h=u.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==h.indexOf(" ")&&(h='"'+h+'"'),a.push(h)}r=y[t]=[o,i,a]}return r[0]+" "+r[1]+" "+e+"px"+(n?"/"+n:"")+" "+r[2]}},,function(t,e,o){"use strict";var n,r,i=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},a=(r={},function(t){if(void 0===r[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}r[t]=e}return r[t]}),p=[];function h(t){for(var e=-1,n=0;n<p.length;n++)if(p[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},r=[],i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s=n[a]||0,l="".concat(a," ").concat(s);n[a]=s+1;var u=h(l),c={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(p[u].references++,p[u].updater(c)):p.push({identifier:l,updater:function(e,t){var n,r,i;{var o;i=t.singleton?(o=g++,n=y=y||f(t),r=d.bind(null,n,o,!1),d.bind(null,n,o,!0)):(n=f(t),r=function(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;i?t.setAttribute("media",i):t.removeAttribute("media");o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */"));if(t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}.bind(null,n,t),function(){!function(t){if(null===t.parentNode)return;t.parentNode.removeChild(t)}(n)})}return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else i()}}(c,e),references:1}),r.push(l)}return r}function f(t){var e,n=document.createElement("style"),r=t.attributes||{};if(void 0!==r.nonce||(e=o.nc)&&(r.nonce=e),Object.keys(r).forEach(function(t){n.setAttribute(t,r[t])}),"function"==typeof t.insert)t.insert(n);else{var i=a(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}return n}var s,u=(s=[],function(t,e){return s[t]=e,s.filter(Boolean).join("\n")});function d(t,e,n,r){var i,o,a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;t.styleSheet?t.styleSheet.cssText=u(e,a):(i=document.createTextNode(a),(o=t.childNodes)[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i))}var y=null,g=0;t.exports=function(t,a){(a=a||{}).singleton||"boolean"==typeof a.singleton||(a.singleton=i());var s=l(t=t||[],a);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var e=0;e<s.length;e++){var n=h(s[e]);p[n].references--}for(var r=l(t,a),i=0;i<s.length;i++){var o=h(s[i]);0===p[o].references&&(p[o].updater(),p.splice(o,1))}s=r}}}},function(t,e,n){"use strict";function l(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(t){var e=l(t,4),n=e[1],r=e[3];if("function"!=typeof btoa)return[n].join("\n");var i=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),a="/*# ".concat(o," */"),s=r.sources.map(function(t){return"/*# sourceURL=".concat(r.sourceRoot||"").concat(t," */")});return[n].concat(s).concat([a]).join("\n")}},function(t,e,n){"use strict";t.exports=function(n){var l=[];return l.toString=function(){return this.map(function(t){var e=n(t);return t[2]?"@media ".concat(t[2]," {").concat(e,"}"):e}).join("")},l.i=function(t,e,n){"string"==typeof t&&(t=[[null,t,""]]);var r={};if(n)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(r[o]=!0)}for(var a=0;a<t.length;a++){var s=[].concat(t[a]);n&&r[s[0]]||(e&&(s[2]?s[2]="".concat(e," and ").concat(s[2]):s[2]=e),l.push(s))}},l}},,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Cesium=e.AnalysisControl=e.MeasureControl=e.DrawControl=e.Wind=e.Snow=e.Rain=e.Fog=e.VisibilityAnalysis=e.SurfaceMiningAnalysis=e.SolarAnalysis=e.ProfileAnalysis=e.InundationAnalysis=e.ContourLinesAnalysis=e.BufferAnalysis=e.FlattenTileset=e.WavePointLayer=e.HeatMapLayer=e.ODLineLayer=e.DynamicPointLayer=e.PointPrimitiveLayer=e.GeoJsonLayer=e.IconLayer=e.Echarts=e.MapV=e.Math=e.Enum=e.Node=e.Group=e.DivPoint=e.WavePoint=e.DynamicRotateCylinder=e.DynamicSpreadCylinder=e.DynamicFlickerCylinder=e.DynamicCylinderParticle=e.DynamicRadar=e.DynamicTetrahedron=e.DynamicEllipse=e.DynamicEllipsoid=e.DynamicWall=e.DynamicWaterSurface=e.DynamicPoint=e.RadarScan=e.CircleSpread=e.ODLine=e.PincerArrow=e.AttackArrow=e.StraightArrow=e.Pin=e.Rectangle=e.PolylineVolume=e.Plane=e.Ellipsoid=e.Ellipse=e.Cylinder=e.Corridor=e.Box=e.Wall=e.Label=e.Model=e.PolylineOutline=e.PolylineDash=e.PolylineArrow=e.PolylineGlow=e.Polygon=e.Polyline=e.Point=e.Billboard=e.ModelPrimitiveCollection=e.LabelPrimitiveCollection=e.BillboardPrimitiveCollection=e.PolylinePrimitiveCollection=e.PointPrimitiveCollection=e.CompositeAppearance=e.GeoJson=e.HeatMap=e.ImageryLayer=e.FeatureModelTileset=e.RealSceneModelTileset=e.ArtificialModelTileset=e.Earth=void 0;var r=n(12),i=window.XtEarth_BASE_URL;r.isAbsolute(i)?window.CESIUM_BASE_URL=i:(i=i&&i.replace(/^(\s|\/)+|(\s|\/)+$/g,"")+"/",window.CESIUM_BASE_URL=i?window.location.origin+"/"+i:window.location.origin+"/");var o=n(252);e.Earth=o.default;var a=n(22);e.Math=a.default;var s=n(339);e.MapV=s.default;var l=n(340);e.Echarts=l.default;var u=n(104);e.Group=u.default;var c=n(130);e.Node=c.default;n(135),n(346);var p=n(177);e.ArtificialModelTileset=p.default;var h=n(184);e.RealSceneModelTileset=h.default;var f=n(185);e.FeatureModelTileset=f.default;var d=n(173);e.ImageryLayer=d.default;var y=n(139);e.HeatMap=y.default;var g=n(132);e.GeoJson=g.default;var _=n(347);e.CompositeAppearance=_.default;var m=n(137);e.PointPrimitiveCollection=m.default;var v=n(188);e.PolylinePrimitiveCollection=v.default;var b=n(189);e.BillboardPrimitiveCollection=b.default;var w=n(190);e.LabelPrimitiveCollection=w.default;var x=n(191);e.ModelPrimitiveCollection=x.default;var C=n(91);e.Billboard=C.default;var E=n(106);e.Point=E.default;var P=n(107);e.Polyline=P.default;var O=n(108);e.Polygon=O.default;var T=n(178);e.PolylineGlow=T.default;var S=n(179);e.PolylineArrow=S.default;var I=n(180);e.PolylineDash=I.default;var A=n(181);e.PolylineOutline=A.default;var L=n(109);e.Model=L.default;var N=n(110);e.Label=N.default;var M=n(192);e.Wall=M.default;var D=n(193);e.Box=D.default;var R=n(194);e.Corridor=R.default;var j=n(195);e.Cylinder=j.default;var k=n(196);e.Ellipse=k.default;var F=n(197);e.Ellipsoid=F.default;var B=n(198);e.Plane=B.default;var G=n(199);e.PolylineVolume=G.default;var z=n(200);e.Rectangle=z.default;var U=n(201);e.Pin=U.default;var V=n(203);e.StraightArrow=V.default;var H=n(204);e.AttackArrow=H.default;var q=n(205);e.PincerArrow=q.default;var W=n(133);e.ODLine=W.default;var Y=n(136);e.CircleSpread=Y.default;var X=n(208);e.RadarScan=X.default;var J=n(138);e.DynamicPoint=J.default;var Z=n(187);e.DynamicWaterSurface=Z.default;var K=n(206);e.DynamicWall=K.default;var $=n(207);e.DynamicEllipsoid=$.default;var Q=n(209);e.DynamicEllipse=Q.default;var tt=n(210);e.DynamicTetrahedron=tt.default;var et=n(211);e.DynamicRadar=et.default;var nt=n(212);e.DynamicCylinderParticle=nt.default;var rt=n(213);e.DynamicFlickerCylinder=rt.default;var it=n(214);e.DynamicSpreadCylinder=it.default;var ot=n(215);e.DynamicRotateCylinder=ot.default;var at=n(141);e.WavePoint=at.default;var st=n(216);e.DivPoint=st.default;var lt=n(348);e.IconLayer=lt.default;var ut=n(349);e.GeoJsonLayer=ut.default;var ct=n(350);e.PointPrimitiveLayer=ct.default;var pt=n(351);e.DynamicPointLayer=pt.default;var ht=n(352);e.ODLineLayer=ht.default;var ft=n(353);e.HeatMapLayer=ft.default;var dt=n(354);e.WavePointLayer=dt.default;var yt=n(355);e.FlattenTileset=yt.default;var gt=n(222);e.BufferAnalysis=gt.default;var _t=n(223);e.ContourLinesAnalysis=_t.default;var mt=n(224);e.InundationAnalysis=mt.default;var vt=n(226);e.ProfileAnalysis=vt.default;var bt=n(227);e.SolarAnalysis=bt.default;var wt=n(228);e.SurfaceMiningAnalysis=wt.default;var xt=n(229);e.VisibilityAnalysis=xt.default;var Ct=n(359);e.Fog=Ct.default;var Et=n(362);e.Rain=Et.default;var Pt=n(365);e.Snow=Pt.default;var Ot=n(368);e.Wind=Ot.default;var Tt=n(389);e.DrawControl=Tt.default;var St=n(403);e.MeasureControl=St.default;var It=n(415);e.AnalysisControl=It.default;var At=n(8);e.Cesium=At,n(423);var Lt,Nt,Mt=(Lt=n(424),Nt={},Lt.keys().forEach(function(i){var o=i.split("/"),a=function(t){var e=o[++t];if(e){if(t!==o.length-1)return(n={})[e]=a(t),n;var n={},r=e.lastIndexOf(".ts");return 0<r&&r===e.length-3&&(n[e=e.substring(0,r)]=Lt(i).default),n}},r=function(t,e){for(var n in e)t[n]=t[n]&&"[object Object]"===t[n].toString()?r(t[n],e[n]):t[n]=e[n];return t},t=a(0);Nt=r(Nt,t)}),Nt);e.Enum=Mt},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var l=n(8),E=n(287),P=n(288);n(318);var O,T=n(217),S=n(112),o=n(129),I=n(319),A=n(321),L=n(323),a=n(12),N=n(324),u=n(329),M=n(330),D=n(331),R=n(332),j=n(333),s=n(338),c=n(220),p=(O=o.default,i(h,O),Object.defineProperty(h.prototype,"containerId",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"sceneTree",{get:function(){return this._sceneTree},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"camera",{get:function(){return this._camera},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"postProcess",{get:function(){return this._postProcess},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"render",{get:function(){return this._render},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"light",{get:function(){return this._light},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"flyManager",{get:function(){return this._flyManager},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"weather",{get:function(){return this._weather},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"layers",{get:function(){return this._layers},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"controllers",{get:function(){return this._controllers},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"interaction",{get:function(){return this._interaction},enumerable:!1,configurable:!0}),h.prototype.pickGloble=function(t,e){a.isArray(t)&&(t=new l.Cartesian2(t[0],t[1]));var n,r,i=this._viewer.scene.pick(t);return this._viewer.scene.pickPositionSupported&&l.defined(i)?e?(r=this._viewer.camera.getPickRay(t),n=this._viewer.scene.pickFromRay(r,e),l.defined(n)&&l.defined(n.object)?n.position:this._viewer.scene.globe.pick(r,this._viewer.scene)):this._viewer.scene.pickPosition(t):(r=this._viewer.camera.getPickRay(t),this._viewer.scene.globe.pick(r,this._viewer.scene))},h.prototype.coordinateToScreenCoordinate=function(t){var e=l.Cartesian3.fromDegrees(t[0],t[1],t[2]||0),n=this._viewer.scene.cartesianToCanvasCoordinates(e),r=void 0;return n&&(r=[n.x,n.y]),r},Object.defineProperty(h.prototype,"terrain",{get:function(){return this._terrain},set:function(t){this._terrain=t,this._viewer.terrainProvider=t?new l.CesiumTerrainProvider({url:_terrain,requestVertexNormals:!0}):void 0,this.resetProperty("terrain",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"destination",{get:function(){return this._destination},set:function(t){this._destination=t,this._viewer.camera.flyTo({destination:l.Cartesian3.fromDegrees(t[0],t[1],t[2])}),this.resetProperty("destination",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"orientation",{get:function(){return this._orientation},set:function(t){this._orientation=t,this._viewer.camera.flyTo({destination:l.Cartesian3.fromDegrees(this.destination[0],this.destination[1],this.destination[2]),orientation:l.HeadingPitchRoll.fromDegrees(t[0],t[1],t[2])}),this.resetProperty("orientation",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"operationMode",{get:function(){return this._operationMode},set:function(t){this._operationMode=t,this._changeOperationMode(t),this.resetProperty("operationMode",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"sceneMode",{get:function(){return this._sceneMode},set:function(t){switch(this._sceneMode=t){case S.default.SCENE3D:this._viewer.scene.mapProjection=new l.GeographicProjection;break;case S.default.PLANAR3D:this._viewer.scene.mapProjection=new l.WebMercatorProjection}this._viewer.scene.mode=u.default(t),this.resetProperty("sceneMode",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"globeColor",{get:function(){return this._globeColor},set:function(t){this._globeColor=t,this._resetGlobeBaseColor(t),this.resetProperty("globeColor",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"backgroundColor",{get:function(){return this.backgroundColor},set:function(t){this._backgroundColor=t,this._resetBackgroundColor(t),this.resetProperty("backgroundColor",t)},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"domScale",{get:function(){return this._domScale||1},set:function(t){var e=this._domScale||1;this._domScale=t,this._viewer.resolutionScale=t*this._viewer.resolutionScale/e,this.resetProperty("domScale",t),window.domScale=t},enumerable:!1,configurable:!0}),h.prototype.getViewer=function(){return this._viewer},h.prototype.getScene=function(){return this._viewer.scene},h.prototype._creator=function(t,e){var n=e.destination,r=e.orientation,i=e.terrain,o=e.sceneMode,a=(e.skyBox,e.groundSkyBox,e.mapProjection);document.getElementById(t).innerHTML="";var s=new l.Viewer(t,{geocoder:!1,homeButton:!1,sceneModePicker:!1,vrButton:!1,baseLayerPicker:!1,animation:!1,shouldAnimate:!0,infoBox:!1,selectionIndicator:!1,timeline:!1,navigationHelpButton:!1,fullscreenButton:!1,navigationInstructionsInitiallyVisible:!1,mapProjection:a?a===c.default.WEB_MERCATOR_PROJECTION?new l.WebMercatorProjection:new l.GeographicProjection:o===S.default.PLANAR3D?new l.WebMercatorProjection:new l.GeographicProjection,imageryProvider:!1,showRenderLoopErrors:!1,sceneMode:u.default(o),contextOptions:{webgl:{alpha:!0}}});return s.cesiumWidget.creditContainer&&s.cesiumWidget.creditContainer.remove(),s.cesiumWidget.screenSpaceEventHandler.removeInputAction(l.ScreenSpaceEventType.LEFT_DOUBLE_CLICK),s.scene.camera.setView({destination:l.Cartesian3.fromDegrees(n[0],n[1],n[2]),orientation:l.HeadingPitchRoll.fromDegrees(r[0],r[1],r[2]),endTransform:l.Matrix4.IDENTITY}),s.imageryLayers.removeAll(),s.scene.globe.enableLighting=!1,s.scene.moon.show=!1,s.scene.sun.show=!1,i&&(s.terrainProvider=new l.CesiumTerrainProvider({url:i,requestVertexNormals:!0})),this._resetDPR(s),this._resetImageQuality(s),s},h.prototype._resetGlobeBaseColor=function(t){this._viewer.scene.globe.baseColor=l.Color.fromCssColorString(t)},h.prototype._resetBackgroundColor=function(t){this._viewer.scene.backgroundColor=l.Color.fromCssColorString(t)},h.prototype._resetSkyBox=function(t){t?this._viewer.scene.skyBox=new l.SkyBox({sources:{positiveX:t[0],negativeX:t[1]||t[t.length-1],positiveY:t[2]||t[t.length-1],negativeY:t[3]||t[t.length-1],positiveZ:t[4]||t[t.length-1],negativeZ:t[5]||t[t.length-1]}}):this._viewer.scene.skyBox.show=!1},h.prototype._resetGroundSkyBox=function(t){t?(this._viewer.scene.skyAtmosphere.show=!1,this._viewer.scene.skyBox.show=!0,this._viewer.scene.skyBox=new s.default({sources:{positiveX:t[0],negativeX:t[1]||t[t.length-1],positiveY:t[2]||t[t.length-1],negativeY:t[3]||t[t.length-1],positiveZ:t[4]||t[t.length-1],negativeZ:t[5]||t[t.length-1]}})):this._viewer.scene.skyAtmosphere.show=!0},h.prototype._resetDPR=function(t){if(t.cesiumWidget._supportsImageRenderingPixelated=l.FeatureDetection.supportsImageRenderingPixelated(),t.cesiumWidget._forceResize=!0,l.FeatureDetection.supportsImageRenderingPixelated()){for(var e=window.devicePixelRatio;2<=e;)e/=2;t.resolutionScale=e}},h.prototype._resetImageQuality=function(t){t.scene.postProcessStages.fxaa.enabled=!0,t.scene.globe.maximumScreenSpaceError=1.3},h.prototype._changeOperationMode=function(t){switch(t){case T.default.NORMAL:this._viewer.scene.screenSpaceCameraController.zoomEventTypes=[l.CameraEventType.RIGHT_DRAG,l.CameraEventType.WHEEL,l.CameraEventType.PINCH],this._viewer.scene.screenSpaceCameraController.tiltEventTypes=[l.CameraEventType.MIDDLE_DRAG,l.CameraEventType.PINCH,{eventType:l.CameraEventType.LEFT_DRAG,modifier:l.KeyboardEventModifier.CTRL},{eventType:l.CameraEventType.RIGHT_DRAG,modifier:l.KeyboardEventModifier.CTRL}];break;case T.default.FIT:this._viewer.scene.screenSpaceCameraController.zoomEventTypes=[l.CameraEventType.WHEEL,l.CameraEventType.PINCH],this._viewer.scene.screenSpaceCameraController.tiltEventTypes=[l.CameraEventType.PINCH,l.CameraEventType.RIGHT_DRAG]}},h);function h(t,e){var n=void 0===e?{}:e,r=n.destination,i=void 0===r?[118.99,32.1496,5e4]:r,o=n.orientation,a=void 0===o?[0,-90,0]:o,s=n.terrain,l=void 0===s?void 0:s,u=n.operationMode,c=void 0===u?T.default.NORMAL:u,p=n.sceneMode,h=void 0===p?S.default.SCENE3D:p,f=n.globeColor,d=void 0===f?"#1C1C1C":f,y=n.backgroundColor,g=void 0===y?"#1C1C1C":y,_=n.skyBox,m=void 0===_?void 0:_,v=n.groundSkyBox,b=void 0===v?void 0:v,w=n.mapProjection,x=void 0===w?void 0:w,C=O.call(this)||this;return C._container=t,C._terrain=l,C._destination=i,C._orientation=a,C._operationMode=c,C._globeColor=d,C._backgroundColor=g,C._sceneMode=h,C._skyBox=m,C._groundSkyBox=b,C._mapProjection=x,O.prototype.fromJSON.call(C,{destination:i,orientation:a,terrain:l,operationMode:c,globeColor:d,backgroundColor:g,sceneMode:h,skyBox:m,groundSkyBox:b}),C._viewer=C._creator(C._container,{destination:i,orientation:a,terrain:l,sceneMode:h,skyBox:m,groundSkyBox:b,mapProjection:x}),C._resetBackgroundColor(C._backgroundColor),C._resetGlobeBaseColor(C._globeColor),C._resetSkyBox(C._skyBox),C._resetGroundSkyBox(C._groundSkyBox),C._changeOperationMode(C._operationMode),C._sceneTree=new P.default(C,{name:"root",children:[]}),C._camera=new E.default(C._viewer,C._sceneTree),C._postProcess=new I.default(C._viewer.scene),C._render=new A.default(C._viewer.scene),C._light=new L.default(C._viewer),C._interaction=new j.default(C),C._flyManager=new N.default(C),C._weather=new M.default(C._viewer),C._layers=new D.default(C),C._controls=new R.default(C),C}e.default=p},function(t,e,n){"use strict";e.byteLength=function(t){var e=p(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=p(t),i=r[0],o=r[1],a=new c(function(t,e){return 3*(t+e)/4-e}(i,o)),s=0,l=0<o?i-4:i;for(n=0;n<l;n+=4)e=u[t.charCodeAt(n)]<<18|u[t.charCodeAt(n+1)]<<12|u[t.charCodeAt(n+2)]<<6|u[t.charCodeAt(n+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=255&e;2===o&&(e=u[t.charCodeAt(n)]<<2|u[t.charCodeAt(n+1)]>>4,a[s++]=255&e);1===o&&(e=u[t.charCodeAt(n)]<<10|u[t.charCodeAt(n+1)]<<4|u[t.charCodeAt(n+2)]>>2,a[s++]=e>>8&255,a[s++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i=[],o=0,a=n-r;o<a;o+=16383)i.push(function(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),i.push(function(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}(r));return i.join("")}(t,o,a<o+16383?a:o+16383));1==r?(e=t[n-1],i.push(s[e>>2]+s[e<<4&63]+"==")):2==r&&(e=(t[n-2]<<8)+t[n-1],i.push(s[e>>10]+s[e>>4&63]+s[e<<2&63]+"="));return i.join("")};for(var s=[],u=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,o=r.length;i<o;++i)s[i]=r[i],u[r.charCodeAt(i)]=i;function p(t){var e=t.length;if(0<e%4)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}u["-".charCodeAt(0)]=62,u["_".charCodeAt(0)]=63},function(t,R,j){(function(L,N){var M,D=j(9);!function(t){var e="object"==D(R)&&R&&!R.nodeType&&R,n="object"==D(L)&&L&&!L.nodeType&&L,r="object"==(void 0===N?"undefined":D(N))&&N;r.global!==r&&r.window!==r&&r.self!==r||(t=r);var i,o,_=2147483647,m=36,v=1,b=26,a=38,s=700,w=72,x=128,C="-",l=/^xn--/,u=/[^\x20-\x7E]/,c=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=m-v,E=Math.floor,P=String.fromCharCode;function O(t){throw new RangeError(p[t])}function f(t,e){for(var n=t.length,r=[];n--;)r[n]=e(t[n]);return r}function d(t,e){var n=t.split("@"),r="";return 1<n.length&&(r=n[0]+"@",t=n[1]),r+f((t=t.replace(c,".")).split("."),e).join(".")}function T(t){for(var e,n,r=[],i=0,o=t.length;i<o;)55296<=(e=t.charCodeAt(i++))&&e<=56319&&i<o?56320==(64512&(n=t.charCodeAt(i++)))?r.push(((1023&e)<<10)+(1023&n)+65536):(r.push(e),i--):r.push(e);return r}function S(t){return f(t,function(t){var e="";return 65535<t&&(e+=P((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=P(t)}).join("")}function I(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function A(t,e,n){var r=0;for(t=n?E(t/s):t>>1,t+=E(t/e);h*b>>1<t;r+=m)t=E(t/h);return E(r+(h+1)*t/(t+a))}function y(t){var e,n,r,i,o,a,s,l,u,c,p=[],h=t.length,f=0,d=x,y=w,g=t.lastIndexOf(C);for(g<0&&(g=0),n=0;n<g;++n)128<=t.charCodeAt(n)&&O("not-basic"),p.push(t.charCodeAt(n));for(r=0<g?g+1:0;r<h;){for(i=f,o=1,a=m;h<=r&&O("invalid-input"),c=t.charCodeAt(r++),(m<=(s=c-48<10?c-22:c-65<26?c-65:c-97<26?c-97:m)||s>E((_-f)/o))&&O("overflow"),f+=s*o,!(s<(l=a<=y?v:y+b<=a?b:a-y));a+=m)o>E(_/(u=m-l))&&O("overflow"),o*=u;y=A(f-i,e=p.length+1,0==i),E(f/e)>_-d&&O("overflow"),d+=E(f/e),f%=e,p.splice(f++,0,d)}return S(p)}function g(t){for(var e,n,r,i,o,a,s,l,u,c,p,h=[],f=(t=T(t)).length,d=x,y=w,g=e=0;g<f;++g)(l=t[g])<128&&h.push(P(l));for(n=r=h.length,r&&h.push(C);n<f;){for(i=_,g=0;g<f;++g)d<=(l=t[g])&&l<i&&(i=l);for(i-d>E((_-e)/(u=n+1))&&O("overflow"),e+=(i-d)*u,d=i,g=0;g<f;++g)if((l=t[g])<d&&++e>_&&O("overflow"),l==d){for(o=e,a=m;!(o<(s=a<=y?v:y+b<=a?b:a-y));a+=m)p=o-s,c=m-s,h.push(P(I(s+p%c,0))),o=E(p/c);h.push(P(I(o,0))),y=A(e,u,n==r),e=0,++n}++e,++d}return h.join("")}if(i={version:"1.4.1",ucs2:{decode:T,encode:S},decode:y,encode:g,toASCII:function(t){return d(t,function(t){return u.test(t)?"xn--"+g(t):t})},toUnicode:function(t){return d(t,function(t){return l.test(t)?y(t.slice(4).toLowerCase()):t})}},"object"==D(j(74))&&j(74))void 0===(M=function(){return i}.call(R,j,R,L))||(L.exports=M);else if(e&&n)if(L.exports==e)n.exports=i;else for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);else t.punycode=i}(this)}).call(this,j(160)(t),j(44))},function(t,e,n){"use strict";var r=n(9);t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"===r(t)&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,n){"use strict";e.decode=e.parse=n(257),e.encode=e.stringify=n(258)},function(t,e,n){"use strict";t.exports=function(t,e,n,r){e=e||"&",n=n||"=";var i={};if("string"!=typeof t||0===t.length)return i;var o=/\+/g;t=t.split(e);var a=1e3;r&&"number"==typeof r.maxKeys&&(a=r.maxKeys);var s=t.length;0<a&&a<s&&(s=a);for(var l,u,c=0;c<s;++c){var p,h=t[c].replace(o,"%20"),f=h.indexOf(n),d=0<=f?(p=h.substr(0,f),h.substr(f+1)):(p=h,""),y=decodeURIComponent(p),g=decodeURIComponent(d);l=i,u=y,Object.prototype.hasOwnProperty.call(l,u)?_(i[y])?i[y].push(g):i[y]=[i[y],g]:i[y]=g}return i};var _=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,n){"use strict";function o(t){switch(a(t)){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}var a=n(9);t.exports=function(n,r,i,t){return r=r||"&",i=i||"=",null===n&&(n=void 0),"object"===a(n)?l(u(n),function(t){var e=encodeURIComponent(o(t))+i;return s(n[t])?l(n[t],function(t){return e+encodeURIComponent(o(t))}).join(r):e+encodeURIComponent(o(n[t]))}).join(r):t?encodeURIComponent(o(t))+i+encodeURIComponent(o(n)):""};var s=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function l(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var u=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},function(t,e,n){var r=n(161),i=n(125),o=t.exports;for(var a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);function s(t){if("string"==typeof t&&(t=i.parse(t)),t.protocol||(t.protocol="https:"),"https:"!==t.protocol)throw new Error('Protocol "'+t.protocol+'" not supported. Expected "https:"');return t}o.request=function(t,e){return t=s(t),r.request.call(this,t,e)},o.get=function(t,e){return t=s(t),r.get.call(this,t,e)}},function(o,t,s){(function(l,u,c){var p=s(162),t=s(61),e=s(163),a=s(89),h=s(266),n=e.IncomingMessage,f=e.readyStates;var r=o.exports=function(e){var t,n=this;a.Writable.call(n),n._opts=e,n._body=[],n._headers={},e.auth&&n.setHeader("Authorization","Basic "+new l(e.auth).toString("base64")),Object.keys(e.headers).forEach(function(t){n.setHeader(t,e.headers[t])});var r,i,o=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!p.abortController)t=!(o=!1);else if("prefer-streaming"===e.mode)t=!1;else if("allow-wrong-content-type"===e.mode)t=!p.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");t=!0}n._mode=(r=t,i=o,p.fetch&&i?"fetch":p.mozchunkedarraybuffer?"moz-chunked-arraybuffer":p.msstream?"ms-stream":p.arraybuffer&&r?"arraybuffer":p.vbArray&&r?"text:vbarray":"text"),n._fetchTimer=null,n.on("finish",function(){n._onFinish()})};t(r,a.Writable),r.prototype.setHeader=function(t,e){var n=t.toLowerCase();-1===i.indexOf(n)&&(this._headers[n]={name:t,value:e})},r.prototype.getHeader=function(t){var e=this._headers[t.toLowerCase()];return e?e.value:null},r.prototype.removeHeader=function(t){delete this._headers[t.toLowerCase()]},r.prototype._onFinish=function(){var e=this;if(!e._destroyed){var t=e._opts,r=e._headers,n=null;"GET"!==t.method&&"HEAD"!==t.method&&(n=p.arraybuffer?h(l.concat(e._body)):p.blobConstructor?new u.Blob(e._body.map(function(t){return h(t)}),{type:(r["content-type"]||{}).value||""}):l.concat(e._body).toString());var i=[];if(Object.keys(r).forEach(function(t){var e=r[t].name,n=r[t].value;Array.isArray(n)?n.forEach(function(t){i.push([e,t])}):i.push([e,n])}),"fetch"===e._mode){var o,a=null;p.abortController&&(a=(o=new AbortController).signal,e._fetchAbortController=o,"requestTimeout"in t&&0!==t.requestTimeout&&(e._fetchTimer=u.setTimeout(function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()},t.requestTimeout))),u.fetch(e._opts.url,{method:e._opts.method,headers:i,body:n||void 0,mode:"cors",credentials:t.withCredentials?"include":"same-origin",signal:a}).then(function(t){e._fetchResponse=t,e._connect()},function(t){u.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)})}else{var s=e._xhr=new u.XMLHttpRequest;try{s.open(e._opts.method,e._opts.url,!0)}catch(t){return void c.nextTick(function(){e.emit("error",t)})}"responseType"in s&&(s.responseType=e._mode.split(":")[0]),"withCredentials"in s&&(s.withCredentials=!!t.withCredentials),"text"===e._mode&&"overrideMimeType"in s&&s.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in t&&(s.timeout=t.requestTimeout,s.ontimeout=function(){e.emit("requestTimeout")}),i.forEach(function(t){s.setRequestHeader(t[0],t[1])}),e._response=null,s.onreadystatechange=function(){switch(s.readyState){case f.LOADING:case f.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(s.onprogress=function(){e._onXHRProgress()}),s.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{s.send(n)}catch(t){return void c.nextTick(function(){e.emit("error",t)})}}}},r.prototype._onXHRProgress=function(){!function(t){try{var e=t.status;return null!==e&&0!==e}catch(t){return}}(this._xhr)||this._destroyed||(this._response||this._connect(),this._response._onXHRProgress())},r.prototype._connect=function(){var e=this;e._destroyed||(e._response=new n(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",function(t){e.emit("error",t)}),e.emit("response",e._response))},r.prototype._write=function(t,e,n){this._body.push(t),n()},r.prototype.abort=r.prototype.destroy=function(){this._destroyed=!0,u.clearTimeout(this._fetchTimer),this._response&&(this._response._destroyed=!0),this._xhr?this._xhr.abort():this._fetchAbortController&&this._fetchAbortController.abort()},r.prototype.end=function(t,e,n){"function"==typeof t&&(n=t,t=void 0),a.Writable.prototype.end.call(this,t,e,n)},r.prototype.flushHeaders=function(){},r.prototype.setTimeout=function(){},r.prototype.setNoDelay=function(){},r.prototype.setSocketKeepAlive=function(){};var i=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,s(55).Buffer,s(44),s(60))},function(t,e){},function(t,e,n){"use strict";var s=n(102).Buffer,r=n(263);function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.head=null,this.tail=null,this.length=0}t.exports=(i.prototype.push=function(t){var e={data:t,next:null};0<this.length?this.tail.next=e:this.head=e,this.tail=e,++this.length},i.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},i.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},i.prototype.clear=function(){this.head=this.tail=null,this.length=0},i.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},i.prototype.concat=function(t){if(0===this.length)return s.alloc(0);if(1===this.length)return this.head.data;for(var e,n,r,i=s.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=o.data,n=i,r=a,e.copy(n,r),a+=o.data.length,o=o.next;return i},i),r&&r.inspect&&r.inspect.custom&&(t.exports.prototype[r.inspect.custom]=function(){var t=r.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(n){function r(t){try{if(!n.localStorage)return}catch(t){return}var e=n.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(r("noDeprecation"))return t;var n=!1;return function(){if(!n){if(r("throwDeprecation"))throw new Error(e);r("traceDeprecation"),n=!0}return t.apply(this,arguments)}}}).call(this,n(44))},function(t,e,n){"use strict";t.exports=o;var r=n(168),i=Object.create(n(90));function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(61),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){var i=n(55).Buffer;t.exports=function(t){if(t instanceof Uint8Array){if(0===t.byteOffset&&t.byteLength===t.buffer.byteLength)return t.buffer;if("function"==typeof t.buffer.slice)return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}if(i.isBuffer(t)){for(var e=new Uint8Array(t.length),n=t.length,r=0;r<n;r++)e[r]=t[r];return e.buffer}throw new Error("Argument must be a Buffer")}},function(t,e){t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)i.call(n,r)&&(t[r]=n[r])}return t};var i=Object.prototype.hasOwnProperty},function(t,e){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(t,S,I){"use strict";(function(i){var g=I(55).Buffer,a=I(270).Transform,s=I(275),t=I(170),_=I(169).ok,m=I(55).kMaxLength,v="Cannot create final Buffer. It would be larger than 0x"+m.toString(16)+" bytes";s.Z_MIN_WINDOWBITS=8,s.Z_MAX_WINDOWBITS=15,s.Z_DEFAULT_WINDOWBITS=15,s.Z_MIN_CHUNK=64,s.Z_MAX_CHUNK=1/0,s.Z_DEFAULT_CHUNK=16384,s.Z_MIN_MEMLEVEL=1,s.Z_MAX_MEMLEVEL=9,s.Z_DEFAULT_MEMLEVEL=8,s.Z_MIN_LEVEL=-1,s.Z_MAX_LEVEL=9,s.Z_DEFAULT_LEVEL=s.Z_DEFAULT_COMPRESSION;for(var e=Object.keys(s),n=0;n<e.length;n++){var r=e[n];r.match(/^Z/)&&Object.defineProperty(S,r,{enumerable:!0,value:s[r],writable:!1})}for(var o={Z_OK:s.Z_OK,Z_STREAM_END:s.Z_STREAM_END,Z_NEED_DICT:s.Z_NEED_DICT,Z_ERRNO:s.Z_ERRNO,Z_STREAM_ERROR:s.Z_STREAM_ERROR,Z_DATA_ERROR:s.Z_DATA_ERROR,Z_MEM_ERROR:s.Z_MEM_ERROR,Z_BUF_ERROR:s.Z_BUF_ERROR,Z_VERSION_ERROR:s.Z_VERSION_ERROR},l=Object.keys(o),u=0;u<l.length;u++){var c=l[u];o[o[c]]=c}function p(n,t,r){var i=[],o=0;function e(){for(var t;null!==(t=n.read());)i.push(t),o+=t.length;n.once("readable",e)}function a(){var t,e=null;m<=o?e=new RangeError(v):t=g.concat(i,o),i=[],n.close(),r(e,t)}n.on("error",function(t){n.removeListener("end",a),n.removeListener("readable",e),r(t)}),n.on("end",a),n.end(t),e()}function h(t,e){if("string"==typeof e&&(e=g.from(e)),!g.isBuffer(e))throw new TypeError("Not a string or buffer");var n=t._finishFlushFlag;return t._processChunk(e,n)}function f(t){if(!(this instanceof f))return new f(t);P.call(this,t,s.DEFLATE)}function d(t){if(!(this instanceof d))return new d(t);P.call(this,t,s.INFLATE)}function y(t){if(!(this instanceof y))return new y(t);P.call(this,t,s.GZIP)}function b(t){if(!(this instanceof b))return new b(t);P.call(this,t,s.GUNZIP)}function w(t){if(!(this instanceof w))return new w(t);P.call(this,t,s.DEFLATERAW)}function x(t){if(!(this instanceof x))return new x(t);P.call(this,t,s.INFLATERAW)}function C(t){if(!(this instanceof C))return new C(t);P.call(this,t,s.UNZIP)}function E(t){return t===s.Z_NO_FLUSH||t===s.Z_PARTIAL_FLUSH||t===s.Z_SYNC_FLUSH||t===s.Z_FULL_FLUSH||t===s.Z_FINISH||t===s.Z_BLOCK}function P(t,e){var n=this;if(this._opts=t=t||{},this._chunkSize=t.chunkSize||S.Z_DEFAULT_CHUNK,a.call(this,t),t.flush&&!E(t.flush))throw new Error("Invalid flush flag: "+t.flush);if(t.finishFlush&&!E(t.finishFlush))throw new Error("Invalid flush flag: "+t.finishFlush);if(this._flushFlag=t.flush||s.Z_NO_FLUSH,this._finishFlushFlag=void 0!==t.finishFlush?t.finishFlush:s.Z_FINISH,t.chunkSize&&(t.chunkSize<S.Z_MIN_CHUNK||t.chunkSize>S.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+t.chunkSize);if(t.windowBits&&(t.windowBits<S.Z_MIN_WINDOWBITS||t.windowBits>S.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+t.windowBits);if(t.level&&(t.level<S.Z_MIN_LEVEL||t.level>S.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+t.level);if(t.memLevel&&(t.memLevel<S.Z_MIN_MEMLEVEL||t.memLevel>S.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+t.memLevel);if(t.strategy&&t.strategy!=S.Z_FILTERED&&t.strategy!=S.Z_HUFFMAN_ONLY&&t.strategy!=S.Z_RLE&&t.strategy!=S.Z_FIXED&&t.strategy!=S.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+t.strategy);if(t.dictionary&&!g.isBuffer(t.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new s.Zlib(e);var r=this;this._hadError=!1,this._handle.onerror=function(t,e){O(r),r._hadError=!0;var n=new Error(t);n.errno=e,n.code=S.codes[e],r.emit("error",n)};var i=S.Z_DEFAULT_COMPRESSION;"number"==typeof t.level&&(i=t.level);var o=S.Z_DEFAULT_STRATEGY;"number"==typeof t.strategy&&(o=t.strategy),this._handle.init(t.windowBits||S.Z_DEFAULT_WINDOWBITS,i,t.memLevel||S.Z_DEFAULT_MEMLEVEL,o,t.dictionary),this._buffer=g.allocUnsafe(this._chunkSize),this._offset=0,this._level=i,this._strategy=o,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!n._handle},configurable:!0,enumerable:!0})}function O(t,e){e&&i.nextTick(e),t._handle&&(t._handle.close(),t._handle=null)}function T(t){t.emit("close")}Object.defineProperty(S,"codes",{enumerable:!0,value:Object.freeze(o),writable:!1}),S.Deflate=f,S.Inflate=d,S.Gzip=y,S.Gunzip=b,S.DeflateRaw=w,S.InflateRaw=x,S.Unzip=C,S.createDeflate=function(t){return new f(t)},S.createInflate=function(t){return new d(t)},S.createDeflateRaw=function(t){return new w(t)},S.createInflateRaw=function(t){return new x(t)},S.createGzip=function(t){return new y(t)},S.createGunzip=function(t){return new b(t)},S.createUnzip=function(t){return new C(t)},S.deflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),p(new f(e),t,n)},S.deflateSync=function(t,e){return h(new f(e),t)},S.gzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),p(new y(e),t,n)},S.gzipSync=function(t,e){return h(new y(e),t)},S.deflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),p(new w(e),t,n)},S.deflateRawSync=function(t,e){return h(new w(e),t)},S.unzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),p(new C(e),t,n)},S.unzipSync=function(t,e){return h(new C(e),t)},S.inflate=function(t,e,n){return"function"==typeof e&&(n=e,e={}),p(new d(e),t,n)},S.inflateSync=function(t,e){return h(new d(e),t)},S.gunzip=function(t,e,n){return"function"==typeof e&&(n=e,e={}),p(new b(e),t,n)},S.gunzipSync=function(t,e){return h(new b(e),t)},S.inflateRaw=function(t,e,n){return"function"==typeof e&&(n=e,e={}),p(new x(e),t,n)},S.inflateRawSync=function(t,e){return h(new x(e),t)},t.inherits(P,a),P.prototype.params=function(t,e,n){if(t<S.Z_MIN_LEVEL||t>S.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+t);if(e!=S.Z_FILTERED&&e!=S.Z_HUFFMAN_ONLY&&e!=S.Z_RLE&&e!=S.Z_FIXED&&e!=S.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+e);var r;this._level!==t||this._strategy!==e?(r=this).flush(s.Z_SYNC_FLUSH,function(){_(r._handle,"zlib binding closed"),r._handle.params(t,e),r._hadError||(r._level=t,r._strategy=e,n&&n())}):i.nextTick(n)},P.prototype.reset=function(){return _(this._handle,"zlib binding closed"),this._handle.reset()},P.prototype._flush=function(t){this._transform(g.alloc(0),"",t)},P.prototype.flush=function(t,e){var n=this,r=this._writableState;"function"!=typeof t&&(void 0!==t||e)||(e=t,t=s.Z_FULL_FLUSH),r.ended?e&&i.nextTick(e):r.ending?e&&this.once("end",e):r.needDrain?e&&this.once("drain",function(){return n.flush(t,e)}):(this._flushFlag=t,this.write(g.alloc(0),"",e))},P.prototype.close=function(t){O(this,t),i.nextTick(T,this)},P.prototype._transform=function(t,e,n){var r,i=this._writableState,o=(i.ending||i.ended)&&(!t||i.length===t.length);return null===t||g.isBuffer(t)?this._handle?(o?r=this._finishFlushFlag:(r=this._flushFlag,t.length>=i.length&&(this._flushFlag=this._opts.flush||s.Z_NO_FLUSH)),void this._processChunk(t,r,n)):n(new Error("zlib binding closed")):n(new Error("invalid input"))},P.prototype._processChunk=function(o,a,s){var l=o&&o.length,u=this._chunkSize-this._offset,c=0,p=this,h="function"==typeof s;if(!h){var e,f=[],d=0;this.on("error",function(t){e=t}),_(this._handle,"zlib binding closed");do{var t=this._handle.writeSync(a,o,c,l,this._buffer,this._offset,u)}while(!this._hadError&&y(t[0],t[1]));if(this._hadError)throw e;if(m<=d)throw O(this),new RangeError(v);var n=g.concat(f,d);return O(this),n}_(this._handle,"zlib binding closed");var r=this._handle.write(a,o,c,l,this._buffer,this._offset,u);function y(t,e){if(this&&(this.buffer=null,this.callback=null),!p._hadError){var n,r=u-e;if(_(0<=r,"have should not go down"),0<r&&(n=p._buffer.slice(p._offset,p._offset+r),p._offset+=r,h?p.push(n):(f.push(n),d+=n.length)),(0===e||p._offset>=p._chunkSize)&&(u=p._chunkSize,p._offset=0,p._buffer=g.allocUnsafe(p._chunkSize)),0===e){if(c+=l-t,l=t,!h)return!0;var i=p._handle.write(a,o,c,l,p._buffer,p._offset,p._chunkSize);return i.callback=y,void(i.buffer=o)}if(!h)return!1;s()}}r.buffer=o,r.callback=y},t.inherits(f,P),t.inherits(d,P),t.inherits(y,P),t.inherits(b,P),t.inherits(w,P),t.inherits(x,P),t.inherits(C,P)}).call(this,I(60))},function(t,e,n){t.exports=r;var c=n(126).EventEmitter;function r(){c.call(this)}n(61)(r,c),r.Readable=n(89),r.Writable=n(271),r.Duplex=n(272),r.Transform=n(273),r.PassThrough=n(274),(r.Stream=r).prototype.pipe=function(e,t){var n=this;function r(t){e.writable&&!1===e.write(t)&&n.pause&&n.pause()}function i(){n.readable&&n.resume&&n.resume()}n.on("data",r),e.on("drain",i),e._isStdio||t&&!1===t.end||(n.on("end",a),n.on("close",s));var o=!1;function a(){o||(o=!0,e.end())}function s(){o||(o=!0,"function"==typeof e.destroy&&e.destroy())}function l(t){if(u(),0===c.listenerCount(this,"error"))throw t}function u(){n.removeListener("data",r),e.removeListener("drain",i),n.removeListener("end",a),n.removeListener("close",s),n.removeListener("error",l),e.removeListener("error",l),n.removeListener("end",u),n.removeListener("close",u),e.removeListener("close",u)}return n.on("error",l),e.on("error",l),n.on("end",u),n.on("close",u),e.on("close",u),e.emit("pipe",n),e}},function(t,e,n){t.exports=n(127)},function(t,e,n){t.exports=n(67)},function(t,e,n){t.exports=n(89).Transform},function(t,e,n){t.exports=n(89).PassThrough},function(t,h,r){"use strict";(function(u,c){var p=r(169),o=r(279),a=r(280),s=r(283),t=r(286);for(var e in t)h[e]=t[e];h.NONE=0,h.DEFLATE=1,h.INFLATE=2,h.GZIP=3,h.GUNZIP=4,h.DEFLATERAW=5,h.INFLATERAW=6,h.UNZIP=7;function n(t){if("number"!=typeof t||t<h.DEFLATE||t>h.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=t,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}n.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,p(this.init_done,"close before init"),p(this.mode<=h.UNZIP),this.mode===h.DEFLATE||this.mode===h.GZIP||this.mode===h.DEFLATERAW?a.deflateEnd(this.strm):this.mode!==h.INFLATE&&this.mode!==h.GUNZIP&&this.mode!==h.INFLATERAW&&this.mode!==h.UNZIP||s.inflateEnd(this.strm),this.mode=h.NONE,this.dictionary=null)},n.prototype.write=function(t,e,n,r,i,o,a){return this._write(!0,t,e,n,r,i,o,a)},n.prototype.writeSync=function(t,e,n,r,i,o,a){return this._write(!1,t,e,n,r,i,o,a)},n.prototype._write=function(t,e,n,r,i,o,a,s){if(p.equal(arguments.length,8),p(this.init_done,"write before init"),p(this.mode!==h.NONE,"already finalized"),p.equal(!1,this.write_in_progress,"write already in progress"),p.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,p.equal(!1,void 0===e,"must provide flush value"),this.write_in_progress=!0,e!==h.Z_NO_FLUSH&&e!==h.Z_PARTIAL_FLUSH&&e!==h.Z_SYNC_FLUSH&&e!==h.Z_FULL_FLUSH&&e!==h.Z_FINISH&&e!==h.Z_BLOCK)throw new Error("Invalid flush value");if(null==n&&(n=u.alloc(0),r=i=0),this.strm.avail_in=i,this.strm.input=n,this.strm.next_in=r,this.strm.avail_out=s,this.strm.output=o,this.strm.next_out=a,this.flush=e,!t)return this._process(),this._checkError()?this._afterSync():void 0;var l=this;return c.nextTick(function(){l._process(),l._after()}),this},n.prototype._afterSync=function(){var t=this.strm.avail_out,e=this.strm.avail_in;return this.write_in_progress=!1,[e,t]},n.prototype._process=function(){var t=null;switch(this.mode){case h.DEFLATE:case h.GZIP:case h.DEFLATERAW:this.err=a.deflate(this.strm,this.flush);break;case h.UNZIP:switch(0<this.strm.avail_in&&(t=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===t)break;if(31!==this.strm.input[t]){this.mode=h.INFLATE;break}if(t++,(this.gzip_id_bytes_read=1)===this.strm.avail_in)break;case 1:if(null===t)break;139===this.strm.input[t]?(this.gzip_id_bytes_read=2,this.mode=h.GUNZIP):this.mode=h.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case h.INFLATE:case h.GUNZIP:case h.INFLATERAW:for(this.err=s.inflate(this.strm,this.flush),this.err===h.Z_NEED_DICT&&this.dictionary&&(this.err=s.inflateSetDictionary(this.strm,this.dictionary),this.err===h.Z_OK?this.err=s.inflate(this.strm,this.flush):this.err===h.Z_DATA_ERROR&&(this.err=h.Z_NEED_DICT));0<this.strm.avail_in&&this.mode===h.GUNZIP&&this.err===h.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=s.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},n.prototype._checkError=function(){switch(this.err){case h.Z_OK:case h.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===h.Z_FINISH)return this._error("unexpected end of file"),!1;break;case h.Z_STREAM_END:break;case h.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},n.prototype._after=function(){var t,e;this._checkError()&&(t=this.strm.avail_out,e=this.strm.avail_in,this.write_in_progress=!1,this.callback(e,t),this.pending_close&&this.close())},n.prototype._error=function(t){this.strm.msg&&(t=this.strm.msg),this.onerror(t,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},n.prototype.init=function(t,e,n,r,i){p(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),p(8<=t&&t<=15,"invalid windowBits"),p(-1<=e&&e<=9,"invalid compression level"),p(1<=n&&n<=9,"invalid memlevel"),p(r===h.Z_FILTERED||r===h.Z_HUFFMAN_ONLY||r===h.Z_RLE||r===h.Z_FIXED||r===h.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(e,t,n,r,i),this._setDictionary()},n.prototype.params=function(){throw new Error("deflateParams Not supported")},n.prototype.reset=function(){this._reset(),this._setDictionary()},n.prototype._init=function(t,e,n,r,i){switch(this.level=t,this.windowBits=e,this.memLevel=n,this.strategy=r,this.flush=h.Z_NO_FLUSH,this.err=h.Z_OK,this.mode!==h.GZIP&&this.mode!==h.GUNZIP||(this.windowBits+=16),this.mode===h.UNZIP&&(this.windowBits+=32),this.mode!==h.DEFLATERAW&&this.mode!==h.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new o,this.mode){case h.DEFLATE:case h.GZIP:case h.DEFLATERAW:this.err=a.deflateInit2(this.strm,this.level,h.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case h.INFLATE:case h.GUNZIP:case h.INFLATERAW:case h.UNZIP:this.err=s.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==h.Z_OK&&this._error("Init error"),this.dictionary=i,this.write_in_progress=!1,this.init_done=!0},n.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=h.Z_OK,this.mode){case h.DEFLATE:case h.DEFLATERAW:this.err=a.deflateSetDictionary(this.strm,this.dictionary)}this.err!==h.Z_OK&&this._error("Failed to set dictionary")}},n.prototype._reset=function(){switch(this.err=h.Z_OK,this.mode){case h.DEFLATE:case h.DEFLATERAW:case h.GZIP:this.err=a.deflateReset(this.strm);break;case h.INFLATE:case h.INFLATERAW:case h.GUNZIP:this.err=s.inflateReset(this.strm)}this.err!==h.Z_OK&&this._error("Failed to reset stream")},h.Zlib=n}).call(this,r(55).Buffer,r(60))},function(t,e,n){"use strict";var l=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},r)).join("")?void 0:1}catch(t){return}}()?Object.assign:function(t,e){for(var n,r,i=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))u.call(n,a)&&(i[a]=n[a]);if(l){r=l(n);for(var s=0;s<r.length;s++)c.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i}},function(t,e,n){var r=n(9);t.exports=function(t){return t&&"object"===r(t)&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";var l,h=n(103),u=n(281),f=n(171),d=n(172),r=n(282),c=0,p=4,y=0,g=-2,_=-1,m=4,i=2,v=8,b=9,o=286,a=30,s=19,w=2*o+1,x=15,C=3,E=258,P=E+C+1,O=42,T=113,S=1,I=2,A=3,L=4;function N(t,e){return t.msg=r[e],e}function M(t){return(t<<1)-(4<t?9:0)}function D(t){for(var e=t.length;0<=--e;)t[e]=0}function R(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(h.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function j(t,e){u._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,R(t.strm)}function k(t,e){t.pending_buf[t.pending++]=e}function F(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function B(t,e){var n,r,i=t.max_chain_length,o=t.strstart,a=t.prev_length,s=t.nice_match,l=t.strstart>t.w_size-P?t.strstart-(t.w_size-P):0,u=t.window,c=t.w_mask,p=t.prev,h=t.strstart+E,f=u[o+a-1],d=u[o+a];t.prev_length>=t.good_match&&(i>>=2),s>t.lookahead&&(s=t.lookahead);do{if(u[(n=e)+a]===d&&u[n+a-1]===f&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<h);if(r=E-(h-o),o=h-E,a<r){if(t.match_start=e,s<=(a=r))break;f=u[o+a-1],d=u[o+a]}}}while((e=p[e&c])>l&&0!=--i);return a<=t.lookahead?a:t.lookahead}function G(t){var e,n,r,i,o,a,s,l,u,c,p=t.w_size;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-P)){for(h.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=n=t.hash_size;r=t.head[--e],t.head[e]=p<=r?r-p:0,--n;);for(e=n=p;r=t.prev[--e],t.prev[e]=p<=r?r-p:0,--n;);i+=p}if(0===t.strm.avail_in)break;if(a=t.strm,s=t.window,l=t.strstart+t.lookahead,u=i,c=void 0,c=a.avail_in,u<c&&(c=u),n=0===c?0:(a.avail_in-=c,h.arraySet(s,a.input,a.next_in,c,l),1===a.state.wrap?a.adler=f(a.adler,s,c,l):2===a.state.wrap&&(a.adler=d(a.adler,s,c,l)),a.next_in+=c,a.total_in+=c,c),t.lookahead+=n,t.lookahead+t.insert>=C)for(o=t.strstart-t.insert,t.ins_h=t.window[o],t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[o+C-1])&t.hash_mask,t.prev[o&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=o,o++,t.insert--,!(t.lookahead+t.insert<C)););}while(t.lookahead<P&&0!==t.strm.avail_in)}function z(t,e){for(var n,r;;){if(t.lookahead<P){if(G(t),t.lookahead<P&&e===c)return S;if(0===t.lookahead)break}if(n=0,t.lookahead>=C&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-P&&(t.match_length=B(t,n)),t.match_length>=C)if(r=u._tr_tally(t,t.strstart-t.match_start,t.match_length-C),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=C){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,0!=--t.match_length;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(j(t,!1),0===t.strm.avail_out))return S}return t.insert=t.strstart<C-1?t.strstart:C-1,e===p?(j(t,!0),0===t.strm.avail_out?A:L):t.last_lit&&(j(t,!1),0===t.strm.avail_out)?S:I}function U(t,e){for(var n,r,i;;){if(t.lookahead<P){if(G(t),t.lookahead<P&&e===c)return S;if(0===t.lookahead)break}if(n=0,t.lookahead>=C&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=C-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-P&&(t.match_length=B(t,n),t.match_length<=5&&(1===t.strategy||t.match_length===C&&4096<t.strstart-t.match_start)&&(t.match_length=C-1)),t.prev_length>=C&&t.match_length<=t.prev_length){for(i=t.strstart+t.lookahead-C,r=u._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-C),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+C-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!=--t.prev_length;);if(t.match_available=0,t.match_length=C-1,t.strstart++,r&&(j(t,!1),0===t.strm.avail_out))return S}else if(t.match_available){if((r=u._tr_tally(t,0,t.window[t.strstart-1]))&&j(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return S}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=u._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<C-1?t.strstart:C-1,e===p?(j(t,!0),0===t.strm.avail_out?A:L):t.last_lit&&(j(t,!1),0===t.strm.avail_out)?S:I}function V(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function H(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=v,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new h.Buf16(2*w),this.dyn_dtree=new h.Buf16(2*(2*a+1)),this.bl_tree=new h.Buf16(2*(2*s+1)),D(this.dyn_ltree),D(this.dyn_dtree),D(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new h.Buf16(x+1),this.heap=new h.Buf16(2*o+1),D(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new h.Buf16(2*o+1),D(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function q(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=i,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?O:T,t.adler=2===e.wrap?0:1,e.last_flush=c,u._tr_init(e),y):N(t,g)}function W(t){var e,n=q(t);return n===y&&((e=t.state).window_size=2*e.w_size,D(e.head),e.max_lazy_match=l[e.level].max_lazy,e.good_match=l[e.level].good_length,e.nice_match=l[e.level].nice_length,e.max_chain_length=l[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=C-1,e.match_available=0,e.ins_h=0),n}function Y(t,e,n,r,i,o){if(!t)return g;var a=1;if(e===_&&(e=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),i<1||b<i||n!==v||r<8||15<r||e<0||9<e||o<0||m<o)return N(t,g);8===r&&(r=9);var s=new H;return(t.state=s).strm=t,s.wrap=a,s.gzhead=null,s.w_bits=r,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=i+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+C-1)/C),s.window=new h.Buf8(2*s.w_size),s.head=new h.Buf16(s.hash_size),s.prev=new h.Buf16(s.w_size),s.lit_bufsize=1<<i+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new h.Buf8(s.pending_buf_size),s.d_buf=+s.lit_bufsize,s.l_buf=3*s.lit_bufsize,s.level=e,s.strategy=o,s.method=n,W(t)}l=[new V(0,0,0,0,function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(G(t),0===t.lookahead&&e===c)return S;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,j(t,!1),0===t.strm.avail_out))return S;if(t.strstart-t.block_start>=t.w_size-P&&(j(t,!1),0===t.strm.avail_out))return S}return t.insert=0,e===p?(j(t,!0),0===t.strm.avail_out?A:L):(t.strstart>t.block_start&&(j(t,!1),t.strm.avail_out),S)}),new V(4,4,8,4,z),new V(4,5,16,8,z),new V(4,6,32,32,z),new V(4,4,16,16,U),new V(8,16,32,32,U),new V(8,16,128,128,U),new V(8,32,128,256,U),new V(32,128,258,1024,U),new V(32,258,258,4096,U)],e.deflateInit=function(t,e){return Y(t,e,v,15,8,0)},e.deflateInit2=Y,e.deflateReset=W,e.deflateResetKeep=q,e.deflateSetHeader=function(t,e){return!t||!t.state||2!==t.state.wrap?g:(t.state.gzhead=e,y)},e.deflate=function(t,e){var n,r,i,o,a;if(!t||!t.state||5<e||e<0)return t?N(t,g):g;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||666===r.status&&e!==p)return N(t,0===t.avail_out?-5:g);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===O&&(2===r.wrap?(t.adler=0,k(r,31),k(r,139),k(r,8),r.gzhead?(k(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),k(r,255&r.gzhead.time),k(r,r.gzhead.time>>8&255),k(r,r.gzhead.time>>16&255),k(r,r.gzhead.time>>24&255),k(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),k(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(k(r,255&r.gzhead.extra.length),k(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=d(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(k(r,0),k(r,0),k(r,0),k(r,0),k(r,0),k(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),k(r,3),r.status=T)):(a=v+(r.w_bits-8<<4)<<8,a|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(a|=32),a+=31-a%31,r.status=T,F(r,a),0!==r.strstart&&(F(r,t.adler>>>16),F(r,65535&t.adler)),t.adler=1)),69===r.status)if(r.gzhead.extra){for(i=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>i&&(t.adler=d(t.adler,r.pending_buf,r.pending-i,i)),R(t),i=r.pending,r.pending!==r.pending_buf_size));)k(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>i&&(t.adler=d(t.adler,r.pending_buf,r.pending-i,i)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=d(t.adler,r.pending_buf,r.pending-i,i)),R(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,k(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(t.adler=d(t.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){i=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>i&&(t.adler=d(t.adler,r.pending_buf,r.pending-i,i)),R(t),i=r.pending,r.pending===r.pending_buf_size)){o=1;break}o=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,k(r,o)}while(0!==o);r.gzhead.hcrc&&r.pending>i&&(t.adler=d(t.adler,r.pending_buf,r.pending-i,i)),0===o&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&R(t),r.pending+2<=r.pending_buf_size&&(k(r,255&t.adler),k(r,t.adler>>8&255),t.adler=0,r.status=T)):r.status=T),0!==r.pending){if(R(t),0===t.avail_out)return r.last_flush=-1,y}else if(0===t.avail_in&&M(e)<=M(n)&&e!==p)return N(t,-5);if(666===r.status&&0!==t.avail_in)return N(t,-5);if(0!==t.avail_in||0!==r.lookahead||e!==c&&666!==r.status){var s=2===r.strategy?function(t,e){for(var n;;){if(0===t.lookahead&&(G(t),0===t.lookahead)){if(e===c)return S;break}if(t.match_length=0,n=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(j(t,!1),0===t.strm.avail_out))return S}return t.insert=0,e===p?(j(t,!0),0===t.strm.avail_out?A:L):t.last_lit&&(j(t,!1),0===t.strm.avail_out)?S:I}(r,e):3===r.strategy?function(t,e){for(var n,r,i,o,a=t.window;;){if(t.lookahead<=E){if(G(t),t.lookahead<=E&&e===c)return S;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=C&&0<t.strstart&&(r=a[i=t.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=t.strstart+E;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);t.match_length=E-(o-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=C?(n=u._tr_tally(t,1,t.match_length-C),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=u._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(j(t,!1),0===t.strm.avail_out))return S}return t.insert=0,e===p?(j(t,!0),0===t.strm.avail_out?A:L):t.last_lit&&(j(t,!1),0===t.strm.avail_out)?S:I}(r,e):l[r.level].func(r,e);if(s!==A&&s!==L||(r.status=666),s===S||s===A)return 0===t.avail_out&&(r.last_flush=-1),y;if(s===I&&(1===e?u._tr_align(r):5!==e&&(u._tr_stored_block(r,0,0,!1),3===e&&(D(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),R(t),0===t.avail_out))return r.last_flush=-1,y}return e!==p?y:r.wrap<=0?1:(2===r.wrap?(k(r,255&t.adler),k(r,t.adler>>8&255),k(r,t.adler>>16&255),k(r,t.adler>>24&255),k(r,255&t.total_in),k(r,t.total_in>>8&255),k(r,t.total_in>>16&255),k(r,t.total_in>>24&255)):(F(r,t.adler>>>16),F(r,65535&t.adler)),R(t),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?y:1)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==O&&69!==e&&73!==e&&91!==e&&103!==e&&e!==T&&666!==e?N(t,g):(t.state=null,e===T?N(t,-3):y):g},e.deflateSetDictionary=function(t,e){var n,r,i,o,a,s,l,u,c=e.length;if(!t||!t.state)return g;if(2===(o=(n=t.state).wrap)||1===o&&n.status!==O||n.lookahead)return g;for(1===o&&(t.adler=f(t.adler,e,c,0)),n.wrap=0,c>=n.w_size&&(0===o&&(D(n.head),n.strstart=0,n.block_start=0,n.insert=0),u=new h.Buf8(n.w_size),h.arraySet(u,e,c-n.w_size,n.w_size,0),e=u,c=n.w_size),a=t.avail_in,s=t.next_in,l=t.input,t.avail_in=c,t.next_in=0,t.input=e,G(n);n.lookahead>=C;){for(r=n.strstart,i=n.lookahead-(C-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+C-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--i;);n.strstart=r,n.lookahead=C-1,G(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=C-1,n.match_available=0,t.next_in=s,t.input=l,t.avail_in=a,n.wrap=o,y},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";var l=n(103),s=0,u=1;function r(t){for(var e=t.length;0<=--e;)t[e]=0}var c=0,a=29,p=256,h=p+1+a,f=30,d=19,g=2*h+1,_=15,i=16,y=7,m=256,v=16,b=17,w=18,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],C=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=new Array(2*(h+2));r(O);var T=new Array(2*f);r(T);var S=new Array(512);r(S);var I=new Array(256);r(I);var A=new Array(a);r(A);var L,N,M,D=new Array(f);function R(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function o(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function j(t){return t<256?S[t]:S[256+(t>>>7)]}function k(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function F(t,e,n){t.bi_valid>i-n?(t.bi_buf|=e<<t.bi_valid&65535,k(t,t.bi_buf),t.bi_buf=e>>i-t.bi_valid,t.bi_valid+=n-i):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function B(t,e,n){F(t,n[2*e],n[2*e+1])}function G(t,e){for(var n=0;n|=1&t,t>>>=1,n<<=1,0<--e;);return n>>>1}function z(t,e,n){for(var r,i=new Array(_+1),o=0,a=1;a<=_;a++)i[a]=o=o+n[a-1]<<1;for(r=0;r<=e;r++){var s=t[2*r+1];0!==s&&(t[2*r]=G(i[s]++,s))}}function U(t){for(var e=0;e<h;e++)t.dyn_ltree[2*e]=0;for(e=0;e<f;e++)t.dyn_dtree[2*e]=0;for(e=0;e<d;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*m]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function V(t){8<t.bi_valid?k(t,t.bi_buf):0<t.bi_valid&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function H(t,e,n,r){var i=2*e,o=2*n;return t[i]<t[o]||t[i]===t[o]&&r[e]<=r[n]}function q(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&H(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!H(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function W(t,e,n){var r,i,o,a,s=0;if(0!==t.last_lit)for(;r=t.pending_buf[t.d_buf+2*s]<<8|t.pending_buf[t.d_buf+2*s+1],i=t.pending_buf[t.l_buf+s],s++,0==r?B(t,i,e):(B(t,(o=I[i])+p+1,e),0!==(a=x[o])&&F(t,i-=A[o],a),B(t,o=j(--r),n),0!==(a=C[o])&&F(t,r-=D[o],a)),s<t.last_lit;);B(t,m,e)}function Y(t,e){var n,r,i,o=e.dyn_tree,a=e.stat_desc.static_tree,s=e.stat_desc.has_stree,l=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=g,n=0;n<l;n++)0!==o[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):o[2*n+1]=0;for(;t.heap_len<2;)o[2*(i=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[i]=0,t.opt_len--,s&&(t.static_len-=a[2*i+1]);for(e.max_code=u,n=t.heap_len>>1;1<=n;n--)q(t,o,n);for(i=l;n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],q(t,o,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,o[2*i]=o[2*n]+o[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,o[2*n+1]=o[2*r+1]=i,t.heap[1]=i++,q(t,o,1),2<=t.heap_len;);t.heap[--t.heap_max]=t.heap[1],function(t,e){for(var n,r,i,o,a,s=e.dyn_tree,l=e.max_code,u=e.stat_desc.static_tree,c=e.stat_desc.has_stree,p=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,f=e.stat_desc.max_length,d=0,y=0;y<=_;y++)t.bl_count[y]=0;for(s[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<g;n++)f<(y=s[2*s[2*(r=t.heap[n])+1]+1]+1)&&(y=f,d++),s[2*r+1]=y,l<r||(t.bl_count[y]++,o=0,h<=r&&(o=p[r-h]),a=s[2*r],t.opt_len+=a*(y+o),c&&(t.static_len+=a*(u[2*r+1]+o)));if(0!==d){do{for(y=f-1;0===t.bl_count[y];)y--;t.bl_count[y]--,t.bl_count[y+1]+=2,t.bl_count[f]--,d-=2}while(0<d);for(y=f;0!==y;y--)for(r=t.bl_count[y];0!==r;)l<(i=t.heap[--n])||(s[2*i+1]!==y&&(t.opt_len+=(y-s[2*i+1])*s[2*i],s[2*i+1]=y),r--)}}(t,e),z(o,u,t.bl_count)}function X(t,e,n){var r,i,o=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++s<l&&i===a||(s<u?t.bl_tree[2*i]+=s:0!==i?(i!==o&&t.bl_tree[2*i]++,t.bl_tree[2*v]++):s<=10?t.bl_tree[2*b]++:t.bl_tree[2*w]++,o=i,u=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4))}function J(t,e,n){var r,i,o=-1,a=e[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++s<l&&i===a)){if(s<u)for(;B(t,i,t.bl_tree),0!=--s;);else 0!==i?(i!==o&&(B(t,i,t.bl_tree),s--),B(t,v,t.bl_tree),F(t,s-3,2)):s<=10?(B(t,b,t.bl_tree),F(t,s-3,3)):(B(t,w,t.bl_tree),F(t,s-11,7));o=i,u=(s=0)===a?(l=138,3):i===a?(l=6,3):(l=7,4)}}r(D);var Z=!1;function K(t,e,n,r){var i,o,a,s;F(t,(c<<1)+(r?1:0),3),o=e,a=n,s=!0,V(i=t),s&&(k(i,a),k(i,~a)),l.arraySet(i.pending_buf,i.window,o,a,i.pending),i.pending+=a}e._tr_init=function(t){Z||(function(){for(var t,e,n,r=new Array(_+1),i=0,o=0;o<a-1;o++)for(A[o]=i,t=0;t<1<<x[o];t++)I[i++]=o;for(I[i-1]=o,o=n=0;o<16;o++)for(D[o]=n,t=0;t<1<<C[o];t++)S[n++]=o;for(n>>=7;o<f;o++)for(D[o]=n<<7,t=0;t<1<<C[o]-7;t++)S[256+n++]=o;for(e=0;e<=_;e++)r[e]=0;for(t=0;t<=143;)O[2*t+1]=8,t++,r[8]++;for(;t<=255;)O[2*t+1]=9,t++,r[9]++;for(;t<=279;)O[2*t+1]=7,t++,r[7]++;for(;t<=287;)O[2*t+1]=8,t++,r[8]++;for(z(O,h+1,r),t=0;t<f;t++)T[2*t+1]=5,T[2*t]=G(t,5);L=new R(O,x,p+1,h,_),N=new R(T,C,0,f,_),M=new R(new Array(0),E,0,d,y)}(),Z=!0),t.l_desc=new o(t.dyn_ltree,L),t.d_desc=new o(t.dyn_dtree,N),t.bl_desc=new o(t.bl_tree,M),t.bi_buf=0,t.bi_valid=0,U(t)},e._tr_stored_block=K,e._tr_flush_block=function(t,e,n,r){var i,o,a=0;0<t.level?(2===t.strm.data_type&&(t.strm.data_type=function(t){for(var e=4093624447,n=0;n<=31;n++,e>>>=1)if(1&e&&0!==t.dyn_ltree[2*n])return s;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return u;for(n=32;n<p;n++)if(0!==t.dyn_ltree[2*n])return u;return s}(t)),Y(t,t.l_desc),Y(t,t.d_desc),a=function(t){var e;for(X(t,t.dyn_ltree,t.l_desc.max_code),X(t,t.dyn_dtree,t.d_desc.max_code),Y(t,t.bl_desc),e=d-1;3<=e&&0===t.bl_tree[2*P[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),i=t.opt_len+3+7>>>3,(o=t.static_len+3+7>>>3)<=i&&(i=o)):i=o=n+5,n+4<=i&&-1!==e?K(t,e,n,r):4===t.strategy||o===i?(F(t,2+(r?1:0),3),W(t,O,T)):(F(t,4+(r?1:0),3),function(t,e,n,r){var i;for(F(t,e-257,5),F(t,n-1,5),F(t,r-4,4),i=0;i<r;i++)F(t,t.bl_tree[2*P[i]+1],3);J(t,t.dyn_ltree,e-1),J(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,a+1),W(t,t.dyn_ltree,t.dyn_dtree)),U(t),r&&V(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(I[n]+p+1)]++,t.dyn_dtree[2*j(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){var e;F(t,2,3),B(t,m,O),16===(e=t).bi_valid?(k(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";var I=n(103),A=n(171),L=n(172),N=n(284),M=n(285),D=1,R=2,j=0,k=-2,F=1,r=852,i=592;function B(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function o(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new I.Buf16(320),this.work=new I.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function a(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=F,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new I.Buf32(r),e.distcode=e.distdyn=new I.Buf32(i),e.sane=1,e.back=-1,j):k}function s(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,a(t)):k}function l(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||15<e)?k:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,s(t))):k}function u(t,e){var n,r;return t?(r=new o,(t.state=r).window=null,(n=l(t,e))!==j&&(t.state=null),n):k}var G,z,U=!0;function V(t,e,n,r){var i,o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new I.Buf8(o.wsize)),r>=o.wsize?(I.arraySet(o.window,e,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(r<(i=o.wsize-o.wnext)&&(i=r),I.arraySet(o.window,e,n-r,i,o.wnext),(r-=i)?(I.arraySet(o.window,e,n-r,r,0),o.wnext=r,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}e.inflateReset=s,e.inflateReset2=l,e.inflateResetKeep=a,e.inflateInit=function(t){return u(t,15)},e.inflateInit2=u,e.inflate=function(t,e){var n,r,i,o,a,s,l,u,c,p,h,f,d,y,g,_,m,v,b,w,x,C,E,P,O=0,T=new I.Buf8(4),S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return k;12===(n=t.state).mode&&(n.mode=13),a=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,u=n.hold,c=n.bits,p=s,h=l,C=j;t:for(;;)switch(n.mode){case F:if(0===n.wrap){n.mode=13;break}for(;c<16;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(2&n.wrap&&35615===u){T[n.check=0]=255&u,T[1]=u>>>8&255,n.check=L(n.check,T,2,0),c=u=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){t.msg="incorrect header check",n.mode=30;break}if(8!=(15&u)){t.msg="unknown compression method",n.mode=30;break}if(c-=4,x=8+(15&(u>>>=4)),0===n.wbits)n.wbits=x;else if(x>n.wbits){t.msg="invalid window size",n.mode=30;break}n.dmax=1<<x,t.adler=n.check=1,n.mode=512&u?10:12,c=u=0;break;case 2:for(;c<16;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(n.flags=u,8!=(255&n.flags)){t.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&(T[0]=255&u,T[1]=u>>>8&255,n.check=L(n.check,T,2,0)),c=u=0,n.mode=3;case 3:for(;c<32;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}n.head&&(n.head.time=u),512&n.flags&&(T[0]=255&u,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,n.check=L(n.check,T,4,0)),c=u=0,n.mode=4;case 4:for(;c<16;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&(T[0]=255&u,T[1]=u>>>8&255,n.check=L(n.check,T,2,0)),c=u=0,n.mode=5;case 5:if(1024&n.flags){for(;c<16;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&(T[0]=255&u,T[1]=u>>>8&255,n.check=L(n.check,T,2,0)),c=u=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(s<(f=n.length)&&(f=s),f&&(n.head&&(x=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),I.arraySet(n.head.extra,r,o,f,x)),512&n.flags&&(n.check=L(n.check,r,f,o)),s-=f,o+=f,n.length-=f),n.length))break t;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===s)break t;for(f=0;x=r[o+f++],n.head&&x&&n.length<65536&&(n.head.name+=String.fromCharCode(x)),x&&f<s;);if(512&n.flags&&(n.check=L(n.check,r,f,o)),s-=f,o+=f,x)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===s)break t;for(f=0;x=r[o+f++],n.head&&x&&n.length<65536&&(n.head.comment+=String.fromCharCode(x)),x&&f<s;);if(512&n.flags&&(n.check=L(n.check,r,f,o)),s-=f,o+=f,x)break t}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;c<16;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(u!==(65535&n.check)){t.msg="header crc mismatch",n.mode=30;break}c=u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=12;break;case 10:for(;c<32;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}t.adler=n.check=B(u),c=u=0,n.mode=11;case 11:if(0===n.havedict)return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,n.hold=u,n.bits=c,2;t.adler=n.check=1,n.mode=12;case 12:if(5===e||6===e)break t;case 13:if(n.last){u>>>=7&c,c-=7&c,n.mode=27;break}for(;c<3;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}switch(n.last=1&u,--c,3&(u>>>=1)){case 0:n.mode=14;break;case 1:if(!function(t){if(U){var e;for(G=new I.Buf32(512),z=new I.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(M(D,t.lens,0,288,G,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;M(R,t.lens,0,32,z,0,t.work,{bits:5}),U=!1}t.lencode=G,t.lenbits=9,t.distcode=z,t.distbits=5}(n),n.mode=20,6!==e)break;u>>>=2,c-=2;break t;case 2:n.mode=17;break;case 3:t.msg="invalid block type",n.mode=30}u>>>=2,c-=2;break;case 14:for(u>>>=7&c,c-=7&c;c<32;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){t.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&u,c=u=0,n.mode=15,6===e)break t;case 15:n.mode=16;case 16:if(f=n.length){if(s<f&&(f=s),l<f&&(f=l),0===f)break t;I.arraySet(i,r,o,f,a),s-=f,o+=f,l-=f,a+=f,n.length-=f;break}n.mode=12;break;case 17:for(;c<14;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(n.nlen=257+(31&u),u>>>=5,c-=5,n.ndist=1+(31&u),u>>>=5,c-=5,n.ncode=4+(15&u),u>>>=4,c-=4,286<n.nlen||30<n.ndist){t.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;c<3;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}n.lens[S[n.have++]]=7&u,u>>>=3,c-=3}for(;n.have<19;)n.lens[S[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},C=M(0,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,C){t.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;_=(O=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,m=65535&O,!((g=O>>>24)<=c);){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(m<16)u>>>=g,c-=g,n.lens[n.have++]=m;else{if(16===m){for(P=g+2;c<P;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(u>>>=g,c-=g,0===n.have){t.msg="invalid bit length repeat",n.mode=30;break}x=n.lens[n.have-1],f=3+(3&u),u>>>=2,c-=2}else if(17===m){for(P=g+3;c<P;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}c-=g,x=0,f=3+(7&(u>>>=g)),u>>>=3,c-=3}else{for(P=g+7;c<P;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}c-=g,x=0,f=11+(127&(u>>>=g)),u>>>=7,c-=7}if(n.have+f>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=30;break}for(;f--;)n.lens[n.have++]=x}}if(30===n.mode)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,E={bits:n.lenbits},C=M(D,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,C){t.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},C=M(R,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,C){t.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===e)break t;case 20:n.mode=21;case 21:if(6<=s&&258<=l){t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,n.hold=u,n.bits=c,N(t,h),a=t.next_out,i=t.output,l=t.avail_out,o=t.next_in,r=t.input,s=t.avail_in,u=n.hold,c=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;_=(O=n.lencode[u&(1<<n.lenbits)-1])>>>16&255,m=65535&O,!((g=O>>>24)<=c);){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(_&&0==(240&_)){for(v=g,b=_,w=m;_=(O=n.lencode[w+((u&(1<<v+b)-1)>>v)])>>>16&255,m=65535&O,!(v+(g=O>>>24)<=c);){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}u>>>=v,c-=v,n.back+=v}if(u>>>=g,c-=g,n.back+=g,n.length=m,0===_){n.mode=26;break}if(32&_){n.back=-1,n.mode=12;break}if(64&_){t.msg="invalid literal/length code",n.mode=30;break}n.extra=15&_,n.mode=22;case 22:if(n.extra){for(P=n.extra;c<P;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;_=(O=n.distcode[u&(1<<n.distbits)-1])>>>16&255,m=65535&O,!((g=O>>>24)<=c);){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(0==(240&_)){for(v=g,b=_,w=m;_=(O=n.distcode[w+((u&(1<<v+b)-1)>>v)])>>>16&255,m=65535&O,!(v+(g=O>>>24)<=c);){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}u>>>=v,c-=v,n.back+=v}if(u>>>=g,c-=g,n.back+=g,64&_){t.msg="invalid distance code",n.mode=30;break}n.offset=m,n.extra=15&_,n.mode=24;case 24:if(n.extra){for(P=n.extra;c<P;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,c-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===l)break t;if(f=h-l,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=30;break}d=f>n.wnext?(f-=n.wnext,n.wsize-f):n.wnext-f,f>n.length&&(f=n.length),y=n.window}else y=i,d=a-n.offset,f=n.length;for(l<f&&(f=l),l-=f,n.length-=f;i[a++]=y[d++],--f;);0===n.length&&(n.mode=21);break;case 26:if(0===l)break t;i[a++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;c<32;){if(0===s)break t;s--,u|=r[o++]<<c,c+=8}if(h-=l,t.total_out+=h,n.total+=h,h&&(t.adler=n.check=(n.flags?L:A)(n.check,i,h,a-h)),h=l,(n.flags?u:B(u))!==n.check){t.msg="incorrect data check",n.mode=30;break}c=u=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;c<32;){if(0===s)break t;s--,u+=r[o++]<<c,c+=8}if(u!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=30;break}c=u=0}n.mode=29;case 29:C=1;break t;case 30:C=-3;break t;case 31:return-4;case 32:default:return k}return t.next_out=a,t.avail_out=l,t.next_in=o,t.avail_in=s,n.hold=u,n.bits=c,(n.wsize||h!==t.avail_out&&n.mode<30&&(n.mode<27||4!==e))&&V(t,t.output,t.next_out,h-t.avail_out)?(n.mode=31,-4):(p-=t.avail_in,h-=t.avail_out,t.total_in+=p,t.total_out+=h,n.total+=h,n.wrap&&h&&(t.adler=n.check=(n.flags?L:A)(n.check,i,h,t.next_out-h)),t.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==p&&0===h||4===e)&&C===j&&(C=-5),C)},e.inflateEnd=function(t){if(!t||!t.state)return k;var e=t.state;return e.window&&(e.window=null),t.state=null,j},e.inflateGetHeader=function(t,e){var n;return!t||!t.state||0==(2&(n=t.state).wrap)?k:((n.head=e).done=!1,j)},e.inflateSetDictionary=function(t,e){var n,r=e.length;return!t||!t.state||0!==(n=t.state).wrap&&11!==n.mode?k:11===n.mode&&A(1,e,r,0)!==n.check?-3:V(t,e,r,r)?(n.mode=31,-4):(n.havedict=1,j)},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function(t,e){var n,r,i,o,a,s,l=t.state,u=t.next_in,c=t.input,p=u+(t.avail_in-5),h=t.next_out,f=t.output,d=h-(e-t.avail_out),y=h+(t.avail_out-257),g=l.dmax,_=l.wsize,m=l.whave,v=l.wnext,b=l.window,w=l.hold,x=l.bits,C=l.lencode,E=l.distcode,P=(1<<l.lenbits)-1,O=(1<<l.distbits)-1;t:do{x<15&&(w+=c[u++]<<x,x+=8,w+=c[u++]<<x,x+=8),n=C[w&P];e:for(;;){if(w>>>=r=n>>>24,x-=r,0===(r=n>>>16&255))f[h++]=65535&n;else{if(!(16&r)){if(0==(64&r)){n=C[(65535&n)+(w&(1<<r)-1)];continue e}if(32&r){l.mode=12;break t}t.msg="invalid literal/length code",l.mode=30;break t}i=65535&n,(r&=15)&&(x<r&&(w+=c[u++]<<x,x+=8),i+=w&(1<<r)-1,w>>>=r,x-=r),x<15&&(w+=c[u++]<<x,x+=8,w+=c[u++]<<x,x+=8),n=E[w&O];n:for(;;){if(w>>>=r=n>>>24,x-=r,!(16&(r=n>>>16&255))){if(0==(64&r)){n=E[(65535&n)+(w&(1<<r)-1)];continue n}t.msg="invalid distance code",l.mode=30;break t}if(o=65535&n,x<(r&=15)&&(w+=c[u++]<<x,(x+=8)<r&&(w+=c[u++]<<x,x+=8)),g<(o+=w&(1<<r)-1)){t.msg="invalid distance too far back",l.mode=30;break t}if(w>>>=r,x-=r,(r=h-d)<o){if(m<(r=o-r)&&l.sane){t.msg="invalid distance too far back",l.mode=30;break t}if(s=b,(a=0)===v){if(a+=_-r,r<i){for(i-=r;f[h++]=b[a++],--r;);a=h-o,s=f}}else if(v<r){if(a+=_+v-r,(r-=v)<i){for(i-=r;f[h++]=b[a++],--r;);if(a=0,v<i){for(i-=r=v;f[h++]=b[a++],--r;);a=h-o,s=f}}}else if(a+=v-r,r<i){for(i-=r;f[h++]=b[a++],--r;);a=h-o,s=f}for(;2<i;)f[h++]=s[a++],f[h++]=s[a++],f[h++]=s[a++],i-=3;i&&(f[h++]=s[a++],1<i&&(f[h++]=s[a++]))}else{for(a=h-o;f[h++]=f[a++],f[h++]=f[a++],f[h++]=f[a++],2<(i-=3););i&&(f[h++]=f[a++],1<i&&(f[h++]=f[a++]))}break}}break}}while(u<p&&h<y);u-=i=x>>3,w&=(1<<(x-=i<<3))-1,t.next_in=u,t.next_out=h,t.avail_in=u<p?p-u+5:5-(u-p),t.avail_out=h<y?y-h+257:257-(h-y),l.hold=w,l.bits=x}},function(t,e,n){"use strict";var D=n(103),R=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],j=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],k=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],F=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,r,i,o,a,s){for(var l,u,c,p,h,f,d,y,g,_=s.bits,m=0,v=0,b=0,w=0,x=0,C=0,E=0,P=0,O=0,T=0,S=null,I=0,A=new D.Buf16(16),L=new D.Buf16(16),N=null,M=0,m=0;m<=15;m++)A[m]=0;for(v=0;v<r;v++)A[e[n+v]]++;for(x=_,w=15;1<=w&&0===A[w];w--);if(w<x&&(x=w),0===w)return i[o++]=20971520,i[o++]=20971520,s.bits=1,0;for(b=1;b<w&&0===A[b];b++);for(x<b&&(x=b),m=P=1;m<=15;m++)if(P<<=1,(P-=A[m])<0)return-1;if(0<P&&(0===t||1!==w))return-1;for(L[1]=0,m=1;m<15;m++)L[m+1]=L[m]+A[m];for(v=0;v<r;v++)0!==e[n+v]&&(a[L[e[n+v]]++]=v);if(f=0===t?(S=N=a,19):1===t?(S=R,I-=257,N=j,M-=257,256):(S=k,N=F,-1),m=b,h=o,E=v=T=0,c=-1,p=(O=1<<(C=x))-1,1===t&&852<O||2===t&&592<O)return 1;for(;;){for(d=m-E,g=a[v]<f?(y=0,a[v]):a[v]>f?(y=N[M+a[v]],S[I+a[v]]):(y=96,0),l=1<<m-E,b=u=1<<C;i[h+(T>>E)+(u-=l)]=d<<24|y<<16|g|0,0!==u;);for(l=1<<m-1;T&l;)l>>=1;if(0!==l?(T&=l-1,T+=l):T=0,v++,0==--A[m]){if(m===w)break;m=e[n+a[v]]}if(x<m&&(T&p)!==c){for(0===E&&(E=x),h+=b,P=1<<(C=m-E);C+E<w&&!((P-=A[C+E])<=0);)C++,P<<=1;if(O+=1<<C,1===t&&852<O||2===t&&592<O)return 1;i[c=T&p]=x<<24|C<<16|h-o|0}}return 0!==T&&(i[h+T]=m-E<<24|64<<16|0),s.bits=x,0}},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c=n(8),r=n(22),a=n(16),s=n(12),i=(Object.defineProperty(o.prototype,"position",{get:function(){var t=this._viewer.scene.mapProjection,e=this.value.position.clone();return t instanceof c.WebMercatorProjection?(e=t.unproject(e),r.default.cartographicToDegrees(e)):r.default.cartesianToDegrees(e)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pitch",{get:function(){return c.Math.toDegrees(this.value.pitch)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"roll",{get:function(){return c.Math.toDegrees(this.value.roll)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"heading",{get:function(){return c.Math.toDegrees(this.value.heading)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pixelDistance",{get:function(){return this._updatePixelDistance()},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"changed",{get:function(){return this._changed},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"updated",{get:function(){return this._updated},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"minimumZoomDistance",{get:function(){return this._minimumZoomDistance},set:function(t){this._minimumZoomDistance=t,this._viewer.scene.screenSpaceCameraController.minimumZoomDistance=t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"maximumZoomDistance",{get:function(){return this._maximumZoomDistance},set:function(t){this._maximumZoomDistance=t,this._viewer.scene.screenSpaceCameraController.maximumZoomDistance=t},enumerable:!1,configurable:!0}),o.prototype._updateCameraChanged=function(){var e=this;this.value.changed.addEventListener(function(t){e._changed.raiseEvent({destination:e.position,orientation:[e.heading,e.pitch,e.roll]})})},o.prototype._updateCamera=function(){var e=this;this._viewer.scene.postRender.addEventListener(function(){var t=e._updatePixelDistance();e._updated.raiseEvent({pixelDistance:t,destination:e.position,orientation:[e.heading,e.pitch,e.roll]})})},o.prototype._showByDistance=function(){var o=this;this.value.changed.addEventListener(function(){var i=o.position,i=r.default.degreesToCartesian(i);o._sceneTree.findNodesByConditions("${showByDistance} !== undefined").forEach(function(t){switch(t.value.class){case a.default.PRIMITIVE:if(!t.value)return;if(t.value.value instanceof c.Cesium3DTileset&&!t.value.value.ready)return;var e=t.value.position;if(!e||!s.isArray(e))return;if(!t.value.show)return;var n=c.Cartesian3.fromDegrees(e[0],e[1],e[2]),r=o._distanceInRange(i,n,t.value.showByDistance[0],t.value.showByDistance[1]);t.value.value.show=!!r}})})},o.prototype._distanceInRange=function(t,e,n,r){var i=c.Cartesian3.distance(t,e);return n<i&&i<r},o.prototype._updatePixelDistance=function(){var t=this._viewer.scene,e=t.canvas.clientWidth,n=t.canvas.clientHeight,r=t.camera.getPickRay(new c.Cartesian2(e/2|0,n-1)),i=t.camera.getPickRay(new c.Cartesian2(1+e/2|0,n-1)),o=t.globe,a=o.pick(r,t),s=o.pick(i,t);if(!c.defined(a)||!c.defined(s))return 0;var l=o.ellipsoid.cartesianToCartographic(a),u=o.ellipsoid.cartesianToCartographic(s);return this._geodesic.setEndPoints(l,u),this._geodesic.surfaceDistance},o);function o(t,e){this._viewer=t,this.value=t.camera,this._sceneTree=e,this._changed=new c.Event,this._updated=new c.Event,this._geodesic=new c.EllipsoidGeodesic,this._showByDistance(),this._updateCameraChanged(),this._updateCamera()}e.default=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(104),s=(o=a.default,i(l,o),l);function l(t,e){var n=o.call(this,e)||this;return n._earth=t,n._viewer=n._earth.getViewer(),n}e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(173),i=n(91),o=n(177),a=n(106),s=n(107),l=n(178),u=n(179),c=n(180),p=n(181),h=n(108),f=n(109),d=n(132),y=n(303),g=n(133),_=n(184),m=n(185),v=n(136),b=n(187),w=n(137),x=n(188),C=n(189),E=n(190),P=n(191),O=n(138),T=n(110),S=n(192),I=n(139),A=n(193),L=n(194),N=n(195),M=n(196),D=n(197),R=n(198),j=n(199),k=n(200),F=n(201),B=n(203),G=n(204),z=n(205),U=n(206),V=n(207),H=n(208),q=n(209),W=n(210),Y=n(211),X=n(212),J=n(213),Z=n(214),K=n(215),$=n(141),Q=n(216),tt={ImageryLayer:r.default,Billboard:i.default,ArtificialModelTileset:o.default,Point:a.default,Polyline:s.default,PolylineGlow:l.default,PolylineArrow:u.default,PolylineDash:c.default,PolylineOutline:p.default,Polygon:h.default,Model:f.default,GeoJson:d.default,FlyLine:y.default,ODLine:g.default,RealSceneModelTileset:_.default,FeatureModelTileset:m.default,CircleSpread:v.default,DynamicWaterSurface:b.default,PointPrimitiveCollection:w.default,PolylinePrimitiveCollection:x.default,BillboardPrimitiveCollection:C.default,LabelPrimitiveCollection:E.default,ModelPrimitiveCollection:P.default,DynamicPoint:O.default,Label:T.default,Wall:S.default,HeatMap:I.default,Box:A.default,Corridor:L.default,Cylinder:N.default,Ellipse:M.default,Ellipsoid:D.default,Plane:R.default,PolylineVolume:j.default,Rectangle:k.default,Pin:F.default,StraightArrow:B.default,AttackArrow:G.default,PincerArrow:z.default,DynamicWall:U.default,DynamicEllipsoid:V.default,RadarScan:H.default,DynamicEllipse:q.default,DynamicTetrahedron:W.default,DynamicRadar:Y.default,DynamicCylinderParticle:X.default,DynamicFlickerCylinder:J.default,DynamicSpreadCylinder:Z.default,DynamicRotateCylinder:K.default,WavePoint:$.default,DivPoint:Q.default};e.default=tt},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var v,o=n(129),b=n(174),a=n(8),s=n(291),l=n(296),u=n(301),w=n(175),c=(v=o.default,i(p,v),p.prototype._createUrlTemplateImageryProvider=function(t){return new a.UrlTemplateImageryProvider(t)},p.prototype._createWebMapTileServiceImageryProvider=function(t){return new a.WebMapTileServiceImageryProvider(t)},p.prototype._createArcGisMapServerImageryProvider=function(t){return new a.ArcGisMapServerImageryProvider(t)},p.prototype._createMapboxVectorImageryProvider=function(t){return new s.default(t)},p.prototype._createBaiduMapImageryProvider=function(t){return new l.default(t)},p.prototype._createAmapMapImageryProvider=function(t){return new u.default(t)},p.prototype._getProjectionType=function(t){return t===w.default.Geographic?new a.GeographicTilingScheme:new a.WebMercatorTilingScheme},p);function p(t){var e=v.call(this)||this;try{var n=t||{},r=n.type,i=n.url,o=n.styleUrl,a=n.source,s=n.layer||"layer",l=n.format||"image/jpeg",u=n.style||"",c=n.tileMatrixSetID||"MapsCompatible",p=n.maximumLevel||18,h=n.minimumLevel||0,f=n.transform,d=e._getProjectionType(n.projectionType),y=n.projectionType===w.default.Geographic?["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22"]:void 0,g=n.tileMatrixLabels||y;if(!r)throw"Imagery options imagery type is not defined.";if(!i)throw"Imagery options url is not defined.";var _={type:r,url:i,styleUrl:o,source:a,minimumLevel:h,layer:s,style:u,format:l,tileMatrixSetID:c,maximumLevel:p,transform:f,projectionType:d};switch(v.prototype.fromJSON.call(e,_),r){case b.default.URL_TEMPLATE:var m={url:i,tilingScheme:d,minimumLevel:h,maximumLevel:p};e.value=e._createUrlTemplateImageryProvider(m);break;case b.default.WEB_MAP_TILE_SERVICE:m={url:i,layer:s,style:u,format:l,tileMatrixSetID:c,minimumLevel:h,maximumLevel:p,tileMatrixLabels:g,tilingScheme:d};e.value=e._createWebMapTileServiceImageryProvider(m);break;case b.default.ARCGIS_MAP_SERVER:m={url:i,minimumLevel:h,maximumLevel:p,tilingScheme:d};e.value=e._createArcGisMapServerImageryProvider(m);break;case b.default.MAPBOX_VECTOR_TILE:m={type:r,url:i,styleUrl:o,source:a,maximumLevel:p,tilingScheme:d};e.value=e._createMapboxVectorImageryProvider(m);break;case b.default.BAIDU_MAP_SERVICE:m={url:i,minimumLevel:h,maximumLevel:p};e.value=e._createBaiduMapImageryProvider(m);break;case b.default.AMAP_MAP_SERVICE:m={url:i,minimumLevel:h,maximumLevel:p};e.value=e._createAmapMapImageryProvider(m)}}catch(t){}return e}e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(4),s=n(97),r=n(436),d=n(242),y=n(292),g=n(242),l=n(437),_=n(294),u=n(8),c=n(105),i=new r.default,o=(p.prototype.addContext=function(t,e){this.contexts.push({declutterReplays:t,context:e})},p.prototype.render=function(){this.declutterReplays;this.contexts.forEach(function(t){var e=t.declutterReplays,n=t.context;d.replayDeclutter(e,n,0,!0)})},p.prototype.getRbush=function(){return this.rbush},p.prototype.getDeclutterReplays=function(){return this.declutterReplays},p);function p(){this.rbush=_.default(9,void 0),this.declutterReplays={},this.contexts=[]}var h=(f.prototype.getTileCredits=function(t,e,n){},f.prototype.trimTile=function(){this._tileQueue.count>this._cacheSize&&this._trimTiles(this._tileQueue,this._cacheSize/2)},f.prototype.markTileRendered=function(t){this._tileQueue.markTileRendered(t)},f.prototype.requestImage=function(t,e,n,r,i){if(this._ready&&!(n>this._maximumLevel)){var o=this._findTileInQueue(t,e,n,this._tileQueue);return null!=o?o:this.requestTile(t,e,n,r,i,this)}},f.prototype.pickFeatures=function(t,e,n,r,i){},f.prototype.reload=function(){},f.prototype.beginFrame=function(t){t[this._name]={tileCount:0,declutter:new o,getDeclutter:function(){return this.declutter},addRef:function(){this.tileCount++},enouthTile:function(t){return this.tileCount>=t}}},f.prototype.endFrame=function(t){},f.prototype.drawContext=function(t,e,n,r,i){for(var o=_.default(9,void 0),a=t.getContext("2d"),s=new g.default(0,[0,0,4096,4096],8,window.devicePixelRatio,!0,o,100),l=y.getSquaredTolerance(8,window.devicePixelRatio),u=0;u<e.length;u++){var c=e[u],p=this._funStyle(e[u],i);if(p&&p.length)for(var h=0;h<p.length;h++)y.renderFeature(s,c,p[h],l)}s.finish();var f={};s.replay(a,this._transform,0,{},!0,this._replays,f),d.replayDeclutter(f,a,0,!0),t.xMvt=n,t.yMvt=r,t.zMvt=i,s=null},f.prototype.takeCanvas=function(t){if(this._canvases[t])return this._canvases[t];var e=document.createElement("canvas");return e.width=512,e.height=512,this._canvases[t]={canvas:e,already:!1,count:0},this._canvases[t]},f.prototype.removeCanvas=function(t){this._canvases[t]&&delete this._canvases[t]},f.prototype.fetchFeatures=function(t,n){new u.Resource.createIfNeeded(t).fetchArrayBuffer().then(function(t){i.readProjection(t);var e=i.readFeatures(t)||[];n(e)})},f.prototype.requestTile=function(t,e,i,n,r){var o,a,s,l,u=this;return o=t,a=e,s="{z}_{x}_{y}".replace("{z}",i).replace("{x}",o).replace("{y}",a),l=u.takeCanvas(s),new Promise(function(n,e){try{var r=l.canvas,t=u._url.replace("{x}",o).replace("{y}",a).replace("{z}",i);u.fetchFeatures(t,function(t){var e=[];if(t.forEach(function(t){e.push(t)}),0<e.length)return u.drawContext(r,e,o,a,i),u.trimTile(),u.markTileRendered(l.canvas),u.removeCanvas(s),n(l.canvas)})}catch(t){return e(t)}})},Object.defineProperty(f.prototype,"proxy",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"tileWidth",{get:function(){return this._tileWidth},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"tileHeight",{get:function(){return this._tileHeight},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"maximumLevel",{get:function(){return this._maximumLevel},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"minimumLevel",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"tilingScheme",{get:function(){return this._tilingScheme},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"rectangle",{get:function(){return this._tilingScheme.rectangle},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"tileDiscardPolicy",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"errorEvent",{get:function(){return this._errorEvent},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"ready",{get:function(){return!!this._ready},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"readyPromise",{get:function(){return this._readyPromise},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"credit",{get:function(){},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"hasAlphaChannel",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"cacheSize",{get:function(){return this._cacheSize},set:function(t){this._cacheSize!==t&&(this._cacheSize=t)},enumerable:!1,configurable:!0}),f.prototype._findTileInQueue=function(t,e,n,r){for(var i=r.head;null!=i&&(i.xMvt!=t||i.yMvt!=e||i.zMvt!=n);)i=i.replacementNext;return i},f.prototype._remove=function(t,e){var n=e.replacementPrevious,r=e.replacementNext;e===t._lastBeforeStartOfFrame&&(t._lastBeforeStartOfFrame=r),e===t.head?t.head=r:n.replacementNext=r,e===t.tail?t.tail=n:r.replacementPrevious=n,e.replacementPrevious=void 0,e.replacementNext=void 0,--t.count},f.prototype._trimTiles=function(t,e){for(var n=t.tail;t.count>e&&n;){var r=n.replacementPrevious;this._remove(t,n),delete t.tail,n=null,n=r}},f.prototype._createDefaultResolution=function(){for(var t=[],e=0;e<20;e++)t.push(.703125/Math.pow(2,e));return t},f);function f(t){var e,n,r,i=this,o=t||{};if(this._url=o.url,this._styleUrl=o.styleUrl,this._name=o.name||c.default(),this._sources=o.source,this._canvases={},this._tileWidth=o.tileWidth||512,this._tileHeight=o.tileHeight||512,this._maximumLevel=o.maximumLevel||18,this._projection=o.projection||"3857",this._key=o.key||"",!this._url)throw new u.DeveloperError("url为必选参数.");if(!this._styleUrl)throw new u.DeveloperError("styleUrl为必选参数.");if(!this._sources)throw new u.DeveloperError("sources为必选参数.");this._resolutions=o.resolutions||this._createDefaultResolution(),this._pixelRatio=1,this._transform=[.125,0,0,.125,0,0],this._replays=["Default","Image","Polygon","LineString","Text","Circle"],this._tileQueue=new s.default,this._cacheSize=o.cacheSize||1e3,this._errorEvent=new u.Event,this._readyPromise=a.default.defer,-1<this._projection.indexOf("3857")?(this._tilingScheme=new u.WebMercatorTilingScheme,e=this._tilingScheme._rectangleSouthwestInMeters,n=this._tilingScheme._rectangleNortheastInMeters,e.x,e.y,n.x,n.y):(this._tilingScheme=new u.GeographicTilingScheme,(r=this._tilingScheme.rectangle).west,r.south,r.east,r.north),m().then(function(){u.Resource.fetch(i._styleUrl).then(function(t){var e=JSON.parse(t),n=l.default(e,i._sources,i._resolutions);i._funStyle=n,i._ready=!0,i._readyPromise().resolve(!0)})})}var m=function(){return new Promise(function(e,t){var n=new XMLHttpRequest;n.onload=function(t){window.v8=JSON.parse(this.responseText),e(!0)},n.open("get",CESIUM_BASE_URL+"Assets/json/v8.json",!0),n.send()})};e.default=h},,function(t,e,n){(function(t){var A=n(9),e=function(a){"use strict";var p,t=Object.prototype,c=t.hasOwnProperty,e="function"==typeof Symbol?Symbol:{},i=e.iterator||"@@iterator",n=e.asyncIterator||"@@asyncIterator",r=e.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var o,a,s,l,i=e&&e.prototype instanceof m?e:m,u=Object.create(i.prototype),c=new T(r||[]);return u._invoke=(o=t,a=n,s=c,l=f,function(t,e){if(l===y)throw new Error("Generator is already running");if(l===g){if("throw"===t)throw e;return I()}for(s.method=t,s.arg=e;;){var n=s.delegate;if(n){var r=function t(e,n){var r=e.iterator[n.method];if(r===p){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=p,t(e,n),"throw"===n.method))return _;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=h(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,_;var o=i.arg;if(!o)return n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,_;{if(!o.done)return o;n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=p)}n.delegate=null;return _}(n,s);if(r){if(r===_)continue;return r}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if(l===f)throw l=g,s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);l=y;var i=h(o,a,s);if("normal"===i.type){if(l=s.done?g:d,i.arg===_)continue;return{value:i.arg,done:s.done}}"throw"===i.type&&(l=g,s.method="throw",s.arg=i.arg)}}),u}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}a.wrap=s;var f="suspendedStart",d="suspendedYield",y="executing",g="completed",_={};function m(){}function l(){}function u(){}var v={};v[i]=function(){return this};var b=Object.getPrototypeOf,w=b&&b(b(S([])));w&&w!==t&&c.call(w,i)&&(v=w);var x=u.prototype=m.prototype=Object.create(v);function C(t){["next","throw","return"].forEach(function(e){o(t,e,function(t){return this._invoke(e,t)})})}function E(l,u){var e;this._invoke=function(n,r){function t(){return new u(function(t,e){!function e(t,n,r,i){var o=h(l[t],l,n);if("throw"!==o.type){var a=o.arg,s=a.value;return s&&"object"===A(s)&&c.call(s,"__await")?u.resolve(s.__await).then(function(t){e("next",t,r,i)},function(t){e("throw",t,r,i)}):u.resolve(s).then(function(t){a.value=t,r(a)},function(t){return e("throw",t,r,i)})}i(o.arg)}(n,r,t,e)})}return e=e?e.then(t,t):t()}}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function S(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,r=function t(){for(;++n<e.length;)if(c.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=p,t.done=!0,t};return r.next=r}}return{next:I}}function I(){return{value:p,done:!0}}return((l.prototype=x.constructor=u).constructor=l).displayName=o(u,r,"GeneratorFunction"),a.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},a.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,o(t,r,"GeneratorFunction")),t.prototype=Object.create(x),t},a.awrap=function(t){return{__await:t}},C(E.prototype),E.prototype[n]=function(){return this},a.AsyncIterator=E,a.async=function(t,e,n,r,i){void 0===i&&(i=Promise);var o=new E(s(t,e,n,r),i);return a.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},C(x),o(x,r,"Generator"),x[i]=function(){return this},x.toString=function(){return"[object Generator]"},a.keys=function(n){var r=[];for(var t in n)r.push(t);return r.reverse(),function t(){for(;r.length;){var e=r.pop();if(e in n)return t.value=e,t.done=!1,t}return t.done=!0,t}},a.values=S,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=p,this.done=!1,this.delegate=null,this.method="next",this.arg=p,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&c.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=p)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var r=this;function t(t,e){return o.type="throw",o.arg=n,r.next=t,e&&(r.method="next",r.arg=p),!!e}for(var e=this.tryEntries.length-1;0<=e;--e){var i=this.tryEntries[e],o=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var a=c.call(i,"catchLoc"),s=c.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;0<=n;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&c.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),_},finish:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),_}},catch:function(t){for(var e=this.tryEntries.length-1;0<=e;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r,i=n.completion;return"throw"===i.type&&(r=i.arg,O(n)),r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:S(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=p),_}},a}("object"===A(t)?t.exports:{});try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}).call(this,n(160)(t))},,function(t,e,n){var r,i,o,a=n(9);o=function(){"use strict";function g(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function o(t,e){return t<e?-1:e<t?1:0}return function(t,e,n,r,i){!function t(e,n,r,i,o){for(;r<i;){var a,s,l,u,c,p,h;600<i-r&&(a=i-r+1,s=n-r+1,l=Math.log(a),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(a-u)/a)*(s-a/2<0?-1:1),p=Math.max(r,Math.floor(n-s*u/a+c)),h=Math.min(i,Math.floor(n+(a-s)*u/a+c)),t(e,n,p,h,o));var f=e[n],d=r,y=i;for(g(e,r,n),0<o(e[i],f)&&g(e,r,i);d<y;){for(g(e,d,y),d++,y--;o(e[d],f)<0;)d++;for(;0<o(e[y],f);)y--}0===o(e[r],f)?g(e,r,y):g(e,++y,i),y<=n&&(r=y+1),n<=y&&(i=y-1)}}(t,e,n||0,r||t.length-1,i||o)}},"object"===a(e)&&void 0!==t?t.exports=o():void 0===(i="function"==typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i)},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,f=n(8),a=n(297),s=(o=f.UrlTemplateImageryProvider,i(l,o),l.prototype.requestImage=function(t,e,n,r){var p=this;if(!this.ready)throw new DeveloperError("requestImage must not be called before the imagery provider is ready.");var h=/{[^}]+}/g;return f.ImageryProvider.loadImage(this,function(n,r,i,o,t){var e={x:r,y:i};p._tilingScheme._tileFromNormal(e,o),r=e.x,i=e.y;var a=n._resource,s=a.getUrlComponent(!0),l=n._tags,u={},c=s.match(h);return f.defined(c)&&c.forEach(function(t){var e=t.substring(1,t.length-1);f.defined(l[e])&&(u[e]=l[e](n,r,i,o))}),a.getDerivedResource({request:t,templateValues:u})}(this,t,e,n,r))},l);function l(t){var e=o.call(this,t)||this;return e._tilingScheme=new a.default,e}e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(8),o=n(298),c=n(22),a=n(299),r=(i.prototype.getNumberOfXTilesAtLevel=function(t){return this._getNumberOfXTilesAtLevel(t)||0},i.prototype.getNumberOfYTilesAtLevel=function(t){return this._getNumberOfYTilesAtLevel(t)||0},i.prototype.positionToTileXY=function(t,e,n){var r=c.default.wgs84ToBd09(u.Math.toDegrees(t.longitude),u.Math.toDegrees(t.latitude)),i={lng:r[0],lat:r[1]},o=this._transform.lnglatToTile(i.lng,i.lat,e);if(n){n.x=o.tileX,n.y=o.tileY;var a=n;return this._tileToNormal(a,e),a}var s=new u.Cartesian2(o.tileX,o.tileY);return this._tileToNormal(s,e),s},i.prototype.rectangleToNativeRectangle=function(t,e){var n=c.default.wgs84ToBd09(u.Math.toDegrees(t.west),u.Math.toDegrees(t.south)),r=c.default.wgs84ToBd09(u.Math.toDegrees(t.east),u.Math.toDegrees(t.north)),i=this._transform.lnglatToPoint(n[0]*Math.PI/180,n[1]*Math.PI/180),o=this._transform.lnglatToPoint(r[0]*Math.PI/180,r[1]*Math.PI/180);return e?(e.west=i.pointX,e.south=i.pointY,e.east=o.pointX,e.north=o.pointY,e):new u.Rectangle(i.pointX,i.pointY,o.pointX,o.pointY)},i.prototype.tileXYToNativeRectangle=function(t,e,n,r){var i=this.tileXYToRectangle(t,e,n);i.west/=Math.PI/180,i.south/=Math.PI/180,i.east/=Math.PI/180,i.north/=Math.PI/180;var o=this._transform.lnglatToPoint(i.west,i.south),a=this._transform.lnglatToPoint(i.east,i.north);return r?(r.west=o.pointX,r.south=o.pointY,r.east=a.pointX,r.north=a.pointY,r):new u.Rectangle(o.pointX,o.pointY,a.pointX,a.pointY)},i.prototype.tileXYToRectangle=function(t,e,n,r){var i={x:t,y:e};this._tileFromNormal(i,n);var o=this._transform.pixelToLnglat(0,0,i.x,i.y,n),a=this._transform.pixelToLnglat(0,0,i.x+1,i.y+1,n);0==n&&(o.lng=-180,o.lat=-90,a.lng=180,a.lat=90),o.lng=this._convertLng(o.lng),o.lat=this._convertLat(o.lat),a.lng=this._convertLng(a.lng),a.lat=this._convertLat(a.lat);var s=c.default.bd09ToWgs84(u.Math.toDegrees(o.lng),u.Math.toDegrees(o.lat)),l=c.default.bd09ToWgs84(u.Math.toDegrees(a.lng),u.Math.toDegrees(a.lat));return o.lng=u.Math.toRadians(s[0]),o.lat=u.Math.toRadians(s[1]),a.lng=u.Math.toRadians(l[0]),a.lat=u.Math.toRadians(l[1]),r?(r.west=o.lng,r.south=o.lat,r.east=a.lng,r.north=a.lat,r):new u.Rectangle(o.lng,o.lat,a.lng,a.lat)},Object.defineProperty(i.prototype,"ellipsoid",{get:function(){return this._ellipsoid},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"rectangle",{get:function(){return this._rectangle},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"projection",{get:function(){return this._projection},enumerable:!1,configurable:!0}),i.prototype._tileTransform=function(t,e,n){var r=2*Math.PI*6378137/256/Math.pow(2,18),i=2*Math.PI*6340752.3142/256/Math.pow(2,18),o={x:t-Math.pow(2,n-1),y:0-e+Math.pow(2,n-1)},a=o.x*r,s=o.y*i,l=(o={x:t+1-Math.pow(2,n-1),y:0-e-1+Math.pow(2,n-1)}).x*r,u=o.y*i;return[{x:parseFloat(a.toString()),y:parseFloat(s.toString())},{x:parseFloat(l.toString()),y:parseFloat(u.toString())}]},i.prototype._getNumberOfXTilesAtLevel=function(t){var e;return 0<t?(e=20037508.34/Math.pow(2,18-t)/256,2*Math.ceil(e)):1},i.prototype._getNumberOfYTilesAtLevel=function(t){var e;return 0<t?(e=20037508.34/Math.pow(2,18-t)/256,2*Math.ceil(e)):1},i.prototype._tileToNormal=function(t,e){var n;0!==e&&null!=t.x&&(n=this._getNumberOfXTilesAtLevel(e),t.x=t.x+n/2,t.y=0-t.y+n/2-1)},i.prototype._tileFromNormal=function(t,e){var n;0!==e&&void 0!==t.x&&(n=this._getNumberOfXTilesAtLevel(e),t.x=t.x-n/2,t.y=0-t.y+n/2-1)},i);function i(t){this._convertLng=function(t){return e=t,null!=(n=-(r=180))&&(e=Math.max(e,n)),null!=r&&(e=Math.min(e,r)),e*Math.PI/180;var e,n,r},this._convertLat=function(t){return e=t,null!=(n=-(r=90))&&(e=Math.max(e,n)),null!=r&&(e=Math.min(e,r)),e*Math.PI/180;var e,n,r};var e,n=t||{};this._ellipsoid=n.ellipsoid||u.Ellipsoid.WGS84,this._numberOfLevelZeroTilesX=n.numberOfLevelZeroTilesX||1,this._numberOfLevelZeroTilesY=n._numberOfLevelZeroTilesY||1,this._transform=new a.default,this._projection=new o.default(null,this._transform),n.rectangleSouthwestInMeters&&n.rectangleNortheastInMeters?(this._rectangleSouthwestInMeters=n.rectangleSouthwestInMeters,this._rectangleNortheastInMeters=n.rectangleNortheastInMeters):(e=this._ellipsoid.maximumRadius*Math.PI,this._rectangleSouthwestInMeters=new u.Cartesian2(-e,-e),this._rectangleNortheastInMeters=new u.Cartesian2(e,e));var r=this._projection.unproject(this._rectangleSouthwestInMeters),i=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new u.Rectangle(r.longitude,r.latitude,i.longitude,i.latitude)}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(8),s=n(22),r=(i.prototype.project=function(t,e){var n=s.default.wgs84ToBd09(a.Math.toDegrees(t.longitude),a.Math.toDegrees(t.latitude)),r=this._transform.lnglattoPoint(n[0],n[1]);return a.defined(e)?(e.x=r.pointX,e.y=r.pointY,e.z=t.height,e):new a.Cartesian3(r.pointX,r.pointY,t.height)},i.prototype.unproject=function(t,e){if(!a.defined(t))throw new a.DeveloperError("cartesian is required");var n=this._transform.pointToLnglat(t.x,t.y),r=s.default.bd09ToWgs84(n.lng,n.lat),i=a.Math.toRadians(r[0]),o=a.Math.toRadians(r[1]);return a.defined(e)?(e.longitude=i,e.latitude=o,e.height=t.z,e):new a.Cartographic(i,o,t.z)},i);function i(t,e){a.WebMercatorProjection.call(this,t),this._transform=e}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(300),r=(o.prototype.getResolution=function(t,e){return Math.pow(2,18-e)*Math.cos(t)},o.prototype.lnglatToPoint=function(t,e){var n=new i.default.Point(t,e),r=this.projection.lngLatToPoint(n);return{pointX:r.x,pointY:r.y}},o.prototype.pointToLnglat=function(t,e){var n=new i.default.Pixel(t,e),r=this.projection.pointToLngLat(n);return{lng:r.lng,lat:r.lat}},o.prototype.lnglatToTile=function(t,e,n){return{tileX:this._lngToTileX(t,n),tileY:this._latToTileY(e,n)}},o.prototype.lnglatToPixel=function(t,e,n){return{pixelX:this._lngToPixelX(t,n),pixelY:this._latToPixelY(e,n)}},o.prototype.pixelToLnglat=function(t,e,n,r,i){var o=(256*n+t)/this._getRetain(i),a=(256*r+e)/this._getRetain(i);return this.pointToLnglat(o,a)},o.prototype._pixelXTolng=function(t,e,n){var r=(256*e+t)/this._getRetain(n);return this.pointToLnglat(r,0).lng},o.prototype._pixelYToLat=function(t,e,n){var r=(256*e+t)/this._getRetain(n);return this.pointToLnglat(0,r).lat},o.prototype._lngToPixelX=function(t,e){var n=this._lngToTileX(t,e),r=this.lnglatToPoint(t,0);return Math.floor(r.pointX*this._getRetain(e)-256*n)},o.prototype._latToPixelY=function(t,e){var n=this._latToTileY(t,e),r=this.lnglatToPoint(0,t);return Math.floor(r.pointY*this._getRetain(e)-256*n)},o.prototype._lngToTileX=function(t,e){var n=this.lnglatToPoint(t,0);return Math.floor(n.pointX*this._getRetain(e)/256)},o.prototype._latToTileY=function(t,e){var n=this.lnglatToPoint(0,t);return Math.floor(n.pointY*this._getRetain(e)/256)},o.prototype._getRetain=function(t){return Math.pow(2,t-18)},o.prototype._getMapSize=function(t){return Math.pow(2,t)},o.prototype._Math_sinh=function(t){return(Math.exp(t)-Math.exp(-t))/2},o);function o(t){var e=t||{};this.levelMax=e.levelMax||3,this.levelMin=e.levelMin||18,this.projection=new i.default.MercatorProjection}e.default=r},function(t,e){function n(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function r(t){return"string"==typeof t}var i=null;function o(t,e){isNaN(t)&&(t=Ib(t),t=isNaN(t)?0:t),r(t)&&(t=parseFloat(t)),isNaN(e)&&(e=Ib(e),e=isNaN(e)?0:e),r(e)&&(e=parseFloat(e)),this.lng=t,this.lat=e}function a(t,e){this.x=t||0,this.y=e||0,this.x=this.x,this.y=this.y}function s(){}function l(){}o.TL=function(t){return t&&t.lng<=180&&-180<=t.lng&&t.lat<=74&&-74<=t.lat},o.prototype.lb=function(t){return t&&this.lat==t.lat&&this.lng==t.lng},a.prototype.lb=function(t){return t&&t.x==this.x&&t.y==this.y},s.prototype.nh=function(){},s.prototype.wi=function(){},l.prototype=new s,n(l,{$O:6370996.81,lG:[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],Au:[75,60,45,30,15,0],fP:[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],iG:[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],Z1:function(t,e){return t&&e&&(t=this.Fb(t))?(n=this.Tk(t.lng),r=this.Tk(t.lat),(e=this.Fb(e))?this.Pe(n,this.Tk(e.lng),r,this.Tk(e.lat)):0):0;var n,r},Vo:function(t,e){return t&&e?(t.lng=this.JD(t.lng,-180,180),t.lat=this.ND(t.lat,-74,74),e.lng=this.JD(e.lng,-180,180),e.lat=this.ND(e.lat,-74,74),this.Pe(this.Tk(t.lng),this.Tk(e.lng),this.Tk(t.lat),this.Tk(e.lat))):0},Fb:function(t){if(t===i||void 0===t)return new o(0,0);for(var e,n=new o(Math.abs(t.lng),Math.abs(t.lat)),r=0;r<this.lG.length;r++)if(n.lat>=this.lG[r]){e=this.fP[r];break}return new o((t=this.gK(t,e)).lng.toFixed(6),t.lat.toFixed(6))},Eb:function(t){if(t===i||void 0===t||180<t.lng||t.lng<-180||90<t.lat||t.lat<-90)return new o(0,0);var e,n;t.lng=this.JD(t.lng,-180,180),t.lat=this.ND(t.lat,-74,74),e=new o(t.lng,t.lat);for(var r=0;r<this.Au.length;r++)if(e.lat>=this.Au[r]){n=this.iG[r];break}if(!n)for(r=0;r<this.Au.length;r++)if(e.lat<=-this.Au[r]){n=this.iG[r];break}return new o((t=this.gK(t,n)).lng.toFixed(2),t.lat.toFixed(2))},gK:function(t,e){if(t&&e){var n=e[0]+e[1]*Math.abs(t.lng),r=Math.abs(t.lat)/e[9],r=e[2]+e[3]*r+e[4]*r*r+e[5]*r*r*r+e[6]*r*r*r*r+e[7]*r*r*r*r*r+e[8]*r*r*r*r*r*r;return new o(n=n*(t.lng<0?-1:1),r=r*(t.lat<0?-1:1))}},Pe:function(t,e,n,r){return this.$O*Math.acos(Math.sin(n)*Math.sin(r)+Math.cos(n)*Math.cos(r)*Math.cos(e-t))},Tk:function(t){return Math.PI*t/180},Z3:function(t){return 180*t/Math.PI},ND:function(t,e,n){return e!=i&&(t=Math.max(t,e)),n!=i&&(t=Math.min(t,n)),t},JD:function(t,e,n){for(;n<t;)t-=n-e;for(;t<e;)t+=n-e;return t}}),n(l.prototype,{Jm:function(t){return l.Eb(t)},nh:function(t){return new a((t=l.Eb(t)).lng,t.lat)},qh:function(t){return l.Fb(t)},wi:function(t){return t=new o(t.x,t.y),l.Fb(t)},fc:function(t,e,n,r,i){if(t)return t=this.Jm(t,i),e=this.Lc(e),new a(Math.round((t.lng-n.lng)/e+r.width/2),Math.round((n.lat-t.lat)/e+r.height/2))},zb:function(t,e,n,r,i){if(t)return e=this.Lc(e),this.qh(new o(n.lng+e*(t.x-r.width/2),n.lat-e*(t.y-r.height/2)),i)},Lc:function(t){return Math.pow(2,18-t)}});var u=l.prototype;!function(t,e){for(var n in e)t[n]=e[n]}(u,{lngLatToPoint:u.nh,pointToLngLat:u.wi});var c={Point:o,Pixel:a,MercatorProjection:l};e.default=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(8),s=n(302),l=(o=a.UrlTemplateImageryProvider,i(u,o),u);function u(t){var e=o.call(this,t)||this;return e.tilingScheme._projection=new s.default,e}e.default=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(8),l=n(22),a=(o=s.WebMercatorProjection,i(u,o),u.prototype.project=function(t,e){var n=this._semimajorAxis,r=l.default.wgs84ToGcj02(s.Math.toDegrees(t.longitude),s.Math.toDegrees(t.latitude)),i=s.Math.toRadians(r[0])*n,o=s.WebMercatorProjection.geodeticLatitudeToMercatorAngle(s.Math.toRadians(r[1]))*n,a=t.height;return s.defined(e)?(e.x=i,e.y=o,e.z=a,e):new s.Cartesian3(i,o,a)},u.prototype.unproject=function(t,e){if(!s.defined(t))throw new s.DeveloperError("cartesian is required");var n=this._oneOverSemimajorAxis,r=t.x*n,i=s.WebMercatorProjection.mercatorAngleToGeodeticLatitude(t.y*n),o=t.z,a=l.default.gcj02ToWgs84(s.Math.toDegrees(r),s.Math.toDegrees(i)),r=s.Math.toRadians(a[0]),i=s.Math.toRadians(a[1]);return s.defined(e)?(e.longitude=r,e.latitude=i,e.height=o,e):new s.Cartographic(r,i,o)},u);function u(t){return o.call(this,t)||this}e.default=a},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(19),S=n(8),s=n(11),l=n(183),u=n(16),c=(o=a.default,i(p,o),Object.defineProperty(p.prototype,"startPoint",{get:function(){return this._startPoint},set:function(t){this._startPoint=t;var e=this._createFlyLineGeometryForThis();this.value.polyline.positions=e,this.resetProperty("startPoint",t)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"endPoint",{get:function(){return this._endPoint},set:function(t){this._endPoint=t;var e=this._createFlyLineGeometryForThis();this.value.polyline.positions=e,this.resetProperty("endPoint",t)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"angularityFactor",{get:function(){return this._angularityFactor},set:function(t){this._angularityFactor=t;var e=this._createFlyLineGeometryForThis();this.value.polyline.positions=e,this.resetProperty("angularityFactor",t)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"numOfLine",{get:function(){return this._numOfLine},set:function(t){this._numOfLine=t;var e=this._createFlyLineGeometryForThis();this.value.polyline.positions=e,this.resetProperty("numOfLine",t)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.value.polyline.width=t,this.resetProperty("width",t)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this.value.polyline.material.color=Color.fromCssColorString(t),this.resetProperty("color",t)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"duration",{get:function(){return this._duration},set:function(t){this._duration=t,this.value.polyline.material.duration=t,this.resetProperty("duration",t)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"show",{get:function(){return this._show},set:function(t){this._show=t,this.value.show=t,this.resetProperty("show",t)},enumerable:!1,configurable:!0}),Object.defineProperty(p.prototype,"showByDistance",{get:function(){return this._showByDistance},set:function(t){this._showByDistance=t,this.value.distanceDisplayCondition=new DistanceDisplayCondition(t[0],t[1]),this.resetProperty("showByDistance",t)},enumerable:!1,configurable:!0}),p.prototype._createFlyLineGeometryForThis=function(){return this._createFlyLineGeometry(S.Cartesian3.fromDegrees(this._startPoint[0],this._startPoint[1],this._startPoint[2]||0),S.Cartesian3.fromDegrees(this._endPoint[0],this._endPoint[1],this._endPoint[2]||0),this._angularityFactor,this._numOfLine)},p.prototype._createFlyLineGeometry=function(t,e,n,r){var i=[],o=S.Cartographic.fromCartesian(t),a=S.Cartographic.fromCartesian(e),s=180*o.longitude/Math.PI,l=180*o.latitude/Math.PI,u=180*a.longitude/Math.PI,c=180*a.latitude/Math.PI,p=Math.sqrt((s-u)*(s-u)+(l-c)*(l-c))*n*1e4,h=S.Cartesian3.clone(t),f=S.Cartesian3.clone(e),d=S.Cartesian3.distance(h,S.Cartesian3.ZERO),y=S.Cartesian3.distance(f,S.Cartesian3.ZERO);if(S.Cartesian3.normalize(h,h),S.Cartesian3.normalize(f,f),0==S.Cartesian3.distance(h,f))return i;var g=S.Cartesian3.angleBetween(h,f);i.push(t);for(var _=1,m=r-1;_<m;_++){var v=_/(r-1),b=1-v,w=Math.sin(b*g)/Math.sin(g),x=Math.sin(v*g)/Math.sin(g),C=S.Cartesian3.multiplyByScalar(h,w,new S.Cartesian3),E=S.Cartesian3.multiplyByScalar(f,x,new S.Cartesian3),P=S.Cartesian3.add(C,E,new S.Cartesian3),O=v*Math.PI,T=d*b+y*v+Math.sin(O)*p,P=S.Cartesian3.multiplyByScalar(P,T,P);i.push(P)}return i.push(e),i},p);function p(t){var e=o.call(this)||this;o.prototype.fromJSON.call(e,t),e.type=s.default.FLY_LINE,e.class=u.default.ENTITY;var n=t||{};e._startPoint=n.startPoint,e._endPoint=n.endPoint,e._angularityFactor=n.angularityFactor||300,e._numOfLine=n.numOfLine||50,e._width=n.width||5,e._color=n.color||"rgb(255, 0, 0)",e._duration=n.duration||2e3,e._image=n.image,e._show=n.show||!0,e._showByDistance=n.showByDistance||[0,1e9];var r=e._createFlyLineGeometryForThis();return e.value=new S.Entity({show:e._show,polyline:{positions:r,width:e._width,material:new l.default({color:e._color,duration:e._duration,image:e._image})}}),e}e.default=c},function(t,e){t.exports="czm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n    czm_material material = czm_getDefaultMaterial(materialInput);\r\n    vec2 st = materialInput.st;\r\n    vec4 imageColor;\r\n    imageColor = texture2D(image, vec2(1.0 - fract(time - st.s), st.t));\r\n\r\n    material.alpha = imageColor.a;\r\n    material.diffuse = imageColor.rgb;\r\n\r\n    return material;\r\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(135),i=n(306),u=n(12),o=n(186),a=(s.prototype.getFragmentShader=function(){var t=this._getGradientDirection(this._gradientDirection);return r.default.encrypt("\n            float _baseHeight = "+i.default(this._baseHeight)+";\n            float _heightRange = "+i.default(this._heightRange)+";\n            float _lineRange = "+i.default(this._lineRange)+";\n            float _lineWidth = "+i.default(this._lineWidth)+";\n            float _lineFrequency = "+i.default(this._lineFrequency)+";\n            float _frequency = "+i.default(this._frequency)+";\n            float _gradientIntensity = "+i.default(this._gradientIntensity)+";\n\n            float vtxf_height = v_elevationPos."+t+" - _baseHeight;\n            float vtxf_a11 = fract(czm_frameNumber / _frequency) * 3.14159265 * 2.0;\n            float vtxf_a12 = vtxf_height / _heightRange + sin(vtxf_a11) * 0.1;\n            gl_FragColor *= vec4(vtxf_a12, vtxf_a12, vtxf_a12, 1.0);\n\n            float vtxf_a13 = fract(czm_frameNumber / _lineFrequency);\n            float vtxf_h = clamp(vtxf_height / _lineRange, 0.0, 1.0);\n            vtxf_a13 = abs(vtxf_a13 - 0.5) * 2.0;\n            float vtxf_diff = step(_lineWidth, abs(vtxf_h - vtxf_a13));\n            gl_FragColor.rgb += gl_FragColor.rgb * (1.0 - vtxf_diff);\n        ")},Object.defineProperty(s.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency=t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"gradientIntensity",{get:function(){return this._gradientIntensity},set:function(t){this._gradientIntensity=t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"lineFrequency",{get:function(){return this._lineFrequency},set:function(t){this._lineFrequency=t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){this._lineWidth=t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"baseHeight",{get:function(){return this._baseHeight},set:function(t){this._baseHeight=t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"heightRange",{get:function(){return this._heightRange},set:function(t){this._heightRange=t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"lineRange",{get:function(){return this._lineRange},set:function(t){this._lineRange=t},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"gradientDirection",{get:function(){return this._gradientDirection},set:function(t){this._gradientDirection=t},enumerable:!1,configurable:!0}),s.prototype.getValue=function(){return{enabled:this._enabled,frequency:this._frequency,gradientIntensity:this._gradientIntensity,lineFrequency:this._lineFrequency,lineWidth:this._lineWidth,baseHeight:this._baseHeight,heightRange:this._heightRange,lineRange:this._lineRange}},s.prototype.setValue=function(t){var e=t.enabled,n=t.frequency,r=t.gradientIntensity,i=t.lineFrequency,o=t.lineWidth,a=t.baseHeight,s=t.heightRange,l=t.lineRange;this._enabled=u.isBoolean(e)&&e,this._frequency=u.isNumber(n)&&n,this._gradientIntensity=u.isNumber(r)&&r,this._lineFrequency=u.isNumber(i)&&i,this._lineWidth=u.isNumber(o)&&o,this._baseHeight=u.isNumber(a)&&a,this._heightRange=u.isNumber(s)&&s,this._lineRange=u.isNumber(l)&&l},s.prototype._getGradientDirection=function(t){var e="z";switch(t){case o.default.X:e="x";break;case o.default.Y:e="y";break;case o.default.Z:e="z"}return e},s);function s(t){var e=t||{};this._enabled=e.enabled||!1,this._frequency=e.frequency||360,this._gradientIntensity=e.gradientIntensity||60,this._lineFrequency=e.lineFrequency||360,this._lineWidth=e.lineWidth||.005,this._baseHeight=e.baseHeight||0,this._heightRange=e.heightRange||e.gradientIntensity||60,this._lineRange=e._lineRange||300,this._gradientDirection=e.gradientDirection||o.default.Z}e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.toString();return e.indexOf(".")<0?e+".0":e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(308),o=(a.prototype.getType=function(t){return r.Material.CircleSpreadType},a.prototype.getValue=function(t,e){return r.defined(e)||(e={}),e.color=r.Property.getValueOrClonedDefault(this._color,t,r.Color.WHITE,e.color),e.time=((new Date).getTime()-this._time)%this._duration/this._duration,e.alpha=this._alpha,e.exponential=this._exponential,e},a.prototype.equals=function(t){return this===t||t instanceof a&&r.Property.equals(this._color,t._color)},Object.defineProperty(a.prototype,"isConstant",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"definitionChanged",{get:function(){return this._definitionChanged},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"duration",{get:function(){return this._duration},set:function(t){this._duration=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"exponential",{get:function(){return this._exponential},set:function(t){this._exponential=t},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=t},enumerable:!1,configurable:!0}),a);function a(t){this._definitionChanged=new r.Event;var e=t||{};this._color=void 0,this.color=r.Color.fromCssColorString(e.color),this._alpha=this.color._value.alpha||.5,this._duration=e.duration||1e3,this._exponential=e.exponential||1,this._time=(new Date).getTime(),this._colorSubscription=void 0}Object.defineProperties(o.prototype,{color:r.createPropertyDescriptor("color")}),r.Material.CircleSpreadType="CircleSpread",r.Material._materialCache.addMaterial(r.Material.CircleSpreadType,{fabric:{type:r.Material.CircleSpreadType,uniforms:{color:new r.Color(1,0,0,1),time:0,alpha:.5,exponential:1},source:i},translucent:function(){return!0}}),e.default=o},function(t,e){t.exports="czm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n    czm_material material = czm_getDefaultMaterial(materialInput);\r\n    material.diffuse = 1.5 * color.rgb;\r\n    vec2 st = materialInput.st;\r\n    float dis = distance(st, vec2(0.5, 0.5));\r\n    float per = fract(time);\r\n    if(dis > per * alpha){\r\n        material.alpha = 0.0;\r\n        discard;\r\n    }else{\r\n        material.alpha = color.a * pow ((dis / per), exponential) * 1.0;\r\n    }\r\n    return material;\r\n}"},function(t,e){t.exports="varying vec3 v_positionMC;\r\nvarying vec3 v_positionEC;\r\nvarying vec2 v_st;\r\nvoid main()\r\n{\r\n    czm_materialInput materialInput;\r\n    vec3 normalEC = normalize(czm_normal3D * czm_geodeticSurfaceNormal(v_positionMC, vec3(0.0), vec3(1.0)));\r\n#ifdef FACE_FORWARD\r\n    normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);\r\n#endif\r\n    materialInput.s = v_st.s;\r\n    materialInput.st = v_st;\r\n    materialInput.str = vec3(v_st, 0.0);\r\n    materialInput.normalEC = normalEC;\r\n    materialInput.tangentToEyeMatrix = czm_eastNorthUpToEyeCoordinates(v_positionMC, materialInput.normalEC);\r\n    vec3 positionToEyeEC = -v_positionEC;\r\n    materialInput.positionToEyeEC = positionToEyeEC;\r\n    czm_material material = czm_getMaterial(materialInput);\r\n#ifdef FLAT\r\n    gl_FragColor = vec4(material.diffuse + material.emission, material.alpha);\r\n#else\r\n    gl_FragColor = czm_phong(normalize(positionToEyeEC), material);\r\n#endif\r\n};"},function(t,e,n){var r,i,o;o=function(){var p,s={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},l=(p=s.defaultRadius,t.prototype={_organiseData:function(t,e){var n=t[this._xField],r=t[this._yField],i=this._radi,o=this._data,a=this._max,s=this._min,l=t[this._valueField]||1,u=t.radius||this._cfgRadius||p;o[n]||(o[n]=[],i[n]=[]),o[n][r]?o[n][r]+=l:(o[n][r]=l,i[n][r]=u);var c=o[n][r];return a<c?(e?this.setDataMax(c):this._max=c,!1):c<s?(e?this.setDataMin(c):this._min=c,!1):{x:n,y:r,value:l,radius:u,min:s,max:a}},_unOrganizeData:function(){var t=[],e=this._data,n=this._radi;for(var r in e)for(var i in e[r])t.push({x:r,y:i,radius:n[r][i],value:e[r][i]});return{min:this._min,max:this._max,data:t}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},updateConfig:function(t){this._xField=t.xField||t.defaultXField,this._yField=t.yField||t.defaultYField,this._valueField=t.valueField||t.defaultValueField,t.radius&&(this._cfgRadius=t.radius)},addData:function(t){if(0<t.length)for(var e=t,n=e.length;n--;)this.addData.call(this,e[n]);else{var r=this._organiseData(t,!0);r&&(0===this._data.length&&(this._min=this._max=r.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[r]}))}return this},setData:function(t){var e=t.data,n=e.length;this._data=[],this._radi=[];for(var r=0;r<n;r++)this._organiseData(e[r],!1);return this._max=t.max,this._min=t.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(t){return this._max=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(t){return this._min=t,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(t){this._coordinator=t},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},t);function t(t){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this.updateConfig(t)}var e=(n.prototype={renderPartial:function(t){0<t.data.length&&(this._drawAlpha(t),this._colorize())},renderAll:function(t){this._clear(),0<t.data.length&&(this._drawAlpha(function(t){for(var e=[],n=t.min,r=t.max,i=t.radi,t=t.data,o=Object.keys(t),a=o.length;a--;)for(var s=o[a],l=Object.keys(t[s]),u=l.length;u--;){var c=l[u],p=t[s][c],h=i[s][c];e.push({x:s,y:c,value:p,radius:h})}return{min:n,max:r,data:e}}(t)),this._colorize())},_updateGradient:function(t){this._palette=o(t)},updateConfig:function(t){t.gradient&&this._updateGradient(t),this._setStyles(t)},setDimensions:function(t,e){this._width=t,this._height=e,this.canvas.width=this.shadowCanvas.width=t,this.canvas.height=this.shadowCanvas.height=e},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(t){this._blur=0==t.blur?0:t.blur||t.defaultBlur,t.backgroundColor&&(this.canvas.style.backgroundColor=t.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=t.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=t.height||this._height,this._opacity=255*(t.opacity||0),this._maxOpacity=255*(t.maxOpacity||t.defaultMaxOpacity),this._minOpacity=255*(t.minOpacity||t.defaultMinOpacity),this._useGradientOpacity=!!t.useGradientOpacity},_drawAlpha:function(t){for(var e,n,r,i,o,a,s,l=this._min=t.min,u=this._max=t.max,c=(t=t.data||[]).length,p=1-this._blur;c--;){var h,f=t[c],d=f.x,y=f.y,g=f.radius,_=Math.min(f.value,u),m=d-g,v=y-g,b=this.shadowCtx;this._templates[g+"_"+p]?h=this._templates[g+"_"+p]:this._templates[g+"_"+p]=(e=g,n=p,s=a=o=i=r=void 0,i=document.createElement("canvas"),o=i.getContext("2d"),s=a=e,i.width=i.height=2*e,1==n?(o.beginPath(),o.arc(a,s,e,0,2*Math.PI,!1),o.fillStyle="rgba(0,0,0,1)",o.fill()):((r=o.createRadialGradient(a,s,e*n,a,s,e)).addColorStop(0,"rgba(0,0,0,1)"),r.addColorStop(1,"rgba(0,0,0,0)"),o.fillStyle=r,o.fillRect(0,0,2*e,2*e)),h=i);var w=(_-l)/(u-l);b.globalAlpha=w<.01?.01:w,b.drawImage(h,m,v),m<this._renderBoundaries[0]&&(this._renderBoundaries[0]=m),v<this._renderBoundaries[1]&&(this._renderBoundaries[1]=v),m+2*g>this._renderBoundaries[2]&&(this._renderBoundaries[2]=m+2*g),v+2*g>this._renderBoundaries[3]&&(this._renderBoundaries[3]=v+2*g)}},_colorize:function(){var t=this._renderBoundaries[0],e=this._renderBoundaries[1],n=this._renderBoundaries[2]-t,r=this._renderBoundaries[3]-e,i=this._width,o=this._height,a=this._opacity,s=this._maxOpacity,l=this._minOpacity,u=this._useGradientOpacity;t<0&&(t=0),e<0&&(e=0),i<t+n&&(n=i-t),o<e+r&&(r=o-e);for(var c=this.shadowCtx.getImageData(t,e,n,r),p=c.data,h=p.length,f=this._palette,d=3;d<h;d+=4){var y,g=p[d],_=4*g;_&&(y=0<a?a:g<s?g<l?l:g:s,p[d-3]=f[_],p[d-2]=f[1+_],p[d-1]=f[2+_],p[d]=u?f[3+_]:y)}c.data=p,this.ctx.putImageData(c,t,e),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(t){var e=this.shadowCtx.getImageData(t.x,t.y,1,1).data[3],n=this._max,r=this._min;return Math.abs(n-r)*(e/255)>>0},getDataURL:function(){return this.canvas.toDataURL()}},n);function o(t){var e=t.gradient||t.defaultGradient,n=document.createElement("canvas"),r=n.getContext("2d");n.width=256,n.height=1;var i=r.createLinearGradient(0,0,256,1);for(var o in e)i.addColorStop(o,e[o]);return r.fillStyle=i,r.fillRect(0,0,256,1),r.getImageData(0,0,256,1).data}function n(t){var e=t.container,n=this.shadowCanvas=document.createElement("canvas"),r=this.canvas=t.canvas||document.createElement("canvas"),i=(this._renderBoundaries=[1e4,1e4,0,0],getComputedStyle(t.container)||{});r.className="heatmap-canvas",this._width=r.width=n.width=t.width||+i.width.replace(/px/,""),this._height=r.height=n.height=t.height||+i.height.replace(/px/,""),this.shadowCtx=n.getContext("2d"),this.ctx=r.getContext("2d"),r.style.cssText=n.style.cssText="position:absolute;left:0;top:0;",e.style.position="relative",e.appendChild(r),this._palette=o(t),this._templates={},this._setStyles(t)}var r,u,c=(r=!1,"canvas2d"===s.defaultRenderer&&(r=e),r),h=function(){for(var t={},e=arguments.length,n=0;n<e;n++){var r=arguments[n];for(var i in r)t[i]=r[i]}return t},i=(a.prototype={on:function(t,e,n){var r=this.cStore;r[t]||(r[t]=[]),r[t].push(function(t){return e.call(n,t)})},emit:function(t,e){var n=this.cStore;if(n[t])for(var r=n[t].length,i=0;i<r;i++){(0,n[t][i])(e)}}},u=a,f.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(t){return this._config=h(this._config,t),this._renderer.updateConfig(this._config),this._store.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(t){return this._store.getValueAt?this._store.getValueAt(t):this._renderer.getValueAt?this._renderer.getValueAt(t):null}},f);function a(){this.cStore={}}function f(){var e,t,n,r,i=this._config=h(s,arguments[0]||{});if(this._coordinator=new u,i.plugin){var o=i.plugin;if(!s.plugins[o])throw new Error("Plugin '"+o+"' not found. Maybe it was not registered.");var a=s.plugins[o];this._renderer=new a.renderer(i),this._store=new a.store(i)}else this._renderer=new c(i),this._store=new l(i);t=(e=this)._renderer,n=e._coordinator,r=e._store,n.on("renderpartial",t.renderPartial,t),n.on("renderall",t.renderAll,t),n.on("extremachange",function(t){e._config.onExtremaChange&&e._config.onExtremaChange({min:t.min,max:t.max,gradient:e._config.gradient||e._config.defaultGradient})}),r.setCoordinator(n)}return{create:function(t){return new i(t)},register:function(t,e){s.plugins[t]=e}}},t.exports?t.exports=o():void 0===(i="function"==typeof(r=o)?r.call(e,n,e,t):r)||(t.exports=i)},function(e,n,r){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var w={version:"1.0.0",PlotUtils:{}};w.PlotUtils.distance=function(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))},w.PlotUtils.wholeDistance=function(t){for(var e=0,n=0;n<t.length-1;n++)e+=w.PlotUtils.distance(t[n],t[n+1]);return e},w.PlotUtils.getBaseLength=function(t){return Math.pow(w.PlotUtils.wholeDistance(t),.99)},w.PlotUtils.mid=function(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]},w.PlotUtils.getCircleCenterOfThreePoints=function(t,e,n){var r=[(t[0]+e[0])/2,(t[1]+e[1])/2],i=[r[0]-t[1]+e[1],r[1]+t[0]-e[0]],o=[(t[0]+n[0])/2,(t[1]+n[1])/2],a=[o[0]-t[1]+n[1],o[1]+t[0]-n[0]];return w.PlotUtils.getIntersectPoint(r,i,o,a)},w.PlotUtils.getIntersectPoint=function(t,e,n,r){if(t[1]==e[1]){var i=(r[0]-n[0])/(r[1]-n[1]),o=i*(t[1]-n[1])+n[0],a=t[1];return[o,a]}if(n[1]!=r[1])return s=(e[0]-t[0])/(e[1]-t[1]),i=(r[0]-n[0])/(r[1]-n[1]),[o=s*(a=(s*t[1]-t[0]-i*n[1]+n[0])/(s-i))-s*t[1]+t[0],a];var s=(e[0]-t[0])/(e[1]-t[1]);return[o=s*(n[1]-t[1])+t[0],a=n[1]]},w.PlotUtils.getAzimuth=function(t,e){var n,r=Math.asin(Math.abs(e[1]-t[1])/w.PlotUtils.distance(t,e));return e[1]>=t[1]&&e[0]>=t[0]?n=r+Math.PI:e[1]>=t[1]&&e[0]<t[0]?n=w.Constants.TWO_PI-r:e[1]<t[1]&&e[0]<t[0]?n=r:e[1]<t[1]&&e[0]>=t[0]&&(n=Math.PI-r),n},w.PlotUtils.getAngleOfThreePoints=function(t,e,n){var r=w.PlotUtils.getAzimuth(e,t)-w.PlotUtils.getAzimuth(e,n);return r<0?r+w.Constants.TWO_PI:r},w.PlotUtils.isClockWise=function(t,e,n){return(n[1]-t[1])*(e[0]-t[0])>(e[1]-t[1])*(n[0]-t[0])},w.PlotUtils.getPointOnLine=function(t,e,n){return[e[0]+t*(n[0]-e[0]),e[1]+t*(n[1]-e[1])]},w.PlotUtils.getCubicValue=function(t,e,n,r,i){var o=1-(t=Math.max(Math.min(t,1),0)),a=t*t,s=a*t,l=o*o,u=l*o;return[u*e[0]+3*l*t*n[0]+3*o*a*r[0]+s*i[0],u*e[1]+3*l*t*n[1]+3*o*a*r[1]+s*i[1]]},w.PlotUtils.getThirdPoint=function(t,e,n,r,i){var o=w.PlotUtils.getAzimuth(t,e),a=i?o+n:o-n,s=r*Math.cos(a),l=r*Math.sin(a);return[e[0]+s,e[1]+l]},w.PlotUtils.getArcPoints=function(t,e,n,r){for(var i=[],o=(o=r-n)<0?o+w.Constants.TWO_PI:o,a=0;a<=w.Constants.FITTING_COUNT;a++){var s=n+o*a/w.Constants.FITTING_COUNT,l=t[0]+e*Math.cos(s),u=t[1]+e*Math.sin(s);i.push([l,u])}return i},w.PlotUtils.getBisectorNormals=function(t,e,n,r){var i,o,a=w.PlotUtils.getNormal(e,n,r),s=Math.sqrt(a[0]*a[0]+a[1]*a[1]),l=a[0]/s,u=a[1]/s,c=w.PlotUtils.distance(e,n),p=w.PlotUtils.distance(n,r),h=s>w.Constants.ZERO_TOLERANCE?w.PlotUtils.isClockWise(e,n,r)?(o=t*c,i=[n[0]-o*u,n[1]+o*l],o=t*p,[n[0]+o*u,n[1]-o*l]):(o=t*c,i=[n[0]+o*u,n[1]-o*l],o=t*p,[n[0]-o*u,n[1]+o*l]):(i=[n[0]+t*(e[0]-n[0]),n[1]+t*(e[1]-n[1])],[n[0]+t*(r[0]-n[0]),n[1]+t*(r[1]-n[1])]);return[i,h]},w.PlotUtils.getNormal=function(t,e,n){var r=t[0]-e[0],i=t[1]-e[1],o=Math.sqrt(r*r+i*i);r/=o,i/=o;var a=n[0]-e[0],s=n[1]-e[1],l=Math.sqrt(a*a+s*s);return[r+(a/=l),i+(s/=l)]},w.PlotUtils.getCurvePoints=function(t,e){for(var n=[w.PlotUtils.getLeftMostControlPoint(e)],r=0;r<e.length-2;r++)var i=e[r],o=e[r+1],a=e[r+2],s=w.PlotUtils.getBisectorNormals(t,i,o,a),n=n.concat(s);var l=w.PlotUtils.getRightMostControlPoint(e);n.push(l);for(var u=[],r=0;r<e.length-1;r++){i=e[r],o=e[r+1],u.push(i);for(t=0;t<w.Constants.FITTING_COUNT;t++){var c=w.PlotUtils.getCubicValue(t/w.Constants.FITTING_COUNT,i,n[2*r],n[2*r+1],o);u.push(c)}u.push(o)}return u},w.PlotUtils.getLeftMostControlPoint=function(e){var n,r,i,o,a,s,l,u,c,p,h,f,d=e[0],y=e[1],g=e[2],_=w.PlotUtils.getBisectorNormals(0,d,y,g)[0],m=w.PlotUtils.getNormal(d,y,g),v=Math.sqrt(m[0]*m[0]+m[1]*m[1])>w.Constants.ZERO_TOLERANCE?(n=w.PlotUtils.mid(d,y),r=d[0]-n[0],i=d[1]-n[1],l=(a=-(o=2/w.PlotUtils.distance(d,y))*i)*a-(s=o*r)*s,u=2*a*s,c=s*s-a*a,p=_[0]-n[0],h=_[1]-n[1],f=n[0]+l*p+u*h,n[1]+u*p+c*h):(f=d[0]+t*(y[0]-d[0]),d[1]+t*(y[1]-d[1]));return[f,v]},w.PlotUtils.getRightMostControlPoint=function(e){var n,r,i,o,a,s,l,u,c,p,h,f,d=e.length,y=e[d-3],g=e[d-2],_=e[d-1],m=w.PlotUtils.getBisectorNormals(0,y,g,_)[1],v=w.PlotUtils.getNormal(y,g,_),b=Math.sqrt(v[0]*v[0]+v[1]*v[1])>w.Constants.ZERO_TOLERANCE?(n=w.PlotUtils.mid(g,_),r=_[0]-n[0],i=_[1]-n[1],l=(a=-(o=2/w.PlotUtils.distance(g,_))*i)*a-(s=o*r)*s,u=2*a*s,c=s*s-a*a,p=m[0]-n[0],h=m[1]-n[1],f=n[0]+l*p+u*h,n[1]+u*p+c*h):(f=_[0]+t*(g[0]-_[0]),_[1]+t*(g[1]-_[1]));return[f,b]},w.PlotUtils.getBezierPoints=function(t){if(t.length<=2)return t;for(var e=[],n=t.length-1,r=0;r<=1;r+=.01){for(var i=0,o=0,a=0;a<=n;a++){var s=w.PlotUtils.getBinomialFactor(n,a),l=Math.pow(r,a),u=Math.pow(1-r,n-a);i+=s*l*u*t[a][0],o+=s*l*u*t[a][1]}e.push([i,o])}return e.push(t[n]),e},w.PlotUtils.getBinomialFactor=function(t,e){return w.PlotUtils.getFactorial(t)/(w.PlotUtils.getFactorial(e)*w.PlotUtils.getFactorial(t-e))},w.PlotUtils.getFactorial=function(t){if(t<=1)return 1;if(2==t)return 2;if(3==t)return 6;if(4==t)return 24;if(5==t)return 120;for(var e=1,n=1;n<=t;n++)e*=n;return e},w.PlotUtils.getQBSplinePoints=function(t){if(t.length<=2)return t;var e=[],n=t.length-2-1;e.push(t[0]);for(var r=0;r<=n;r++)for(var i=0;i<=1;i+=.05){for(var o=0,a=0,s=0;s<=2;s++){var l=w.PlotUtils.getQuadricBSplineFactor(s,i);o+=l*t[r+s][0],a+=l*t[r+s][1]}e.push([o,a])}return e.push(t[t.length-1]),e},w.PlotUtils.getQuadricBSplineFactor=function(t,e){return 0==t?Math.pow(e-1,2)/2:1==t?(-2*Math.pow(e,2)+2*e+1)/2:2==t?Math.pow(e,2)/2:0},w.Constants={TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,FITTING_COUNT:100,ZERO_TOLERANCE:1e-4},n.default=w},function(t,e){t.exports="czm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n    czm_material material=czm_getDefaultMaterial(materialInput);\r\n    vec2 st=materialInput.st;\r\n    vec4 colorImage;\r\n    if(animate){\r\n        if(orientation==0.0){\r\n            colorImage=texture2D(image,vec2(fract(st.t-time),st.t));\r\n        }else if(orientation==1.0){\r\n            colorImage=texture2D(image,vec2(fract(-(st.t+time)),st.t));\r\n        }else if(orientation==2.0){\r\n            colorImage=texture2D(image,vec2(fract(-(st.s+time)),st.t));\r\n        }else if(orientation==3.0){\r\n            colorImage=texture2D(image,vec2(fract(st.s-time),st.t));\r\n        }\r\n    }else{\r\n        if(orientation==0.0){\r\n            colorImage=texture2D(image,vec2(fract(st.t),st.t));\r\n        }else if(orientation==1.0){\r\n            colorImage=texture2D(image,vec2(fract(-st.t),st.t));\r\n        }else if(orientation==2.0){\r\n            colorImage=texture2D(image,vec2(fract(-st.s),st.t));\r\n        }else if(orientation==3.0){\r\n            colorImage=texture2D(image,vec2(fract(st.s),st.t));\r\n        }\r\n    }\r\n    material.alpha=colorImage.a*color.a;\r\n    material.diffuse=(colorImage.rgb+color.rgb)/2.;\r\n    return material;\r\n}"},function(t,e){t.exports="uniform vec4 u_color;\r\nuniform float u_repeat;\r\nuniform float u_offset;\r\nuniform float u_thickness;\r\nczm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n    czm_material material=czm_getDefaultMaterial(materialInput);\r\n    float sp=1./u_repeat;\r\n    vec2 st=materialInput.st;\r\n    float dis=distance(st,vec2(.5));\r\n    float m=mod(dis+u_offset,sp);\r\n    float a=step(sp*(1.-u_thickness),m);\r\n    material.diffuse=u_color.rgb;\r\n    material.alpha=a*u_color.a;\r\n    return material;\r\n}"},function(t,e){t.exports="uniform sampler2D u_image;\r\nuniform vec4 u_color;\r\nuniform float u_speed;\r\nuniform float u_orientation;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n    czm_material material=czm_getDefaultMaterial(materialInput);\r\n    vec2 v_st=materialInput.st;\r\n    \r\n    float dt=fract(czm_frameNumber/700.*u_speed);\r\n    vec2 st;\r\n    if(u_orientation==0.0){\r\n        st=fract(vec2(1.)+v_st-vec2(0.,dt));\r\n    }else if(u_orientation==1.0){\r\n        st=fract(vec2(1.)+v_st-vec2(0.,-dt));\r\n    }else if(u_orientation==2.0){\r\n        st=fract(vec2(1.)+v_st-vec2(-20.*dt,0.));\r\n    }else if(u_orientation==3.0){\r\n        st=fract(vec2(1.)+v_st-vec2(20.*dt,0.));\r\n    }else if(u_orientation==4.0){\r\n        st=fract(vec2(1.)+v_st-vec2(-20.*dt,dt));\r\n    }else if(u_orientation==5.0){\r\n        st=fract(vec2(1.)+v_st-vec2(20.*dt,dt));\r\n    }else if(u_orientation==6.0){\r\n        st=fract(vec2(1.)+v_st-vec2(-20.*dt,-dt));\r\n    }else if(u_orientation==7.0){\r\n        st=fract(vec2(1.)+v_st-vec2(20.*dt,-dt));\r\n    }\r\n    vec4 imageColor=texture2D(u_image,st);\r\n    \r\n    vec3 diffuse=imageColor.rgb;\r\n    float alpha=imageColor.a;\r\n    \r\n    diffuse*=u_color.rgb;\r\n    alpha*=u_color.a;\r\n    \r\n    material.diffuse=diffuse;\r\n    material.alpha=alpha*pow(1.-v_st.t,2.);\r\n    return material;\r\n}"},function(t,e){t.exports="uniform vec4 u_color;\r\nuniform float u_speed;\r\n\r\nczm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n    czm_material material=czm_getDefaultMaterial(materialInput);\r\n    vec2 v_st=materialInput.st;\r\n    float powerRatio=fract(czm_frameNumber/30.*u_speed)+1.;\r\n    float alpha=powerRatio;\r\n    material.diffuse=u_color.rgb;\r\n    material.alpha=alpha*u_color.a;\r\n    return material;\r\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=r.Event,o=r.createPropertyDescriptor,a=r.defined,s=r.Property,l=r.Material,u=r.Color,c=n(317),p=!0,h=(f.prototype.getType=function(t){return this.CircleType},f.prototype.getValue=function(t,e){return a(e)||(e={}),e.color=s.getValueOrClonedDefault(this._color,t,u.WHITE,e.color),e.image=this._image,e},f.prototype.equals=function(t){return this===t||t instanceof f&&s.equals(this._color,t._color)},Object.defineProperty(f.prototype,"isConstant",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"definitionChanged",{get:function(){return this._definitionChanged},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"image",{get:function(){return this._image},set:function(t){this._image=t},enumerable:!1,configurable:!0}),f.prototype.addMaterial=function(){l._materialCache.addMaterial(this.CircleType,{fabric:{type:this.CircleType,uniforms:{color:new u(1,1,1,0),image:this._image},source:c},translucent:function(t){return!0}})},f);function f(t){this.CircleType="Circle",this._definitionChanged=new i,this._color=void 0,this.color=u.fromCssColorString(t.color),this._image=function(t){var e=document.createElement("canvas");e.width=2e3,e.height=2e3;var n=e.getContext("2d");n.clearRect(0,0,2e3,2e3);var r=n.createRadialGradient(1e3,1e3,970,1e3,1e3,1e3);return r.addColorStop(0,"rgba(255, 255, 255, 0)"),r.addColorStop(1,t),n.fillStyle=r,n.fillRect(0,0,2e3,2e3),e.toDataURL()}(t.color),p&&(this.addMaterial(),p=!1)}Object.defineProperties(h.prototype,{color:o("color")}),e.default=h},function(t,e){t.exports="czm_material czm_getMaterial(czm_materialInput materialInput)\r\n{\r\n    czm_material material=czm_getDefaultMaterial(materialInput);\r\n    vec2 st=materialInput.st;\r\n    vec4 colorImage;\r\n    colorImage=texture2D(image,vec2(st.s,st.t));\r\n    material.alpha=colorImage.a*color.a;\r\n    material.diffuse=(colorImage.rgb+color.rgb)/2.;\r\n    return material;\r\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8);Object.defineProperties(r.Model.prototype,{_cachedGltf:{set:function(t){var a,e,n,s;this._vtxf_cachedGltf=t,this._vtxf_cachedGltf&&this._vtxf_cachedGltf._gltf&&(a=this._vtxf_cachedGltf._gltf).extensionsUsed&&a.extensionsRequired&&(e=a.extensionsUsed.indexOf("KHR_technique_webgl"),n=a.extensionsRequired.indexOf("KHR_technique_webgl"),-1!==e&&(a.extensionsRequired.splice(n,1,"KHR_techniques_webgl"),a.extensionsUsed.splice(e,1,"KHR_techniques_webgl"),a.extensions=a.extensions||{},a.extensions.KHR_techniques_webgl={},a.extensions.KHR_techniques_webgl.programs=a.programs,a.extensions.KHR_techniques_webgl.shaders=a.shaders,a.extensions.KHR_techniques_webgl.techniques=a.techniques,s=a.extensions.KHR_techniques_webgl.techniques,a.materials.forEach(function(t,e){a.materials[e].extensions.KHR_technique_webgl.values=a.materials[e].values,a.materials[e].extensions.KHR_techniques_webgl=a.materials[e].extensions.KHR_technique_webgl;var n=a.materials[e].extensions.KHR_techniques_webgl;for(var r in n.values){var i=s[n.technique].uniforms;for(var o in i)if(i[o]===r){n.values[o]=n.values[r],delete n.values[r];break}}}),s.forEach(function(t){for(var e in t.attributes){var n=t.attributes[e];t.attributes[e]=t.parameters[n]}for(var r in t.uniforms){var i=t.uniforms[r];t.uniforms[r]=t.parameters[i]}})))},get:function(){return this._vtxf_cachedGltf}}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(320),i=(Object.defineProperty(o.prototype,"bloom",{get:function(){return this._bloom},enumerable:!1,configurable:!0}),o);function o(t){this._scene=t,this._bloom=new r.default(this._scene.postProcessStages.bloom)}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(Object.defineProperty(i.prototype,"enabled",{get:function(){return this.value.enabled},set:function(t){this.value.enabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"glowOnly",{get:function(){return this.value.uniforms.glowOnly},set:function(t){this.value.uniforms.glowOnly=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"contrast",{get:function(){return this.value.uniforms.contrast},set:function(t){this.value.uniforms.contrast=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"brightness",{get:function(){return this.value.uniforms.brightness},set:function(t){this.value.uniforms.brightness=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"delta",{get:function(){return this.value.uniforms.delta},set:function(t){this.value.uniforms.delta=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sigma",{get:function(){return this.value.uniforms.sigma},set:function(t){this.value.uniforms.sigma=t},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"stepSize",{get:function(){return this.value.uniforms.stepSize},set:function(t){this.value.uniforms.stepSize=t},enumerable:!1,configurable:!0}),i);function i(t){this.value=t}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(322),o=n(111),a=n(218),i=(s.prototype.bind=function(t,e,n){var r=n||{},i=(r.target||a.default.COORDINATE_TRANSFORM,{callback:e});switch(t){case o.default.POST_RENDER:return this._addPostRenderBindObject(i)}return-1},s.prototype.unbind=function(t,e){switch(t){case o.default.POST_RENDER:this._removePostRenderBindObject(e)}},s.prototype._addPostRenderBindObject=function(t){return this._postRender.add(t)},s.prototype._removePostRenderBindObject=function(t){this._postRender.remove(t)},s);function s(t){this._postRender=new r.default(t)}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(i.prototype.add=function(t){return this._key+=1,t.key=this._key,this._collection.push(t),this._key},i.prototype.remove=function(e){this._collection=this._collection.filter(function(t){return t.key!==e})},i);function i(t){var e=this;this._collection=[],this._key=0,this._scene=t,this._scene.postRender.addEventListener(function(){e._collection.forEach(function(t){t.callback()})})}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),a=n(12),s=n(22),r=(i.prototype.fixedLight=function(t){if(!a.isObject(t))throw new TypeError("error: FixedLight. The options is not a Object.");var e=(t||{}).direction;if(!e)throw new TypeError("The direction of FixedLight options is not defined.");this._scene.globe.enableLighting=!0,this._oldTerrainProvider=this._viewer.terrainProvider,this._viewer.terrainProvider=o.createWorldTerrain({requestWaterMask:!0,requestVertexNormals:!0}),this._reset(),this._scene.light=new o.DirectionalLight({direction:s.default.degreesToCartesian(e)})},i.prototype.flashLight=function(){this._scene.preRender.addEventListener(function(t,e){t.light.direction=o.Cartesian3.clone(t.camera.directionWC,t.light.direction)}),this._scene.globe.enableLighting=!0,this._oldTerrainProvider=this._viewer.terrainProvider,this._viewer.terrainProvider=o.createWorldTerrain({requestWaterMask:!0,requestVertexNormals:!0}),this._reset(),this._scene.light=this._flashlight,this._scene.globe.dynamicAtmosphereLighting=!1},i.prototype.moonLight=function(){var n=this;this._scene.preRender.addEventListener(function(t,e){t.light.direction=n._getMoonDirection(t.light.direction)}),this._scene.globe.enableLighting=!0,this._oldTerrainProvider=this._viewer.terrainProvider,this._reset(),this._scene.light=this._moonLight,this._scene.globe.dynamicAtmosphereLightingFromSun=!0},i.prototype.sunLight=function(){this._scene.globe.enableLighting=!0,this._oldTerrainProvider=this._viewer.terrainProvider,this._viewer.terrainProvider=o.createWorldTerrain({requestWaterMask:!0,requestVertexNormals:!0}),this._reset()},i.prototype.customLight=function(t){if(!a.isObject(t))throw new TypeError("error: CustomLight. The options is not a Object.");var e=t||{},n=e.direction,r=e.color||"#deca7c",i=void 0!==e.intensity?e.intensity:1;if(!n)throw new TypeError("The direction of CustomLight options is not defined.");this._scene.globe.enableLighting=!0,this._oldTerrainProvider=this._viewer.terrainProvider,this._viewer.terrainProvider=o.createWorldTerrain({requestWaterMask:!0,requestVertexNormals:!0}),this._reset(),this._scene.light=new o.DirectionalLight({direction:s.default.degreesToCartesian(n),color:o.Color.fromCssColorString(r),intensity:i})},i.prototype.quit=function(){this._scene.globe.enableLighting=!1,this._viewer.terrainProvider=this._oldTerrainProvider,this._reset()},i.prototype._getMoonDirection=function(t){t=o.defined(t)?t:new o.Cartesian3;var e=this._scratchIcrfToFixed,n=this._viewer.clock.currentTime;o.defined(o.Transforms.computeIcrfToFixedMatrix(n,e))||o.Transforms.computeTemeToPseudoFixedMatrix(n,e);var r=o.Simon1994PlanetaryPositions.computeMoonPositionInEarthInertialFrame(n,this._scratchMoonPosition);o.Matrix3.multiplyByVector(e,r,r);var i=o.Cartesian3.normalize(r,this._scratchMoonDirection);return o.Cartesian3.negate(i,t)},i.prototype._reset=function(){this._scene.light=this._sunLight,this._scene.globe.dynamicAtmosphereLighting=!0,this._scene.globe.dynamicAtmosphereLightingFromSun=!1},i);function i(t){this._scratchIcrfToFixed=new o.Matrix3,this._scratchMoonPosition=new o.Cartesian3,this._scratchMoonDirection=new o.Cartesian3,this._viewer=t,this._scene=t.scene,this._flashlight=new o.DirectionalLight({direction:this._scene.camera.directionWC}),this._moonLight=new o.DirectionalLight({direction:this._getMoonDirection(),color:new o.Color(.9,.925,1),intensity:.5}),this._sunLight=new o.SunLight}e.default=r},function(t,e,n){"use strict";var f=this&&this.__assign||function(){return(f=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),d=r.Entity,y=r.EntityCollection,g=r.DataSource,_=r.ImageryLayer,m=r.Cesium3DTileset,v=r.TimeDynamicPointCloud,b=r.Rectangle,w=r.Cartesian3,x=r.Math,C=n(63),i=n(325),o=n(326),a=n(327),s=n(328),l=(u.prototype.flyTo=function(t,e){try{if(!t)throw"There is no avilable object to Fly!";var n=t.value,r={duration:null==e?void 0:e.duration};if(n instanceof d||n instanceof y||n instanceof g||n instanceof _||n instanceof m||n instanceof v||n instanceof Promise)this._viewer.flyTo(n,f(f({},r),{offset:(null==e?void 0:e.orientation)&&{heading:x.toRadians(e.orientation[0]),pitch:x.toRadians(e.orientation[1]),roll:x.toRadians(e.orientation[2])}}));else if(t.extent){var i=void 0,o=t.extent;i=t.extent instanceof C.default?b.fromDegrees(o.west,o.south,o.east,o.north):b.fromDegrees(o[0],o[1],o[2],o[3]),this._viewer.camera.flyTo(f({destination:i},r))}else if(t.orientation){var a=t.position,s=t.orientation;this._viewer.camera.flyTo(f({destination:w.fromDegrees(a[0],a[1],a[2]),orientation:{heading:x.toRadians(s[0]),pitch:x.toRadians(s[1]),roll:x.toRadians(s[2])}},r))}else if(t.position){a=t.position;this._viewer.camera.flyTo(f({destination:w.fromDegrees(a[0],a[1],0<a[2]?a[2]+200:200)},r))}else{if(!t.positions)throw"This object cannot be focused.";var l=t.positions,u=Math.min.apply(Math,l.map(function(t){return t[0]})),c=Math.max.apply(Math,l.map(function(t){return t[0]})),p=Math.min.apply(Math,l.map(function(t){return t[1]})),h=Math.max.apply(Math,l.map(function(t){return t[1]})),i=b.fromDegrees(u,p,c,h);this._viewer.camera.flyTo(f({destination:i},r))}}catch(t){}},u.prototype.flyAround=function(t){this._flyAround=new i.default(this._earth,t)},u.prototype.flyAroundEarth=function(){this._flyAroundEarth=new o.default(this._earth)},u.prototype.roamingByKeyboard=function(t){this._roamingByKeyboard=new a.default(this._earth,t)},u.prototype.roamingByPath=function(t){return this._roamingByPath=new s.default(this._earth,t),this._roamingByPath},u.prototype.quit=function(){this._flyAround&&this._flyAround.stop(),this._flyAroundEarth&&this._flyAroundEarth.stop(),this._roamingByKeyboard&&this._roamingByKeyboard.stop(),this._roamingByPath&&this._roamingByPath.stop()},u.prototype.zoomIn=function(t){this._viewer.camera.zoomIn(t)},u.prototype.zoomOut=function(t){this._viewer.camera.zoomOut(t)},u);function u(t){this._earth=t,this._viewer=t._viewer}e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(8),r=n(12),i=(o.prototype.start=function(){var n=this,r=a.Cartesian3.fromDegrees(this._destination[0],this._destination[1],this._destination[2]),t=a.JulianDate.fromDate(new Date),i=this._viewer.clock;i.startTime=t.clone(),i.currentTime=t.clone(),i.clockRange=a.ClockRange.CLAMPED,i.clockStep=a.ClockStep.SYSTEM_CLOCK,i.shouldAnimate=!0;var o=this._viewer.camera.heading;this._timeExecution=function(){var t=a.JulianDate.secondsDifference(i.currentTime,i.startTime),e=a.Math.toRadians(t*n._speed)+o;n._viewer.camera.setView({destination:r,orientation:{heading:e,pitch:a.Math.toRadians(n._orientation[1]),roll:a.Math.toRadians(n._orientation[2])}}),n._viewer.camera.moveBackward(n._distance)},i.onTick.addEventListener(this._timeExecution),setTimeout(function(){i.onTick.removeEventListener(n._timeExecution)},this._time),i.tick()},o.prototype.stop=function(){var t=this._viewer.clock;t.shouldAnimate=!1,t.onTick.removeEventListener(this._timeExecution)},o);function o(t,e){if(this._destination=[],this._orientation=[],this._distance=0,this._speed=0,this._time=0,!r.isObject(e))throw new TypeError("error: FlyAround. The options is not a Object.");this._viewer=t._viewer;var n=e||{};this._destination=n.destination,this._orientation=n.orientation||[0,-30,0],this._distance=n.distance||1e3,this._speed=n.speed||10,this._time=n.time||6e3,this.start()}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(8),r=(i.prototype.start=function(){var t=this._viewer,r=t.scene,i=t.camera,o=t.clock;this._eventListener=function(){var t,e,n;r.mode===a.SceneMode.SCENE3D&&(t=a.Transforms.computeIcrfToFixedMatrix(o.currentTime),a.defined(t)&&(e=a.Cartesian3.clone(i.position),n=a.Matrix4.fromRotationTranslation(t),i.lookAtTransform(n,e)))},i.flyHome(0),o.multiplier=10800,r.postUpdate.addEventListener(this._eventListener),r.globe.enableLighting=!0},i.prototype.stop=function(){this._viewer.scene.camera.lookAtTransform(a.Matrix4.IDENTITY),this._viewer.clock.multiplier=1,this._viewer.scene.postUpdate.removeEventListener(this._eventListener)},i);function i(t){this._viewer=t._viewer,this.start()}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(12),o=(a.prototype.start=function(){var u=this,c=this.flags,t=this._viewer.scene,p=this._viewer.canvas;p.setAttribute("tabindex","0"),p.onclick=function(){p.focus()};var h,f,d=t.globe.ellipsoid;function n(t){switch(t){case"W".charCodeAt(0):return"rotateDown";case"S".charCodeAt(0):return"rotateUp";case"Q".charCodeAt(0):return"moveUp";case"E".charCodeAt(0):return"moveDown";case"D".charCodeAt(0):return"moveRight";case"A".charCodeAt(0):return"moveLeft";case"U".charCodeAt(0):return"rotateLeft";case"I".charCodeAt(0):return"moveForward";case"O".charCodeAt(0):return"rotateRight";case"J".charCodeAt(0):return"twistLeft";case"K".charCodeAt(0):return"moveBackward";case"L".charCodeAt(0):return"twistRight";case 37:return"lookLeft";case 38:return"lookUp";case 39:return"lookRight";case 40:return"lookDown";default:return}}t.screenSpaceCameraController.enableRotate=!1,t.screenSpaceCameraController.enableTranslate=!1,t.screenSpaceCameraController.enableZoom=!1,t.screenSpaceCameraController.enableTilt=!1,t.screenSpaceCameraController.enableLook=!1,this._handler=new r.ScreenSpaceEventHandler(p),this._handler.setInputAction(function(t){c.looking=!0,f=h=r.Cartesian3.clone(t.position)},r.ScreenSpaceEventType.LEFT_DOWN),this._handler.setInputAction(function(t){f=t.endPosition},r.ScreenSpaceEventType.MOUSE_MOVE),this._handler.setInputAction(function(t){c.looking=!1},r.ScreenSpaceEventType.LEFT_UP),this._keydownListener=function(t){var e=n(t.keyCode);void 0!==e&&(c[e]=!0)},document.addEventListener("keydown",this._keydownListener,!1),this._keyupListener=function(t){var e=n(t.keyCode);void 0!==e&&(c[e]=!1)},document.addEventListener("keyup",this._keyupListener,!1),this._timeListener=function(){var t,e,n,r,i=u._viewer.camera;c.looking&&(t=p.clientWidth,e=p.clientHeight,n=(f.x-h.x)/t,r=-(f.y-h.y)/e,i.lookRight(.05*n),i.lookUp(.05*r));var o=d.cartesianToCartographic(i.position).height/1e3*u._rate,a=.001*u._rate,s=1e-5*u._rate,l=.001*u._rate;c.rotateDown&&i.rotateDown(s),c.rotateUp&&i.rotateUp(s),c.moveUp&&i.moveUp(o),c.moveDown&&i.moveDown(o),c.moveLeft&&i.moveLeft(o),c.moveRight&&i.moveRight(o),c.rotateLeft&&i.rotateLeft(s),c.moveForward&&i.moveForward(o),c.rotateRight&&i.rotateRight(s),c.twistLeft&&i.twistLeft(a),c.moveBackward&&i.moveBackward(o),c.twistRight&&i.twistRight(a),c.lookLeft&&i.lookLeft(l),c.lookUp&&i.lookUp(l),c.lookRight&&i.lookRight(l),c.lookDown&&i.lookDown(l)},this._viewer.clock.onTick.addEventListener(this._timeListener)},a.prototype.stop=function(){var t=this._viewer.scene;t.screenSpaceCameraController.enableRotate=!0,t.screenSpaceCameraController.enableTranslate=!0,t.screenSpaceCameraController.enableZoom=!0,t.screenSpaceCameraController.enableTilt=!0,t.screenSpaceCameraController.enableLook=!0,this._timeListener&&this._viewer.clock.onTick.removeEventListener(this._timeListener),this._handler.removeInputAction(r.ScreenSpaceEventType.LEFT_DOWN),this._handler.removeInputAction(r.ScreenSpaceEventType.MOUSE_MOVE),this._handler.removeInputAction(r.ScreenSpaceEventType.LEFT_UP),document.removeEventListener("keydown",this._keydownListener),document.removeEventListener("keyup",this._keyupListener)},a);function a(t,e){if(this._rate=0,this.flags={looking:!1,rotateDown:!1,rotateUp:!1,moveUp:!1,moveDown:!1,moveLeft:!1,moveRight:!1,rotateLeft:!1,moveForward:!1,rotateRight:!1,twistLeft:!1,moveBackward:!1,twistRight:!1,lookLeft:!1,lookUp:!1,lookRight:!1,lookDown:!1},!i.isObject(e))throw new TypeError("error: RoamingByKeyboard. The options is not a Object.");this._viewer=t._viewer;var n=e||{};this._rate=n.rate,this.start()}e.default=o},function(t,e,n){"use strict";var c=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{o(l.next(t))}catch(t){e(t)}}function i(t){try{o(l.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((l=l.apply(t,a||[])).next())})},f=this&&this.__generator||function(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var d=n(8),r=n(142),i=n(28),o=n(12),a=n(22),s=n(11),l=(u.prototype.draw=function(){var t=this;this._viewer.entities.remove(this._entityPolyline),this._entityFly&&(this._entityFly.show=!1),this._entityPolyline=void 0,this._draw3DObj=null,this._viewer.trackedEntity=void 0,this._drawPolyline&&this._drawPolyline.finish(),this._drawPolyline=new r.default(this._earth),this._drawPolyline.start(),this._drawPolyline._drawGeometry.drawMode=i.default.ADD,this._drawPolyline._drawGeometry._endAdd=function(){t._drawPolyline._drawGeometry.selectedEntity.positions.pop(),t._drawPolyline._drawGeometry.selectedEntity.positions.pop(),t.drawFly3DPaths(),t.start()}},u.prototype.pause=function(){this.pauseFly3DPaths()},u.prototype.playForward=function(){this.playForwardFly3DPaths()},u.prototype.playReverse=function(){this.playReverseFly3DPaths()},u.prototype.stop=function(){this.stopFly3DPaths()},u.prototype.start=function(){if(!d.defined(this._drawPolyline&&this._drawPolyline._drawGeometry.selectedEntity))throw new TypeError("error: RoamingByPath. The polyline is not draw.");this._drawPolyline._drawGeometry.drawMode=i.default.NONE,this.showFly3DPaths(this._draw3DObj)},u.prototype.clearFly3DPaths=function(){this._drawPolyline&&this._drawPolyline._drawGeometry.drawMode===i.default.NONE&&(this._viewer.entities.remove(this._drawPolyline._drawGeometry.selectedEntity.value),this._drawPolyline._drawGeometry.destory())},u.prototype.showFly3DPaths=function(u){var t=this;this.clearFly3DPaths(),setTimeout(function(){e()},200);var e=function(){return c(t,void 0,void 0,function(){var e,p,n,r,i,o,h,a,s,l=this;return f(this,function(t){switch(t.label){case 0:if(!u||!u.geometry)return[3,2];if(e=u.geometry.coordinates,p=[],!(0<e.length))return[2];for(n=0;n<e.length;n++)r=e[n][0],i=e[n][1],p.push({x:r,y:i});return o=function(){return c(l,void 0,void 0,function(){var e,n,r,i,o,a,s,l,u,c;return f(this,function(t){switch(t.label){case 0:e=new d.SampledPositionProperty,n=0,t.label=1;case 1:return n<p.length?(r=void 0,0!=n?[3,5]:(c=d.JulianDate.addSeconds(h,n,new d.JulianDate),this._clampToGround?[4,d.sampleTerrain(this._earth._viewer.terrainProvider,11,[d.Cartographic.fromDegrees(p[n].x,p[n].y)])]:[3,3])):[3,10];case 2:return o=t.sent(),r=d.Cartesian3.fromDegrees(p[n].x,p[n].y,o[0].height),[3,4];case 3:r=d.Cartesian3.fromDegrees(p[n].x,p[n].y,this._height),t.label=4;case 4:return e.addSample(c,r),[3,9];case 5:return n<1e4&&0<n?(i=new d.Cartesian3(e._property._values[3*n-3],e._property._values[3*n-2],e._property._values[3*n-1]),this._clampToGround?[4,d.sampleTerrain(this._earth._viewer.terrainProvider,11,[d.Cartographic.fromDegrees(p[n].x,p[n].y)])]:[3,7]):[3,9];case 6:return o=t.sent(),r=d.Cartesian3.fromDegrees(p[n].x,p[n].y,o[0].height),[3,8];case 7:r=d.Cartesian3.fromDegrees(p[n].x,p[n].y,this._height),t.label=8;case 8:a=[d.Ellipsoid.WGS84.cartesianToCartographic(i),d.Ellipsoid.WGS84.cartesianToCartographic(r)],s=new d.EllipsoidGeodesic(a[0],a[1]),l=s.surfaceDistance,u=l/50,c=d.JulianDate.addSeconds(e._property._times[n-1],u,new d.JulianDate),e.addSample(c,r),t.label=9;case 9:return n++,[3,1];case 10:return[2,e]}})})},h=d.JulianDate.fromDate(new Date),a=d.JulianDate.addSeconds(h,3e5,new d.JulianDate),this._viewer.clock.startTime=h.clone(),this._viewer.clock.stopTime=a.clone(),this._viewer.clock.currentTime=h.clone(),this._viewer.clock.clockRange=d.ClockRange.UNBOUNDED,this._viewer.clock.clockStep=d.ClockStep.SYSTEM_CLOCK_MULTIPLIER,this._viewer.clock.canAnimate=!1,this._viewer.clock.shouldAnimate=!0,this._viewer.clock.multiplier=this._multiplier,[4,o()];case 1:return s=t.sent(),d.defined(this._entityPolyline)||(this._objType=this._obj.type,""!==this._obj?(this._copy=d.clone(this._obj.value),this._entityFly=this._obj.value):this._entityFly=this._viewer.entities.add({point:{color:d.Color.YELLOW.withAlpha(.01),pixelSize:.01,heightReference:d.HeightReference.CLAMP_TO_GROUND}}),this.switchType(),this._entityFly.availability=new d.TimeIntervalCollection([new d.TimeInterval({start:h,stop:a})]),this._entityFly.position=s,this._entityFly.orientation=new d.VelocityOrientationProperty(s),this._entityFly.show=!0,this._entityPolyline=this._viewer.entities.add({polyline:{positions:new d.CallbackProperty(function(t,e){var n=s.getValue(t,new d.Cartesian3);return n&&e.push(n),e},!1),width:5,material:new d.PolylineGlowMaterialProperty({color:this._polylineShow?d.Color.YELLOW.withAlpha(1):d.Color.YELLOW.withAlpha(0),glowPower:.4}),clampToGround:this._clampToGround}})),this.changePerspective(),[3,3];case 2:case 3:return[2]}})})}},u.prototype.switchType=function(){var t=this._clampToGround?d.HeightReference.CLAMP_TO_GROUND:d.HeightReference.NONE;this._objType===s.default.POLYLINE?this._entityFly.polyline.clampToGround=this.clampToGround:d.defined(this._objType)?this._entityFly[this._objType].heightReference=t:this._entityFly.point.heightReference=t},u.prototype.changePerspective=function(){var n=this;this._lockPerspective?(this._viewer.trackedEntity=void 0,this._timeListener=function(){n.getModelMatrix(n._entityFly,n._viewer.clock.currentTime,n._scratch);var t=n._followedX,e=n._followedZ;n._viewer.scene.camera.lookAtTransform(n._scratch,new d.Cartesian3(-t,0,e))},this._viewer.clock.onTick.addEventListener(this._timeListener)):(this._timeListener&&this._viewer.clock.onTick.removeEventListener(this._timeListener),this._viewer.trackedEntity=this._entityFly)},u.prototype.getModelMatrix=function(t,e,n){var r=d.Property.getValueOrUndefined(t.position,e,new d.Cartesian3);if(d.defined(r)){var i=d.Property.getValueOrUndefined(t.orientation,e,new d.Quaternion);return n=d.defined(i)?d.Matrix4.fromRotationTranslation(d.Matrix3.fromQuaternion(i,this._matrix3Scratch),r,n):d.Transforms.eastNorthUpToFixedFrame(r,void 0,n)}},u.prototype.pauseFly3DPaths=function(){var t=this._viewer.clockViewModel;t.shouldAnimate?t.shouldAnimate=!1:this._viewer.clockViewModel.canAnimate&&(t.shouldAnimate=!0)},u.prototype.playForwardFly3DPaths=function(){var t=this._viewer.clockViewModel,e=t.multiplier;e<0&&(t.multiplier=-e),t.shouldAnimate=!0},u.prototype.playReverseFly3DPaths=function(){var t=this._viewer.clockViewModel,e=t.multiplier;0<e&&(t.multiplier=-e),t.shouldAnimate=!0},u.prototype.drawFly3DPaths=function(){this.clearFly3DPaths();var t=this._drawPolyline._drawGeometry.selectedEntity.positions.map(function(t){return[t[0],t[1]]}),e=this._viewer.camera.position,n=this._viewer.camera.heading,r=this._viewer.camera.pitch,i=this._viewer.camera.roll;this._draw3DObj={orientation:{heading:n,pitch:r,roll:i},position:{x:e.x,y:e.y,z:e.z},geometry:{type:"LineString",coordinates:t}}},u.prototype.stopFly3DPaths=function(){var t=d.JulianDate.fromDate(new Date);this._viewer.clock.startTime=t.clone();var e=d.JulianDate.addSeconds(t,3e8,new d.JulianDate);this._viewer.clock.stopTime=e.clone(),this._viewer.entities.remove(this._entityFly),this._viewer.entities.remove(this._entityPolyline),this._entityFly=void 0,this._entityPolyline=void 0,this._draw3DObj=null,this._timeListener&&this._viewer.clock.onTick.removeEventListener(this._timeListener),this._viewer.trackedEntity=void 0,this._viewer.scene.camera.lookAtTransform(d.Matrix4.IDENTITY),this.clearFly3DPaths(),this._viewer.clockViewModel.multiplier=1,this._viewer.clock.shouldAnimate=!1,this._drawPolyline&&this._drawPolyline.finish()},Object.defineProperty(u.prototype,"obj",{get:function(){return this._obj},set:function(t){if(this._obj=t,!d.defined(this._entityFly))throw new TypeError("error: RoamingByPath. The polyline is not draw.");this._entityFly[this._objType]=void 0,this._objType=t.type,d.defined(this._objType)?this._copy._type===this._objType?this._entityFly[this._objType]=this._copy[this._objType]:this._entityFly[this._objType]=t.value[this._objType]:this._entityFly.point={color:d.Color.YELLOW.withAlpha(.01),pixelSize:.01,heightReference:d.HeightReference.CLAMP_TO_GROUND},this.switchType()},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"multiplier",{get:function(){return this._multiplier},set:function(t){this._multiplier=t,this._viewer.clockViewModel.multiplier=t},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"lockPerspective",{get:function(){return this._lockPerspective},set:function(t){this._lockPerspective=t,this.changePerspective()},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"followedX",{get:function(){return this._followedX},set:function(t){this._followedX=t,this.changePerspective()},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"followedZ",{get:function(){return this._followedZ},set:function(t){this._followedZ=t,this.changePerspective()},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"clampToGround",{get:function(){return this._clampToGround},set:function(t){if(this._clampToGround=t,!d.defined(this._entityFly))throw new TypeError("error: RoamingByPath. The polyline is not draw.");this.switchType(),this._entityPolyline.polyline.clampToGround=t},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"height",{get:function(){return this._height},set:function(t){if(this._height=t,!d.defined(this._entityFly))throw new TypeError("error: RoamingByPath. The polyline is not draw.");for(var e,n,r=this._entityFly.position._property._values,i=[],o=0;o<r.length;o++){(o+1)%3==0&&(e=a.default.cartesianToDegrees(new d.Cartesian3(r[o-2],r[o-1],r[o])),n=a.default.degreesToCartesian([e[0],e[1],t]),i.push(n.x,n.y,n.z))}this._entityFly.position._property._values=i},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"polylineShow",{get:function(){return this._polylineShow},set:function(t){this._polylineShow=t,this._entityPolyline.polyline.material.color._value.alpha=t?1:0},enumerable:!1,configurable:!0}),u);function u(t,e){if(this._draw3DObj=null,this._drawPolyline=null,this._matrix3Scratch=new d.Matrix3,this._scratch=new d.Matrix4,this._multiplier=.6,this._lockPerspective=!1,this._followedX=500,this._followedZ=100,this._clampToGround=!0,this._height=100,!o.isObject(e))throw new TypeError("error: RoamingByPath. The options is not a Object.");this._earth=t,this._viewer=t._viewer;var n=e||{};this._obj=n.obj,this._multiplier=n.multiplier,this._lockPerspective=n.lockPerspective,this._followedX=n.followedX,this._followedZ=n.followedZ,this._clampToGround=n.clampToGround,this._height=n.height,this._polylineShow=n.polylineShow}e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(112);e.default=function(t){var e=r.SceneMode.SCENE3D;switch(t){case i.default.SCENE3D:e=r.SceneMode.SCENE3D;break;case i.default.PLANAR3D:e=r.SceneMode.COLUMBUS_VIEW;break;case i.default.SCENE2D:e=r.SceneMode.SCENE2D}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(219),i=(o.prototype.add=function(t){switch(t._type){case r.default.FOG:this._fog=t,this._fog.add(this._viewer);break;case r.default.RAIN:this._rain=t,this._rain.add(this._viewer);break;case r.default.SNOW:this._snow=t,this._snow.add(this._viewer);break;case r.default.WIND:this._wind=t,this._wind.add(this._viewer)}},o.prototype.remove=function(t){switch(t._type){case r.default.FOG:this._fog.destroy();break;case r.default.RAIN:this._rain.destroy();break;case r.default.SNOW:this._snow.destroy();break;case r.default.WIND:this._wind.destroy()}},o.prototype.isDestroyed=function(t){var e;switch(t._type){case r.default.FOG:e=this._fog.isDestroyed();break;case r.default.RAIN:e=this._rain.isDestroyed();break;case r.default.SNOW:e=this._snow.isDestroyed();break;case r.default.WIND:e=this._wind.isDestroyed()}return e},o);function o(t){this._viewer=t}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(45),a=n(143),i=(o.prototype.add=function(e){var t=e._collection;this._group.add(t);e.clickInteractionEvent=this._earth.interaction.bind(a.default.CLICK,function(t){e.onClick.raiseEvent(t)},{enabled:e.clickEnabled,target:t}),e.doubleClickInteractionEvent=this._earth.interaction.bind(a.default.DOUBLE_CLICK,function(t){e.onDoubleClick.raiseEvent(t)},{enabled:e.doubleClickEnabled,target:t}),e.hoverInteractionEvent=this._earth.interaction.bind(a.default.HOVER,function(t){e.onHover.raiseEvent(t)},{enabled:e.hoverEnabled,target:t}),this._clickInteractionEvents.push(e.clickInteractionEvent),this._doubleClickInteractionEvents.push(e.doubleClickInteractionEvent),this._hoverInteractionEvents.push(e.hoverInteractionEvent),this._layers.push(e)},o.prototype.remove=function(t){var e=this._clickInteractionEvents.indexOf(t.clickInteractionEvent);-1<e&&this._clickInteractionEvents.splice(e,1);var n=this._doubleClickInteractionEvents.indexOf(t.doubleClickInteractionEvent);-1<n&&this._doubleClickInteractionEvents.splice(n,1);var r=this._hoverInteractionEvents.indexOf(t.hoverInteractionEvent);-1<r&&this._hoverInteractionEvents.splice(r,1);var i=this._layers.indexOf(t);-1<i&&this._layers.splice(i,1),this._earth.interaction.unbind(a.default.CLICK,t.clickInteractionEvent),this._earth.interaction.unbind(a.default.DOUBLE_CLICK,t.doubleClickInteractionEvent),this._earth.interaction.unbind(a.default.HOVER,t.hoverInteractionEvent);var o=t._collection;this._group.remove(o),t.destory()},o.prototype.removeAll=function(){var e=this;this._clickInteractionEvents.forEach(function(t){e._earth.interaction.unbind(a.default.CLICK,t)}),this._doubleClickInteractionEvents.forEach(function(t){e._earth.interaction.unbind(a.default.DOUBLE_CLICK,t)}),this._hoverInteractionEvents.forEach(function(t){e._earth.interaction.unbind(a.default.HOVER,t)}),this._layers.forEach(function(t){t.destory()}),this._clickInteractionEvents=[],this._doubleClickInteractionEvents=[],this._hoverInteractionEvents=[],this._layers=[],this._group.removeAll()},Object.defineProperty(o.prototype,"length",{get:function(){return this._group.children.length},enumerable:!1,configurable:!0}),o);function o(t){this._clickInteractionEvents=[],this._doubleClickInteractionEvents=[],this._hoverInteractionEvents=[],this._layers=[],this._earth=t,this._group=t.sceneTree.add({id:"layers",type:r.default.GROUP,name:"layers",children:[]})}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(i.prototype.createInstance=function(t,e){var n=t.prototype.constructor.name,r=this._collection.get(n);if(r)return r;var i=new t(this._earth,e);return this._collection.set(n,i),i},i);function i(t){this._collection=new Map,this._earth=t}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(143),r=n(334),o=n(336),a=n(337),s=(l.prototype.bind=function(t,e,n){var r=n||{};switch(r.callback=e,t){case i.default.CLICK:return this._click.add(r);case i.default.DOUBLE_CLICK:return this._doubleClick.add(r);case i.default.HOVER:return this._hover.add(r)}},l.prototype.unbind=function(t,e){switch(t){case i.default.CLICK:this._click.remove(e);break;case i.default.DOUBLE_CLICK:this._doubleClick.remove(e);break;case i.default.HOVER:this._hover.remove(e)}},l);function l(t){this._earth=t,this._click=new r.default(t),this._doubleClick=new o.default(t),this._hover=new a.default(t)}e.default=s},function(t,e,n){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),l=n(22),o=n(12),a=n(144),u=n(145),c=n(16),i=(p.prototype.add=function(t){if(o.isObject(t)&&o.isFunction(t.callback)){0===this._collection.length&&this._onLeftClick(this._eventHandler);var e=t.callback,n=!o.isBoolean(t.enabled)||t.enabled,r=t.target||this._earth.sceneTree,i=new a.default({callback:e,enabled:n,target:r});return this._collection.push(i),i}},p.prototype.remove=function(e){var t=this._collection.findIndex(function(t){return t===e});this._collection.splice(t,1),0===this._collection.length&&this._eventHandler.removeInputAction(r.ScreenSpaceEventType.LEFT_CLICK)},p.prototype.destroy=function(){this.isDestroyed()||(this._eventHandler=this._eventHandler.destroy())},p.prototype.isDestroyed=function(){return!(this._eventHandler&&!this._eventHandler.isDestroyed())},p.prototype._onLeftClick=function(t){var n=this;t.setInputAction(function(t){var i=n._earth.getViewer().scene.pick(t.position),e=n._earth.pickGloble(t.position),o=void 0;e&&(o=l.default.cartesianToDegrees(e));var a={x:t.position.x,y:t.position.y};n._collection.forEach(function(t){var e,n,r;t.enabled&&(i?(e=t.target.getNodeByPicked(i,!0))?(n=u.getInfoFromPicked(e.value.type,i),r=e.value.class===c.default.PRIMITIVE_COLLECTION?e.value.getPrimitiveOptions?e.value.getPrimitiveOptions(i.primitive):null:e.value,t.callback(s(s({object:r,coordinate:o,screenCoordinate:a},n),{picked:i}))):t.callback({object:e,coordinate:o,screenCoordinate:a}):t.callback({object:null,coordinate:o,screenCoordinate:a}))})},r.ScreenSpaceEventType.LEFT_CLICK)},p);function p(t){this._earth=t,this.isDestroyed()&&(this._eventHandler=new r.ScreenSpaceEventHandler(this._earth.getViewer().scene.canvas),this._collection=new Array)}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(i.prototype.getJsonSchema=function(){return{type:"object",properties:{id:{type:typeof this._feature.id},name:{type:typeof this._feature.name}}}},i.prototype.getProperties=function(){return{id:this._feature.id,name:this._feature.name}},i);function i(t){this._feature=t}e.default=r},function(t,e,n){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),l=n(22),o=n(12),a=n(144),u=n(145),c=n(16),i=(p.prototype.add=function(t){if(o.isObject(t)&&o.isFunction(t.callback)){0===this._collection.length&&this._onDoubleLeftClick(this._eventHandler);var e=t.callback,n=!o.isBoolean(t.enabled)||t.enabled,r=t.target||this._earth.sceneTree,i=new a.default({callback:e,enabled:n,target:r});return this._collection.push(i),i}},p.prototype.remove=function(e){var t=this._collection.findIndex(function(t){return t===e});this._collection.splice(t,1),0===this._collection.length&&this._eventHandler.removeInputAction(r.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},p.prototype.destroy=function(){this.isDestroyed()||(this._eventHandler=this._eventHandler.destroy())},p.prototype.isDestroyed=function(){return!(this._eventHandler&&!this._eventHandler.isDestroyed())},p.prototype._onDoubleLeftClick=function(t){var n=this;t.setInputAction(function(t){var i=n._earth.getViewer().scene.pick(t.position),e=n._earth.pickGloble(t.position),o=void 0;e&&(o=l.default.cartesianToDegrees(e));var a={x:t.position.x,y:t.position.y};n._collection.forEach(function(t){var e,n,r;t.enabled&&(i?(e=t.target.getNodeByPicked(i,!1))?(n=u.getInfoFromPicked(e.value.type,i),r=e.value.class===c.default.PRIMITIVE_COLLECTION?e.value.getPrimitiveOptions?e.value.getPrimitiveOptions(i.primitive):null:e.value,t.callback(s({object:r,coordinate:o,screenCoordinate:a},n))):t.callback({object:e,coordinate:o,screenCoordinate:a}):t.callback({object:null,coordinate:o,screenCoordinate:a}))})},r.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},p);function p(t){this._earth=t,this.isDestroyed()&&(this._eventHandler=new r.ScreenSpaceEventHandler(this._earth.getViewer().scene.canvas),this._collection=new Array)}e.default=i},function(t,e,n){"use strict";var l=this&&this.__assign||function(){return(l=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),a=n(12),s=n(144),u=n(22),c=n(145),p=n(16),h=n(112),i=(o.prototype.add=function(t){if(a.isObject(t)&&a.isFunction(t.callback)){0===this._collection.length&&(this._onMouseMove(),this._earth.sceneMode===h.default.SCENE3D&&(this._earth.camera.value.moveStart.addEventListener(this._setStartMoving,this),this._earth.camera.value.moveEnd.addEventListener(this._setStopMoving,this)));var e=t.callback,n=!a.isBoolean(t.enabled)||t.enabled,r=t.delay||50,i=t.target||this._earth.sceneTree,o=new s.default({callback:e,enabled:n,target:i,delay:r});return this._collection.push(o),o}},o.prototype.remove=function(e){var t=this._collection.findIndex(function(t){return t===e});this._collection.splice(t,1),0===this._collection.length&&(this._eventHandler.removeInputAction(r.ScreenSpaceEventType.MOUSE_MOVE),this._earth.sceneMode===h.default.SCENE3D&&(this._earth.camera.value.moveStart.removeEventListener(this._setStartMoving),this._earth.camera.value.moveEnd.removeEventListener(this._setStopMoving)))},o.prototype.destroy=function(){this.isDestroyed()||this._eventHandler.destroy()},o.prototype.isDestroyed=function(){return!(this._eventHandler&&!this._eventHandler.isDestroyed())},o.prototype._onMouseMove=function(){var n=this,s={};this._eventHandler.setInputAction(function(t){var i,e,o,a;n._moving||(i=n._earth.getViewer().scene.pick(t.endPosition),e=n._earth.pickGloble(t.endPosition),o=void 0,e&&(o=u.default.cartesianToDegrees(e)),a={x:t.endPosition.x,y:t.endPosition.y},n._collection.forEach(function(r,t){r.enabled&&(s[t]&&clearTimeout(s[t]),s[t]=setTimeout(function(){var t,e,n;i?(t=r.target.getNodeByPicked(i,!1))?(e=c.getInfoFromPicked(t,i),n=t.value.class===p.default.PRIMITIVE_COLLECTION?t.value.getPrimitiveOptions?t.value.getPrimitiveOptions(i.primitive):null:t.value,r.callback(l({object:n,coordinate:o,screenCoordinate:a},e))):r.callback({object:t,coordinate:o,screenCoordinate:a}):r.callback({object:null,coordinate:o,screenCoordinate:a})},r.delay))}))},r.ScreenSpaceEventType.MOUSE_MOVE)},o.prototype._setStartMoving=function(){this._moving=!0},o.prototype._setStopMoving=function(){this._moving=!1},o.prototype._changeMousePointer=function(t){},o);function o(t){this._moving=!1,this._earth=t,this.isDestroyed()&&(this._earth.sceneMode===h.default.SCENE3D&&(this._moving=!0),this._eventHandler=new r.ScreenSpaceEventHandler(this._earth.getViewer().scene.canvas),this._collection=new Array)}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),u=r.BoxGeometry,c=r.Cartesian3,i=r.defaultValue,p=r.defined,o=r.destroyObject,h=r.DeveloperError,f=r.GeometryPipeline,a=r.Matrix3,d=r.Matrix4,y=r.Transforms,g=r.VertexFormat,_=r.BufferUsage,m=r.CubeMap,s=r.DrawCommand,v=r.loadCubeMap,b=r.RenderState,w=r.VertexArray,x=r.BlendingState,C=r.SceneMode,E=r.ShaderProgram,P=r.ShaderSource;function l(t){this.sources=t.sources,this._sources=void 0,this.show=i(t.show,!0),this._command=new s({modelMatrix:d.clone(d.IDENTITY),owner:this}),this._cubeMap=void 0,this._attributeLocations=void 0,this._useHdr=void 0}p(d.getRotation)||(d.getRotation=d.getMatrix3);var O=new a;l.prototype.update=function(t,e){var n=this;if(this.show&&(t.mode===C.SCENE3D||t.mode===C.MORPHING)&&t.passes.render){var r=t.context;if(this._sources!==this.sources){this._sources=this.sources;var i=this.sources;if(!(p(i.positiveX)&&p(i.negativeX)&&p(i.positiveY)&&p(i.negativeY)&&p(i.positiveZ)&&p(i.negativeZ)))throw new h("this.sources is required and must have positiveX, negativeX, positiveY, negativeY, positiveZ, and negativeZ properties.");if(typeof i.positiveX!=typeof i.negativeX||typeof i.positiveX!=typeof i.positiveY||typeof i.positiveX!=typeof i.negativeY||typeof i.positiveX!=typeof i.positiveZ||typeof i.positiveX!=typeof i.negativeZ)throw new h("this.sources properties must all be the same type.");"string"==typeof i.positiveX?v(r,this._sources).then(function(t){n._cubeMap=n._cubeMap&&n._cubeMap.destroy(),n._cubeMap=t}):(this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),this._cubeMap=new m({context:r,source:i}))}var o,a,s,l=this._command;if(l.modelMatrix=y.eastNorthUpToFixedFrame(t.camera._positionWC),p(l.vertexArray)||(l.uniformMap={u_cubeMap:function(){return n._cubeMap},u_rotateMatrix:function(){return d.getRotation(l.modelMatrix,O)}},o=u.createGeometry(u.fromDimensions({dimensions:new c(2,2,2),vertexFormat:g.POSITION_ONLY})),a=this._attributeLocations=f.createAttributeLocations(o),l.vertexArray=w.fromGeometry({context:r,geometry:o,attributeLocations:a,bufferUsage:_._DRAW}),l.renderState=b.fromCache({blending:x.ALPHA_BLEND})),p(l.shaderProgram)&&this._useHdr===e||(s=new P({defines:[e?"HDR":""],sources:["uniform samplerCube u_cubeMap;\n  varying vec3 v_texCoord;\n  void main()\n  {\n  vec4 color = textureCube(u_cubeMap, normalize(v_texCoord));\n  gl_FragColor = vec4(czm_gammaCorrect(color).rgb, czm_morphTime);\n  }\n  "]}),l.shaderProgram=E.fromCache({context:r,vertexShaderSource:"attribute vec3 position;\n  varying vec3 v_texCoord;\n  uniform mat3 u_rotateMatrix;\n  void main()\n  {\n  vec3 p = czm_viewRotation * u_rotateMatrix * (czm_temeToPseudoFixed * (czm_entireFrustum.y * position));\n  gl_Position = czm_projection * vec4(p, 1.0);\n  v_texCoord = position.xyz;\n  }\n  ",fragmentShaderSource:s,attributeLocations:this._attributeLocations}),this._useHdr=e),p(this._cubeMap))return l}},l.prototype.isDestroyed=function(){return!1},l.prototype.destroy=function(){var t=this._command;return t.vertexArray=t.vertexArray&&t.vertexArray.destroy(),t.shaderProgram=t.shaderProgram&&t.shaderProgram.destroy(),this._cubeMap=this._cubeMap&&this._cubeMap.destroy(),o(this)},e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8);window.Cesium=r;var i=n(221),o=(a.prototype.update=function(t,e){this.mapvBaseLayer.updateData(t,e)},a.prototype.destory=function(){this.mapvBaseLayer.clearData()},a);function a(t,e,n){(new i.default).initMapv(),this.mapvBaseLayer=mapv.cesiumMapLayer(t.getViewer(),e,n).mapvBaseLayer}e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(341),i=(o.prototype.update=function(t){this.compositeView.updateOverlay(t)},o.prototype.destory=function(){return this.compositeView.dispose()},o);function o(t,e){this.compositeView=new r.default(t.getViewer(),e)}e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(342),i=n(221),o=(a.prototype._createChartOverlay=function(t,e){var n=e.offsetX||0,r=e.offsetY||0,i=document.createElement("div"),o=t.scene;return o.canvas.setAttribute("tabIndex",0),i.style.position="absolute",i.style.top=n+"px",i.style.left=r+"px",i.style.width=o.canvas.width+"px",i.style.height=o.canvas.height+"px",i.style.pointerEvents="none",i.setAttribute("id","echarts"),i.setAttribute("class","echartMap"),t.container.appendChild(i),echarts.glMap=o,this._echartsContainer=i,echarts.init(i)},a.prototype.updateOverlay=function(t){this._overlay&&this._overlay.setOption(t)},a.prototype.getMap=function(){return this._viewer},a.prototype.getOverlay=function(){return this._overlay},a.prototype.dispose=function(){var t=null;return this._echartsContainer&&(t=this._viewer.container.removeChild(this._echartsContainer),this._echartsContainer=null),this._overlay&&(this._overlay.dispose(),this._overlay=null),null!==t&&null===this._overlay},a);function a(t,e){var n=new i.default;n.initEcharts()&&n.initEchartsGl(),r.default(),this._viewer=t,this._overlay=this._createChartOverlay(this._viewer,e),this._overlay.setOption(e)}e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(343),i=n(344),o=n(345);e.default=function(){i.default(),o.default(),echarts.registerCoordinateSystem("GLMap",r.default),echarts.registerAction({type:"GLMapRoam",event:"GLMapRoam",update:"updateLayout"},function(){})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(8),r=(o.prototype.dimensions=["lng","lat"],o.prototype.setMapOffset=function(t){this._mapOffset=t},o.prototype.getBMap=function(){return this._GLMap},o.prototype.dataToPoint=function(t){var e=i.Cartesian3.fromDegrees(t[0],t[1]);if(!e)return[0,0];var n=this._GLMap.cartesianToCanvasCoordinates(e);if(!n)return[0,0];var r=this._mapOffset;return[n.x-r[0],n.y-r[1]]},o.prototype.pointToData=function(t){var e=this._mapOffset,n=this._bmap.project([t[0]+e[0],t[1]+e[1]]);return[n.lng,n.lat]},o.prototype.getViewRect=function(){var t=this._api;return new echarts.graphic.BoundingRect(0,0,t.getWidth(),t.getHeight())},o.prototype.getRoamTransform=function(){return echarts.matrix.create()},o.prototype.getRoamTransform=function(){return echarts.matrix.create()},o.dimensions=o.prototype.dimensions,o.create=function(t,n){var r;t.eachComponent("GLMap",function(t){n.getZr().painter.getViewportRoot();var e=echarts.glMap;(r=new o(e,n)).setMapOffset(t.__mapOffset||[0,0]),t.coordinateSystem=r}),t.eachSeries(function(t){"GLMap"===t.get("coordinateSystem")&&(t.coordinateSystem=r)})},o);function o(t,e){this._GLMap=t,this._api=e,this.dimensions=["lng","lat"],this._mapOffset=[0,0]}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(){return echarts.extendComponentModel({type:"GLMap",getBMap:function(){return this.__GLMap},defaultOption:{roam:!1}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(){return echarts.extendComponentView({type:"GLMap",moveHandler:function(t,e){this.api.dispatchAction({type:"GLMapRoam"})},init:function(t,e){this.api=e,echarts.glMap.postRender.addEventListener(this.moveHandler,this)},render:function(t,e,n){},dispose:function(t){echarts.glMap.postRender.removeEventListener(this.moveHandler,this)}})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(){return"%uD90A%uB74B%uDF67%CC%A1r%A6%D3%E6%DC%88@%u4E29%uCCFD%uD624%uCB33%uD276%uB263%uE35F%uDE65%u4F16%u7268%u7268%u674C%u674C%u5417%u5311%uFF4A%5E__%60g%3F%14%u7252%uD98B%uC033%uBEFE%u6528%uFF4B_Nx%CC%A1r%A6%D3%E6%DC%u72B0%uD98B%uC2CF%uACF4%uADC6%uAAEC%u4EAEG%u6794%uC54B%uBBBF%uB70A%uD2FA%uDC51%uC989%uFD59%uE7BC%uA564%u541FU8%14%3C%60Nx%CC%A1r%A6%D3%E6%DC%uFF74%u4E07%u9E50%u9D7F%u9CE4%uA346%uBBC6%uCEBE%uBEAC%uE79D%uEBFD%uA993%uA022%uB978%uB657%uC57A%uC8D1%uB61D%uB1DB%uB193%uCACB%uD37B%uBA7D%u9DC4%uC4A7%u7442%uFF24%14%3B%uFF3A%u4D16%uDDE8%u1827%uD747%u9E50%uAEB7%uBE71%uD593%uEEB8%u0217%uDE6F%uDD4D%uDB2B%u5176%u7917%uD89A%uB194%uAE91%uC100%uC489%uD43D%u7532%14%3C%uFF3B%u4EE6%uC536%uE0BD%uDDAC%uD98B%uB724%uB050%uB797%uBACF%uB5DD%uA626%uE383%uE18D%uB40B%uB0FD%u9EC9%uC536%uD152%uC75D%uDDAC%uD98B%uB724%uB050%uD6F3%uDD84%uE5C8%u08AB%u1BAD%uF90D%u67718%14%uD847%uB52E%u5D45%uFD4F%uF230%u0112%u8C17Z@Qipnnijogde%uFF3E%uD749%uB4A5%uFC75%uF84A%uB4F9%u5D10%uFD4F%uCBB5%u4EF4Z@%u5375%uD224%uF2D5"}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(11),s=n(16),l=n(8),u=n(19),c=n(20),p={type:{type:"string",value:a.default.COMPOSITE_APPEARANCE,readonly:!0},class:{type:"string",value:s.default.PRIMITIVE,readonly:!0},position:{type:"array",value:[-180,-90,180,90],convert:function(t){return new l.GeometryInstance({geometry:new l.RectangleGeometry({rectangle:l.Rectangle.fromDegrees(t[0],t[1],t[2],t[3]),vertexFormat:l.EllipsoidSurfaceAppearance.VERTEX_FORMAT})})},target:"geometryInstances"},appearance:{type:"string",value:null,convert:function(){return new l.EllipsoidSurfaceAppearance({material:new l.Material({fabric:{uniforms:{image:CESIUM_BASE_URL+"Assets/Images/material/earthspec1k.jpg",heightField:CESIUM_BASE_URL+"Assets/Images/material/earthbump1k.jpg"},materials:{bumpMap:{type:"BumpMap",uniforms:{image:CESIUM_BASE_URL+"Assets/Images/material/earthbump1k.jpg"}}},source:"czm_material czm_getMaterial(czm_materialInput materialInput) {\n                        czm_material material = czm_getDefaultMaterial(materialInput);\n                        vec4 color;\n                        float heightValue = texture2D(heightField, materialInput.st).r;\n                        color.rgb = mix(vec3(0.1, 0.2, 0.4), vec3(1.0, 1.0, 1.0), heightValue);\n                        color.a = (1.0 - texture2D(image, materialInput.st).r) * 0.7;\n                        color = czm_gammaCorrect(color);\n                        material.diffuse = color.rgb;\n                        if(color.a < 0.2) {\n                            material.alpha = 0.0;\n                        } else {\n                            material.alpha = 1.0;\n                        }\n                        material.normal = bumpMap.normal;\n                        material.specular = step(0.01, heightValue);\n                        material.shininess = 5.0;\n                        return material;\n                    }"}})})},target:"appearance"},show:{type:"boolean",value:!0},properties:{type:"object",value:{}}},h=(o=u.default,i(f,o),f);function f(t){var e=o.call(this)||this;try{o.prototype.fromJSON.call(e,t),c.definedProperties(e,p,t);var n=c.getPerOptions(e,p,t);e.value=new l.Primitive(n)}catch(t){}return e}e.default=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});function o(t){switch(t){case d.default.CENTER:return g.default.CENTER;case d.default.BOTTOM:return g.default.TOP;case d.default.TOP:return g.default.BOTTOM;default:return g.default.CENTER}}function a(t){switch(t){case f.default.CENTER:return _.default.CENTER;case f.default.LEFT:return _.default.RIGHT;case f.default.RIGHT:return _.default.LEFT;default:return _.default.CENTER}}var s,l=n(68),f=n(113),d=n(114),u=n(20),c=n(91),y=n(12),p=n(27),h=n(65),g=n(51),_=n(62),m=n(63),v={type:{type:"string",value:h.default.ICON_LAYER,readonly:!0},data:{type:"array",value:[],readonly:!0},position:{type:"function|string",value:null},image:{type:"function|string",value:null},pixelOffset:{type:"function|array",value:[0,0]},horizontalPosition:{type:"function|string",value:f.default.CENTER,convert:a,target:"horizontalOrigin"},verticalPosition:{type:"function|string",value:d.default.CENTER,convert:o,target:"verticalOrigin"},scale:{type:"function|number",value:1},color:{type:"function|string",value:"rgb(255,255,255)"},opacity:{type:"funtion|number",value:1},rotation:{type:"function|number",value:0},width:{type:"function|number",value:32},height:{type:"function|number",value:32},text:{type:"function|string",value:null},textFont:{type:"function|string",value:"12px Microsoft YaHei"},textFill:{type:"function|boolean",value:!0},textOutline:{type:"function|boolean",value:!0},textFillColor:{type:"function|string",value:"rgb(255,255,255)"},textOutlineColor:{type:"function|string",value:"rgb(0,0,0)"},textOutlineWidth:{type:"function|number",value:3},textPixelOffset:{type:"function|array",value:[0,0]},textHorizontalPosition:{type:"function|string",value:f.default.CENTER,convert:a,target:"textHorizontalOrigin"},textVerticalPosition:{type:"function|string",value:d.default.CENTER,convert:o,target:"textVerticalOrigin"}},b=Object.assign(p.default(l.default.defaultProps),v),w=(s=l.default,i(x,s),Object.defineProperty(x.prototype,"extent",{get:function(){var n=this,r=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE;return this.data.forEach(function(t){var e=y.isFunction(n._position)?n._position(t):n._position;e[0]<r&&(r=e[0]),e[0]>i&&(i=e[0]),e[1]<o&&(o=e[1]),e[1]>a&&(a=e[1])}),new m.default(r,o,i,a)},enumerable:!1,configurable:!0}),x.prototype.add=function(t){if(!y.isObject(t))return!1;this._data.push(t);var e=u.getPerOptions(this,b,t);e.textPixelOffset=this._resetTextPixelOffset(t),e.properties=t;var n=new c.default(e);return this._collection.add(n),!0},x.prototype.remove=function(e){if(!y.isObject(e))return!1;var t=this._data.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)}),n=this._collection.children[t];return this._collection.remove(n),this._data.splice(t,1),!0},x.prototype.setData=function(t){var e=this;y.isArray(t)&&(this._collection.removeAll(),this._data=[],t.forEach(function(t){e.add(t)}))},x.prototype._resetTextPixelOffset=function(t){return function(t){var e=t.data,n=y.isFunction(t.pixelOffset)?t.pixelOffset(e):t.pixelOffset,r=y.isFunction(t.horizontalPosition)?t.horizontalPosition(e):t.horizontalPosition,i=y.isFunction(t.verticalPosition)?t.verticalPosition(e):t.verticalPosition,o=y.isFunction(t.textPixelOffset)?t.textPixelOffset(e):t.textPixelOffset,a=y.isFunction(t.textHorizontalPosition)?t.textHorizontalPosition(e):t.textHorizontalPosition,s=y.isFunction(t.textVerticalPosition)?t.textVerticalPosition(e):t.textVerticalPosition,l=y.isFunction(t.width)?t.width(e):t.width,u=y.isFunction(t.height)?t.height(e):t.height,c=y.isFunction(t.scale)?t.scale(e):t.scale,p=0,h=0;switch(p+=n[0],h+=n[1],r){case f.default.CENTER:break;case f.default.LEFT:p-=Math.round(l*c/2);break;case f.default.RIGHT:p+=Math.round(l*c/2)}switch(i){case d.default.CENTER:break;case d.default.TOP:h-=Math.round(u*c/2);break;case d.default.BOTTOM:h+=Math.round(u*c/2)}switch(a){case f.default.CENTER:break;case f.default.LEFT:p-=Math.round(l*c*.7);break;case f.default.RIGHT:p+=Math.round(l*c*.7)}switch(s){case d.default.CENTER:break;case d.default.TOP:h-=Math.round(u*c*.7);break;case d.default.BOTTOM:h+=Math.round(u*c*.7)}return[o[0]+p,o[1]+h]}({data:t,pixelOffset:this.pixelOffset,horizontalPosition:this.horizontalPosition,verticalPosition:this.verticalPosition,textPixelOffset:this.textPixelOffset,textHorizontalPosition:this.textHorizontalPosition,textVerticalPosition:this.textVerticalPosition,width:this.width,height:this.height,scale:this.scale})},x);function x(t){var l=s.call(this,t)||this;try{if(!y.isObject(t))throw"error: IconLayer.The options is not a Object.";u.definedProperties(l,b,t,function(t){var i=t.name,o=t.value,a=t.convert,s=t.target;l._collection.children.forEach(function(t,e){var n,r=y.isFunction(o)?o(l.data[e]):o;"textPixelOffset"!==i&&(n=s||i,t.value[n]=a?a(r):r),"pixelOffset"!==i&&"horizontalPosition"!==i&&"verticalPosition"!==i&&"textPixelOffset"!==i&&"textHorizontalPosition"!==i&&"textVerticalPosition"!==i&&"width"!==i&&"height"!==i&&"scale"!==i||(t.value.textPixelOffset=l._resetTextPixelOffset(l.data[e]))})}),l.data.forEach(function(t){var e=u.getPerOptions(l,b,t);e.textPixelOffset=l._resetTextPixelOffset(t),e.properties=t;var n=new c.default(e);l._collection.add(n)})}catch(t){}return l}w.defaultProps=b,e.default=w},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(68),s=n(132),l=n(27),u=n(12),c=n(20),p=n(106),h=n(107),f=n(108),d=n(65),y=n(8),g=n(91),_=n(109),m=n(110),v={type:{type:"string",value:d.default.GEOJSON_LAYER,readonly:!0},data:{type:"string",value:null,readonly:!0},opacity:{type:"number",value:1},styles:{type:"object",value:{}}},b=Object.assign(l.default(a.default.defaultProps),v),w=(o=a.default,i(x,o),Object.defineProperty(x.prototype,"onLoaded",{get:function(){return this._onLoaded},enumerable:!1,configurable:!0}),Object.defineProperty(x.prototype,"extent",{get:function(){return this._value.extent},enumerable:!1,configurable:!0}),x.prototype.setData=function(t){u.isString(t)&&(this._collection.removeAll(),this._data=t,this._loadGeoJson(!0))},x.prototype.destory=function(){var t,e;o.prototype.destory.call(this),null!==(e=null===(t=this._value)||void 0===t?void 0:t.request)&&void 0!==e&&e.cancelFunction&&this._value.request.cancelFunction()},x);function x(t){var r=o.call(this,t)||this;r._loadGeoJson=function(e){var t=new s.default({url:r._data,styles:r._styles,show:r._show});r._value=t;function n(t){t.children.forEach(function(t){r._collection.add(t)}),e||r._onLoaded.raiseEvent(r)}u.isObject(r._data)?n(t):t.onLoaded.addEventListener(function(t){n(t)})};try{if(!u.isObject(t))throw"error: GeoJsonLayer. The options is not a Object.";if(!t.data)throw"error: GeoJsonLayer. The options of data is not defined.";c.definedProperties(r,b,t,function(t){var e=t.name,n=t.value;y.defined(r.styles.point[e])&&(r.styles.point[e]=n),y.defined(r.styles.polyline[e])&&(r.styles.polyline[e]=n),y.defined(r.styles.polygon[e])&&(r.styles.polygon[e]=n),y.defined(r.styles.billboard[e])&&(r.styles.billboard[e]=n),y.defined(r.styles.model[e])&&(r.styles.model[e]=n),y.defined(r.styles.label[e])&&(r.styles.label[e]=n)}),r._styles.point&&C(r._collection,r._styles.point,p.default),r._styles.polyline&&C(r._collection,r._styles.polyline,h.default),r._styles.polygon&&C(r._collection,r._styles.polygon,f.default),r._styles.billboard&&C(r._collection,r._styles.billboard,g.default),r._styles.model&&C(r._collection,r._styles.model,_.default),r._styles.label&&C(r._collection,r._styles.label,m.default),r._onLoaded=new y.Event,r._loadGeoJson(!1)}catch(t){}return r}var C=function(s,t,l){c.definedProperties(t,l.defaultProps,t,function(t){for(var e=t.name,n=t.value,r=0,i=s.length;r<i;r++){var o,a=s.get(r);a instanceof l&&(u.isFunction(n)?(o=n(a.properties),a[e]=o):a[e]=n)}})};w.defaultProps=b,e.default=w},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(68),s=n(65),l=n(12),u=n(20),c=n(27),p=n(137),h=n(63),f={type:{type:"string",value:s.default.ICON_LAYER,readonly:!0},data:{type:"array",value:[],readonly:!0},position:{type:"function|array",value:null},pixelSize:{type:"function|number",value:1},color:{type:"function|string",value:"rgb(255,255,255)"},opacity:{type:"number",value:1},outlineColor:{type:"function|string",value:"rgb(0,0,0)"},outlineWidth:{type:"function|number",value:0}},d=Object.assign(c.default(a.default.defaultProps),f),y=(o=a.default,i(g,o),Object.defineProperty(g.prototype,"extent",{get:function(){var n=this,r=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE;return this.data.forEach(function(t){var e=l.isFunction(n._position)?n._position(t):n._position;e[0]<r&&(r=e[0]),e[0]>i&&(i=e[0]),e[1]<o&&(o=e[1]),e[1]>a&&(a=e[1])}),new h.default(r,o,i,a)},enumerable:!1,configurable:!0}),g.prototype.add=function(t){return!!l.isObject(t)&&(this._data.push(t),this._collection.get(0).add(t),!0)},g.prototype.remove=function(e){if(!l.isObject(e))return!1;var t=this._data.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)});return this._collection.get(0).remove(e),this._data.splice(t,1),!0},g.prototype.setData=function(t){var e=this;l.isArray(t)&&(this._collection.get(0).removeAll(),this._data=[],t.forEach(function(t){e.add(t)}))},g);function g(t){var r=o.call(this,t)||this;try{if(!l.isObject(t))throw"error: IconLayer.The options is not a Object.";u.definedProperties(r,d,t,function(t){var e=t.name,n=t.value;r._collection.get(0)[e]=n});var e=new p.default({data:r.data,position:r.position,pixelSize:r.pixelSize,color:r.color,outlineColor:r.outlineColor,outlineWidth:r.outlineWidth,show:r.show,opacity:r.opacity,showByDistance:r.showByDistance});r._collection.add(e)}catch(t){}return r}e.default=y},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(65),s=n(62),l=n(51),u=n(113),c=n(114),p=n(27),h=n(68),f=n(138),d=n(12),y=n(20),g=n(63),_={type:{type:"string",value:a.default.DYNAMIC_LAYER,readonly:!0},data:{type:"array",value:[],readonly:!0},position:{type:"function|array",value:null},animate:{type:"function|boolean",value:!1},minScale:{type:"function|number",value:.8},maxScale:{type:"function|number",value:1.2},duration:{type:"function|number",value:2e3},delay:{type:"number",value:2e3},pixelSize:{type:"function|number",value:15},color:{type:"function|string",value:"rgb(255,255,255)"},opacity:{type:"function|number",value:1},outlineColor:{type:"function|string",value:"rgb(0,0,0)"},outlineWidth:{type:"function|number",value:0},text:{type:"function|string",value:null},textFont:{type:"function|string",value:"12px Microsoft YaHei"},textFill:{type:"function|boolean",value:!0},textOutline:{type:"function|boolean",value:!0},textFillColor:{type:"function|string",value:"rgb(255,255,255)"},textOutlineColor:{type:"function|string",value:"rgb(0,0,0)"},textOutlineWidth:{type:"function|number",value:3},textPixelOffset:{type:"function|array",value:[0,0]},textHorizontalPosition:{type:"function|string",value:u.default.CENTER,convert:function(t){switch(t){case u.default.CENTER:return s.default.CENTER;case u.default.LEFT:return s.default.RIGHT;case u.default.RIGHT:return s.default.LEFT;default:return s.default.CENTER}},target:"textHorizontalOrigin"},textVerticalPosition:{type:"function|string",value:c.default.CENTER,convert:function(t){switch(t){case c.default.CENTER:return l.default.CENTER;case c.default.BOTTOM:return l.default.TOP;case c.default.TOP:return l.default.BOTTOM;default:return l.default.CENTER}},target:"textVerticalOrigin"}},m=Object.assign(p.default(h.default.defaultProps),_),v=(o=h.default,i(b,o),Object.defineProperty(b.prototype,"extent",{get:function(){var n=this,r=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE;return this.data.forEach(function(t){var e=d.isFunction(n._position)?n._position(t):n._position;e[0]<r&&(r=e[0]),e[0]>i&&(i=e[0]),e[1]<o&&(o=e[1]),e[1]>a&&(a=e[1])}),new g.default(r,o,i,a)},enumerable:!1,configurable:!0}),b.prototype.add=function(t){if(!d.isObject(t))return!1;this._data.push(t);var e=y.getPerOptions(this,m,t);e.textPixelOffset=this._resetTextPixelOffset(t),e.properties=t;var n=new f.default(e);return this._collection.add(n),!0},b.prototype.remove=function(e){if(!d.isObject(e))return!1;var t=this._data.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)}),n=this._collection.children[t];return this._collection.remove(n),this._data.splice(t,1),!0},b.prototype.setData=function(t){var e=this;d.isArray(t)&&(this._collection.removeAll(),this._data=[],t.forEach(function(t){e.add(t)}))},b.prototype._resetTextPixelOffset=function(t){return function(t){var e=t.data,n=d.isFunction(t.textPixelOffset)?t.textPixelOffset(e):t.textPixelOffset,r=d.isFunction(t.textHorizontalPosition)?t.textHorizontalPosition(e):t.textHorizontalPosition,i=d.isFunction(t.textVerticalPosition)?t.textVerticalPosition(e):t.textVerticalPosition,o=d.isFunction(t.pixelSize)?t.pixelSize(e):t.pixelSize,a=d.isFunction(t.maxScale)?t.maxScale(e):t.maxScale,s=0,l=0;switch(r){case u.default.CENTER:break;case u.default.LEFT:s-=Math.round(o*a*.7);break;case u.default.RIGHT:s+=Math.round(o*a*.7)}switch(i){case c.default.CENTER:break;case c.default.TOP:l-=Math.round(o*a*.7);break;case c.default.BOTTOM:l+=Math.round(o*a*.7)}return[n[0]+s,n[1]+l]}({data:t,textPixelOffset:this.textPixelOffset,textHorizontalPosition:this.textHorizontalPosition,textVerticalPosition:this.textVerticalPosition,pixelSize:this.pixelSize,maxScale:this.maxScale})},b);function b(t){var l=o.call(this,t)||this;try{if(!d.isObject(t))throw"error: DynamicPointLayer. The options is not a Object.";if(!t.data)throw"error: DynamicPointLayer. The option of data is not defined.";if(!t.position)throw"error: DynamicPointLayer. The option of position is not defined.";y.definedProperties(l,m,t,function(t){var i=t.name,o=t.value,a=t.convert,s=t.target;l._collection.children.forEach(function(t,e){var n=d.isArray(s)?s[0]:i,r=d.isFunction(o)?o(l.data[e]):o;"textPixelOffset"!==i&&(t.value[n]=a?a(r):r),"textPixelOffset"!==i&&"textHorizontalPosition"!==i&&"textVerticalPosition"!==i&&"pixelSize"!==i&&"maxScale"!==i||(t.value.textPixelOffset=l._resetTextPixelOffset(l.data[e]))})}),l.data.forEach(function(t){var e=y.getPerOptions(l,m,t);e.textPixelOffset=l._resetTextPixelOffset(t),e.properties=t;var n=new f.default(e);l._collection.add(n)})}catch(t){}return l}v.defaultProps=m,e.default=v},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var a,o=n(65),s=n(27),l=n(68),u=n(12),c=n(133),p=n(20),h=n(63),f=n(134),d={type:{type:"string",value:o.default.OD_LINE_LAYER,readonly:!0},data:{type:"array",value:[],readonly:!0},positions:{type:"array",value:null},angularityFactor:{type:"number",value:5},numberOfVertex:{type:"number",value:50},width:{type:"number",value:5},color:{type:"string",value:"rgb(255,0,0)"},duration:{type:"number",value:2e3},image:{type:"string",value:null},opacity:{type:"number",value:1},clampToGround:{type:"boolean",value:!1},smoothness:{type:"boolean",value:!0},dynamicPointColor:{type:"string",value:"rgb(255,0,0)"},dynamicPointScale:{type:"number",value:2},interpolationType:{type:"string",value:f.default.MERCATOR_INTERPOLATION}},y=Object.assign(s.default(l.default.defaultProps),d),g=(a=l.default,i(_,a),Object.defineProperty(_.prototype,"extent",{get:function(){var n=this,r=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE;return this.data.forEach(function(t){var e=u.isFunction(n._positions)?n._positions(t):n._positions;e.forEach(function(t){t[0]<r&&(r=t[0]),t[0]>i&&(i=t[0]),t[1]<o&&(o=t[1]),t[1]>a&&(a=t[1])})}),new h.default(r,o,i,a)},enumerable:!1,configurable:!0}),_.prototype.add=function(t){if(!u.isObject(t))return!1;this._data.push(t);var e=p.getPerOptions(this,y,t);e.properties=t;var n=new c.default(e);return this._collection.add(n),!0},_.prototype.remove=function(e){if(!u.isObject(e))return!1;var t=this._data.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)}),n=this._collection.children[t];return this._collection.remove(n),this._data.splice(t,1),!0},_.prototype.setData=function(t){var e=this;u.isArray(t)&&(this._collection.removeAll(),this._data=[],t.forEach(function(t){e.add(t)}))},_);function _(t){var o=a.call(this,t)||this;try{if(!u.isObject(t))throw"error: ODLineLayer. The options is not a Object.";if(!u.isArray(t.data))throw"error: ODLineLayer. The option of data is not a Array.";if(!t.positions)throw"error: ODLineLayer. The option of positions is not defined.";p.definedProperties(o,y,t,function(t){var r=t.name,i=t.value;u.isFunction(i)?o._collection.children.forEach(function(t,e){var n=i(o.data[e]);t.value[r]=n}):o._collection.children.forEach(function(t){t.value[r]=i})}),o.data.forEach(function(t){var e=p.getPerOptions(o,y,t);e.properties=t;var n=new c.default(e);o._collection.add(n)})}catch(t){}return o}g.defaultProps=y,e.default=g},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(65),s=n(12),l=n(68),u=n(139),c=n(20),p=n(27),h=n(63),f={type:{type:"string",value:a.default.HEAT_MAP_LAYER,readonly:!0},data:{type:"array",value:null},position:{type:"function|array",value:null,required:!0},positionValue:{type:"function|number",value:null,required:!0},minValue:{type:"function|number",value:null},maxValue:{type:"function|number",value:null},radius:{type:"function|number",value:10},gradient:{type:"function|object",value:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"rgb(255,255,0)",1:"rgb(255,0,0)"}},blur:{type:"function|number",value:.85},opacity:{type:"number",value:0},minOpacity:{type:"number",value:0},maxOpacity:{type:"number",value:1}},d=Object.assign(p.default(l.default.defaultProps),f),y=(o=l.default,i(g,o),Object.defineProperty(g.prototype,"extent",{get:function(){var n=this,r=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE;return this.data.forEach(function(t){var e=s.isFunction(n._position)?n._position(t):n._position;e[0]<r&&(r=e[0]),e[0]>i&&(i=e[0]),e[1]<o&&(o=e[1]),e[1]>a&&(a=e[1])}),new h.default(r,o,i,a)},enumerable:!1,configurable:!0}),g.prototype.add=function(t){this._collection.get(0).addData(t)},g.prototype.remove=function(t){this._collection.get(0).removeData(t)},g.prototype.setData=function(t){s.isArray(t)&&(this._collection.get(0).data=t)},g.prototype._createHeatMap=function(t){return new u.default(t)},g);function g(t){var r=o.call(this,t)||this;try{if(!s.isObject(t))throw"error: HeatMapLayer. The options is not a Object.";if(!t.data)throw"error: HeatMapLayer. The options of data is not defined.";if(!t.position)throw"error: HeatMapLayer. The options of position is not defined.";if(!t.positionValue)throw"error: HeatMapLayer. The options of position is not defined.";c.definedProperties(r,d,t,function(t){var e=t.name,n=t.value;r._collection.get(0)[e]=n}),r._collection.add(r._createHeatMap(t))}catch(t){}return r}e.default=y},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(65),s=n(62),l=n(51),u=n(113),c=n(114),p=n(68),h=n(12),f=n(20),d=n(27),y=n(63),g=n(141),_={type:{type:"string",value:a.default.WAVE_POINT_LAYER,readonly:!0},data:{type:"array",value:[],readonly:!0},position:{type:"function|array",value:null},pixelSize:{type:"function|number",value:1},color:{type:"function|string",value:"rgb(255,255,255)"},outlineColor:{type:"function|string",value:"rgb(0,0,0)"},outlineWidth:{type:"function|number",value:0},text:{type:"function|string",value:null},textFont:{type:"function|string",value:"12px Microsoft YaHei"},textFill:{type:"function|boolean",value:!0},textOutline:{type:"function|boolean",value:!0},textFillColor:{type:"function|string",value:"rgb(255,255,255)"},textOutlineColor:{type:"function|string",value:"rgb(0,0,0)"},textOutlineWidth:{type:"function|number",value:3},textPixelOffset:{type:"function|array",value:[0,0]},textHorizontalPosition:{type:"function|string",value:u.default.CENTER,convert:function(t){switch(t){case u.default.CENTER:return s.default.CENTER;case u.default.LEFT:return s.default.RIGHT;case u.default.RIGHT:return s.default.LEFT;default:return s.default.CENTER}},target:"textHorizontalOrigin"},textVerticalPosition:{type:"function|string",value:c.default.CENTER,convert:function(t){switch(t){case c.default.CENTER:return l.default.CENTER;case c.default.BOTTOM:return l.default.TOP;case c.default.TOP:return l.default.BOTTOM;default:return l.default.CENTER}},target:"textVerticalOrigin"},show:{type:"function|boolean",value:!0},opacity:{type:"function|number",value:1},minScale:{type:"function|number",value:1},maxScale:{type:"function|number",value:2},animate:{type:"function|boolean",value:!0},duration:{type:"function|number",value:1e3},delay:{type:"function|number",value:0}},m=Object.assign(d.default(p.default.defaultProps),_),v=(o=p.default,i(b,o),Object.defineProperty(b.prototype,"extent",{get:function(){var n=this,r=Number.MAX_VALUE,i=-Number.MAX_VALUE,o=Number.MAX_VALUE,a=-Number.MAX_VALUE;return this.data.forEach(function(t){var e=h.isFunction(n._position)?n._position(t):n._position;e[0]<r&&(r=e[0]),e[0]>i&&(i=e[0]),e[1]<o&&(o=e[1]),e[1]>a&&(a=e[1])}),new y.default(r,o,i,a)},enumerable:!1,configurable:!0}),b.prototype.add=function(t){if(!h.isObject(t))return!1;this._data.push(t);var e=f.getPerOptions(this,m,t);e.textPixelOffset=this._resetTextPixelOffset(t),e.properties=t;var n=new g.default(e);return this._collection.add(n),!0},b.prototype.remove=function(e){if(!h.isObject(e))return!1;var t=this._data.findIndex(function(t){return JSON.stringify(t)===JSON.stringify(e)}),n=this._collection.children[t];return this._collection.remove(n),this._data.splice(t,1),!0},b.prototype.setData=function(t){var e=this;h.isArray(t)&&(this._collection.removeAll(),this._data=[],t.forEach(function(t){e.add(t)}))},b.prototype._resetTextPixelOffset=function(t){return function(t){var e=t.data,n=h.isFunction(t.textPixelOffset)?t.textPixelOffset(e):t.textPixelOffset,r=h.isFunction(t.textHorizontalPosition)?t.textHorizontalPosition(e):t.textHorizontalPosition,i=h.isFunction(t.textVerticalPosition)?t.textVerticalPosition(e):t.textVerticalPosition,o=h.isFunction(t.pixelSize)?t.pixelSize(e):t.pixelSize,a=(h.isFunction(t.maxScale)?t.maxScale(e):t.maxScale,0),s=0;switch(r){case u.default.CENTER:break;case u.default.LEFT:a-=Math.round(.7*o);break;case u.default.RIGHT:a+=Math.round(.7*o)}switch(i){case c.default.CENTER:break;case c.default.TOP:s-=Math.round(.7*o);break;case c.default.BOTTOM:s+=Math.round(.7*o)}return[n[0]+a,n[1]+s]}({data:t,textPixelOffset:this.textPixelOffset,textHorizontalPosition:this.textHorizontalPosition,textVerticalPosition:this.textVerticalPosition,pixelSize:this.pixelSize,maxScale:this.maxScale})},b);function b(t){var l=o.call(this,t)||this;try{if(!h.isObject(t))throw new TypeError("error: WavePointLayer. The options is not a Object.");if(!t.data)throw new TypeError("error: WavePointLayer. The option of data is not defined.");if(!t.position)throw new TypeError("error: WavePointLayer. The position of options is not defined.");f.definedProperties(l,m,t,function(t){var i=t.name,o=t.value,a=t.convert,s=t.target;l._collection.children.forEach(function(t,e){var n=h.isArray(s)?s[0]:i,r=h.isFunction(o)?o(l.data[e]):o;"textPixelOffset"!==i&&(t.value[n]=a?a(r):r),"textPixelOffset"!==i&&"textHorizontalPosition"!==i&&"textVerticalPosition"!==i&&"pixelSize"!==i&&"maxScale"!==i||(t.value.textPixelOffset=l._resetTextPixelOffset(l.data[e]))})}),l.data.forEach(function(t){var e=f.getPerOptions(l,m,t);e.textPixelOffset=l._resetTextPixelOffset(t),e.properties=t;var n=new g.default(e);l._collection.add(n)})}catch(t){}return l}e.default=v},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=n(8),u=n(8),r=n(104),c=n(26),i=n(16),o=n(130),p=n(356),h=n(357),a=(Object.defineProperty(s.prototype,"tileset",{get:function(){return this._tileset},set:function(t){this._tileset=t;var e=l.Cartographic.fromCartesian(this._tileset.boundingSphere.center),n=l.Cartesian3.fromRadians(e.longitude,e.latitude,e.height),r=l.HeadingPitchRoll.fromDegrees(0,0,-0),i=l.Transforms.headingPitchRollToFixedFrame(n,r),o=l.Matrix4.getTranslation(i,new l.Cartesian3),a=l.Transforms.eastNorthUpToFixedFrame(o);l.Matrix4.inverse(a,a),this._tileInverTransform=a},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"flatHeight",{get:function(){return this._flatHeight},set:function(t){this._flatHeight=Number(t),this._tileset.heightVar[1]=this._flatHeight},enumerable:!1,configurable:!0}),s.prototype.setPositions=function(t){t&&0!=t.length&&(this._positions=t,this._preparePos(this._positions),this._localPosArr&&(this._prepareWorks(),this.analysis()))},s.prototype.setUpAxis=function(t){return"X"==t?void(this._baseHeight=this._flatRect[0]):"Y"==t?void(this._baseHeight=this._flatRect[1]):void(this._baseHeight=this._flatRect[2])},s.prototype._prepareWorks=function(){this._createTexture(),this._createCommand()},s.prototype._createTexture=function(){var t=this._earth.getViewer().scene.context,e=new l.Texture({context:t,width:4096,height:4096,pixelFormat:l.PixelFormat.RGBA,pixelDatatype:l.PixelDatatype.FLOAT,sampler:new l.Sampler({wrapS:l.TextureWrap.CLAMP_TO_EDGE,wrapT:l.TextureWrap.CLAMP_TO_EDGE,minificationFilter:l.TextureMinificationFilter.NEAREST,magnificationFilter:l.TextureMagnificationFilter.NEAREST})}),n=new l.Texture({context:t,width:4096,height:4096,pixelFormat:l.PixelFormat.DEPTH_STENCIL,pixelDatatype:l.PixelDatatype.UNSIGNED_INT_24_8});this._fbo=new l.Framebuffer({context:t,colorTextures:[e],depthStencilTexture:n,destroyAttachments:!1})},s.prototype._createCamera=function(){return{viewMatrix:l.Matrix4.IDENTITY,inverseViewMatrix:l.Matrix4.IDENTITY,frustum:new l.OrthographicOffCenterFrustum,positionCartographic:new l.Cartographic,positionWC:new l.Cartesian3,directionWC:l.Cartesian3.UNIT_Z,upWC:l.Cartesian3.UNIT_Y,rightWC:l.Cartesian3.UNIT_X,viewProjectionMatrix:l.Matrix4.IDENTITY}},s.prototype._createPolygonGeometry=function(){var t=new l.PolygonGeometry({polygonHierarchy:new l.PolygonHierarchy(this._localPosArr),perPositionHeight:!0});return l.PolygonGeometry.createGeometry(t)},s.prototype._createCommand=function(){var t=this._earth.getViewer().scene.context,e=this._createPolygonGeometry(),n=this._createCamera(),r=l.ShaderProgram.fromCache({context:t,vertexShaderSource:h,fragmentShaderSource:p,attributeLocations:l.GeometryPipeline.createAttributeLocations(e)}),i=l.VertexArray.fromGeometry({context:t,geometry:e,attributeLocations:l.GeometryPipeline.createAttributeLocations(e),bufferUsage:l.BufferUsage.STATIC_DRAW,interleave:!0}),o=new u.RenderState;o.depthTest.enabled=!1,o.depthRange.near=-1e6,o.depthRange.far=1e6;var a=l.BoundingRectangle.fromPoints(this._localPosArr,new l.BoundingRectangle);n.frustum.left=a.x,n.frustum.top=a.y+a.height,n.frustum.right=a.x+a.width,n.frustum.bottom=a.y,this._camera=n;var s=l.Matrix4.computeOrthographicOffCenter(n.frustum.left,n.frustum.right,n.frustum.bottom,n.frustum.top,n.frustum.near,n.frustum.far,new u.Matrix4);this._polygonBounds=new l.Cartesian4(n.frustum.left,n.frustum.bottom,n.frustum.right,n.frustum.top),this._drawCommand=new l.DrawCommand({boundingVolume:e.boundingVolume,primitiveType:l.PrimitiveType.TRIANGLES,vertexArray:i,shaderProgram:r,renderState:o,pass:l.Pass.CESIUM_3D_TILE,uniformMap:{myProjection:function(){return s}}})},s.prototype._preparePos=function(t){if(t&&0!=t.length){for(var e=void 0,n=[],r=Number.MAX_VALUE,i=c.arrayToCartesianPositions(t),o=0;o<i.length;o++){var a=l.Cartographic.fromCartesian(i[o]).height,s=l.Matrix4.multiplyByPoint(this._tileInverTransform,i[o],new l.Cartesian3);null!=this._offsetHeight&&(s.z+=this._offsetHeight),n.push(s),a<r&&(r=a,e=s)}this._minHeight=r,this._minLocalPos=e,this._localPosArr=n}},s.prototype.update=function(t){var e,n;this._drawed||(this._drawed=!0,e=t.context,this._passState||(this._passState=new l.PassState(e)),this._passState.framebuffer=this._fbo,this._passState.viewport=new l.BoundingRectangle(0,0,4096,4096),(n=e.uniformState).updateCamera(this._camera),n.updatePass(this._drawCommand.pass),this._drawCommand.framebuffer=this._fbo,this._drawCommand.execute(e,this._passState))},s.prototype.analysis=function(){this._tileset.fbo=this._fbo,this._tileset.polygonBounds=this._polygonBounds,this._tileset.isFlat=[!0,!0,!1,!1],this._tileset.heightVar=[this._minLocalPos.z,this.flatHeight],this._group.add(this)},s.prototype.recover=function(){this._group.remove(new o.default(this))},s.prototype.destroy=function(){},s);function s(t){var e=t||{};this._earth=e.earth,this._group=new r.default,this._earth.sceneTree.add(this._group),this.tileset=e.tileset,this._positions=e.positions||[],this._flatHeight=e.flatHeight||0,this._offsetHeight=e.offsetHeight||0,this._positions&&this._preparePos(this._positions),this._localPosArr&&this._prepareWorks(),this.class=i.default.PRIMITIVE,this.type="flatten_tileset"}e.default=a},function(t,e){t.exports="#ifdef GL_FRAGMENT_PRECISION_HIGH\r\n    precision highp float;\r\n#else    \r\n    precision mediump float;\r\n#endif\r\n\r\n#define OES_texture_float_linear\r\nvarying vec2 depth;\r\nvec4 packDepth(float depth)\r\n{\r\n    vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * depth;\r\n    enc = fract(enc);    \r\n    enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);    \r\n    return enc;\r\n}\r\nvoid main()\r\n{\r\n    float fDepth = (depth.x / 5000.0)/2.0 + 0.5;\r\n    gl_FragColor = packDepth(fDepth);\r\n}"},function(t,e){t.exports="attribute vec3 position;\r\nvarying vec2 depth;\r\nvoid main()\r\n{\r\n    vec4 pos = vec4(position.xyz,1.0);\r\n    depth = pos.zw;\r\n    pos.z = 0.0;\r\n    gl_Position = czm_projection*pos;\r\n}"},function(t,o,e){"use strict";var n=e(9);function s(t,e,n){void 0===n&&(n={});var r={type:"Feature"};return 0!==n.id&&!n.id||(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function r(t,e,n){return void 0===n&&(n={}),s({type:"Point",coordinates:t},e,n)}function i(t,e,n){void 0===n&&(n={});for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var a=0;a<o[o.length-1].length;a++)if(o[o.length-1][a]!==o[0][a])throw new Error("First and last Position are not equivalent.")}return s({type:"Polygon",coordinates:t},e,n)}function a(t,e,n){if(void 0===n&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return s({type:"LineString",coordinates:t},e,n)}function l(t,e){void 0===e&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function u(t,e,n){return void 0===n&&(n={}),s({type:"MultiLineString",coordinates:t},e,n)}function c(t,e,n){return void 0===n&&(n={}),s({type:"MultiPoint",coordinates:t},e,n)}function p(t,e,n){return void 0===n&&(n={}),s({type:"MultiPolygon",coordinates:t},e,n)}function h(t,e){void 0===e&&(e="kilometers");var n=o.factors[e];if(!n)throw new Error(e+" units is invalid");return t*n}function f(t,e){void 0===e&&(e="kilometers");var n=o.factors[e];if(!n)throw new Error(e+" units is invalid");return t/n}function d(t){return 180*(t%(2*Math.PI))/Math.PI}function y(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)&&!/^\s*$/.test(t)}Object.defineProperty(o,"__esModule",{value:!0}),o.earthRadius=6371008.8,o.factors={centimeters:100*o.earthRadius,centimetres:100*o.earthRadius,degrees:o.earthRadius/111325,feet:3.28084*o.earthRadius,inches:39.37*o.earthRadius,kilometers:o.earthRadius/1e3,kilometres:o.earthRadius/1e3,meters:o.earthRadius,metres:o.earthRadius,miles:o.earthRadius/1609.344,millimeters:1e3*o.earthRadius,millimetres:1e3*o.earthRadius,nauticalmiles:o.earthRadius/1852,radians:1,yards:o.earthRadius/1.0936},o.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/o.earthRadius,yards:1/1.0936},o.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},o.feature=s,o.geometry=function(t,e,n){switch(void 0===n&&(n={}),t){case"Point":return r(e).geometry;case"LineString":return a(e).geometry;case"Polygon":return i(e).geometry;case"MultiPoint":return c(e).geometry;case"MultiLineString":return u(e).geometry;case"MultiPolygon":return p(e).geometry;default:throw new Error(t+" is invalid")}},o.point=r,o.points=function(t,e,n){return void 0===n&&(n={}),l(t.map(function(t){return r(t,e)}),n)},o.polygon=i,o.polygons=function(t,e,n){return void 0===n&&(n={}),l(t.map(function(t){return i(t,e)}),n)},o.lineString=a,o.lineStrings=function(t,e,n){return void 0===n&&(n={}),l(t.map(function(t){return a(t,e)}),n)},o.featureCollection=l,o.multiLineString=u,o.multiPoint=c,o.multiPolygon=p,o.geometryCollection=function(t,e,n){return void 0===n&&(n={}),s({type:"GeometryCollection",geometries:t},e,n)},o.round=function(t,e){if(void 0===e&&(e=0),e&&!(0<=e))throw new Error("precision must be a positive number");var n=Math.pow(10,e||0);return Math.round(t*n)/n},o.radiansToLength=h,o.lengthToRadians=f,o.lengthToDegrees=function(t,e){return d(f(t,e))},o.bearingToAzimuth=function(t){var e=t%360;return e<0&&(e+=360),e},o.radiansToDegrees=d,o.degreesToRadians=function(t){return t%360*Math.PI/180},o.convertLength=function(t,e,n){if(void 0===e&&(e="kilometers"),void 0===n&&(n="kilometers"),!(0<=t))throw new Error("length must be a positive number");return h(f(t,e),n)},o.convertArea=function(t,e,n){if(void 0===e&&(e="meters"),void 0===n&&(n="kilometers"),!(0<=t))throw new Error("area must be a positive number");var r=o.areaFactors[e];if(!r)throw new Error("invalid original units");var i=o.areaFactors[n];if(!i)throw new Error("invalid final units");return t/r*i},o.isNumber=y,o.isObject=function(t){return!!t&&t.constructor===Object},o.validateBBox=function(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!y(t))throw new Error("bbox must only contain numbers")})},o.validateId=function(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(n(t)))throw new Error("id must be a number or a string")},o.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},o.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},o.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},o.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},o.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},o.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},o.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(360),o=n(12),a=(s.prototype.add=function(t){if(this._viewer=t,!this._viewer.scene.context.depthTexture)throw new r.DeveloperError("This browser does not support the fog post process.");this._postProcessStage=this._viewer.scene.postProcessStages.add(i.default(this._near,this._far,this._color)),this._isDestroy=!0},s.prototype.destroy=function(){this._isDestroy=!this._viewer.scene.postProcessStages.remove(this._postProcessStage)},s.prototype.isDestroyed=function(){return this._isDestroy},Object.defineProperty(s.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this._postProcessStage&&(this._postProcessStage.uniforms.fogColor=r.Color.fromCssColorString(this._color))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"near",{get:function(){return this._near},set:function(t){this._near=t,this._postProcessStage&&(this._postProcessStage.uniforms.fogByDistance=new r.Cartesian4(this._near,0,this._far,1))},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"far",{get:function(){return this._far},set:function(t){this._far=t,this._postProcessStage&&(this._postProcessStage.uniforms.fogByDistance=new r.Cartesian4(this._near,0,this._far,1))},enumerable:!1,configurable:!0}),s);function s(t){if(this._type="fog",!o.isObject(t))throw new TypeError("error: Fog. The options is not a Object.");this._color=t.color||"rgba(255,255,255,0.7)",this._near=t.near||10,this._far=t.far||2e3}e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(361),i=n(8);e.default=function(t,e,n){return new i.PostProcessStage({name:"czm_fog",fragmentShader:r,uniforms:{fogByDistance:new i.Cartesian4(t,0,e,1),fogColor:i.Color.fromCssColorString(n)}})}},function(t,e){t.exports="float getDistance(sampler2D depthTexture, vec2 texCoords){\r\n    float depth = czm_unpackDepth(texture2D(depthTexture, texCoords));\r\n    if (depth == 0.0) {\r\n        return czm_infinity;\r\n    }\r\n    vec4 eyeCoordinate = czm_windowToEyeCoordinates(gl_FragCoord.xy, depth);\r\n    return -eyeCoordinate.z / eyeCoordinate.w;\r\n}\r\n\r\nfloat interpolateByDistance(vec4 nearFarScalar, float distance){\r\n    float startDistance = nearFarScalar.x;\r\n    float startValue = nearFarScalar.y;\r\n    float endDistance = nearFarScalar.z;\r\n    float endValue = nearFarScalar.w;\r\n    float t = clamp((distance - startDistance) / (endDistance - startDistance), 0.0, 1.0);\r\n    return mix(startValue, endValue, t);\r\n}\r\n\r\nvec4 alphaBlend(vec4 sourceColor, vec4 destinationColor){\r\n    return sourceColor * vec4(sourceColor.aaa, 1.0) + destinationColor * (1.0 - sourceColor.a);\r\n}\r\n\r\nuniform sampler2D colorTexture;\r\nuniform sampler2D depthTexture;\r\nuniform vec4 fogByDistance;\r\nuniform vec4 fogColor;\r\nvarying vec2 v_textureCoordinates;\r\n\r\nvoid main(void){\r\n    float distance = getDistance(depthTexture, v_textureCoordinates);\r\n    vec4 sceneColor = texture2D(colorTexture, v_textureCoordinates);\r\n    float blendAmount = interpolateByDistance(fogByDistance, distance);\r\n    vec4 undergroundColor = vec4(fogColor.rgb, fogColor.a * blendAmount);\r\n    gl_FragColor = alphaBlend(undergroundColor, sceneColor);\r\n}\r\n"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(363),i=n(12),o=(a.prototype.add=function(t){this._viewer=t;var e=this._viewer.scene;e.skyAtmosphere.hueShift=-.8,e.skyAtmosphere.saturationShift=-.7,e.skyAtmosphere.brightnessShift=-.33,e.fog.density=.001,e.fog.minimumBrightness=.8,this._postProcessStage=e.postProcessStages.add(r.default(this._speed,this._length,this._width)),this._isDestroy=!0},a.prototype.destroy=function(){this._isDestroy=!this._viewer.scene.postProcessStages.remove(this._postProcessStage)},a.prototype.isDestroyed=function(){return this._isDestroy},Object.defineProperty(a.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this._postProcessStage&&(this._postProcessStage.uniforms.rainSpeed=this._speed)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this._length},set:function(t){this._length=t,this._postProcessStage&&(this._postProcessStage.uniforms.rainLength=this._length)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this._postProcessStage&&(this._postProcessStage.uniforms.rainWidth=this._width)},enumerable:!1,configurable:!0}),a);function a(t){if(this._type="rain",!i.isObject(t))throw new TypeError("error: Rain. The options is not a Object.");this._speed=t.speed||60,this._length=t.length||100,this._width=t.width||20}e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(364),i=n(8);e.default=function(t,e,n){return new i.PostProcessStage({name:"czm_rain",fragmentShader:r,uniforms:{rainSpeed:t,rainLength:e,rainWidth:n}})}},function(t,e){t.exports="uniform sampler2D colorTexture;//输入的场景渲染照片\r\nvarying vec2 v_textureCoordinates;\r\nuniform float rainSpeed; //速度\r\nuniform float rainLength; //长度\r\nuniform float rainWidth; //宽度\r\n\r\nfloat hash(float x){\r\n    return fract(sin(x*133.3)*13.13);\r\n}\r\n\r\nvoid main(void){\r\n\r\n    float time = czm_frameNumber / rainSpeed;\r\n    vec2 resolution = czm_viewport.zw;\r\n\r\n    vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\r\n    vec3 c=vec3(.6,.7,.8);\r\n\r\n    float a=-.4;\r\n    float si=sin(a),co=cos(a);\r\n    uv*=mat2(co,-si,si,co);\r\n    uv*=length(uv+vec2(0,4.9))*.3+1.;\r\n\r\n    float v=1.-sin(hash(floor(uv.x*rainLength))*2.);\r\n    float b=clamp(abs(sin(20.*time*v+uv.y*(5./(2.+v))))-.95,0.,1.)*rainWidth;\r\n    c*=v*b; //屏幕上雨的颜色\r\n\r\n    gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(c,1), 0.5); //将雨和三维场景融合\r\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(366),i=n(12),o=(a.prototype.add=function(t){this._viewer=t;var e=this._viewer.scene;e.skyAtmosphere.hueShift=-.8,e.skyAtmosphere.saturationShift=-.7,e.skyAtmosphere.brightnessShift=-.33,e.fog.density=.001,e.fog.minimumBrightness=.8,this._postProcessStage=e.postProcessStages.add(r.default(this._speed,this._scale,this._level)),this._isDestroy=!0},a.prototype.destroy=function(){this._isDestroy=!this._viewer.scene.postProcessStages.remove(this._postProcessStage)},a.prototype.isDestroyed=function(){return this._isDestroy},Object.defineProperty(a.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this._postProcessStage&&(this._postProcessStage.uniforms.snowSpeed=this._speed)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"scale",{get:function(){return this._scale},set:function(t){this._scale=t,this._postProcessStage&&(this._postProcessStage.uniforms.snowScale=this._scale)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t,this._postProcessStage&&(this._postProcessStage.uniforms.snowLevel=this._level)},enumerable:!1,configurable:!0}),a);function a(t){if(this._type="snow",!i.isObject(t))throw new TypeError("error: Snow. The options is not a Object.");this._speed=t.speed||60,this._scale=t.scale||8,this._level=t.level||1}e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(367),i=n(8);e.default=function(t,e,n){return new i.PostProcessStage({name:"czm_snow",fragmentShader:r,uniforms:{snowSpeed:t,snowScale:e,snowLevel:n}})}},function(t,e){t.exports="uniform sampler2D colorTexture; //输入的场景渲染照片\r\nvarying vec2 v_textureCoordinates;\r\nuniform float snowSpeed; //速度\r\nuniform float snowScale; //比例\r\nuniform int snowLevel; //层级\r\n\r\nfloat snow(vec2 uv,float scale)\r\n{\r\n    float time = czm_frameNumber / snowSpeed;\r\n    float w=smoothstep(1.,0.,-uv.y*(scale/10.));if(w<.1)return 0.;\r\n    uv+=time/scale;uv.y+=time*2./scale;uv.x+=sin(uv.y+time*.5)/scale;\r\n    uv*=scale;vec2 s=floor(uv),f=fract(uv),p;float k=3.,d;\r\n    p=.5+.35*sin(11.*fract(sin((s+p+scale)*mat2(7,3,6,5))*5.))-f;d=length(p);k=min(d,k);\r\n    k=smoothstep(0.,k,sin(f.x+f.y)*0.01);\r\n    return k*w;\r\n}\r\n\r\nvoid main(void){\r\n    vec2 resolution = czm_viewport.zw;\r\n    vec2 uv=(gl_FragCoord.xy*2.-resolution.xy)/min(resolution.x,resolution.y);\r\n    vec3 finalColor=vec3(0);\r\n    //float c=smoothstep(1.,0.3,clamp(uv.y*.3+.8,0.,.75));\r\n    float c = 0.0;\r\n\r\n    for (int l = 1; l <= 10; l++) {\r\n        if(l>snowLevel) {\r\n            break;\r\n        }\r\n        c+=snow(uv,snowScale / float(snowLevel) * float(l));\r\n    }\r\n    finalColor=(vec3(c)); //屏幕上雪的颜色\r\n    gl_FragColor = mix(texture2D(colorTexture, v_textureCoordinates), vec4(finalColor,1), 0.5);  //将雪和三维场景融合\r\n\r\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(369),i=n(388),o=n(12),a=(s.prototype.add=function(t){this._viewer=t,this._panel=new i.default(this.options),this._wind3D=new r.default(this._viewer,{ncFile:this._ncFile,colorTableFile:this._colorTableFile},this._panel),this._isDestroy=!0},s.prototype.destroy=function(){this._isDestroy=!this._wind3D.destroy()},s.prototype.isDestroyed=function(){return this._isDestroy},Object.defineProperty(s.prototype,"options",{get:function(){return{maxParticles:this._maxParticles,particleHeight:this._particleHeight,fadeOpacity:this._fadeOpacity,dropRate:this._dropRate,dropRateBump:this._dropRateBump,speedFactor:this._speedFactor,lineWidth:this._lineWidth}},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"maxParticles",{get:function(){return this._maxParticles},set:function(t){this._maxParticles=t,this._panel&&(this._panel.maxParticles=t,this.onParticleSystemOptionsChange())},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"particleHeight",{get:function(){return this._particleHeight},set:function(t){this._particleHeight=t,this._panel&&(this._panel.particleHeight=t,this.onParticleSystemOptionsChange())},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"fadeOpacity",{get:function(){return this._fadeOpacity},set:function(t){this._fadeOpacity=t,this._panel&&(this._panel.fadeOpacity=t,this.onParticleSystemOptionsChange())},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropRate",{get:function(){return this._dropRate},set:function(t){this._dropRate=t,this._panel&&(this._panel.dropRate=t,this.onParticleSystemOptionsChange())},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"dropRateBump",{get:function(){return this._dropRateBump},set:function(t){this._dropRateBump=t,this._panel&&(this._panel.dropRateBump=t,this.onParticleSystemOptionsChange())},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"speedFactor",{get:function(){return this._speedFactor},set:function(t){this._speedFactor=t,this._panel&&(this._panel.speedFactor=t,this.onParticleSystemOptionsChange())},enumerable:!1,configurable:!0}),Object.defineProperty(s.prototype,"lineWidth",{get:function(){return this._lineWidth},set:function(t){this._lineWidth=t,this._panel&&(this._panel.lineWidth=t,this.onParticleSystemOptionsChange())},enumerable:!1,configurable:!0}),s);function s(t){if(this._type="wind",!o.isObject(t))throw new TypeError("error: Wind. The options is not a Object.");this._ncFile=t.ncFile,this._colorTableFile=t.colorTableFile,this._maxParticles=t.maxParticles||4096,this._particleHeight=t.particleHeight||100,this._fadeOpacity=t.fadeOpacity||.996,this._dropRate=t.dropRate||.003,this._dropRateBump=t.dropRateBump||.01,this._speedFactor=t.speedFactor||4,this._lineWidth=t.lineWidth||4,this.onParticleSystemOptionsChange=function(){var t=new CustomEvent("particleSystemOptionsChanged");window.dispatchEvent(t)}}e.default=a},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{o(l.next(t))}catch(t){e(t)}}function i(t){try{o(l.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((l=l.apply(t,a||[])).next())})},i=this&&this.__generator||function(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),a=n(146),s=n(230),l=n(375),u=(c.prototype.addPrimitives=function(){this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.getWind),this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.updateSpeed),this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.updatePosition),this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.postProcessingPosition),this.scene.primitives.add(this.particleSystem.particlesComputing.primitives.postProcessingSpeed),this.scene.primitives.add(this.particleSystem.particlesRendering.primitives.segments),this.scene.primitives.add(this.particleSystem.particlesRendering.primitives.trails),this.scene.primitives.add(this.particleSystem.particlesRendering.primitives.screen)},c.prototype.updateViewerParameters=function(){var t=this.camera.computeViewRectangle(this.scene.globe.ellipsoid),e=a.default.viewRectangleToLonLatRange(t);this.viewerParameters.lonRange.x=e.lon.min,this.viewerParameters.lonRange.y=e.lon.max,this.viewerParameters.latRange.x=e.lat.min,this.viewerParameters.latRange.y=e.lat.max;var n=this.camera.getPixelSize(this.globeBoundingSphere,this.scene.drawingBufferWidth,this.scene.drawingBufferHeight);0<n&&(this.viewerParameters.pixelSize=n)},c.prototype.setupEventListeners=function(){var t=this;this.camera.moveStart.addEventListener(function(){t.show(!1)}),this.camera.moveEnd.addEventListener(function(){t.updateViewerParameters(),t.particleSystem.applyViewerParameters(t.viewerParameters),t.show(!0)});var e=!1;window.addEventListener("resize",function(){t.destroyFlag||(t.show(!1),t.remove(),e=!0)}),this.scene.preRender.addEventListener(function(){t.destroyFlag||e&&(t.particleSystem.canvasResize(t.scene.context),e=!1,t.addPrimitives(),t.show(!0))}),window.addEventListener("particleSystemOptionsChanged",function(){t.particleSystem.applyUserInput(t.panel.getUserInput())})},c.prototype.debug=function(){var t=this,e=function(){t.viewer.resize(),t.viewer.render(),requestAnimationFrame(e)};e()},c.prototype.show=function(t){this.particleSystem.particlesComputing.primitives.getWind.show=t,this.particleSystem.particlesComputing.primitives.updateSpeed.show=t,this.particleSystem.particlesComputing.primitives.updatePosition.show=t,this.particleSystem.particlesComputing.primitives.postProcessingPosition.show=t,this.particleSystem.particlesComputing.primitives.postProcessingSpeed.show=t,this.particleSystem.particlesRendering.primitives.segments.show=t,this.particleSystem.particlesRendering.primitives.trails.show=t,this.particleSystem.particlesRendering.primitives.screen.show=t},c.prototype.remove=function(){var t=this.scene.primitives.remove(this.particleSystem.particlesComputing.primitives.getWind),e=this.scene.primitives.remove(this.particleSystem.particlesComputing.primitives.updateSpeed),n=this.scene.primitives.remove(this.particleSystem.particlesComputing.primitives.updatePosition),r=this.scene.primitives.remove(this.particleSystem.particlesComputing.primitives.postProcessingPosition),i=this.scene.primitives.remove(this.particleSystem.particlesComputing.primitives.postProcessingSpeed),o=this.scene.primitives.remove(this.particleSystem.particlesRendering.primitives.segments),a=this.scene.primitives.remove(this.particleSystem.particlesRendering.primitives.trails),s=this.scene.primitives.remove(this.particleSystem.particlesRendering.primitives.screen);return t&&e&&n&&r&&i&&o&&a&&s},c.prototype.destroy=function(){return r(this,void 0,void 0,function(){return i(this,function(t){switch(t.label){case 0:return[4,this.loadData];case 1:return t.sent(),this.destroyFlag=this.remove(),[2]}})})},c);function c(t,e,n){var r=this;this.destroyFlag=!1,this.viewer=t,this.scene=this.viewer.scene,this.camera=this.viewer.camera,this.panel=n,this.viewerParameters={lonRange:new o.Cartesian2,latRange:new o.Cartesian2,pixelSize:0},this.globeBoundingSphere=new o.BoundingSphere(o.Cartesian3.ZERO,6314355.63),this.updateViewerParameters(),this.loadData=s.default.loadData(e).then(function(t){r.particleSystem=new l.default(r.scene.context,t,r.panel.getUserInput(),r.viewerParameters),r.addPrimitives(),r.setupEventListeners(),r.debug()})}e.default=u},function(t,e,n){"use strict";var i=n(152),o=n(153),a=n(371).IOBuffer,s=n(147),l=n(372),u=n(373),c=n(374),r=function(){function r(t){i(this,r);var e=new a(t);e.setBigEndian(),s.notNetcdf("CDF"!==e.readChars(3),"should start with CDF");var n=e.readByte();s.notNetcdf(2<n,"unknown version"),this.header=u(e,n),this.buffer=e}return o(r,[{key:"getAttribute",value:function(e){var t=this.globalAttributes.find(function(t){return t.name===e});return t?t.value:null}},{key:"getDataVariableAsString",value:function(t){var e=this.getDataVariable(t);return e?e.join(""):null}},{key:"toString",value:function(){return c.call(this)}},{key:"getDataVariable",value:function(e){var t="string"==typeof e?this.header.variables.find(function(t){return t.name===e}):e;return s.notNetcdf(void 0===t,"variable not found: ".concat(e)),this.buffer.seek(t.offset),t.record?l.record(this.buffer,t,this.header.recordDimension):l.nonRecord(this.buffer,t)}},{key:"dataVariableExists",value:function(e){return void 0!==this.header.variables.find(function(t){return t.name===e})}},{key:"attributeExists",value:function(e){return void 0!==this.globalAttributes.find(function(t){return t.name===e})}},{key:"version",get:function(){return 1===this.header.version?"classic format":"64-bit offset format"}},{key:"recordDimension",get:function(){return this.header.recordDimension}},{key:"dimensions",get:function(){return this.header.dimensions}},{key:"globalAttributes",get:function(){return this.header.globalAttributes}},{key:"variables",get:function(){return this.header.variables}}]),r}();t.exports=r},function(t,e,n){"use strict";n.r(e),n.d(e,"IOBuffer",function(){return a});var r=n(152),s=n.n(r),i=n(153),o=n.n(i),l=n(155),u=8192,a=function(){function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:u,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};s()(this,a);var n=!1;"number"==typeof t?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);var r=e.offset?e.offset>>>0:0,i=t.byteLength-r,o=r;(ArrayBuffer.isView(t)||t instanceof a)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+r),t=t.buffer),this.lastWrittenByte=n?i:0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}return o()(a,[{key:"available",value:function(t){var e=0<arguments.length&&void 0!==t?t:1;return this.offset+e<=this.length}},{key:"isLittleEndian",value:function(){return this.littleEndian}},{key:"setLittleEndian",value:function(){return this.littleEndian=!0,this}},{key:"isBigEndian",value:function(){return!this.littleEndian}},{key:"setBigEndian",value:function(){return this.littleEndian=!1,this}},{key:"skip",value:function(t){var e=0<arguments.length&&void 0!==t?t:1;return this.offset+=e,this}},{key:"seek",value:function(t){return this.offset=t,this}},{key:"mark",value:function(){return this._mark=this.offset,this}},{key:"reset",value:function(){return this.offset=this._mark,this}},{key:"pushMark",value:function(){return this._marks.push(this.offset),this}},{key:"popMark",value:function(){var t=this._marks.pop();if(void 0===t)throw new Error("Mark stack empty");return this.seek(t),this}},{key:"rewind",value:function(){return this.offset=0,this}},{key:"ensureAvailable",value:function(t){var e,n,r=0<arguments.length&&void 0!==t?t:1;return this.available(r)||(e=2*(this.offset+r),(n=new Uint8Array(e)).set(new Uint8Array(this.buffer)),this.buffer=n.buffer,this.length=this.byteLength=e,this._data=new DataView(this.buffer)),this}},{key:"readBoolean",value:function(){return 0!==this.readUint8()}},{key:"readInt8",value:function(){return this._data.getInt8(this.offset++)}},{key:"readUint8",value:function(){return this._data.getUint8(this.offset++)}},{key:"readByte",value:function(){return this.readUint8()}},{key:"readBytes",value:function(t){for(var e=0<arguments.length&&void 0!==t?t:1,n=new Uint8Array(e),r=0;r<e;r++)n[r]=this.readByte();return n}},{key:"readInt16",value:function(){var t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}},{key:"readUint16",value:function(){var t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}},{key:"readInt32",value:function(){var t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}},{key:"readUint32",value:function(){var t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}},{key:"readFloat32",value:function(){var t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}},{key:"readFloat64",value:function(){var t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}},{key:"readChar",value:function(){return String.fromCharCode(this.readInt8())}},{key:"readChars",value:function(t){for(var e=0<arguments.length&&void 0!==t?t:1,n="",r=0;r<e;r++)n+=this.readChar();return n}},{key:"readUtf8",value:function(t){var e=0<arguments.length&&void 0!==t?t:1,n=this.readChars(e);return Object(l.decode)(n)}},{key:"writeBoolean",value:function(t){return this.writeUint8(t?255:0),this}},{key:"writeInt8",value:function(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}},{key:"writeUint8",value:function(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}},{key:"writeByte",value:function(t){return this.writeUint8(t)}},{key:"writeBytes",value:function(t){this.ensureAvailable(t.length);for(var e=0;e<t.length;e++)this._data.setUint8(this.offset++,t[e]);return this._updateLastWrittenByte(),this}},{key:"writeInt16",value:function(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}},{key:"writeUint16",value:function(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}},{key:"writeInt32",value:function(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}},{key:"writeUint32",value:function(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}},{key:"writeFloat32",value:function(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}},{key:"writeFloat64",value:function(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}},{key:"writeChar",value:function(t){return this.writeUint8(t.charCodeAt(0))}},{key:"writeChars",value:function(t){for(var e=0;e<t.length;e++)this.writeUint8(t.charCodeAt(e));return this}},{key:"writeUtf8",value:function(t){var e=Object(l.encode)(t);return this.writeChars(e)}},{key:"toArray",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}},{key:"_updateLastWrittenByte",value:function(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}]),a}()},function(t,e,n){"use strict";var c=n(231);t.exports.nonRecord=function(t,e){for(var n=c.str2num(e.type),r=e.size/c.num2bytes(n),i=new Array(r),o=0;o<r;o++)i[o]=c.readType(t,n,1);return i},t.exports.record=function(t,e,n){for(var r=c.str2num(e.type),i=e.size?e.size/c.num2bytes(r):1,o=n.length,a=new Array(o),s=n.recordStep,l=0;l<o;l++){var u=t.offset;a[l]=c.readType(t,r,i),t.seek(u+s)}return a}},function(t,e,n){"use strict";var _=n(147),m=n(231),v=0,u=10,b=11,c=12;var p=0;function w(t){var e=t.readUint32();if(e===v)return _.notNetcdf(t.readUint32()!==v,"wrong empty tag for list of attributes"),[];_.notNetcdf(e!==c,"wrong tag for list of attributes");for(var n=t.readUint32(),r=new Array(n),i=0;i<n;i++){var o=_.readName(t),a=t.readUint32();_.notNetcdf(a<1||6<a,"non valid type ".concat(a));var s=t.readUint32(),l=m.readType(t,a,s);_.padding(t),r[i]={name:o,type:m.num2str(a),value:l}}return r}t.exports=function(t,e){var n={recordDimension:{length:t.readUint32()}};n.version=e;var r=function(t){var e,n,r=t.readUint32();{if(r===v)return _.notNetcdf(t.readUint32()!==v,"wrong empty tag for list of dimensions"),[];_.notNetcdf(r!==u,"wrong tag for list of dimensions");for(var i=t.readUint32(),o=new Array(i),a=0;a<i;a++){var s=_.readName(t),l=t.readUint32();l===p&&(e=a,n=s),o[a]={name:s,size:l}}}return{dimensions:o,recordId:e,recordName:n}}(t);n.recordDimension.id=r.recordId,n.recordDimension.name=r.recordName,n.dimensions=r.dimensions,n.globalAttributes=w(t);var i=function(t,e,n){var r=t.readUint32(),i=0;{if(r===v)return _.notNetcdf(t.readUint32()!==v,"wrong empty tag for list of variables"),[];_.notNetcdf(r!==b,"wrong tag for list of variables");for(var o=t.readUint32(),a=new Array(o),s=0;s<o;s++){for(var l=_.readName(t),u=t.readUint32(),c=new Array(u),p=0;p<u;p++)c[p]=t.readUint32();var h=w(t),f=t.readUint32();_.notNetcdf(f<1&&6<f,"non valid type ".concat(f));var d=t.readUint32(),y=t.readUint32();2===n&&(_.notNetcdf(0<y,"offsets larger than 4GB not supported"),y=t.readUint32());var g=!1;void 0!==e&&c[0]===e&&(i+=d,g=!0),a[s]={name:l,dimensions:c,attributes:h,type:m.num2str(f),size:d,offset:y,record:g}}}return{variables:a,recordStep:i}}(t,r.recordId,e);return n.variables=i.variables,n.recordDimension.recordStep=i.recordStep,n}},function(t,e,n){"use strict";function h(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}t.exports=function(){var t=[];t.push("DIMENSIONS");var e,n=h(this.dimensions);try{for(n.s();!(e=n.n()).done;){var r=e.value;t.push("  ".concat(r.name.padEnd(30)," = size: ").concat(r.size))}}catch(t){n.e(t)}finally{n.f()}t.push(""),t.push("GLOBAL ATTRIBUTES");var i,o=h(this.globalAttributes);try{for(o.s();!(i=o.n()).done;){var a=i.value;t.push("  ".concat(a.name.padEnd(30)," = ").concat(a.value))}}catch(t){o.e(t)}finally{o.f()}var s=JSON.parse(JSON.stringify(this.variables));t.push(""),t.push("VARIABLES:");var l,u=h(s);try{for(u.s();!(l=u.n()).done;){var c=l.value;c.value=this.getDataVariable(c);var p=JSON.stringify(c.value);50<p.length&&(p=p.substring(0,50)),isNaN(c.value.length)||(p+=" (length: ".concat(c.value.length,")")),t.push("  ".concat(c.name.padEnd(30)," = ").concat(p))}}catch(t){u.e(t)}finally{u.f()}return t.join("\n")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(376),o=n(382),a=r.ClearCommand,s=r.Color,l=r.Pass,u=r.VertexArray,c=r.BufferUsage,p=(h.prototype.canvasResize=function(t){var e=this;this.particlesComputing.destroyParticlesTextures(),Object.keys(this.particlesComputing.windTextures).forEach(function(t){e.particlesComputing.windTextures[t].destroy()}),this.particlesRendering.textures.colorTable.destroy(),Object.keys(this.particlesRendering.framebuffers).forEach(function(t){e.particlesRendering.framebuffers[t].destroy()}),this.context=t,this.particlesComputing=new i.default(this.context,this.data,this.userInput,this.viewerParameters),this.particlesRendering=new o.default(this.context,this.data,this.userInput,this.viewerParameters,this.particlesComputing)},h.prototype.clearFramebuffers=function(){var e=this,n=new a({color:new s(0,0,0,0),depth:1,framebuffer:void 0,pass:l.OPAQUE});Object.keys(this.particlesRendering.framebuffers).forEach(function(t){n.framebuffer=e.particlesRendering.framebuffers[t],n.execute(e.context)})},h.prototype.refreshParticles=function(t){var e,n;this.clearFramebuffers(),this.particlesComputing.destroyParticlesTextures(),this.particlesComputing.createParticlesTextures(this.context,this.userInput,this.viewerParameters),t&&(e=this.particlesRendering.createSegmentsGeometry(this.userInput),this.particlesRendering.primitives.segments.geometry=e,n=u.fromGeometry({context:this.context,geometry:e,attributeLocations:this.particlesRendering.primitives.segments.attributeLocations,bufferUsage:c.STATIC_DRAW}),this.particlesRendering.primitives.segments.commandToExecute.vertexArray=n)},h.prototype.applyUserInput=function(e){var n=this,t=!1;this.userInput.maxParticles!=e.maxParticles&&(t=!0),Object.keys(e).forEach(function(t){n.userInput[t]=e[t]}),this.refreshParticles(t)},h.prototype.applyViewerParameters=function(e){var n=this;Object.keys(e).forEach(function(t){n.viewerParameters[t]=e[t]}),this.refreshParticles(!1)},h);function h(t,e,n,r){this.context=t,this.data=e,this.userInput=n,this.viewerParameters=r,this.particlesComputing=new i.default(this.context,this.data,this.userInput,this.viewerParameters),this.particlesRendering=new o.default(this.context,this.data,this.userInput,this.viewerParameters,this.particlesComputing)}e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),a=n(146),s=n(230),c=n(232),p=n(377),h=n(378),f=n(379),d=n(380),y=n(381),l=r.PixelFormat,u=r.PixelDatatype,g=r.Sampler,_=r.TextureMinificationFilter,m=r.TextureMagnificationFilter,v=r.Cartesian3,b=r.Cartesian2,w=r.ShaderSource,i=(o.prototype.createWindTextures=function(t,e){var n={context:t,width:e.dimensions.lon,height:e.dimensions.lat*e.dimensions.lev,pixelFormat:l.LUMINANCE,pixelDatatype:u.FLOAT,flipY:!1,sampler:new g({minificationFilter:_.NEAREST,magnificationFilter:m.NEAREST})};this.windTextures={U:a.default.createTexture(n,e.U.array),V:a.default.createTexture(n,e.V.array)}},o.prototype.createParticlesTextures=function(t,e,n){var r={context:t,width:e.particlesTextureSize,height:e.particlesTextureSize,pixelFormat:l.RGBA,pixelDatatype:u.FLOAT,flipY:!1,sampler:new g({minificationFilter:_.NEAREST,magnificationFilter:m.NEAREST})},i=s.default.randomizeParticles(e.maxParticles,n),o=new Float32Array(4*e.maxParticles).fill(0);this.particlesTextures={particlesWind:a.default.createTexture(r),currentParticlesPosition:a.default.createTexture(r,i),nextParticlesPosition:a.default.createTexture(r,i),currentParticlesSpeed:a.default.createTexture(r,o),nextParticlesSpeed:a.default.createTexture(r,o),postProcessingPosition:a.default.createTexture(r,i),postProcessingSpeed:a.default.createTexture(r,o)}},o.prototype.destroyParticlesTextures=function(){var e=this;Object.keys(this.particlesTextures).forEach(function(t){e.particlesTextures[t].destroy()})},o.prototype.createComputingPrimitives=function(t,e,n){var r=new v(t.dimensions.lon,t.dimensions.lat,t.dimensions.lev),i=new v(t.lon.min,t.lat.min,t.lev.min),o=new v(t.lon.max,t.lat.max,t.lev.max),a=new v((o.x-i.x)/(r.x-1),(o.y-i.y)/(r.y-1),1<r.z?(o.z-i.z)/(r.z-1):1),s=new b(t.U.min,t.U.max),l=new b(t.V.min,t.V.max),u=this;this.primitives={getWind:new c.default({commandType:"Compute",uniformMap:{U:function(){return u.windTextures.U},V:function(){return u.windTextures.V},currentParticlesPosition:function(){return u.particlesTextures.currentParticlesPosition},dimension:function(){return r},minimum:function(){return i},maximum:function(){return o},interval:function(){return a}},fragmentShaderSource:new w({sources:[p]}),outputTexture:this.particlesTextures.particlesWind,preExecute:function(){u.primitives.getWind.commandToExecute.outputTexture=u.particlesTextures.particlesWind}}),updateSpeed:new c.default({commandType:"Compute",uniformMap:{currentParticlesSpeed:function(){return u.particlesTextures.currentParticlesSpeed},particlesWind:function(){return u.particlesTextures.particlesWind},uSpeedRange:function(){return s},vSpeedRange:function(){return l},pixelSize:function(){return n.pixelSize},speedFactor:function(){return e.speedFactor}},fragmentShaderSource:new w({sources:[h]}),outputTexture:this.particlesTextures.nextParticlesSpeed,preExecute:function(){var t=u.particlesTextures.currentParticlesSpeed;u.particlesTextures.currentParticlesSpeed=u.particlesTextures.postProcessingSpeed,u.particlesTextures.postProcessingSpeed=t,u.primitives.updateSpeed.commandToExecute.outputTexture=u.particlesTextures.nextParticlesSpeed}}),updatePosition:new c.default({commandType:"Compute",uniformMap:{currentParticlesPosition:function(){return u.particlesTextures.currentParticlesPosition},currentParticlesSpeed:function(){return u.particlesTextures.currentParticlesSpeed}},fragmentShaderSource:new w({sources:[f]}),outputTexture:this.particlesTextures.nextParticlesPosition,preExecute:function(){var t=u.particlesTextures.currentParticlesPosition;u.particlesTextures.currentParticlesPosition=u.particlesTextures.postProcessingPosition,u.particlesTextures.postProcessingPosition=t,u.primitives.updatePosition.commandToExecute.outputTexture=u.particlesTextures.nextParticlesPosition}}),postProcessingPosition:new c.default({commandType:"Compute",uniformMap:{nextParticlesPosition:function(){return u.particlesTextures.nextParticlesPosition},nextParticlesSpeed:function(){return u.particlesTextures.nextParticlesSpeed},lonRange:function(){return n.lonRange},latRange:function(){return n.latRange},randomCoef:function(){return Math.random()},dropRate:function(){return e.dropRate},dropRateBump:function(){return e.dropRateBump}},fragmentShaderSource:new w({sources:[d]}),outputTexture:this.particlesTextures.postProcessingPosition,preExecute:function(){u.primitives.postProcessingPosition.commandToExecute.outputTexture=u.particlesTextures.postProcessingPosition}}),postProcessingSpeed:new c.default({commandType:"Compute",uniformMap:{postProcessingPosition:function(){return u.particlesTextures.postProcessingPosition},nextParticlesSpeed:function(){return u.particlesTextures.nextParticlesSpeed}},fragmentShaderSource:new w({sources:[y]}),outputTexture:this.particlesTextures.postProcessingSpeed,preExecute:function(){u.primitives.postProcessingSpeed.commandToExecute.outputTexture=u.particlesTextures.postProcessingSpeed}})}},o);function o(t,e,n,r){this.createWindTextures(t,e),this.createParticlesTextures(t,n,r),this.createComputingPrimitives(e,n,r)}e.default=i},function(t,e){t.exports="// the size of UV textures: width = lon, height = lat*lev\r\nuniform sampler2D U; // eastward wind \r\nuniform sampler2D V; // northward wind\r\n\r\nuniform sampler2D currentParticlesPosition; // (lon, lat, lev)\r\n\r\nuniform vec3 dimension; // (lon, lat, lev)\r\nuniform vec3 minimum; // minimum of each dimension\r\nuniform vec3 maximum; // maximum of each dimension\r\nuniform vec3 interval; // interval of each dimension\r\n\r\nvarying vec2 v_textureCoordinates;\r\n\r\nvec2 mapPositionToNormalizedIndex2D(vec3 lonLatLev) {\r\n    // ensure the range of longitude and latitude\r\n    lonLatLev.x = mod(lonLatLev.x, 360.0);\r\n    lonLatLev.y = clamp(lonLatLev.y, -90.0, 90.0);\r\n\r\n    vec3 index3D = vec3(0.0);\r\n    index3D.x = (lonLatLev.x - minimum.x) / interval.x;\r\n    index3D.y = (lonLatLev.y - minimum.y) / interval.y;\r\n    index3D.z = (lonLatLev.z - minimum.z) / interval.z;\r\n\r\n    // the st texture coordinate corresponding to (col, row) index\r\n    // example\r\n    // data array is [0, 1, 2, 3, 4, 5], width = 3, height = 2\r\n    // the content of texture will be\r\n    // t 1.0\r\n    //    |  3 4 5\r\n    //    |\r\n    //    |  0 1 2\r\n    //   0.0------1.0 s\r\n\r\n    vec2 index2D = vec2(index3D.x, index3D.z * dimension.y + index3D.y);\r\n    vec2 normalizedIndex2D = vec2(index2D.x / dimension.x, index2D.y / (dimension.y * dimension.z));\r\n    return normalizedIndex2D;\r\n}\r\n\r\nfloat getWind(sampler2D windTexture, vec3 lonLatLev) {\r\n    vec2 normalizedIndex2D = mapPositionToNormalizedIndex2D(lonLatLev);\r\n    float result = texture2D(windTexture, normalizedIndex2D).r;\r\n    return result;\r\n}\r\n\r\nconst mat4 kernelMatrix = mat4(\r\n    0.0, -1.0, 2.0, -1.0, // first column\r\n    2.0, 0.0, -5.0, 3.0, // second column\r\n    0.0, 1.0, 4.0, -3.0, // third column\r\n    0.0, 0.0, -1.0, 1.0 // fourth column\r\n);\r\nfloat oneDimensionInterpolation(float t, float p0, float p1, float p2, float p3) {\r\n    vec4 tVec4 = vec4(1.0, t, t * t, t * t * t);\r\n    tVec4 = tVec4 / 2.0;\r\n    vec4 pVec4 = vec4(p0, p1, p2, p3);\r\n    return dot((tVec4 * kernelMatrix), pVec4);\r\n}\r\n\r\nfloat calculateB(sampler2D windTexture, float t, float lon, float lat, float lev) {\r\n    float lon0 = floor(lon) - 1.0 * interval.x;\r\n    float lon1 = floor(lon);\r\n    float lon2 = floor(lon) + 1.0 * interval.x;\r\n    float lon3 = floor(lon) + 2.0 * interval.x;\r\n\r\n    float p0 = getWind(windTexture, vec3(lon0, lat, lev));\r\n    float p1 = getWind(windTexture, vec3(lon1, lat, lev));\r\n    float p2 = getWind(windTexture, vec3(lon2, lat, lev));\r\n    float p3 = getWind(windTexture, vec3(lon3, lat, lev));\r\n\r\n    return oneDimensionInterpolation(t, p0, p1, p2, p3);\r\n}\r\n\r\nfloat interpolateOneTexture(sampler2D windTexture, vec3 lonLatLev) {\r\n    float lon = lonLatLev.x;\r\n    float lat = lonLatLev.y;\r\n    float lev = lonLatLev.z;\r\n\r\n    float lat0 = floor(lat) - 1.0 * interval.y;\r\n    float lat1 = floor(lat);\r\n    float lat2 = floor(lat) + 1.0 * interval.y;\r\n    float lat3 = floor(lat) + 2.0 * interval.y;\r\n\r\n    vec2 coef = lonLatLev.xy - floor(lonLatLev.xy);\r\n    float b0 = calculateB(windTexture, coef.x, lon, lat0, lev);\r\n    float b1 = calculateB(windTexture, coef.x, lon, lat1, lev);\r\n    float b2 = calculateB(windTexture, coef.x, lon, lat2, lev);\r\n    float b3 = calculateB(windTexture, coef.x, lon, lat3, lev);\r\n\r\n    return oneDimensionInterpolation(coef.y, b0, b1, b2, b3);\r\n}\r\n\r\nvec3 bicubic(vec3 lonLatLev) {\r\n    // https://en.wikipedia.org/wiki/Bicubic_interpolation#Bicubic_convolution_algorithm\r\n    float u = interpolateOneTexture(U, lonLatLev);\r\n    float v = interpolateOneTexture(V, lonLatLev);\r\n    float w = 0.0;\r\n    return vec3(u, v, w);\r\n}\r\n\r\nvoid main() {\r\n    // texture coordinate must be normalized\r\n    vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;\r\n    vec3 windVector = bicubic(lonLatLev);\r\n\tgl_FragColor = vec4(windVector, 0.0);\r\n}"},function(t,e){t.exports="uniform sampler2D currentParticlesSpeed; // (u, v, w, normalization)\r\nuniform sampler2D particlesWind;\r\n\r\n// use to calculate the relative speed\r\nuniform vec2 uSpeedRange; // (min, max);\r\nuniform vec2 vSpeedRange;\r\nuniform float pixelSize;\r\nuniform float speedFactor;\r\n\r\nvarying vec2 v_textureCoordinates;\r\n\r\nvec4 calcRelativeSpeed(vec3 speed) {\r\n    vec3 percent = vec3(0.0);\r\n    percent.x = (speed.x - uSpeedRange.x) / (uSpeedRange.y - uSpeedRange.x);\r\n    percent.y = (speed.y - vSpeedRange.x) / (vSpeedRange.y - vSpeedRange.x);\r\n\tfloat normalization = length(percent);\r\n\r\n    float minRelativeSpeed = -speedFactor * pixelSize;\r\n    float maxRelativeSpeed = speedFactor * pixelSize;\r\n\r\n\tvec3 relativeSpeed = vec3(0.0);\r\n    relativeSpeed.x = mix(minRelativeSpeed, maxRelativeSpeed, percent.x);\r\n    relativeSpeed.y = mix(minRelativeSpeed, maxRelativeSpeed, percent.y);\r\n\t\r\n\treturn vec4(relativeSpeed, normalization);\r\n}\r\n\r\nvoid main() {\r\n    // texture coordinate must be normalized\r\n    vec3 currentSpeed = texture2D(currentParticlesSpeed, v_textureCoordinates).rgb;\r\n\tvec3 windVector = texture2D(particlesWind, v_textureCoordinates).rgb;\r\n\t\r\n\tvec4 nextSpeed = calcRelativeSpeed(windVector);\r\n\tgl_FragColor = nextSpeed;\r\n}"},function(t,e){t.exports="uniform sampler2D currentParticlesPosition; // (lon, lat, lev)\r\nuniform sampler2D currentParticlesSpeed; // (u, v, w, normalization)\r\n\r\nvarying vec2 v_textureCoordinates;\r\n\r\nvec2 lengthOfLonLat(vec3 lonLatLev) {\r\n    // unit conversion: meters -> longitude latitude degrees\r\n    // see https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree for detail\r\n\r\n    // Calculate the length of a degree of latitude and longitude in meters\r\n    float latitude = radians(lonLatLev.y);\r\n\r\n    float term1 = 111132.92;\r\n    float term2 = 559.82 * cos(2.0 * latitude);\r\n    float term3 = 1.175 * cos(4.0 * latitude);\r\n    float term4 = 0.0023 * cos(6.0 * latitude);\r\n    float latLength = term1 - term2 + term3 - term4;\r\n\r\n    float term5 = 111412.84 * cos(latitude);\r\n    float term6 = 93.5 * cos(3.0 * latitude);\r\n    float term7 = 0.118 * cos(5.0 * latitude);\r\n    float longLength = term5 - term6 + term7;\r\n\r\n    return vec2(longLength, latLength);\r\n}\r\n\r\nvoid updatePosition(vec3 lonLatLev, vec3 speed) {\r\n    vec2 lonlatLengthgth = lengthOfLonLat(lonLatLev);\r\n    float u = speed.x / lonlatLengthgth.x;\r\n    float v = speed.y / lonlatLengthgth.y;\r\n    float w = 0.0;\r\n    vec3 windVectorInLonLatLev = vec3(u, v, w);\r\n\r\n    vec3 nextParticle = lonLatLev + windVectorInLonLatLev;\r\n\r\n    gl_FragColor = vec4(nextParticle, 0.0);\r\n}\r\n\r\nvoid main() {\r\n    // texture coordinate must be normalized\r\n    vec3 lonLatLev = texture2D(currentParticlesPosition, v_textureCoordinates).rgb;\r\n    vec3 speed = texture2D(currentParticlesSpeed, v_textureCoordinates).rgb;\r\n\r\n    updatePosition(lonLatLev, speed);\r\n}"},function(t,e){t.exports="uniform sampler2D nextParticlesPosition;\r\nuniform sampler2D nextParticlesSpeed; // (u, v, w, normalization)\r\n\r\n// range (min, max)\r\nuniform vec2 lonRange;\r\nuniform vec2 latRange;\r\n\r\nuniform float randomCoef; // use to improve the pseudo-random generator\r\nuniform float dropRate; // drop rate is a chance a particle will restart at random position to avoid degeneration\r\nuniform float dropRateBump;\r\n\r\nvarying vec2 v_textureCoordinates;\r\n\r\n// pseudo-random generator\r\nconst vec3 randomConstants = vec3(12.9898, 78.233, 4375.85453);\r\nconst vec2 normalRange = vec2(0.0, 1.0);\r\nfloat rand(vec2 seed, vec2 range) {\r\n    vec2 randomSeed = randomCoef * seed;\r\n    float temp = dot(randomConstants.xy, randomSeed);\r\n    temp = fract(sin(temp) * (randomConstants.z + temp));\r\n    return temp * (range.y - range.x) + range.x;\r\n}\r\n\r\nvec3 generateRandomParticle(vec2 seed, float lev) {\r\n    // ensure the longitude is in [0, 360]\r\n    float randomLon = mod(rand(seed, lonRange), 360.0);\r\n    float randomLat = rand(-seed, latRange);\r\n\r\n    return vec3(randomLon, randomLat, lev);\r\n}\r\n\r\nbool particleOutbound(vec3 particle) {\r\n    return particle.y < -90.0 || particle.y > 90.0;\r\n}\r\n\r\nvoid main() {\r\n\tvec3 nextParticle = texture2D(nextParticlesPosition, v_textureCoordinates).rgb;\r\n    vec4 nextSpeed = texture2D(nextParticlesSpeed, v_textureCoordinates);\r\n    float particleDropRate = dropRate + dropRateBump * nextSpeed.a;\r\n\r\n    vec2 seed1 = nextParticle.xy + v_textureCoordinates;\r\n    vec2 seed2 = nextSpeed.xy + v_textureCoordinates;\r\n    vec3 randomParticle = generateRandomParticle(seed1, nextParticle.z);\r\n    float randomNumber = rand(seed2, normalRange);\r\n\t\r\n    if (randomNumber < particleDropRate || particleOutbound(nextParticle)) {\r\n\t\tgl_FragColor = vec4(randomParticle, 1.0); // 1.0 means this is a random particle\r\n    } else {\r\n\t\tgl_FragColor = vec4(nextParticle, 0.0);\r\n    }\r\n}"},function(t,e){t.exports="uniform sampler2D postProcessingPosition;\r\nuniform sampler2D nextParticlesSpeed;\r\n\r\nvarying vec2 v_textureCoordinates;\r\n\r\nvoid main() {\r\n\tvec4 randomParticle = texture2D(postProcessingPosition, v_textureCoordinates);\r\n\tvec4 particleSpeed = texture2D(nextParticlesSpeed, v_textureCoordinates);\r\n\t\r\n    if (randomParticle.a > 0.0) {\r\n\t\tgl_FragColor = vec4(0.0);\r\n    } else {\r\n\t\tgl_FragColor = particleSpeed;\r\n    }\r\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),o=n(146),a=n(232),s=n(383),l=n(384),u=n(385),c=n(386),p=n(387),h=r.PixelFormat,f=r.PixelDatatype,d=r.Sampler,y=r.TextureMinificationFilter,g=r.TextureMagnificationFilter,_=r.ShaderSource,m=r.PrimitiveType,v=r.DepthFunction,b=r.Geometry,w=r.GeometryAttributes,x=r.GeometryAttribute,C=r.ComponentDatatype,i=(E.prototype.createRenderingTextures=function(t,e){var n={context:t,width:t.drawingBufferWidth,height:t.drawingBufferHeight,pixelFormat:h.RGBA,pixelDatatype:f.UNSIGNED_BYTE},r={context:t,width:t.drawingBufferWidth,height:t.drawingBufferHeight,pixelFormat:h.DEPTH_COMPONENT,pixelDatatype:f.UNSIGNED_INT},i={context:t,width:e.colorTable.colorNum,height:1,pixelFormat:h.RGB,pixelDatatype:f.FLOAT,sampler:new d({minificationFilter:y.LINEAR,magnificationFilter:g.LINEAR})};this.textures={segmentsColor:o.default.createTexture(n),segmentsDepth:o.default.createTexture(r),currentTrailsColor:o.default.createTexture(n),currentTrailsDepth:o.default.createTexture(r),nextTrailsColor:o.default.createTexture(n),nextTrailsDepth:o.default.createTexture(r),colorTable:o.default.createTexture(i,e.colorTable.array)}},E.prototype.createRenderingFramebuffers=function(t){this.framebuffers={segments:o.default.createFramebuffer(t,this.textures.segmentsColor,this.textures.segmentsDepth),currentTrails:o.default.createFramebuffer(t,this.textures.currentTrailsColor,this.textures.currentTrailsDepth),nextTrails:o.default.createFramebuffer(t,this.textures.nextTrailsColor,this.textures.nextTrailsDepth)}},E.prototype.createSegmentsGeometry=function(t){for(var e=[],n=0;n<t.particlesTextureSize;n++)for(var r=0;r<t.particlesTextureSize;r++)for(var i=0;i<4;i++)e.push(n/t.particlesTextureSize),e.push(r/t.particlesTextureSize);e=new Float32Array(e);for(var o=[],a=[-1,1],s=[-1,1],i=0;i<t.maxParticles;i++)for(var l=0;l<2;l++)for(var u=0;u<2;u++)o.push(a[l]),o.push(s[u]),o.push(0);o=new Float32Array(o);for(var c=6*t.maxParticles,p=new Uint32Array(c),i=0,l=0,h=0;i<t.maxParticles;i++)p[l++]=h+0,p[l++]=h+1,p[l++]=h+2,p[l++]=h+2,p[l++]=h+1,p[l++]=h+3,h+=4;return new b({attributes:new w({st:new x({componentDatatype:C.FLOAT,componentsPerAttribute:2,values:e}),normal:new x({componentDatatype:C.FLOAT,componentsPerAttribute:3,values:o})}),indices:p})},E.prototype.createRenderingPrimitives=function(t,e,n,r){var i=this;this.primitives={segments:new a.default({commandType:"Draw",attributeLocations:{st:0,normal:1},geometry:this.createSegmentsGeometry(e),primitiveType:m.TRIANGLES,uniformMap:{currentParticlesPosition:function(){return r.particlesTextures.currentParticlesPosition},postProcessingPosition:function(){return r.particlesTextures.postProcessingPosition},postProcessingSpeed:function(){return r.particlesTextures.postProcessingSpeed},colorTable:function(){return i.textures.colorTable},aspect:function(){return t.drawingBufferWidth/t.drawingBufferHeight},pixelSize:function(){return n.pixelSize},lineWidth:function(){return e.lineWidth},particleHeight:function(){return e.particleHeight}},vertexShaderSource:new _({sources:[c]}),fragmentShaderSource:new _({sources:[s]}),rawRenderState:o.default.createRawRenderState({viewport:void 0,depthTest:{enabled:!0},depthMask:!0}),framebuffer:this.framebuffers.segments,autoClear:!0}),trails:new a.default({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:o.default.getFullscreenQuad(),primitiveType:m.TRIANGLES,uniformMap:{segmentsColorTexture:function(){return i.textures.segmentsColor},segmentsDepthTexture:function(){return i.textures.segmentsDepth},currentTrailsColor:function(){return i.framebuffers.currentTrails.getColorTexture(0)},trailsDepthTexture:function(){return i.framebuffers.currentTrails.depthTexture},fadeOpacity:function(){return e.fadeOpacity}},vertexShaderSource:new _({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[p]}),fragmentShaderSource:new _({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[l]}),rawRenderState:o.default.createRawRenderState({viewport:void 0,depthTest:{enabled:!0,func:v.ALWAYS},depthMask:!0}),framebuffer:this.framebuffers.nextTrails,autoClear:!0,preExecute:function(){var t=i.framebuffers.currentTrails;i.framebuffers.currentTrails=i.framebuffers.nextTrails,i.framebuffers.nextTrails=t,i.primitives.trails.commandToExecute.framebuffer=i.framebuffers.nextTrails,i.primitives.trails.clearCommand.framebuffer=i.framebuffers.nextTrails}}),screen:new a.default({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:o.default.getFullscreenQuad(),primitiveType:m.TRIANGLES,uniformMap:{trailsColorTexture:function(){return i.framebuffers.nextTrails.getColorTexture(0)},trailsDepthTexture:function(){return i.framebuffers.nextTrails.depthTexture}},vertexShaderSource:new _({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[p]}),fragmentShaderSource:new _({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[u]}),rawRenderState:o.default.createRawRenderState({viewport:void 0,depthTest:{enabled:!1},depthMask:!0,blending:{enabled:!0}}),framebuffer:void 0})}},E);function E(t,e,n,r,i){this.createRenderingTextures(t,e),this.createRenderingFramebuffers(t),this.createRenderingPrimitives(t,n,r,i)}e.default=i},function(t,e){t.exports="uniform sampler2D colorTable;\r\n\r\nvarying float speedNormalization;\r\n\r\nvoid main() {\r\n    gl_FragColor = texture2D(colorTable, vec2(speedNormalization, 0.0));\r\n}"},function(t,e){t.exports="uniform sampler2D segmentsColorTexture;\r\nuniform sampler2D segmentsDepthTexture;\r\n\r\nuniform sampler2D currentTrailsColor;\r\nuniform sampler2D trailsDepthTexture;\r\n\r\nuniform float fadeOpacity;\r\n\r\nvarying vec2 textureCoordinate;\r\n\r\nvoid main() {\r\n    vec4 pointsColor = texture2D(segmentsColorTexture, textureCoordinate);\r\n    vec4 trailsColor = texture2D(currentTrailsColor, textureCoordinate);\r\n\r\n    trailsColor = floor(fadeOpacity * 255.0 * trailsColor) / 255.0; // make sure the trailsColor will be strictly decreased\r\n\r\n    float pointsDepth = texture2D(segmentsDepthTexture, textureCoordinate).r;\r\n    float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;\r\n\tfloat globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));\r\n\t\r\n\tgl_FragColor = vec4(0.0);\r\n\tif (pointsDepth < globeDepth) {\r\n\t\tgl_FragColor = gl_FragColor + pointsColor;\r\n\t}\r\n\tif (trailsDepth < globeDepth) {\r\n\t\tgl_FragColor = gl_FragColor + trailsColor;\r\n\t}\r\n\tgl_FragDepthEXT = min(pointsDepth, trailsDepth);\r\n}"},function(t,e){t.exports="uniform sampler2D trailsColorTexture;\r\nuniform sampler2D trailsDepthTexture;\r\n\r\nvarying vec2 textureCoordinate;\r\n\r\nvoid main() {\r\n    vec4 trailsColor = texture2D(trailsColorTexture, textureCoordinate);\r\n    float trailsDepth = texture2D(trailsDepthTexture, textureCoordinate).r;\r\n    float globeDepth = czm_unpackDepth(texture2D(czm_globeDepthTexture, textureCoordinate));\r\n\t\r\n    if (trailsDepth < globeDepth) {\r\n        gl_FragColor = trailsColor;\r\n    } else {\r\n        gl_FragColor = vec4(0.0);\r\n    }\r\n}"},function(t,e){t.exports="attribute vec2 st;\r\n// it is not normal itself, but used to control normal\r\nattribute vec3 normal; // (point to use, offset sign, not used component)\r\n\r\nuniform sampler2D currentParticlesPosition;\r\nuniform sampler2D postProcessingPosition;\r\nuniform sampler2D postProcessingSpeed;\r\n\r\nuniform float particleHeight;\r\n\r\nuniform float aspect;\r\nuniform float pixelSize;\r\nuniform float lineWidth;\r\n\r\nvarying float speedNormalization;\r\n\r\nvec3 convertCoordinate(vec3 lonLatLev) {\r\n    // WGS84 (lon, lat, lev) -> ECEF (x, y, z)\r\n    // see https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates for detail\r\n\t\r\n    // WGS 84 geometric constants \r\n    float a = 6378137.0; // Semi-major axis \r\n    float b = 6356752.3142; // Semi-minor axis \r\n    float e2 = 6.69437999014e-3; // First eccentricity squared\r\n\r\n    float latitude = radians(lonLatLev.y);\r\n    float longitude = radians(lonLatLev.x);\r\n\r\n    float cosLat = cos(latitude);\r\n    float sinLat = sin(latitude);\r\n    float cosLon = cos(longitude);\r\n    float sinLon = sin(longitude);\r\n\r\n    float N_Phi = a / sqrt(1.0 - e2 * sinLat * sinLat);\r\n    float h = particleHeight; // it should be high enough otherwise the particle may not pass the terrain depth test\r\n\r\n    vec3 cartesian = vec3(0.0);\r\n    cartesian.x = (N_Phi + h) * cosLat * cosLon;\r\n    cartesian.y = (N_Phi + h) * cosLat * sinLon;\r\n    cartesian.z = ((b * b) / (a * a) * N_Phi + h) * sinLat;\r\n    return cartesian;\r\n}\r\n\r\nvec4 calcProjectedCoord(vec3 lonLatLev) {\r\n    // the range of longitude in Cesium is [-180, 180] but the range of longitude in the NetCDF file is [0, 360]\r\n    // [0, 180] is corresponding to [0, 180] and [180, 360] is corresponding to [-180, 0]\r\n    lonLatLev.x = mod(lonLatLev.x + 180.0, 360.0) - 180.0;\r\n    vec3 particlePosition = convertCoordinate(lonLatLev);\r\n    vec4 projectedCoord = czm_modelViewProjection * vec4(particlePosition, 1.0);\r\n    return projectedCoord;\r\n}\r\n\r\nvec4 calcOffset(vec4 currentProjectedCoord, vec4 nextProjectedCoord, float offsetSign) {\r\n    vec2 aspectVec2 = vec2(aspect, 1.0);\r\n    vec2 currentXY = (currentProjectedCoord.xy / currentProjectedCoord.w) * aspectVec2;\r\n    vec2 nextXY = (nextProjectedCoord.xy / nextProjectedCoord.w) * aspectVec2;\r\n\r\n    float offsetLength = lineWidth / 2.0;\r\n    vec2 direction = normalize(nextXY - currentXY);\r\n    vec2 normalVector = vec2(-direction.y, direction.x);\r\n\tnormalVector.x = normalVector.x / aspect;\r\n    normalVector = offsetLength * normalVector;\r\n\r\n    vec4 offset = vec4(offsetSign * normalVector, 0.0, 0.0);\r\n    return offset;\r\n}\r\n\r\nvoid main() {\r\n    vec2 particleIndex = st;\r\n\t\r\n\tvec3 currentPosition = texture2D(currentParticlesPosition, particleIndex).rgb;\r\n\tvec4 nextPosition = texture2D(postProcessingPosition, particleIndex);\r\n\t\r\n\tvec4 currentProjectedCoord = vec4(0.0);\r\n\tvec4 nextProjectedCoord = vec4(0.0);\r\n\tif (nextPosition.w > 0.0) {\r\n\t\tcurrentProjectedCoord = calcProjectedCoord(currentPosition);\r\n\t\tnextProjectedCoord = calcProjectedCoord(currentPosition);\r\n\t} else {\r\n\t    currentProjectedCoord = calcProjectedCoord(currentPosition);\r\n\t\tnextProjectedCoord = calcProjectedCoord(nextPosition.xyz);\r\n\t}\r\n\r\n\tfloat pointToUse = normal.x; // -1 is currentProjectedCoord and +1 is nextProjectedCoord\r\n\tfloat offsetSign = normal.y;\r\n\t\r\n    vec4 offset = pixelSize * calcOffset(currentProjectedCoord, nextProjectedCoord, offsetSign);\r\n    if (pointToUse < 0.0) {\r\n        gl_Position = currentProjectedCoord + offset;\r\n    } else {\r\n        gl_Position = nextProjectedCoord + offset;\r\n    }\r\n\t\r\n    speedNormalization = texture2D(postProcessingSpeed, particleIndex).a;\r\n}"},function(t,e){t.exports="attribute vec3 position;\r\nattribute vec2 st;\r\n\r\nvarying vec2 textureCoordinate;\r\n\r\nvoid main() {\r\n    textureCoordinate = st;\r\n\tgl_Position = vec4(position, 1.0);\r\n}"},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(i.prototype.getUserInput=function(){var t=Math.ceil(Math.sqrt(this.maxParticles));return this.maxParticles=t*t,{particlesTextureSize:t,maxParticles:this.maxParticles,particleHeight:this.particleHeight,fadeOpacity:this.fadeOpacity,dropRate:this.dropRate,dropRateBump:this.dropRateBump,speedFactor:this.speedFactor,lineWidth:this.lineWidth}},i);function i(t){this.maxParticles=t.maxParticles,this.particleHeight=t.particleHeight,this.fadeOpacity=t.fadeOpacity,this.dropRate=t.dropRate,this.dropRateBump=t.dropRateBump,this.speedFactor=t.speedFactor,this.lineWidth=t.lineWidth}e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),i=n(8),c=n(233),p=n(390),h=n(391),f=n(392),d=n(142),y=n(393),g=n(394),_=n(395),m=n(396),v=n(148),b=n(397),w=n(399),x=n(401),C=n(28),E=n(234),o=(Object.defineProperty(a.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"editStart",{get:function(){return this._editStart},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"editEnd",{get:function(){return this._editEnd},enumerable:!1,configurable:!0}),a.prototype._initMouseHandlers=function(){this._eventHandler=new i.ScreenSpaceEventHandler(this._earth.getViewer().scene.canvas),this._onLeftClick(this._eventHandler)},a.prototype._onLeftClick=function(t){var a=this;t.setInputAction(function(t){var e,n,r,i,o=a._group.getNodeByScreenPosition(t.position);o&&!a._activedDraw?(r=o.value.type,i=a._switchDrawTypeByEntityType(r),a.start({type:i,mode:C.default.EDIT,node:o}),a._editStart.raiseEvent({object:a._activedDraw.object})):(null===(n=null===(e=a._activedDraw)||void 0===e?void 0:e._drawGeometry)||void 0===n?void 0:n.drawMode)!==C.default.ADD&&a._finishDraw()},i.ScreenSpaceEventType.LEFT_CLICK)},a.prototype.start=function(t){var e,n,r=this;void 0===t&&(t={});var i,o=t.mode||C.default.ADD,a=t.type,s=t.node,l=s&&s.value&&s.value.toJSON(),u=t.obj||l&&l||void 0;switch(o===C.default.ADD&&this._initMouseHandlers(),s&&(null===(n=null===(e=this._activedDraw)||void 0===e?void 0:e._drawGeometry)||void 0===n?void 0:n.drawMode)!==C.default.ADD&&this._finishDraw(),a){case E.default.DRAW_POINT:i=new c.default(this._earth,this._options),this._drawPoint=i;break;case E.default.DRAW_BILLBOARD:i=new p.default(this._earth,this._options),this._drawBillboard=i;break;case E.default.DRAW_MODEL:i=new h.default(this._earth,this._options),this._drawModel=i;break;case E.default.DRAW_ARTIFICIAL_MODEL_TILESET:i=new f.default(this._earth,this._options),this._drawArtificialModelTileset=i;break;case E.default.DRAW_POLYLINE:i=new d.default(this._earth,this._options),this._drawPolyline=i;break;case E.default.DRAW_POLYLINE_ARROW:i=new y.default(this._earth,this._options),this._drawPolylineArrow=i;break;case E.default.DRAW_POLYLINE_DASH:i=new g.default(this._earth,this._options),this._drawPolylineDash=i;break;case E.default.DRAW_POLYLINE_GLOW:i=new _.default(this._earth,this._options),this._drawPolylineGlow=i;break;case E.default.DRAW_POLYLINE_OUTLINE:i=new m.default(this._earth,this._options),this._drawPolylineOutline=i;break;case E.default.DRAW_POLYGON:i=new v.default(this._earth,this._options),this._drawPolygon=i;break;case E.default.DRAW_STRAIGHT_ARROW:i=new b.default(this._earth,this._options),this._drawStraightArrow=i;break;case E.default.DRAW_ATTACK_ARROW:i=new w.default(this._earth,this._options),this._drawAttackArrow=i;break;case E.default.DRAW_PINCER_ARROW:i=new x.default(this._earth,this._options),this._drawPincerArrow=i}this._activedDraw=i,this._activedDraw.start(),u&&(s?this._activedDraw.setOptions(u,s.value):this._activedDraw.setOptions(u)),this._activedDraw._drawGeometry.drawMode=o,this._activedDraw._drawGeometry.selectedEntity=s?s.value:null,this._activedDraw.drawStart&&this._activedDraw.drawStart.addEventListener(function(t){r._drawStart.raiseEvent(t)}),this._activedDraw.drawEnd&&this._activedDraw.drawEnd.addEventListener(function(t){r._drawEnd.raiseEvent(t)})},a.prototype.remove=function(t){switch(t){case E.default.DRAW_POINT:this._drawPoint.remove();break;case E.default.DRAW_BILLBOARD:this._drawBillboard.remove();break;case E.default.DRAW_MODEL:this._drawModel.remove();break;case E.default.DRAW_ARTIFICIAL_MODEL_TILESET:this._drawArtificialModelTileset.remove();break;case E.default.DRAW_POLYLINE:this._drawPolyline.remove();break;case E.default.DRAW_POLYLINE_ARROW:this._drawPolylineArrow.remove();break;case E.default.DRAW_POLYLINE_DASH:this._drawPolylineDash.remove();break;case E.default.DRAW_POLYLINE_GLOW:this._drawPolylineGlow.remove();break;case E.default.DRAW_POLYLINE_OUTLINE:this._drawPolylineOutline.remove();break;case E.default.DRAW_POLYGON:this._drawPolygon.remove();break;case E.default.DRAW_STRAIGHT_ARROW:this._drawStraightArrow.remove();break;case E.default.DRAW_ATTACK_ARROW:this._drawAttackArrow.remove();break;case E.default.DRAW_PINCER_ARROW:this._drawPincerArrow.remove()}},a.prototype.finish=function(){this._finishDraw(),this._destroy()},a.prototype._finishDraw=function(){this._activedDraw&&(this._activedDraw._drawGeometry.drawMode===C.default.EDIT&&this._editEnd.raiseEvent({object:this._activedDraw.object}),this._activedDraw.finish(),this._activedDraw=null)},a.prototype._destroy=function(){this.isStoped()||this._eventHandler.destroy()},a.prototype.isStoped=function(){return!(this._eventHandler&&!this._eventHandler.isDestroyed())},a.prototype._switchDrawTypeByEntityType=function(t){switch(t){case r.default.BILLBOARD:return E.default.DRAW_BILLBOARD;case r.default.POINT:return E.default.DRAW_POINT;case r.default.MODEL:return E.default.DRAW_MODEL;case r.default.ARTIFICIAL_MODEL_TILESET:return E.default.DRAW_ARTIFICIAL_MODEL_TILESET;case r.default.POLYLINE:return E.default.DRAW_POLYLINE;case r.default.POLYLINE_ARROW:return E.default.DRAW_POLYLINE_ARROW;case r.default.POLYLINE_DASH:return E.default.DRAW_POLYLINE_DASH;case r.default.POLYLINE_GLOW:return E.default.DRAW_POLYLINE_GLOW;case r.default.POLYLINE_OUTLINE:return E.default.DRAW_POLYLINE_OUTLINE;case r.default.POLYGON:return E.default.DRAW_POLYGON;case r.default.STRAIGHT_ARROW:return E.default.DRAW_STRAIGHT_ARROW;case r.default.ATTACK_ARROW:return E.default.DRAW_ATTACK_ARROW;case r.default.PINCER_ARROW:return E.default.DRAW_PINCER_ARROW}},a);function a(t,e){this._earth=t,this._options=e||{},this._group=e&&e.group||this._earth.sceneTree,this._drawStart=new i.Event,this._drawEnd=new i.Event,this._editStart=new i.Event,this._editEnd=new i.Event}e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(28),i=n(8),o=n(96),a=n(11),s=(Object.defineProperty(l.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),l.prototype.start=function(){var n=this;n._drawGeometry=new o.default(n._earth,function(t){n._options.position=t;var e=n._group.add({type:a.default.BILLBOARD,obj:n._options});return n._drawStart.raiseEvent({object:e,position:t}),n._drawEnd.raiseEvent({object:e,position:t}),e})},l.prototype.finish=function(){this._drawGeometry.destory()},l.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._drawMode=r.default.NONE)},l.prototype.setOptions=function(t){this._options=Object.assign(this._options,t)},l);function l(t,e){this._options={position:null,image:CESIUM_BASE_URL+"Assets/Images/material/asset.png",pixelOffset:[0,0],horizontalOrigin:i.HorizontalOrigin.CENTER,verticalOrigin:i.VerticalOrigin.CENTER,scale:1,color:"rgb(255,255,255)",rotation:0,width:32,height:32},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new i.Event,this._drawStart=new i.Event}e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(28),i=n(8),o=n(96),a=n(11),s=(Object.defineProperty(l.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),l.prototype.start=function(){var n=this;n._drawGeometry=new o.default(n._earth,function(t){n._options.position=t;var e=n._group.add({type:a.default.MODEL,obj:n._options});return e.value&&(n.model=e.value),n._drawStart.raiseEvent({object:e,position:t}),n._drawEnd.raiseEvent({object:e,position:t}),e})},l.prototype.finish=function(){this._drawGeometry.destory()},l.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._drawMode=r.default.NONE)},l.prototype.setOptions=function(t){this._options=Object.assign(this._options,t)},l);function l(t,e){this._options={position:null,rotation:[0,0,0],uri:null,scale:1,minimumPixelSize:0,heightReference:i.HeightReference.NONE,silhouetteColor:"rgb(255,0,0)",silhouetteSize:0,color:"rgb(255,255,255)",lightColor:void 0},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new i.Event,this._drawStart=new i.Event}e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(28),i=n(8),o=n(96),a=n(11),s=(Object.defineProperty(l.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),l.prototype.start=function(){var n=this;n._drawGeometry=new o.default(n._earth,function(t){n._options.position=t;var e=n._group.add({type:a.default.ARTIFICIAL_MODEL_TILESET,obj:n._options});return e.value&&(n.model=e.value),n._drawStart.raiseEvent({object:e,position:t}),n._drawEnd.raiseEvent({object:e,position:t}),e})},l.prototype.finish=function(){this._drawGeometry.destory()},l.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._drawMode=r.default.NONE)},l.prototype.setOptions=function(t){this._options=Object.assign(this._options,t)},l);function l(t,e){this._options={url:null,definition:1,shadows:!1,position:null,orientation:[0,0,0]},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new i.Event,this._drawStart=new i.Event}e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(64),o=n(11),a=n(27),s=n(28),l=(Object.defineProperty(u.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),u.prototype.start=function(){var n=this,r=this;r._drawGeometry=new i.default(r._earth,{addVertex:function(t){if(0===r._options.positions.length){r._options.positions.push(t,a.default(t));var e=r._group.add({type:o.default.POLYLINE_ARROW,obj:r._options});return r._drawStart.raiseEvent({object:e,position:t}),e}r._options.positions.push(t)},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._options.positions;r._drawEnd.raiseEvent({object:r.object,position:a.default(t[t.length-1])}),t.pop(),t.pop()},destroyed:function(t){t.value.positions=n._options.positions}})},u.prototype.finish=function(){this._drawGeometry.destory()},u.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._vertexCollection.removeAll(),t._drawMode=s.default.NONE)},u.prototype.setOptions=function(t,e){this._options=Object.assign(this._options,t),this._options.positions&&0<this._options.positions.length&&(this._drawGeometry.vertexCollection.fromDegrees(this._options.positions),e&&e.value.setDynamicPositions&&e.value.setDynamicPositions(this._options.positions))},u);function u(t,e){this._options={positions:[],width:4,classificationType:r.ClassificationType.BOTH,clampToGround:!1,material:{color:"rgb(67,178,160)"},dynamic:!0},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new r.Event,this._drawStart=new r.Event}e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(64),o=n(11),a=n(27),s=n(28),l=(Object.defineProperty(u.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),u.prototype.start=function(){var n=this,r=this;r._drawGeometry=new i.default(r._earth,{addVertex:function(t){if(0===r._options.positions.length){r._options.positions.push(t,a.default(t));var e=r._group.add({type:o.default.POLYLINE_DASH,obj:r._options});return r._drawStart.raiseEvent({object:e,position:t}),e}r._options.positions.push(t)},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._options.positions;r._drawEnd.raiseEvent({object:r.object,position:a.default(t[t.length-1])}),t.pop(),t.pop()},destroyed:function(t){t.value.positions=n._options.positions}})},u.prototype.finish=function(){this._drawGeometry.destory()},u.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._vertexCollection.removeAll(),t._drawMode=s.default.NONE)},u.prototype.setOptions=function(t,e){this._options=Object.assign(this._options,t),this._options.positions&&0<this._options.positions.length&&(this._drawGeometry.vertexCollection.fromDegrees(this._options.positions),e&&e.value.setDynamicPositions&&e.value.setDynamicPositions(this._options.positions))},u);function u(t,e){this._options={positions:[],width:1,classificationType:r.ClassificationType.BOTH,clampToGround:!1,material:{color:"rgb(67,178,160)",gapColor:"rgba(0,0,0,0)",dashLength:16,dashPattern:255},dynamic:!0},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new r.Event,this._drawStart=new r.Event}e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(64),o=n(11),a=n(27),s=n(28),l=(Object.defineProperty(u.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),u.prototype.start=function(){var n=this,r=this;r._drawGeometry=new i.default(r._earth,{addVertex:function(t){if(0===r._options.positions.length){r._options.positions.push(t,a.default(t));var e=r._group.add({type:o.default.POLYLINE_GLOW,obj:r._options});return r._drawStart.raiseEvent({object:e,position:t}),e}r._options.positions.push(t)},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._options.positions;r._drawEnd.raiseEvent({object:r.object,position:a.default(t[t.length-1])}),t.pop(),t.pop()},destroyed:function(t){t.value.positions=n._options.positions}})},u.prototype.finish=function(){this._drawGeometry.destory()},u.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._vertexCollection.removeAll(),t._drawMode=s.default.NONE)},u.prototype.setOptions=function(t,e){this._options=Object.assign(this._options,t),this._options.positions&&0<this._options.positions.length&&(this._drawGeometry.vertexCollection.fromDegrees(this._options.positions),e&&e.value.setDynamicPositions&&e.value.setDynamicPositions(this._options.positions))},u);function u(t,e){this._options={positions:[],width:3,classificationType:r.ClassificationType.BOTH,clampToGround:!1,material:{color:"rgb(67,178,160)",glowPower:.5,taperPower:1},dynamic:!0},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new r.Event,this._drawStart=new r.Event}e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(8),i=n(64),o=n(11),a=n(27),s=n(28),l=(Object.defineProperty(u.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),u.prototype.start=function(){var n=this,r=this;r._drawGeometry=new i.default(r._earth,{addVertex:function(t){if(0===r._options.positions.length){r._options.positions.push(t,a.default(t));var e=r._group.add({type:o.default.POLYLINE_OUTLINE,obj:r._options});return r._drawStart.raiseEvent({object:e,position:t}),e}r._options.positions.push(t)},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._options.positions;r._drawEnd.raiseEvent({object:r.object,position:a.default(t[t.length-1])}),t.pop(),t.pop()},destroyed:function(t){t.value.positions=n._options.positions}})},u.prototype.finish=function(){this._drawGeometry.destory()},u.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._vertexCollection.removeAll(),t._drawMode=s.default.NONE)},u.prototype.setOptions=function(t,e){this._options=Object.assign(this._options,t),this._options.positions&&0<this._options.positions.length&&(this._drawGeometry.vertexCollection.fromDegrees(this._options.positions),e&&e.value.setDynamicPositions&&e.value.setDynamicPositions(this._options.positions))},u);function u(t,e){this._options={positions:[],width:3,classificationType:r.ClassificationType.BOTH,clampToGround:!1,material:{color:"rgb(67,178,160)",outlineColor:"rgb(255,255,255)",outlineWidth:1},dynamic:!0},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new r.Event,this._drawStart=new r.Event}e.default=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(398),i=n(11),o=n(28),a=n(8),s=n(27),l=(Object.defineProperty(u.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),u.prototype.start=function(){var n=this;this._drawGeometry=new r.default(this._earth,{addVertex:function(t){return 0===n._options.positions.length?(n._options.positions.push(t),n._entity=n._group.add({type:i.default.POINT,obj:{position:t,pixelSize:5,color:"rgb(255,255,255)",outlineColor:"rgb(0,0,0)",outlineWidth:0}}),n._drawStart.raiseEvent({object:n._entity,position:s.default(t)}),n._entity):1<=n._options.positions.length?(n._options.positions=t,n._group.remove(n._entity),n._entity=n._group.add({type:i.default.POLYGON,obj:n._options}),n._entity):void 0},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._options.positions;n._drawEnd.raiseEvent({object:n.object,position:s.default(t[3])})},destroyed:function(t){t.positions=n._options.positions}})},u.prototype.finish=function(){this._drawGeometry.destory()},u.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._vertexCollection.removeAll(),t._drawMode=o.default.NONE)},u.prototype.setOptions=function(t,e){this._options=Object.assign(this._options,t),this._options.positions&&0<this._options.positions.length&&(this._drawGeometry.vertexCollection.fromDegrees(this._options.positions),e&&(e.dynamic=!0))},u);function u(t,e){this._options={positions:[],fill:!0,material:{color:"rgb(67,178,160)"},outline:!0,outlineColor:"rgb(255,255,255)",outlineWidth:1,clampToGround:!1,dynamic:!0},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new a.Event,this._drawStart=new a.Event}e.default=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(28),l=n(8),u=n(22),c=n(78),a=n(77),p=n(11),h=n(95),f=n(75),d=n(27),y=(o=a.default,i(g,o),g.prototype.destory=function(){o.prototype.destory.call(this),this._drag=!1,this._drawMode=s.default.NONE,this._vertexCollection.removeAll(),this._destroyed(this._selectedEntity)},g.prototype._initMouseHandlers=function(){this._eventHandler=new l.ScreenSpaceEventHandler(this._earth.getViewer().scene.canvas),this._onLeftClick(this._eventHandler),this._onLeftDoubleClick(this._eventHandler),this._onMouseMove(this._eventHandler),this._onLeftDown(this._eventHandler),this._onLeftUp(this._eventHandler)},g.prototype._onLeftClick=function(i){var o=this;i.setInputAction(function(t){if(o._drawMode===s.default.ADD){var e=o._earth.pickGloble(t.position,o._selectedEntity?[o._selectedEntity.value]:void 0);if(!e)return;var n=u.default.cartesianToDegrees(e);o._drawPoints.push(n),o._vertexCollection.add(new c.default({position:n}));var r=o._addVertex(n);r&&(o._selectedEntity=r),i.removeInputAction(l.ScreenSpaceEventType.LEFT_CLICK)}},l.ScreenSpaceEventType.LEFT_CLICK)},g.prototype._onLeftDoubleClick=function(t){var o=this;t.setInputAction(function(t){if(o._drawMode===s.default.ADD){var e=o._earth.pickGloble(t.position,o._selectedEntity?[o._selectedEntity.value]:void 0);if(!e)return;var n=u.default.cartesianToDegrees(e),r=(r=f.default.algorithm.fineArrow(o._drawPoints[0].slice(0,2),n.slice(0,2))).map(function(t){var e=u.default.cartesianToDegrees(t);return e[0].toFixed(12)===o._drawPoints[0][0].toFixed(12)&&e[1].toFixed(12)===o._drawPoints[0][1].toFixed(12)&&(e=o._drawPoints[0]),o._vertexCollection.add(new c.default({position:e})),e}),i=o._addVertex(r);i&&(o._selectedEntity=i),o._drawMode=s.default.EDIT,o._endAdd()}},l.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},g.prototype._onMouseMove=function(t){var a=this;t.setInputAction(function(t){if(a._drawMode===s.default.ADD&&!a._drag&&a._selectedEntity){if(!(o=a._earth.pickGloble(t.endPosition,[a._selectedEntity.value])))return;var e,n,r=u.default.cartesianToDegrees(o),i=d.default(a._drawPoints);1<=i.length&&(2===i.length&&i.pop(),i.push(r),e=f.default.algorithm.fineArrow(a._drawPoints[0].slice(0,2),r.slice(0,2)),a._vertexCollection.removeAll(),e=e.map(function(t){var e=u.default.cartesianToDegrees(t);return e[0].toFixed(12)===a._drawPoints[0][0].toFixed(12)&&e[1].toFixed(12)===a._drawPoints[0][1].toFixed(12)&&(e=a._drawPoints[0]),a._vertexCollection.add(new c.default({position:e})),e}),(n=a._addVertex(e))&&(a._selectedEntity=n))}var o;a._drawMode===s.default.EDIT&&a._drag&&a._selectedEntity&&a._selectedVertex&&(o=a._earth.pickGloble(t.endPosition,[]),r=u.default.cartesianToDegrees(o),a._selectedVertex.position=o,a._editVertex(r,a._selectedVertex.index))},l.ScreenSpaceEventType.MOUSE_MOVE)},g.prototype._onLeftDown=function(t){var r=this;t.setInputAction(function(t){if(r._drawMode===s.default.EDIT&&r._selectedEntity){var e=r._earth.getViewer().scene.pick(t.position);if(!e)return;var n=e.primitive;n&&n.type===p.default.VERTEX&&(r._selectedVertex=n,r._drag=!0,r._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!1)}},l.ScreenSpaceEventType.LEFT_DOWN)},g.prototype._onLeftUp=function(t){var e=this;t.setInputAction(function(t){e._selectedVertex=null,e._drag=!1,e._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!0},l.ScreenSpaceEventType.LEFT_UP)},Object.defineProperty(g.prototype,"drawMode",{get:function(){return this._drawMode},set:function(t){this._drawMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"selectedEntity",{get:function(){return this._selectedEntity},set:function(t){this._selectedEntity=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"drag",{get:function(){return this._drag},set:function(t){this._drag=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"vertexCollection",{get:function(){return this._vertexCollection},enumerable:!1,configurable:!0}),g);function g(t,e){var n=o.call(this)||this;n._vertexCollection=new h.default,n._drawMode=s.default.NONE,n._drag=!1,n._drawPoints=[],n._earth=t,n._earth.getViewer().scene.primitives.add(n._vertexCollection.value);var r=e||{};return n._addVertex=r.addVertex,n._editVertex=r.editVertex,n._endAdd=r.endAdd,n._destroyed=r.destroyed,n._initMouseHandlers(),n}e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(400),i=n(11),o=n(28),a=n(8),s=n(27),l=(Object.defineProperty(u.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),u.prototype.start=function(){var n=this;this._drawGeometry=new r.default(this._earth,{addVertex:function(t){if(0===n._options.positions.length||1===n._options.positions.length)n._options.positions=t,n._drawStart.raiseEvent({object:n._group,position:s.default(t[0])});else{if(2===n._options.positions.length)return n._options.positions=t,n._entity&&n._group.remove(n._entity),n._entity=n._group.add({type:i.default.POLYLINE,obj:{positions:n._options.positions,width:1,clampToGround:!1,color:"rgb(67,178,160)",dynamic:!0}}),n._entity;if(2<n._options.positions.length)return n._options.positions=t,n._group.remove(n._entity),n._entity=n._group.add({type:i.default.POLYGON,obj:n._options}),n._entity}},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._drawGeometry._drawPoints;n._drawEnd.raiseEvent({object:n.object,position:s.default(t[t.length-1])})},destroyed:function(t){}})},u.prototype.finish=function(){this._drawGeometry.destory()},u.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._vertexCollection.removeAll(),t._drawMode=o.default.NONE)},u.prototype.setOptions=function(t,e){this._options=Object.assign(this._options,t),this._options.positions&&0<this._options.positions.length&&(this._drawGeometry.vertexCollection.fromDegrees(this._options.positions),e&&(e.dynamic=!0))},u);function u(t,e){this._options={positions:[],fill:!0,material:{color:"rgb(67,178,160)"},outline:!0,outlineColor:"rgb(255,255,255)",outlineWidth:1,clampToGround:!0,dynamic:!0},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new a.Event,this._drawStart=new a.Event}e.default=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(28),l=n(8),u=n(22),c=n(78),a=n(77),p=n(11),h=n(95),f=n(75),d=n(27),y=(o=a.default,i(g,o),g.prototype.destory=function(){o.prototype.destory.call(this),this._drag=!1,this._drawMode=s.default.NONE,this._vertexCollection.removeAll(),this._destroyed(this._selectedEntity)},g.prototype._initMouseHandlers=function(){this._eventHandler=new l.ScreenSpaceEventHandler(this._earth.getViewer().scene.canvas),this._onLeftClick(this._eventHandler),this._onRightClick(this._eventHandler),this._onLeftDoubleClick(this._eventHandler),this._onMouseMove(this._eventHandler),this._onLeftDown(this._eventHandler),this._onLeftUp(this._eventHandler)},g.prototype._onLeftClick=function(t){var o=this;t.setInputAction(function(t){if(o._drawMode===s.default.ADD){var e=o._earth.pickGloble(t.position,o._selectedEntity?[o._selectedEntity.value]:void 0);if(!e)return;var n=u.default.cartesianToDegrees(e);o._drawPoints.push(n);var r,i=void 0;1===o._drawPoints.length||2===o._drawPoints.length?(o._vertexCollection.add(new c.default({position:n})),i=o._addVertex(o._drawPoints)):2<o._drawPoints.length&&(o._drawPoints.length===o._length&&(r=(r=f.default.algorithm.tailedAttackArrow(o._drawPoints).polygonalPoint).map(function(t){var e=u.default.cartesianToDegrees(t);return o._drawPoints.forEach(function(t){e[0].toFixed(12)===t[0].toFixed(12)&&e[1].toFixed(12)===t[1].toFixed(12)&&(e=t)}),e}),o._vertexCollection.add(new c.default({position:n})),i=o._addVertex(r)),o._length=o._drawPoints.length),i&&(o._selectedEntity=i)}},l.ScreenSpaceEventType.LEFT_CLICK)},g.prototype._onRightClick=function(t){var r=this;t.setInputAction(function(t){var e,n;r._drawMode===s.default.ADD&&(r._vertexCollection.removeAll(),r._drawPoints.slice(0,r._drawPoints.length-1).forEach(function(t){r._vertexCollection.add(new c.default({position:t}))}),1===r._drawPoints.length?r._drawPoints=[]:2===r._drawPoints.length||3===r._drawPoints.length?(r._drawPoints.pop(),(n=r._addVertex(r._drawPoints))&&(r._selectedEntity=n)):3<r._drawPoints.length&&(r._drawPoints.pop(),e=(e=f.default.algorithm.tailedAttackArrow(r._drawPoints).polygonalPoint).map(function(t){var e=u.default.cartesianToDegrees(t);return r._drawPoints.forEach(function(t){e[0].toFixed(12)===t[0].toFixed(12)&&e[1].toFixed(12)===t[1].toFixed(12)&&(e=t)}),e}),(n=r._addVertex(e))&&(r._selectedEntity=n)))},l.ScreenSpaceEventType.RIGHT_CLICK)},g.prototype._onLeftDoubleClick=function(t){var e=this;t.setInputAction(function(t){e._drawMode===s.default.ADD&&(e._drawMode=s.default.EDIT,e._endAdd())},l.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},g.prototype._onMouseMove=function(t){var a=this;t.setInputAction(function(t){if(a._drawMode===s.default.ADD&&!a._drag&&a._selectedEntity){if(!(o=a._earth.pickGloble(t.endPosition,[a._selectedEntity.value])))return;var e,n,r=u.default.cartesianToDegrees(o),i=d.default(a._drawPoints);2<=i.length&&(3<i.length&&i.pop(),i.push(r),e=(e=f.default.algorithm.tailedAttackArrow(i).polygonalPoint).map(function(t){var e=u.default.cartesianToDegrees(t);return a._drawPoints.forEach(function(t){e[0].toFixed(12)===t[0].toFixed(12)&&e[1].toFixed(12)===t[1].toFixed(12)&&(e=t)}),e}),a._vertexCollection.removeAll(),a._drawPoints.forEach(function(t){a._vertexCollection.add(new c.default({position:t}))}),a._vertexCollection.add(new c.default({position:r})),(n=a._addVertex(e))&&(a._selectedEntity=n))}if(a._drawMode===s.default.EDIT&&a._drag&&a._selectedEntity&&a._selectedVertex){var o=a._earth.pickGloble(t.endPosition,[]);if(!l.defined(o))return;r=u.default.cartesianToDegrees(o);a._selectedVertex.position=o,a._editVertex(r,a._selectedVertex.index)}},l.ScreenSpaceEventType.MOUSE_MOVE)},g.prototype._onLeftDown=function(t){var r=this;t.setInputAction(function(t){if(r._drawMode===s.default.EDIT&&r._selectedEntity){var e=r._earth.getViewer().scene.pick(t.position);if(!e)return;var n=e.primitive;n&&n.type===p.default.VERTEX&&(r._selectedVertex=n,r._drag=!0,r._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!1)}},l.ScreenSpaceEventType.LEFT_DOWN)},g.prototype._onLeftUp=function(t){var e=this;t.setInputAction(function(t){e._selectedVertex=null,e._drag=!1,e._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!0},l.ScreenSpaceEventType.LEFT_UP)},Object.defineProperty(g.prototype,"drawMode",{get:function(){return this._drawMode},set:function(t){this._drawMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"selectedEntity",{get:function(){return this._selectedEntity},set:function(t){this._selectedEntity=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"drag",{get:function(){return this._drag},set:function(t){this._drag=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"vertexCollection",{get:function(){return this._vertexCollection},enumerable:!1,configurable:!0}),g);function g(t,e){var n=o.call(this)||this;n._vertexCollection=new h.default,n._drawMode=s.default.NONE,n._drag=!1,n._drawPoints=[],n._earth=t,n._earth.getViewer().scene.primitives.add(n._vertexCollection.value);var r=e||{};return n._addVertex=r.addVertex,n._editVertex=r.editVertex,n._endAdd=r.endAdd,n._destroyed=r.destroyed,n._initMouseHandlers(),n}e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(402),i=n(11),o=n(28),a=n(8),s=n(27),l=(Object.defineProperty(u.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawStart",{get:function(){return this._drawStart},enumerable:!1,configurable:!0}),Object.defineProperty(u.prototype,"drawEnd",{get:function(){return this._drawEnd},enumerable:!1,configurable:!0}),u.prototype.start=function(){var n=this;this._drawGeometry=new r.default(this._earth,{addVertex:function(t){if(0===n._options.positions.length)n._options.positions.push(t),n._drawStart.raiseEvent({object:n._entity,position:s.default(t)});else{if(1===n._options.positions.length)return n._options.positions.push(t),n._entity=n._group.add({type:i.default.POLYLINE,obj:{positions:n._options.positions,width:1,clampToGround:!1,color:"rgb(67,178,160)",dynamic:!0}}),n._entity;if(2<=n._options.positions.length)return n._options.positions=t,n._group.remove(n._entity),n._entity=n._group.add({type:i.default.POLYGON,obj:n._options}),n._entity}},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._drawGeometry._drawPoints;n._drawEnd.raiseEvent({object:n.object,position:s.default(t[t.length-1])})},destroyed:function(t){}})},u.prototype.finish=function(){this._drawGeometry.destory()},u.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._group.remove(t.selectedEntity),t._vertexCollection.removeAll(),t._drawMode=o.default.NONE)},u.prototype.setOptions=function(t,e){this._options=Object.assign(this._options,t),this._options.positions&&0<this._options.positions.length&&(this._drawGeometry.vertexCollection.fromDegrees(this._options.positions),e&&(e.dynamic=!0))},u);function u(t,e){this._options={positions:[],fill:!0,material:{color:"rgb(67,178,160)"},outline:!0,outlineColor:"rgb(255,255,255)",outlineWidth:1,clampToGround:!1,dynamic:!0},this._earth=t;var n=e||{};this._group=n.group||this._earth.sceneTree,this._drawEnd=new a.Event,this._drawStart=new a.Event}e.default=l},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,s=n(28),l=n(8),u=n(22),c=n(78),a=n(77),p=n(11),h=n(95),f=n(75),d=n(27),y=(o=a.default,i(g,o),g.prototype.destory=function(){o.prototype.destory.call(this),this._drag=!1,this._drawMode=s.default.NONE,this._vertexCollection.removeAll(),this._destroyed(this._selectedEntity)},g.prototype._initMouseHandlers=function(){this._eventHandler=new l.ScreenSpaceEventHandler(this._earth.getViewer().scene.canvas),this._onLeftClick(this._eventHandler),this._onLeftDoubleClick(this._eventHandler),this._onMouseMove(this._eventHandler),this._onLeftDown(this._eventHandler),this._onLeftUp(this._eventHandler)},g.prototype._onLeftClick=function(t){var i=this;t.setInputAction(function(t){if(i._drawMode===s.default.ADD){var e=i._earth.pickGloble(t.position,i._selectedEntity?[i._selectedEntity.value]:void 0);if(!e)return;var n,r=u.default.cartesianToDegrees(e);0!==i._drawPoints.length&&1!==i._drawPoints.length||(i._drawPoints.push(r),i._vertexCollection.add(new c.default({position:r})),(n=i._addVertex(r))&&(i._selectedEntity=n))}},l.ScreenSpaceEventType.LEFT_CLICK)},g.prototype._onLeftDoubleClick=function(t){var o=this;t.setInputAction(function(t){if(o._drawMode===s.default.ADD){var e=o._earth.pickGloble(t.position,o._selectedEntity?[o._selectedEntity.value]:void 0);if(!e)return;var n=u.default.cartesianToDegrees(e);o._drawPoints.push(n);var r=(r=f.default.algorithm.doubleArrow(o._drawPoints).polygonalPoint).map(function(t){var e=u.default.cartesianToDegrees(t);return o._drawPoints.forEach(function(t){e[0].toFixed(12)===t[0].toFixed(12)&&e[1].toFixed(12)===t[1].toFixed(12)&&(e=t)}),e});o._vertexCollection.add(new c.default({position:n}));var i=o._addVertex(r);i&&(o._selectedEntity=i),o._drawMode=s.default.EDIT,o._endAdd()}},l.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},g.prototype._onMouseMove=function(t){var a=this;t.setInputAction(function(t){if(a._drawMode===s.default.ADD&&!a._drag&&a._selectedEntity){if(!(o=a._earth.pickGloble(t.endPosition,[a._selectedEntity.value])))return;var e,n=u.default.cartesianToDegrees(o),r=d.default(a._drawPoints),i=void 0;2===r.length&&(r.push(n),i=a._addVertex(r)),2<r.length&&(r.pop(),r.push(n),e=(e=f.default.algorithm.doubleArrow(r).polygonalPoint).map(function(t){var e=u.default.cartesianToDegrees(t);return a._drawPoints.forEach(function(t){e[0].toFixed(12)===t[0].toFixed(12)&&e[1].toFixed(12)===t[1].toFixed(12)&&(e=t)}),e}),a._vertexCollection.removeAll(),a._drawPoints.forEach(function(t){a._vertexCollection.add(new c.default({position:t}))}),i=a._addVertex(e)),i&&(a._selectedEntity=i)}var o;a._drawMode===s.default.EDIT&&a._drag&&a._selectedEntity&&a._selectedVertex&&(o=a._earth.pickGloble(t.endPosition,[]),n=u.default.cartesianToDegrees(o),a._selectedVertex.position=o,a._editVertex(n,a._selectedVertex.index))},l.ScreenSpaceEventType.MOUSE_MOVE)},g.prototype._onLeftDown=function(t){var r=this;t.setInputAction(function(t){if(r._drawMode===s.default.EDIT&&r._selectedEntity){var e=r._earth.getViewer().scene.pick(t.position);if(!e)return;var n=e.primitive;n&&n.type===p.default.VERTEX&&(r._selectedVertex=n,r._drag=!0,r._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!1)}},l.ScreenSpaceEventType.LEFT_DOWN)},g.prototype._onLeftUp=function(t){var e=this;t.setInputAction(function(t){e._selectedVertex=null,e._drag=!1,e._earth.getViewer().scene._screenSpaceCameraController.enableInputs=!0},l.ScreenSpaceEventType.LEFT_UP)},Object.defineProperty(g.prototype,"drawMode",{get:function(){return this._drawMode},set:function(t){this._drawMode=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"selectedEntity",{get:function(){return this._selectedEntity},set:function(t){this._selectedEntity=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"drag",{get:function(){return this._drag},set:function(t){this._drag=t},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"vertexCollection",{get:function(){return this._vertexCollection},enumerable:!1,configurable:!0}),g);function g(t,e){var n=o.call(this)||this;n._vertexCollection=new h.default,n._drawMode=s.default.NONE,n._drag=!1,n._drawPoints=[],n._earth=t,n._earth.getViewer().scene.primitives.add(n._vertexCollection.value);var r=e||{};return n._addVertex=r.addVertex,n._editVertex=r.editVertex,n._endAdd=r.endAdd,n._destroyed=r.destroyed,n._initMouseHandlers(),n}e.default=y},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(235),s=n(404),l=n(405),u=n(406),c=n(407),p=n(408),h=n(409),f=n(414),d=n(28),r=n(8),i=(Object.defineProperty(o.prototype,"measureStart",{get:function(){return this._measureStart},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"measureEnd",{get:function(){return this._measureEnd},enumerable:!1,configurable:!0}),o.prototype.start=function(t){var e=this;void 0===t&&(t={});var n=t.type,r=t.node,i=r&&r.value&&r.value.toJSON(),o=t.obj||i&&i||void 0;switch(n){case a.default.POINT:this._activedMeasure=new s.default(this._earth),this._measurePoint=this._activedMeasure;break;case a.default.DISTANCE:this._activedMeasure=new l.default(this._earth),this._measureDistance=this._activedMeasure;break;case a.default.HEIGHT:this._activedMeasure=new u.default(this._earth),this._measureHeight=this._activedMeasure;break;case a.default.AREA:this._activedMeasure=new c.default(this._earth),this._measureArea=this._activedMeasure;break;case a.default.TERRAIN_DISTANCE:this._activedMeasure=new p.default(this._earth),this._measureTerrainDistance=this._activedMeasure;break;case a.default.TERRAIN_AREA:this._activedMeasure=new h.default(this._earth),this._measureTerrainArea=this._activedMeasure;break;case a.default.VOLUME:this._activedMeasure=new f.default(this._earth),this._measureVolume=this._activedMeasure}this._activedMeasure.start(),o&&this._activedMeasure.setOptions(o,r.value),this._activedMeasure._drawGeometry.drawMode=d.default.ADD,this._activedMeasure._drawGeometry.selectedEntity=r?r.value:null,this._activedMeasure.measureStart&&this._activedMeasure.measureStart.addEventListener(function(t){e._measureStart.raiseEvent(t)}),this._activedMeasure.measureEnd&&this._activedMeasure.measureEnd.addEventListener(function(t){e._measureEnd.raiseEvent(t)})},o.prototype.remove=function(t){switch(t){case a.default.POINT:this._measurePoint.remove();break;case a.default.DISTANCE:this._measureDistance.remove();break;case a.default.HEIGHT:this._measureHeight.remove();break;case a.default.AREA:this._measureArea.remove();break;case a.default.TERRAIN_DISTANCE:this._measureTerrainDistance.remove();break;case a.default.TERRAIN_AREA:this._measureTerrainArea.remove();break;case a.default.VOLUME:this._measureVolume.remove()}},o.prototype.stopMeasure=function(){this._activedMeasure&&(this._activedMeasure.finish(),this._activedMeasure=null)},o.prototype.isStoped=function(){return null===this._activedMeasure},o);function o(t){this._earth=t,this._measureStart=new r.Event,this._measureEnd=new r.Event}e.default=i},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(96),s=n(11),l=n(70),u=n(28),c=n(45),p=n(8),h=n(51),f=(o=l.default,i(d,o),Object.defineProperty(d.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"measureStart",{get:function(){return this._measureStart},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"measureEnd",{get:function(){return this._measureEnd},enumerable:!1,configurable:!0}),d.prototype.start=function(){var n=this,r=this;r._drawGeometry=new a.default(r._earth,function(t){r._options.position=t,n._group=r._earth.sceneTree.add({id:"point",type:c.default.GROUP,name:"point",children:[]}),n._group.add({type:s.default.LABEL,obj:{position:t,text:"经度："+t[0].toFixed(6)+"°\n纬度："+t[1].toFixed(6)+"°\n高度："+t[2].toFixed(3)+"米",font:"20px Microsoft YaHei",verticalOrigin:h.default.BOTTOM,scaleByDistance:[150,1,15e5,.5]}});var e=r._group.add({type:s.default.POINT,obj:r._options});return r._measureStart.raiseEvent({object:e,position:t}),r._measureEnd.raiseEvent({object:e,position:t}),e})},d.prototype.finish=function(){o.prototype.finish.call(this),this._drawGeometry.destory()},d.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._earth.sceneTree.remove(this._group),t._drawMode=u.default.NONE)},d.prototype.setOptions=function(t){this._options=Object.assign(this._options,t)},d);function d(t){var e=o.call(this)||this;return e._options={position:null,pixelSize:5,color:"rgb(255,0,0)",outlineColor:"rgb(0,0,0)",outlineWidth:0},e._earth=t,e._measureEnd=new p.Event,e._measureStart=new p.Event,e}e.default=f},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(64),s=n(11),l=n(27),u=n(69),c=n(22),p=n(70),h=n(28),f=n(45),d=n(8),y=(o=p.default,i(g,o),Object.defineProperty(g.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"measureStart",{get:function(){return this._measureStart},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"measureEnd",{get:function(){return this._measureEnd},enumerable:!1,configurable:!0}),g.prototype.calDistance=function(){var t,e,n;this._drawGeometry.selectedEntity&&(t=this._drawGeometry.selectedEntity.positions,0===this._positions.length?(this._positions.push(t[0]),this._positions.push(t[1])):2===this._positions.length&&(this._positions.shift(),this._positions.push(t[t.length-1])),e=c.default.cartesianToDegrees(u.getCenter(c.default.degreesToCartesian(this._positions[0]),c.default.degreesToCartesian(this._positions[1]))),n=u.calculateSpaceDistance(this._positions),0!==window.Math.round(n)&&this._group.add({type:s.default.LABEL,obj:{position:e,text:n.toFixed(2)+"m",scaleByDistance:[150,1,15e5,.5]}}))},g.prototype.start=function(){var n=this,r=this;r._drawGeometry=new a.default(r._earth,{addVertex:function(t){if(r.calDistance(),0===r._options.positions.length){r._options.positions.push(t,l.default(t)),n._group=r._earth.sceneTree.add({id:"distance",type:f.default.GROUP,name:"distance",children:[]});var e=n._group.add({type:s.default.POLYLINE,obj:r._options});return r._measureStart.raiseEvent({object:e,position:t}),e}r._options.positions.push(t)},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._options.positions;r._measureEnd.raiseEvent({object:r.object,position:l.default(t[t.length-1])}),t.pop(),t.pop(),n._drawGeometry.drawMode=h.default.NONE},destroyed:function(t){t&&(t.value.positions=n._options.positions)}})},g.prototype.finish=function(){o.prototype.finish.call(this),this._drawGeometry.destory()},g.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._earth.sceneTree.remove(this._group),t._vertexCollection.removeAll(),t._drawMode=h.default.NONE)},g.prototype.setOptions=function(t){this._options=Object.assign(this._options,t)},g);function g(t){var e=o.call(this)||this;return e._positions=[],e._options={positions:[],width:1,clampToGround:!1,color:"rgb(67,178,160)",dynamic:!0},e._earth=t,e._measureEnd=new d.Event,e._measureStart=new d.Event,e}e.default=y},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(64),s=n(11),l=n(27),f=n(69),d=n(22),u=n(70),c=n(8),y=n(28),p=n(45),h=(o=u.default,i(g,o),Object.defineProperty(g.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"measureStart",{get:function(){return this._measureStart},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"measureEnd",{get:function(){return this._measureEnd},enumerable:!1,configurable:!0}),g.prototype.calHeight=function(){var t=this._options.positions,e=[],n=t[0],r=t[t.length-1];e.push(n[0],n[1],r[2]);var i,o,a,s=[],l=[],u=[];s.push(n,r),l.push(n,e),u.push(r,e),i=f.getCenter(d.default.degreesToCartesian(n),d.default.degreesToCartesian(r)),o=f.getCenter(d.default.degreesToCartesian(n),d.default.degreesToCartesian(e)),a=f.getCenter(d.default.degreesToCartesian(r),d.default.degreesToCartesian(e));var c=f.calculateSpaceDistance(s),p=f.calculateSpaceDistance(l),h=f.calculateSpaceDistance(u);this.addLabel(d.default.cartesianToDegrees(i),c.toFixed(2)+"m"),this.addLabel(d.default.cartesianToDegrees(o),p.toFixed(2)+"m"),this.addLabel(d.default.cartesianToDegrees(a),h.toFixed(2)+"m"),this.addPolyline([n,e]),this.addPolyline([r,e]),this._drawGeometry.drawMode=y.default.NONE},g.prototype.addLabel=function(t,e){this._group.add({type:s.default.LABEL,obj:{position:t,text:e,scaleByDistance:[150,1,15e5,.5]}})},g.prototype.addPolyline=function(t){this._group.add({type:s.default.POLYLINE,obj:{positions:t,clampToGround:!1}})},g.prototype.start=function(){var n=this,r=this;r._drawGeometry=new a.default(r._earth,{addVertex:function(t){if(0===r._options.positions.length){r._options.positions.push(t,l.default(t)),n._group=r._earth.sceneTree.add({id:"height",type:p.default.GROUP,name:"height",children:[]});var e=n._group.add({type:s.default.POLYLINE,obj:r._options});return n._drawGeometry._eventHandler.removeInputAction(c.ScreenSpaceEventType.LEFT_CLICK),n._measureStart.raiseEvent({object:e,position:t}),e}r._options.positions.push(t)},endAdd:function(){var t=n._drawGeometry.selectedEntity.positions;n._measureEnd.raiseEvent({object:n.object,position:l.default(t[t.length-1])}),n.calHeight()},destroyed:function(t){t&&(t.value.positions=n._options.positions)}})},g.prototype.finish=function(){o.prototype.finish.call(this),this._drawGeometry.destory()},g.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._earth.sceneTree.remove(this._group),t._vertexCollection.removeAll(),t._drawMode=y.default.NONE)},g.prototype.setOptions=function(t){this._options=Object.assign(this._options,t)},g);function g(t){var e=o.call(this)||this;return e._options={positions:[],width:1,clampToGround:!1,color:"rgb(67,178,160)",dynamic:!0},e._earth=t,e._measureEnd=new c.Event,e._measureStart=new c.Event,e}e.default=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(115),s=n(11),l=n(27),u=n(69),c=n(22),p=n(8),h=n(70),f=n(28),d=n(45),y=(o=h.default,i(g,o),Object.defineProperty(g.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"measureStart",{get:function(){return this._measureStart},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"measureEnd",{get:function(){return this._measureEnd},enumerable:!1,configurable:!0}),g.prototype.calArea=function(){var t=this._drawGeometry.selectedEntity.positions,e=[],n=[];t.forEach(function(t){e.push({lon:t[0],lat:t[1],hei:t[2]}),n.push(c.default.degreesToCartesian(t))});var r=u.getListCenter(e),i=u.calculateSpaceArea(e,n);this._group.add({type:s.default.LABEL,obj:{position:r,text:i+"m²",heightReference:p.HeightReference.CLAMP_TO_GROUND,scaleByDistance:[150,1,15e5,.5]}}),this._drawGeometry.drawMode=f.default.NONE},g.prototype.start=function(){var n=this,e=this;e._drawGeometry=new a.default(this._earth,{addVertex:function(t){return 1!==n._options.positions.length?0===n._options.positions.length?(n._options.positions.push(t),void e._measureStart.raiseEvent({object:void 0,position:t})):void n._options.positions.push(t):(n._options.positions.push(t,l.default(t).map(function(t,e){return 0!==e&&1!==e||(t+=1e-8),t})),n._group=e._earth.sceneTree.add({id:"area",type:d.default.GROUP,name:"area",children:[]}),n._group.add({type:s.default.POLYGON,obj:n._options}))},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._options.positions;e._measureEnd.raiseEvent({object:e.object,position:l.default(t[t.length-1])}),t.pop(),t.pop(),n.calArea()},destroyed:function(t){t&&(t.positions=n._options.positions)}})},g.prototype.finish=function(){o.prototype.finish.call(this),this._drawGeometry.destory()},g.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._earth.sceneTree.remove(this._group),t._vertexCollection.removeAll(),t._drawMode=f.default.NONE)},g.prototype.setOptions=function(t){this._options=Object.assign(this._options,t)},g);function g(t){var e=o.call(this)||this;return e._options={positions:[],fill:!0,fillColor:"rgb(67,178,160)",outline:!0,outlineColor:"rgb(255,255,255)",outlineWidth:1,clampToGround:!1,dynamic:!0},e._earth=t,e._measureEnd=new p.Event,e._measureStart=new p.Event,e}e.default=y},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{o(l.next(t))}catch(t){e(t)}}function i(t){try{o(l.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((l=l.apply(t,a||[])).next())})},v=this&&this.__generator||function(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(64),b=n(11),l=n(27),w=n(69),x=n(22),u=n(70),c=n(28),C=n(51),E=n(8),p=n(45),h="terrainDistance",f=(a=u.default,i(d,a),Object.defineProperty(d.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"measureStart",{get:function(){return this._measureStart},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"measureEnd",{get:function(){return this._measureEnd},enumerable:!1,configurable:!0}),d.prototype.calDistance=function(){return o(this,void 0,void 0,function(){var e,o,n,r,i,a,s,l,u,c,p,h,f,d,y,g,_,m=this;return v(this,function(t){switch(t.label){case 0:if(!this._drawGeometry.selectedEntity)return[3,3];if(e=this._drawGeometry.selectedEntity.positions,0===this._positions.length?(this._positions.push(e[0]),this._positions.push(e[1])):2===this._positions.length&&(this._positions.shift(),this._positions.push(e[e.length-1])),o=x.default.cartesianToDegrees(w.getCenter(x.default.degreesToCartesian(this._positions[0]),x.default.degreesToCartesian(this._positions[1]))),n=E.Cartographic.fromDegrees(this._positions[0][0],this._positions[0][1],this._positions[0][2]),r=E.Cartographic.fromDegrees(this._positions[1][0],this._positions[1][1],this._positions[1][2]),!this._flag)return[3,1];for((i=new E.EllipsoidGeodesic).setEndPoints(n,r),a=i.surfaceDistance,s=[n],l=100;l<a;l+=100)u=new E.Cartographic,i.interpolateUsingSurfaceDistance(l,u),s.push(u);return s.push(r),E.sampleTerrainMostDetailed(this._earth._viewer.terrainProvider,s).then(function(t){for(var e=0,n=0;n<t.length-1;n++){var r=new E.EllipsoidGeodesic;r.setEndPoints(t[n],t[n+1]);var i=r.surfaceDistance;e+=i=Math.sqrt(Math.pow(i,2)+Math.pow(t[n+1].height-t[n].height,2)),m._group.add({type:b.default.POINT,obj:{position:[180*t[n].longitude/Math.PI,180*t[n].latitude/Math.PI,t[n].height],pixelSize:10,color:"rgb(255,0,0)"}})}0!==Math.round(e)&&m._group.add({type:b.default.LABEL,obj:{position:o,text:e.toFixed(2)+"m",verticalOrigin:C.default.BOTTOM,scaleByDistance:[150,1,15e5,.5]}})}),[3,3];case 1:for(c=new Array(40),p=0;p<40;++p)h=p/39,c[p]=E.Cartesian3.lerp(x.default.degreesToCartesian(this._positions[0]),x.default.degreesToCartesian(this._positions[1]),h,new E.Cartesian3);return[4,this._earth._viewer.scene.clampToHeightMostDetailed(c)];case 2:for(f=t.sent(),y=d=0;y<f.length-1;y++)g=x.default.cartesianToDegrees(f[y]),_=x.default.cartesianToDegrees(f[y+1]),this._group.add({type:b.default.POINT,obj:{position:g,pixelSize:10,color:"rgb(255,0,0)"}}),d+=w.calculateSpaceDistance([g,_]);0!==Math.round(d)&&this._group.add({type:b.default.LABEL,obj:{position:o,text:d.toFixed(2)+"m",scaleByDistance:[150,1,15e5,.5]}}),t.label=3;case 3:return[2]}})})},d.prototype._initMouseHandlers=function(){this._eventHandler=new E.ScreenSpaceEventHandler(this._earth._viewer.scene.canvas),this._onLeftClick(this._eventHandler)},d.prototype._onLeftClick=function(t){var r=this;t.setInputAction(function(t){var e=r._earth._viewer.scene.pickPosition(t.position),n=r._earth._viewer.scene.pick(t.position);n&&e&&!n.id?r._flag=!1:r._flag=!0,r._eventHandler.destroy()},E.ScreenSpaceEventType.LEFT_CLICK)},d.prototype.start=function(){var n=this,r=this;r._initMouseHandlers(),r._drawGeometry=new s.default(r._earth,{addVertex:function(t){if(r.calDistance(),0===r._options.positions.length){r._options.positions.push(t,l.default(t)),n._group=r._earth.sceneTree.add({id:h,type:p.default.GROUP,name:h,children:[]});var e=n._group.add({type:b.default.POLYLINE,obj:r._options});return r._measureStart.raiseEvent({object:e,position:t}),e}r._options.positions.push(t)},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._options.positions;r._measureEnd.raiseEvent({object:r.object,position:l.default(t[t.length-1])}),t.pop(),t.pop(),n._drawGeometry.drawMode=c.default.NONE},destroyed:function(t){t&&(t.value.positions=n._options.positions)}})},d.prototype.finish=function(){a.prototype.finish.call(this),this._drawGeometry.destory(),this._earth._viewer.scene.globe.depthTestAgainstTerrain=!1},d.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._earth.sceneTree.remove(this._group),t._vertexCollection.removeAll(),t._drawMode=c.default.NONE)},d.prototype.setOptions=function(t){this._options=Object.assign(this._options,t)},d);function d(t){var e=a.call(this)||this;return e._positions=[],e._options={positions:[],width:1,clampToGround:!0,color:"rgb(67,178,160)",dynamic:!0},e._earth=t,e._earth._viewer.scene.globe.depthTestAgainstTerrain=!0,e._measureEnd=new E.Event,e._measureStart=new E.Event,e}e.default=f},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{o(l.next(t))}catch(t){e(t)}}function i(t){try{o(l.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((l=l.apply(t,a||[])).next())})},X=this&&this.__generator||function(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(115),J=n(11),l=n(27),Z=n(69),K=n(22),$=n(51),u=n(70),Q=n(28),tt=n(8),et=n(236),nt=n(237),c=n(45),p="terrainArea",h=(a=u.default,i(f,a),Object.defineProperty(f.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"measureStart",{get:function(){return this._measureStart},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"measureEnd",{get:function(){return this._measureEnd},enumerable:!1,configurable:!0}),f.prototype.calTerrainArea=function(){return o(this,void 0,void 0,function(){var e,n,r,i,o,a,s,l,u,c,p,h,f,d,y,g,_,m,v,b,w,x,C,E,P,O,T,S,I,A,L,N,M,D,R,j,k,F,B,G,z,U,V,H,q,W,Y;return X(this,function(t){switch(t.label){case 0:for(e=this._drawGeometry.selectedEntity.positions,n=0,r=[],i=[],o=[],a=[],e.forEach(function(t){r.push(t[0]),i.push(t[1]),o.push(t[2]),a.push(t[0],t[1])}),s=tt.PolygonGeometry.computeRectangle({polygonHierarchy:new tt.PolygonHierarchy(tt.Cartesian3.fromDegreesArray(a))}),l=tt.Math.toDegrees(s.west),u=tt.Math.toDegrees(s.south),tt.Math.toDegrees(s.east),c=tt.Math.toDegrees(s.north),p=1e4*(c-u),p=window.Math.min(p,50),e=this.calBoundaryPoints(this._drawGeometry.selectedEntity.positions,p),h=et.default.train(o,r,i,"spherical",0,p),f=et.default.grid([e],h,(c-u)/p),d=[],G=0;G<f.length-1;G++)for(y=f[G],W=0;W<y.length-1;W++)void 0!==f[G]&&void 0!==f[G][W]&&d.push([l+G*f.width,u+W*f.width]);return(g=[],e.forEach(function(t){g.push(new nt.Point(t[0],t[1]))}),_=new nt.SweepContext(g),m=[],d.forEach(function(t){m.push(new nt.Point(t[0],t[1]))}),_.addPoints(m),v=_.triangulate().getTriangles(),this._flag)?(w=[],v.forEach(function(t){var e=t.getPoint(0),n=t.getPoint(1),r=t.getPoint(2);w.push(tt.Cartographic.fromDegrees(e.x,e.y)),w.push(tt.Cartographic.fromDegrees(n.x,n.y)),w.push(tt.Cartographic.fromDegrees(r.x,r.y))}),[4,tt.sampleTerrainMostDetailed(this._earth._viewer.terrainProvider,w)]):[3,2];case 1:return b=t.sent(),[3,5];case 2:return x=[],C=[],v.forEach(function(t){var e=t.getPoint(0),n=t.getPoint(1),r=t.getPoint(2);x.push(tt.Cartographic.fromDegrees(e.x,e.y)),x.push(tt.Cartographic.fromDegrees(n.x,n.y)),x.push(tt.Cartographic.fromDegrees(r.x,r.y)),C.push(tt.Cartesian3.fromDegrees(e.x,e.y)),C.push(tt.Cartesian3.fromDegrees(n.x,n.y)),C.push(tt.Cartesian3.fromDegrees(r.x,r.y))}),[4,tt.sampleTerrainMostDetailed(this._earth._viewer.terrainProvider,x)];case 3:return E=t.sent(),[4,this._earth._viewer.scene.clampToHeightMostDetailed(C)];case 4:P=t.sent(),b=P.map(function(t,e){return t||E[e]}),t.label=5;case 5:for(O=-1/0,T=[],S=[],G=0;G<b.length-1;G+=3)L=A=I=void 0,L=this._flag?(I=[180*b[G].longitude/tt.Math.PI,180*b[G].latitude/tt.Math.PI,b[G].height],A=[180*b[G+1].longitude/tt.Math.PI,180*b[G+1].latitude/tt.Math.PI,b[G+1].height],[180*b[G+2].longitude/tt.Math.PI,180*b[G+2].latitude/tt.Math.PI,b[G+2].height]):(I=b[G].longitude?[180*b[G].longitude/tt.Math.PI,180*b[G].latitude/tt.Math.PI,b[G].height]:K.default.cartesianToDegrees(b[G]),A=b[G+1].longitude?[180*b[G+1].longitude/tt.Math.PI,180*b[G+1].latitude/tt.Math.PI,b[G+1].height]:K.default.cartesianToDegrees(b[G+1]),b[G+2].longitude?[180*b[G+2].longitude/tt.Math.PI,180*b[G+2].latitude/tt.Math.PI,b[G+2].height]:K.default.cartesianToDegrees(b[G+2])),N={lon:I[0],lat:I[1],hei:I[2]},M={lon:A[0],lat:A[1],hei:A[2]},D={lon:L[0],lat:L[1],hei:L[2]},R=Z.calculateAngle(N,M,D),j=Z.calculateDistance(K.default.degreesToCartesian(I),K.default.degreesToCartesian(A)),k=Z.calculateDistance(K.default.degreesToCartesian(I),K.default.degreesToCartesian(L)),T.push(I,A,L),S.push(N,M,D),n+=j*k*window.Math.sin(R)/2,O=window.Math.max.call(null,I[2],A[2],L[2],O);for(F=Z.arrayUnique3d(T),this._group.add({type:J.default.POINT_PRIMITIVE_COLLECTION,obj:{data:F.map(function(t){return{position:t}}),position:function(t){return t.position},pixelSize:10,color:"rgb(255,0,0)"}}),B=[],G=0;G<T.length;G+=6){for(z=T.slice(G,G+6),U=z.length<6?z.length/3:2,V=[],H=void 0,q=function(t){var n,r=[z[3*t],z[3*t+1],z[3*t+2]];H&&H.forEach(function(e){r.forEach(function(t){JSON.stringify(e)!==JSON.stringify(t)||(n=t)})}),0===V.length?V.push(z[3*t],z[3*t+1],z[3*t+2],z[3*t]):n&&V.push(n,z[3*t],z[3*t+1],z[3*t+2],z[3*t]),H=r},W=0;W<U;W++)q(W);B.push({positions:V})}return this._group.add({type:J.default.POLYLINE_PRIMITIVE_COLLECTION,obj:{data:B,positions:function(t){return t.positions},color:"rgb(255,255,0)",width:2,loop:!1}}),Y=Z.getListCenter(S),this._group.add({type:J.default.LABEL,obj:{position:[Y[0],Y[1],O],text:n.toFixed(2)+"m²",font:"20px Microsoft YaHei",verticalOrigin:$.default.BOTTOM,scaleByDistance:[150,1,15e5,.5]}}),this._drawGeometry.drawMode=Q.default.NONE,[2]}})})},f.prototype._initMouseHandlers=function(){this._eventHandler=new tt.ScreenSpaceEventHandler(this._earth._viewer.scene.canvas),this._onLeftClick(this._eventHandler)},f.prototype._onLeftClick=function(t){var r=this;t.setInputAction(function(t){var e=r._earth._viewer.scene.pickPosition(t.position),n=r._earth._viewer.scene.pick(t.position);n&&e&&!n.id?r._flag=!1:r._flag=!0,r._eventHandler.destroy()},tt.ScreenSpaceEventType.LEFT_CLICK)},f.prototype.calBoundaryPoints=function(t,e){var n=[];t.push(t[0]);for(var r=0;r<t.length-1;r++){var i=new tt.EllipsoidGeodesic,o=tt.Cartographic.fromDegrees(t[r][0],t[r][1],t[r][2]),a=tt.Cartographic.fromDegrees(t[r+1][0],t[r+1][1],t[r+1][2]);i.setEndPoints(o,a);var s=i.surfaceDistance;n.push(o);for(var l=s/e,u=l;u<s;u+=l){var c=new tt.Cartographic;i.interpolateUsingSurfaceDistance(u,c),n.push(c)}n.push(a)}return n=n.map(function(t){return[180*t.longitude/tt.Math.PI,180*t.latitude/tt.Math.PI,t.height]}),n=Z.arrayUnique2d(n)},f.prototype.start=function(){var n=this,e=this;e._initMouseHandlers(),e._drawGeometry=new s.default(this._earth,{addVertex:function(t){return 1!==n._options.positions.length?0===n._options.positions.length?(n._options.positions.push(t),void n._measureStart.raiseEvent({object:void 0,position:t})):void n._options.positions.push(t):(n._options.positions.push(t,l.default(t).map(function(t,e){return 0!==e&&1!==e||(t+=1e-8),t})),n._group=e._earth.sceneTree.add({id:p,type:c.default.GROUP,name:p,children:[]}),n._group.add({type:J.default.POLYGON,obj:n._options}))},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._options.positions;n._measureEnd.raiseEvent({object:e.object,position:l.default(t[t.length-1])}),t.pop(),t.pop(),n.calTerrainArea(),n.finish()},destroyed:function(t){t&&(t.positions=n._options.positions)}})},f.prototype.finish=function(){a.prototype.finish.call(this),this._drawGeometry.destory(),this._earth._viewer.scene.globe.depthTestAgainstTerrain=!1},f.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._earth.sceneTree.remove(this._group),t._vertexCollection.removeAll(),t._drawMode=Q.default.NONE)},f.prototype.setOptions=function(t){this._options=Object.assign(this._options,t)},f);function f(t){var e=a.call(this)||this;return e._options={positions:[],fill:!0,fillColor:"rgb(67,178,160)",outline:!0,outlineColor:"rgb(255,255,255)",outlineWidth:1,clampToGround:!0,dynamic:!0,opacity:.5},e._earth=t,e._earth._viewer.scene.globe.depthTestAgainstTerrain=!0,e._measureEnd=new tt.Event,e._measureStart=new tt.Event,e}e.default=h},function(t){t.exports=JSON.parse('{"version":"1.5.0"}')},function(t,e,n){"use strict";function r(t,e){if(this.p=t,this.q=e,t.y>e.y)this.q=t,this.p=e;else if(t.y===e.y)if(t.x>e.x)this.q=t,this.p=e;else if(t.x===e.x)throw new o("poly2tri Invalid Edge constructor: repeated points!",[t]);this.q._p2t_edge_list||(this.q._p2t_edge_list=[]),this.q._p2t_edge_list.push(this)}function i(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1}var o=n(149),u=n(238),a=n(151),s=n(239),l=n(240),c=l.Node;i.prototype.clear=function(){this.left_node=null,this.bottom_node=null,this.right_node=null,this.width=0,this.left_highest=!1};function p(){this.constrained_edge=null,this.right=!1}function h(t,e){e=e||{},this.triangles_=[],this.map_=[],this.points_=e.cloneArrays?t.slice(0):t,this.edge_list=[],this.pmin_=this.pmax_=null,this.front_=null,this.head_=null,this.tail_=null,this.af_head_=null,this.af_middle_=null,this.af_tail_=null,this.basin=new i,this.edge_event=new p,this.initEdges(this.points_)}h.prototype.AddHole=h.prototype.addHole=function(t){this.initEdges(t);for(var e=t.length,n=0;n<e;n++)this.points_.push(t[n]);return this},h.prototype.addHoles=function(t){for(var e=t.length,n=0;n<e;n++)this.initEdges(t[n]);return this.points_=this.points_.concat.apply(this.points_,t),this},h.prototype.AddPoint=h.prototype.addPoint=function(t){return this.points_.push(t),this},h.prototype.addPoints=function(t){return this.points_=this.points_.concat(t),this},h.prototype.triangulate=function(){return s.triangulate(this),this},h.prototype.getBoundingBox=function(){return{min:this.pmin_,max:this.pmax_}},h.prototype.GetTriangles=h.prototype.getTriangles=function(){return this.triangles_},h.prototype.front=function(){return this.front_},h.prototype.pointCount=function(){return this.points_.length},h.prototype.head=function(){return this.head_},h.prototype.setHead=function(t){this.head_=t},h.prototype.tail=function(){return this.tail_},h.prototype.setTail=function(t){this.tail_=t},h.prototype.getMap=function(){return this.map_},h.prototype.initTriangulation=function(){for(var t=this.points_[0].x,e=this.points_[0].x,n=this.points_[0].y,r=this.points_[0].y,i=this.points_.length,o=1;o<i;o++){var a=this.points_[o];a.x>t&&(t=a.x),a.x<e&&(e=a.x),a.y>n&&(n=a.y),a.y<r&&(r=a.y)}this.pmin_=new u(e,r),this.pmax_=new u(t,n);var s=.3*(t-e),l=.3*(n-r);this.head_=new u(t+s,r-l),this.tail_=new u(e-s,r-l),this.points_.sort(u.compare)},h.prototype.initEdges=function(t){for(var e=t.length,n=0;n<e;++n)this.edge_list.push(new r(t[n],t[(n+1)%e]))},h.prototype.getPoint=function(t){return this.points_[t]},h.prototype.addToMap=function(t){this.map_.push(t)},h.prototype.locateNode=function(t){return this.front_.locateNode(t.x)},h.prototype.createAdvancingFront=function(){var t,e,n,r=new a(this.points_[0],this.tail_,this.head_);this.map_.push(r),t=new c(r.getPoint(1),r),e=new c(r.getPoint(0),r),n=new c(r.getPoint(2)),this.front_=new l(t,n),(t.next=e).next=n,e.prev=t,n.prev=e},h.prototype.removeNode=function(t){},h.prototype.mapTriangleToNodes=function(t){for(var e,n=0;n<3;++n){t.getNeighbor(n)||(e=this.front_.locatePoint(t.pointCW(t.getPoint(n))))&&(e.triangle=t)}},h.prototype.removeFromMap=function(t){for(var e=this.map_,n=e.length,r=0;r<n;r++)if(e[r]===t){e.splice(r,1);break}},h.prototype.meshClean=function(t){for(var e,n,r=[t];e=r.pop();)if(!e.isInterior())for(e.setInterior(!0),this.triangles_.push(e),n=0;n<3;n++)e.constrained_edge[n]||r.push(e.getNeighbor(n))},t.exports=h},function(t,e,n){"use strict";t.exports=function(t,e){if(!t)throw new Error(e||"Assert Failed")}},function(t,e,n){"use strict";e.EPSILON=1e-12;var i={CW:1,CCW:-1,COLLINEAR:0};e.Orientation=i,e.orient2d=function(t,e,n){var r=(t.x-n.x)*(e.y-n.y)-(t.y-n.y)*(e.x-n.x);return-1e-12<r&&r<1e-12?i.COLLINEAR:0<r?i.CCW:i.CW},e.inScanArea=function(t,e,n,r){return!(-1e-12<=(t.x-e.x)*(r.y-e.y)-(r.x-e.x)*(t.y-e.y))&&!((t.x-n.x)*(r.y-n.y)-(r.x-n.x)*(t.y-n.y)<=1e-12)},e.isAngleObtuse=function(t,e,n){var r=e.x-t.x,i=e.y-t.y;return r*(n.x-t.x)+i*(n.y-t.y)<0}},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__awaiter||function(t,a,s,l){return new(s=s||Promise)(function(n,e){function r(t){try{o(l.next(t))}catch(t){e(t)}}function i(t){try{o(l.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof s?e:new s(function(t){t(e)})).then(r,i)}o((l=l.apply(t,a||[])).next())})},J=this&&this.__generator||function(n,r){var i,o,a,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&e[0]?o.return:e[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,e[1])).done)return a;switch(o=0,a&&(e=[2&e[0],a.value]),e[0]){case 0:case 1:a=e;break;case 4:return s.label++,{value:e[1],done:!1};case 5:s.label++,o=e[1],e=[0];continue;case 7:e=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===e[0]||2===e[0])){s=0;continue}if(3===e[0]&&(!a||e[1]>a[0]&&e[1]<a[3])){s.label=e[1];break}if(6===e[0]&&s.label<a[1]){s.label=a[1],a=e;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(e);break}a[2]&&s.ops.pop(),s.trys.pop();continue}e=r.call(n,s)}catch(t){e=[6,t],o=0}finally{i=a=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(115),Z=n(11),l=n(27),K=n(69),$=n(22),Q=n(62),tt=n(51),u=n(70),et=n(28),nt=n(8),rt=n(236),it=n(237),c=n(45),p=(a=u.default,i(h,a),Object.defineProperty(h.prototype,"object",{get:function(){return this._drawGeometry.selectedEntity},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"measureStart",{get:function(){return this._measureStart},enumerable:!1,configurable:!0}),Object.defineProperty(h.prototype,"measureEnd",{get:function(){return this._measureEnd},enumerable:!1,configurable:!0}),h.prototype.calVolume=function(){return o(this,void 0,void 0,function(){var e,n,r,i,o,a,s,l,u,c,p,h,f,d,y,g,_,m,v,b,w,x,C,E,P,O,T,S,I,A,L,N,M,D,R,j,k,F,B,G,z,U,V,H,q,W,Y,X=this;return J(this,function(t){switch(t.label){case 0:for(e=this._drawGeometry.selectedEntity.positions,n=[],r=[],i=[],o=[],e.forEach(function(t){n.push(t[0]),r.push(t[1]),i.push(t[2]),o.push(t[0],t[1])}),a=nt.PolygonGeometry.computeRectangle({polygonHierarchy:new nt.PolygonHierarchy(nt.Cartesian3.fromDegreesArray(o))}),s=nt.Math.toDegrees(a.west),l=nt.Math.toDegrees(a.south),nt.Math.toDegrees(a.east),u=nt.Math.toDegrees(a.north),c=1e4*(u-l),c=window.Math.min(c,50),e=this.calBoundaryPoints(this._drawGeometry.selectedEntity.positions,c),p=rt.default.train(i,n,r,"spherical",0,c),h=rt.default.grid([e],p,(u-l)/c),f=[],F=0;F<h.length-1;F++)for(d=h[F],H=0;H<d.length-1;H++)void 0!==h[F]&&void 0!==h[F][H]&&f.push([s+F*h.width,l+H*h.width]);return(y=[],e.forEach(function(t){y.push(new it.Point(t[0],t[1]))}),g=new it.SweepContext(y),_=[],f.forEach(function(t){_.push(new it.Point(t[0],t[1]))}),g.addPoints(_),m=g.triangulate().getTriangles(),this._flag)?(v=[],m.forEach(function(t){var e=t.getPoint(0),n=t.getPoint(1),r=t.getPoint(2);v.push(nt.Cartographic.fromDegrees(e.x,e.y)),v.push(nt.Cartographic.fromDegrees(n.x,n.y)),v.push(nt.Cartographic.fromDegrees(r.x,r.y))}),b=this,[4,nt.sampleTerrainMostDetailed(this._earth._viewer.terrainProvider,v)]):[3,2];case 1:return b._updatePositions=t.sent(),[3,5];case 2:return w=[],x=[],m.forEach(function(t){var e=t.getPoint(0),n=t.getPoint(1),r=t.getPoint(2);w.push(nt.Cartographic.fromDegrees(e.x,e.y)),w.push(nt.Cartographic.fromDegrees(n.x,n.y)),w.push(nt.Cartographic.fromDegrees(r.x,r.y)),x.push(nt.Cartesian3.fromDegrees(e.x,e.y)),x.push(nt.Cartesian3.fromDegrees(n.x,n.y)),x.push(nt.Cartesian3.fromDegrees(r.x,r.y))}),[4,nt.sampleTerrainMostDetailed(this._earth._viewer.terrainProvider,w)];case 3:return C=t.sent(),[4,this._earth._viewer.scene.clampToHeightMostDetailed(x)];case 4:E=t.sent(),this._updatePositions=E.map(function(t,e){return t||C[e]}),t.label=5;case 5:for(P=this._updatePositions,O=-1/0,T=1/0,S=[],I=[],e.forEach(function(t){O=t[2]>O?t[2]:O,T=t[2]<T?t[2]:T}),F=0;F<P.length-1;F+=3)N=L=A=void 0,N=this._flag?(A=[P[F].longitude*K.DegreesPerRadian,P[F].latitude*K.DegreesPerRadian,P[F].height],L=[P[F+1].longitude*K.DegreesPerRadian,P[F+1].latitude*K.DegreesPerRadian,P[F+1].height],[P[F+2].longitude*K.DegreesPerRadian,P[F+2].latitude*K.DegreesPerRadian,P[F+2].height]):(A=P[F].longitude?[180*P[F].longitude/nt.Math.PI,180*P[F].latitude/nt.Math.PI,P[F].height]:$.default.cartesianToDegrees(P[F]),L=P[F+1].longitude?[180*P[F+1].longitude/nt.Math.PI,180*P[F+1].latitude/nt.Math.PI,P[F+1].height]:$.default.cartesianToDegrees(P[F+1]),P[F+2].longitude?[180*P[F+2].longitude/nt.Math.PI,180*P[F+2].latitude/nt.Math.PI,P[F+2].height]:$.default.cartesianToDegrees(P[F+2])),M={lon:A[0],lat:A[1],hei:A[2]},D={lon:L[0],lat:L[1],hei:L[2]},R={lon:N[0],lat:N[1],hei:N[2]},S.push(A,L,N),I.push(M,D,R),O=window.Math.max.call(null,A[2],L[2],N[2],O),T=window.Math.min.call(null,A[2],L[2],N[2],T);for(this._maxHeight=O,this._minHeight=T,this._baseHeight=T,this.calFillDig(),j=K.arrayUnique3d(S),this._group.add({type:Z.default.POINT_PRIMITIVE_COLLECTION,obj:{data:j.map(function(t){return{position:t}}),position:function(t){return t.position},pixelSize:10,color:"rgb(255,0,0)"}}),k=[],F=0;F<S.length;F+=6){for(B=S.slice(F,F+6),G=B.length<6?B.length/3:2,z=[],U=void 0,V=function(t){var n,r=[B[3*t],B[3*t+1],B[3*t+2]];U&&U.forEach(function(e){r.forEach(function(t){JSON.stringify(e)!==JSON.stringify(t)||(n=t)})}),0===z.length?z.push(B[3*t],B[3*t+1],B[3*t+2],B[3*t]):n&&z.push(n,B[3*t],B[3*t+1],B[3*t+2],B[3*t]),U=r},H=0;H<G;H++)V(H);k.push({positions:z})}return this._group.add({type:Z.default.POLYLINE_PRIMITIVE_COLLECTION,obj:{data:k,positions:function(t){return t.positions},color:"rgb(255,255,0)",width:2,loop:!1}}),q=[],W=[],e.forEach(function(t){q.push([t[0],t[1],X._baseHeight]),W.push([t[0],t[1],O])}),W.push([e[0][0],e[0][1],O]),this._baseLayer=this._group.add({type:Z.default.POLYGON,obj:{positions:q,fill:!0,fillColor:"rgb(0,255,0)",outline:!0,outlineColor:"rgb(255,255,255)",outlineWidth:1,clampToGround:!1,dynamic:!0,opacity:.5}}),this._group.add({type:Z.default.WALL,obj:{positions:W,fill:!0,fillColor:"rgb(67,178,160)",outline:!0,outlineColor:"rgb(255,255,255)",outlineWidth:1,opacity:.7}}),Y=K.getListCenter(I),this._group.add({type:Z.default.LABEL,obj:{position:[Y[0],Y[1],O+20],text:"基准面高程："+this._baseHeight.toFixed(2)+"m\n填方："+(this._fillV/1e4).toFixed(2)+"万m³\n挖方："+(this._digV/1e4).toFixed(2)+"万m³",font:"20px Microsoft YaHei",horizontalOrigin:Q.default.LEFT,verticalOrigin:tt.default.BOTTOM,scaleByDistance:[150,1,15e5,.5]}}),this._drawGeometry.drawMode=et.default.NONE,[2]}})})},h.prototype._initMouseHandlers=function(){this._eventHandler=new nt.ScreenSpaceEventHandler(this._earth._viewer.scene.canvas),this._onLeftClick(this._eventHandler)},h.prototype._onLeftClick=function(t){var r=this;t.setInputAction(function(t){var e=r._earth._viewer.scene.pickPosition(t.position),n=r._earth._viewer.scene.pick(t.position);n&&e&&!n.id?r._flag=!1:r._flag=!0,r._eventHandler.destroy()},nt.ScreenSpaceEventType.LEFT_CLICK)},h.prototype._initBaseMouseHandlers=function(){this._eventHandler=new nt.ScreenSpaceEventHandler(this._earth._viewer.scene.canvas),this._onBaseLeftClick(this._eventHandler)},h.prototype._onBaseLeftClick=function(t){var r=this;t.setInputAction(function(t){var e=r._earth.pickGloble(t.position,[r._baseLayer.value]),n=$.default.cartesianToDegrees(e);r._baseHeight=n[2],r._baseHeight<=r._maxHeight&&r._baseHeight>=r._minHeight&&(r.calFillDig(),r._group.children.forEach(function(t){"polygon"===t.value.type&&2<t.value.positions.length?t.value.positions=t.value.positions.map(function(t){return[t[0],t[1],r._baseHeight]}):"label"===t.value.type&&(t.value.text="基准面高程："+r._baseHeight.toFixed(2)+"m\n填方："+r._fillV.toFixed(2)+"m³\n挖方："+r._digV.toFixed(2)+"m³")}))},nt.ScreenSpaceEventType.LEFT_CLICK)},h.prototype.calFillDig=function(){var t=this._updatePositions,e=this._baseHeight;this._digV=0;for(var n=this._fillV=0;n<t.length-1;n+=3){var r=void 0,i=void 0,o=void 0,o=this._flag?(r=[t[n].longitude*K.DegreesPerRadian,t[n].latitude*K.DegreesPerRadian,t[n].height],i=[t[n+1].longitude*K.DegreesPerRadian,t[n+1].latitude*K.DegreesPerRadian,t[n+1].height],[t[n+2].longitude*K.DegreesPerRadian,t[n+2].latitude*K.DegreesPerRadian,t[n+2].height]):(r=t[n].longitude?[180*t[n].longitude/nt.Math.PI,180*t[n].latitude/nt.Math.PI,t[n].height]:$.default.cartesianToDegrees(t[n]),i=t[n+1].longitude?[180*t[n+1].longitude/nt.Math.PI,180*t[n+1].latitude/nt.Math.PI,t[n+1].height]:$.default.cartesianToDegrees(t[n+1]),t[n+2].longitude?[180*t[n+2].longitude/nt.Math.PI,180*t[n+2].latitude/nt.Math.PI,t[n+2].height]:$.default.cartesianToDegrees(t[n+2])),a={lon:r[0],lat:r[1],hei:r[2]},s={lon:i[0],lat:i[1],hei:i[2]},l={lon:o[0],lat:o[1],hei:o[2]},u=$.default.degreesToCartesian(r),c=$.default.degreesToCartesian(i),p=$.default.degreesToCartesian(o),h=K.calculateSpaceArea([a,s,l],[u,c,p]),f=(r[2]+i[2]+o[2]-3*e)/3;r[2]>e&&i[2]>e&&o[3]>e||!(r[2]<e&&i[2]<e&&o[2]<e)&&0<f?this._digV+=h*f:this._fillV+=h*-f}},h.prototype.calBoundaryPoints=function(t,e){var n=[];t.push(t[0]);for(var r=0;r<t.length-1;r++){var i=new nt.EllipsoidGeodesic,o=nt.Cartographic.fromDegrees(t[r][0],t[r][1],t[r][2]),a=nt.Cartographic.fromDegrees(t[r+1][0],t[r+1][1],t[r+1][2]);i.setEndPoints(o,a);var s=i.surfaceDistance;n.push(o);for(var l=s/e,u=l;u<s;u+=l){var c=new nt.Cartographic;i.interpolateUsingSurfaceDistance(u,c),n.push(c)}n.push(a)}return n=n.map(function(t){return[180*t.longitude/nt.Math.PI,180*t.latitude/nt.Math.PI,t.height]}),n=K.arrayUnique2d(n)},h.prototype.start=function(){var n=this,e=this;e._initMouseHandlers(),e._drawGeometry=new s.default(this._earth,{addVertex:function(t){return 1!==n._options.positions.length?0===n._options.positions.length?(n._options.positions.push(t),void e._measureStart.raiseEvent({object:void 0,position:t})):void n._options.positions.push(t):(n._options.positions.push(t,l.default(t).map(function(t,e){return 0!==e&&1!==e||(t+=1e-8),t})),n._group=e._earth.sceneTree.add({id:"volume",type:c.default.GROUP,name:"volume",children:[]}),n._group.add({type:Z.default.POLYGON,obj:n._options}))},editVertex:function(t,e){n._options.positions[e]=t},endAdd:function(){var t=n._options.positions;e._measureEnd.raiseEvent({object:e.object,position:l.default(t[t.length-1])}),t.pop(),t.pop(),n.calVolume(),n.finish(),n._initBaseMouseHandlers()},destroyed:function(t){t&&(t.positions=[[0,0],[0,0]])}})},h.prototype.finish=function(){a.prototype.finish.call(this),this._drawGeometry.destory(),this._earth._viewer.scene.globe.depthTestAgainstTerrain=!1},h.prototype.remove=function(){var t=this._drawGeometry;t.selectedEntity&&(this._earth.sceneTree.remove(this._group),t._vertexCollection.removeAll(),t._drawMode=et.default.NONE)},h.prototype.setOptions=function(t){this._options=Object.assign(this._options,t)},h);function h(t){var e=a.call(this)||this;return e._baseHeight=0,e._maxHeight=0,e._minHeight=0,e._fillV=0,e._digV=0,e._options={positions:[],fill:!0,fillColor:"rgb(67,178,160)",outline:!0,outlineColor:"rgb(255,255,255)",outlineWidth:1,clampToGround:!0,dynamic:!0,opacity:.5},e._earth=t,e._earth._viewer.scene.globe.depthTestAgainstTerrain=!0,e._measureEnd=new nt.Event,e._measureStart=new nt.Event,e}e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(416),o=n(417),a=n(418),s=n(419),l=n(420),u=n(421),c=n(422),p=n(241),r=(h.prototype.start=function(t){void 0===t&&(t={});var e,n=t.type,r=t.obj;switch(n){case p.default.BUFFER_ANALYSIS:this._bufferAnalysis=new i.default(this._earth,r),this._bufferAnalysis.open(),e=this._bufferAnalysis;break;case p.default.CONTOURLINES_ANALYSIS:this._contourLinesAnalysis=new o.default(this._earth,r),this._contourLinesAnalysis.open(),e=this._contourLinesAnalysis;break;case p.default.INUNDATION_ANALYSIS:this._inundationAnalysis=new a.default(this._earth,r),this._inundationAnalysis.open(),e=this._inundationAnalysis;break;case p.default.PROFILE_ANALYSIS:this._profileAnalysis=new s.default(this._earth,r),this._profileAnalysis.open(),e=this._profileAnalysis;break;case p.default.SOLAR_ANALYSIS:this._solarAnalysis=new l.default(this._earth,r),this._solarAnalysis.open(),e=this._solarAnalysis;break;case p.default.SURFACEMINING_ANALYSIS:this._surfaceMiningAnalysis=new u.default(this._earth,r),this._surfaceMiningAnalysis.open(),e=this._surfaceMiningAnalysis;break;case p.default.VISIBILITY_ANALYSIS:this._visibilityAnalysis=new c.default(this._earth,r),this._visibilityAnalysis.open(),e=this._visibilityAnalysis}return e},h.prototype.remove=function(t){switch(t){case p.default.BUFFER_ANALYSIS:this._bufferAnalysis.close();break;case p.default.CONTOURLINES_ANALYSIS:this._contourLinesAnalysis.close();break;case p.default.INUNDATION_ANALYSIS:this._inundationAnalysis.close();break;case p.default.PROFILE_ANALYSIS:this._profileAnalysis.close();break;case p.default.SOLAR_ANALYSIS:this._solarAnalysis.close();break;case p.default.SURFACEMINING_ANALYSIS:this._surfaceMiningAnalysis.close();break;case p.default.VISIBILITY_ANALYSIS:this._visibilityAnalysis.close()}},h.prototype.isDestroyed=function(t){var e;switch(t){case p.default.BUFFER_ANALYSIS:e=this._bufferAnalysis.isDestroyed();break;case p.default.CONTOURLINES_ANALYSIS:e=this._contourLinesAnalysis.isDestroyed();break;case p.default.INUNDATION_ANALYSIS:e=this._inundationAnalysis.isDestroyed();break;case p.default.PROFILE_ANALYSIS:e=this._profileAnalysis.isDestroyed();break;case p.default.SOLAR_ANALYSIS:e=this._solarAnalysis.isDestroyed();break;case p.default.SURFACEMINING_ANALYSIS:e=this._surfaceMiningAnalysis.isDestroyed();break;case p.default.VISIBILITY_ANALYSIS:e=this._visibilityAnalysis.isDestroyed()}return e},h);function h(t){this._earth=t}e.default=r},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(12),l=n(233),u=n(142),c=n(148),p=n(28),h=n(8),f=n(222),d=(a=f.default,i(y,a),y.prototype.open=function(){var e=this;"point"===this.type?(this._draw=new l.default(this._earth,{}),this._draw.start(),this._draw._drawGeometry.drawMode=p.default.ADD,this._draw._drawGeometry._addEvent=function(t){e.positions=t,e._draw._drawGeometry.drawMode=p.default.NONE,e._draw._drawGeometry.destory()}):"polyline"===this.type?(this._draw=new u.default(this._earth,{}),this._draw.start(),this._draw._drawGeometry.drawMode=p.default.ADD,this._draw._drawGeometry._endAdd=function(){var t=e._draw._drawGeometry.selectedEntity.positions;t.pop(),t.pop(),e.positions=t,e._earth.sceneTree.remove(e._draw._drawGeometry.selectedEntity),e._draw._drawGeometry.drawMode=p.default.NONE,e._draw._drawGeometry.destory()}):"polygon"===this.type&&(this._draw=new c.default(this._earth,{}),this._draw.start(),this._draw._drawGeometry.drawMode=p.default.ADD,this._draw._drawGeometry._endAdd=function(){var t=e._draw._drawGeometry.selectedEntity.positions;t.pop(),t.pop(),t.push(t[0]),e.positions=t,e._earth.sceneTree.remove(e._draw._drawGeometry.selectedEntity),e._draw._drawGeometry.drawMode=p.default.NONE,e._draw._drawGeometry.destory()}),this._analysing=!0},y.prototype.close=function(){h.defined(this.group)&&(this._draw._drawGeometry.drawMode=p.default.NONE,a.prototype.close.call(this)),this._analysing=!1},y.prototype.isDestroyed=function(){return this._analysing},y);function y(t,e){var n=a.call(this,o({earth:t,positions:[]},e))||this;if(n._analysing=!1,!s.isObject(e))throw new TypeError("error: BufferAnalysis. The options is not a Object.");return n._earth=t,n}e.default=d},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(12),l=n(223),u=(a=l.default,i(c,a),c.prototype.open=function(){a.prototype.open.call(this),this._analysing=!0},c.prototype.close=function(){a.prototype.close.call(this),this._analysing=!1},c.prototype.isDestroyed=function(){return this._analysing},c);function c(t,e){var n=a.call(this,o({earth:t},e))||this;if(n._analysing=!1,!s.isObject(e))throw new TypeError("error: ContourLinesAnalysis. The options is not a Object.");return n}e.default=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(12),l=n(148),u=n(28),c=n(224),p=n(8),h=(a=c.default,i(f,a),f.prototype.open=function(){var t=this;a.prototype.open.call(this),this._analysing=!0,this.removePolygon(),this._drawPolygon=new l.default(this._earth,{}),this._drawPolygon.start(),this._drawPolygon._drawGeometry.drawMode=u.default.ADD,this._drawPolygon._drawGeometry._endAdd=function(){t.start()}},f.prototype.close=function(){a.prototype.close.call(this),this.removePolygon(),this._analysing=!1},f.prototype.isDestroyed=function(){return this._analysing},f.prototype.start=function(){if(this._analysing){if(0===this.positions.length){if(!p.defined(this._drawPolygon._drawGeometry.selectedEntity))throw new TypeError("error: InundationAnalysis. The polygon is not draw.");this.removePolygon();var t=this._drawPolygon._drawGeometry.selectedEntity.positions;t.pop(),t.pop(),this.positions=t}a.prototype.start.call(this)}},f.prototype.stop=function(){this._analysing&&a.prototype.stop.call(this)},f.prototype.refresh=function(){this._analysing&&a.prototype.refresh.call(this)},f.prototype.removePolygon=function(){p.defined(this._drawPolygon)&&(this._drawPolygon._drawGeometry.drawMode=u.default.NONE,p.defined(this._drawPolygon._drawGeometry.selectedEntity)&&(this._earth._viewer.entities.remove(this._drawPolygon._drawGeometry.selectedEntity.value),this._drawPolygon._drawGeometry.destory()))},f);function f(t,e){var n=a.call(this,o({earth:t,positions:[]},e))||this;if(n._analysing=!1,!s.isObject(e))throw new TypeError("error: InundationAnalysis. The options is not a Object.");return n._earth=t,n}e.default=h},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var o,a=n(12),s=n(22),l=n(226),u=n(8),c=(o=l.default,i(p,o),p.prototype.open=function(){this.initialiseHandlers(),this._analysing=!0},p.prototype.close=function(){o.prototype.cleanup.call(this),this.destoryHandlers(),this._points=[],this._isStart=!1,this._firstLoadPolyline=!0,this._analysing=!1},p.prototype.isDestroyed=function(){return this._analysing},p.prototype.start=function(){o.prototype.start.call(this),this._isStart=!0},p.prototype.cleanup=function(){o.prototype.cleanup.call(this),this._isStart=!1},p.prototype.destoryHandlers=function(){var t=this._eventHandler;t&&(t.isDestroyed()||t.destroy())},p.prototype.initialiseHandlers=function(){var e=this,t=new u.ScreenSpaceEventHandler(this._earth._viewer.scene.canvas);this.onLeftClick(t),this.onMouseMove(t),this.onDblClick(t,function(){var t=e._points;e.startPoint=s.default.cartesianToDegrees(t[0]),e.endPoint=s.default.cartesianToDegrees(t[1])}),this._eventHandler=t},p.prototype.onLeftClick=function(r){var i=this;r.setInputAction(function(t){var e,n;i._isStart&&(e=i._earth.pickGloble(t.position),(n=i._earth._viewer.scene.pick(t.position))&&e&&!n.id?i.terrain=!1:i.terrain=!0,i._points.push(e.clone()),i._points.push(e),o.prototype.appendPoint.call(i,e),r.removeInputAction(u.ScreenSpaceEventType.LEFT_CLICK))},u.ScreenSpaceEventType.LEFT_CLICK)},p.prototype.onMouseMove=function(t){var r,i=this;t.setInputAction(function(t){var e,n;i._isStart&&(e=i._points,n=i._earth.pickGloble(t.endPosition,r?[r]:[]),2===e.length&&u.defined(n)&&(i._firstLoadPolyline?(r=o.prototype.appendPolyline.call(i,e),i._firstLoadPolyline=!1):e.splice(1,1,n)))},u.ScreenSpaceEventType.MOUSE_MOVE)},p.prototype.onDblClick=function(r,i){var o=this;r.setInputAction(function(t){var e,n;o._isStart&&(e=o._points,n=o._earth.pickGloble(t.position),2===e.length&&u.defined(n)&&(e.push(e[1].clone()),i(),r.removeInputAction(u.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)))},u.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},p);function p(t,e){var n=o.call(this,{earth:t,startPoint:[],endPoint:[],pointsNum:100})||this;if(n._firstLoadPolyline=!0,n._points=[],n._isStart=!1,n._analysing=!1,!a.isObject(e))throw new TypeError("error: ProfileAnalysis. The options is not a Object.");return n._earth=t,n}e.default=c},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(12),l=n(227),u=(a=l.default,i(c,a),c.prototype.open=function(){a.prototype.open.call(this),this._analysing=!0},c.prototype.close=function(){a.prototype.close.call(this),this._analysing=!1},c.prototype.isDestroyed=function(){return this._analysing},c.prototype.start=function(){a.prototype.start.call(this)},c.prototype.stop=function(){a.prototype.stop.call(this)},c);function c(t,e){var n=a.call(this,o({earth:t},e))||this;if(n._analysing=!1,!s.isObject(e))throw new TypeError("error: SolarAnalysis. The options is not a Object.");return n}e.default=u},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(12),l=n(228),u=n(22),c=n(8),p=(a=l.default,i(h,a),h.prototype.open=function(){this.initialiseHandlers(),this._analysing=!0},h.prototype.close=function(){a.prototype.repair.call(this),this.destoryHandlers(),this._isStart=!1,this._analysing=!1},h.prototype.isDestroyed=function(){return this._analysing},h.prototype.start=function(){a.prototype.start.call(this),this._isStart=!0},h.prototype.repair=function(){a.prototype.repair.call(this),this._isStart=!1,this._position=[]},h.prototype.destoryHandlers=function(){var t=this._eventHandler;t&&(t.isDestroyed()||t.destroy())},h.prototype.initialiseHandlers=function(){var t=new c.ScreenSpaceEventHandler(this._earth._viewer.scene.canvas);this.onLeftClick(t),this.onDblClick(t),this._eventHandler=t},h.prototype.onLeftClick=function(t){var i=this,o=!0;t.setInputAction(function(t){if(i._isStart){if(!o)return;o=!1,setTimeout(function(){o=!0},300);var e=i._earth.pickGloble(t.position);if(!e)return;var n=i.increaseHeight(e,.1),r=u.default.cartesianToDegrees(n);i._position.push(u.default.cartesianToDegrees(n)),i.addPoint(r)}},c.ScreenSpaceEventType.LEFT_CLICK)},h.prototype.onDblClick=function(t){var e=this;t.setInputAction(function(){e._isStart&&(e.positions=e._position,e.destoryHandlers(),e.cleanDraw(),e._isStart=!1,e._position=[])},c.ScreenSpaceEventType.LEFT_DOUBLE_CLICK)},h.prototype.increaseHeight=function(t,e){var n=c.Cartographic.fromCartesian(t),r=c.Math.toDegrees(n.longitude),i=c.Math.toDegrees(n.latitude),o=0<n.height?n.height+e:0+e;return c.Cartesian3.fromDegrees(r,i,o)},h);function h(t,e){var n=a.call(this,o({earth:t,positions:[]},e))||this;if(n._position=[],n._isStart=!1,n._analysing=!1,!s.isObject(e))throw new TypeError("error: SurfaceMiningAnalysis. The options is not a Object.");return n._earth=t,n}e.default=p},function(t,e,n){"use strict";var r,i=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a,s=n(12),l=n(229),u=n(22),c=n(8),p=(a=l.default,i(h,a),h.prototype.open=function(){this.initialiseHandlers(),this._analysing=!0},h.prototype.close=function(){a.prototype.cleanup.call(this),this.destoryHandlers(),this._isStart=!1,this._analysing=!1},h.prototype.isDestroyed=function(){return this._analysing},h.prototype.start=function(){a.prototype.start.call(this),this._isStart=!0},h.prototype.cleanup=function(){a.prototype.cleanup.call(this),this._isStart=!1,this._points=[]},h.prototype.initialiseHandlers=function(){var t=new c.ScreenSpaceEventHandler(this._earth._viewer.scene.canvas);this.onLeftClick(t),this._eventHandler=t},h.prototype.destoryHandlers=function(){var t=this._eventHandler;t&&(t.isDestroyed()||t.destroy())},h.prototype.onLeftClick=function(t){var l=this;t.setInputAction(function(t){if(l._isStart){var e,n,r,i,o,a,s=l._earth.pickGloble(t.position);if(!s)return;c.defined(s)&&(e=l._points,n=c.Cartographic.fromCartesian(s),r=Number(c.Math.toDegrees(n.longitude).toFixed(8)),i=Number(c.Math.toDegrees(n.latitude).toFixed(8)),o=0===e.length?n.height+l.height:n.height+.1,l.addPoint(r,i,o),a=c.Cartographic.fromDegrees(r,i,o),e.push(a),1!==e.length&&(l.startPoint=u.default.cartographicToDegrees(e[0]),l.endPoint=u.default.cartographicToDegrees(a.clone())))}},c.ScreenSpaceEventType.LEFT_CLICK)},h);function h(t,e){var n=a.call(this,o({earth:t,startPoint:[],endPoint:[]},e))||this;if(n._points=[],n._isStart=!1,n._analysing=!1,!s.isObject(e))throw new TypeError("error: VisibilityAnalysis. The options is not a Object.");return n._earth=t,n}e.default=p},function(t,e,n){"use strict";n.r(e);var r=n(247),i=n.n(r),o=n(156),a={insert:"head",singleton:!1};i()(o.a,a);e.default=o.a.locals||{}},function(t,e,n){var r={"./AnalysisType.ts":241,"./ClassType.ts":16,"./CoordinateAxis.ts":186,"./CoordinateSystemType.ts":425,"./CustomMaterial.ts":426,"./DrawMode.ts":28,"./DrawType.ts":234,"./EarthType.ts":11,"./GeometryType.ts":182,"./GroupType.ts":427,"./HeightReference.ts":176,"./HorizontalOrigin.ts":62,"./HorizontalPosition.ts":113,"./ImageSource.ts":202,"./ImageryType.ts":174,"./InteractionEvent.ts":143,"./InterpolationType.ts":134,"./LabelStyle.ts":428,"./LayerType.ts":65,"./MapProjection.ts":220,"./MaterialType.ts":429,"./MeasureType.ts":235,"./MouseCursor.ts":430,"./OperationMode.ts":217,"./Orientation.ts":76,"./PolylineType.ts":431,"./ProjectionType.ts":175,"./RenderEvent.ts":111,"./RenderEventTarget.ts":218,"./SceneMode.ts":112,"./ShadowMode.ts":432,"./TilesetType.ts":433,"./TreeType.ts":45,"./TypeConvertor.ts":434,"./VerticalOrigin.ts":51,"./VerticalPosition.ts":114,"./WeatherType.ts":219};function i(t){var e=o(t);return n(e)}function o(t){if(n.o(r,t))return r[t];var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}i.keys=function(){return Object.keys(r)},i.resolve=o,(t.exports=i).id=424},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).WGS84="wgs84",i.GCJ02="gcj02",i.BD09="bd09",e.default=r},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=r||{}).POLYLINE_FLOW_LINK="PolylineFlowLink",e.default=r},function(t,e,n){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),(r=r||{}).DEFAULT="default",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).FILL_AND_OUTLINE="fill_and_outline",i.FILL="fill",i.OUTLINE="outline",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).DEFAULT="default",i.POLYLINE_ARROW_MATERIAL="polyline_arrow_material",i.POLYLINE_GLOW_MATERIAL="polyline_glow_material",i.POLYLINE_OUTLINE_MATERIAL="polyline_outline_material",i.POLYLINE_DASH_MATERIAL="polyline_dash_material",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).DEFAULT="default",i.POINTER="pointer",i.MOVE="move",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).DEFAULT="default",i.GLOW="glow",i.OUTLINE="outline",i.ARROW="arrow",i.DASH="dash",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).DISABLED="disabled",i.ENABLED="enabled",i.CAST_ONLY="cast_only",i.RECEIVE_ONLY="receive_only",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).REAL_SCENE="real_scene",i.WHITE_MODEL="white_model",i.CLASSIFICATION="classification",e.default=r},function(t,e,n){"use strict";var r,i;Object.defineProperty(e,"__esModule",{value:!0}),(i=r=r||{}).STRING_TO_COLOR="stringToColor",i.ARRAY_TO_CARTESIAN_POSITION="arrayToCartesianPosition",i.ARRAY_TO_CARTESIAN_POSITIONS="arrayToCartesianPositions",i.ARRAY_TO_DISTANCE_DISPLAY_CONDITION="arrayToDistanceDisplayCondition",i.ARRAY_TO_CARTESIAN2="arrayToCartesian2",e.default=r},function(t,e,n){"use strict";n.r(e);var r=n(9),g=n.n(r);function x(t,e,n){if(null!==t)for(var r,i,o,a,s,l,u,c=0,p=t.type,h="FeatureCollection"===p,f="Feature"===p,d=h?t.features.length:1,y=0;y<d;y++){a=(u=!!(l=h?t.features[y].geometry:f?t.geometry:t)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var g=0;g<a;g++){var _,m=0,v=0;if(null!==(_=u?l.geometries[g]:l)){s=_.coordinates;var b=_.type,w=!n||"Polygon"!==b&&"MultiPolygon"!==b?0:1;switch(b){case null:break;case"Point":if(!1===e(s,c,y,m,v))return!1;c++,m++;break;case"LineString":case"MultiPoint":for(r=0;r<s.length;r++){if(!1===e(s[r],c,y,m,v))return!1;c++,"MultiPoint"===b&&m++}"LineString"===b&&m++;break;case"Polygon":case"MultiLineString":for(r=0;r<s.length;r++){for(i=0;i<s[r].length-w;i++){if(!1===e(s[r][i],c,y,m,v))return!1;c++}"MultiLineString"===b&&m++,"Polygon"===b&&v++}"Polygon"===b&&m++;break;case"MultiPolygon":for(r=0;r<s.length;r++){for("MultiPolygon"===b&&(v=0),i=0;i<s[r].length;i++){for(o=0;o<s[r][i].length-w;o++){if(!1===e(s[r][i][o],c,y,m,v))return!1;c++}v++}m++}break;case"GeometryCollection":for(r=0;r<_.geometries.length;r++)if(!1===x(_.geometries[r],e,n))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function a(t,e){if("Feature"===t.type)e(t,0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length&&!1!==e(t.features[n],n);n++);}function _(t,e){for(var n,r,i,o,a,s,l,u,c,p=0,h="FeatureCollection"===t.type,f="Feature"===t.type,d=h?t.features.length:1,y=0;y<d;y++){for(a=h?t.features[y].geometry:f?t.geometry:t,l=h?t.features[y].properties:f?t.properties:{},u=h?t.features[y].bbox:f?t.bbox:void 0,c=h?t.features[y].id:f?t.id:void 0,o=(s=!!a&&"GeometryCollection"===a.type)?a.geometries.length:1,r=0;r<o;r++)if(null!==(i=s?a.geometries[r]:a))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===e(i,p,l,u,c))return;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===e(i.geometries[n],p,l,u,c))return;break;default:throw new Error("Unknown Geometry Type")}else if(!1===e(null,p,l,u,c))return;p++}}var m=function(t){var e=[1/0,1/0,-1/0,-1/0];return x(t,function(t){e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])}),e};function i(t,e,n){if(!l(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&u(r),i&&c(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function o(t,e,n){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(t[0])||!s(t[1]))throw new Error("coordinates must contain numbers");return i({type:"Point",coordinates:t},e,n)}function s(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function l(t){return t&&t.constructor===Object}function u(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!s(t))throw new Error("bbox must only contain numbers")})}function c(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(g()(t)))throw new Error("id must be a number or a string")}var p=function(t,e){if(!l(e=e||{}))throw new Error("options is invalid");var n=e.properties;if(!t)throw new Error("geojson is required");var r=m(t);return o([(r[0]+r[2])/2,(r[1]+r[3])/2],n)},v=n(124);function h(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function f(t){return t&&t.constructor===Object}function d(e){var n={type:"Feature"};return Object.keys(e).forEach(function(t){switch(t){case"type":case"properties":case"geometry":return;default:n[t]=e[t]}}),n.properties=function n(r){var i={};if(!r)return i;Object.keys(r).forEach(function(t){var e=r[t];"object"===g()(e)?null===e?i[t]=null:e.length?i[t]=e.map(function(t){return t}):i[t]=n(e):i[t]=e});return i}(e.properties),n.geometry=y(e.geometry),n}function y(t){var e={type:t.type};return t.bbox&&(e.bbox=t.bbox),"GeometryCollection"===t.type?e.geometries=t.geometries.map(y):e.coordinates=function e(t){if("object"!==g()(t[0]))return t.slice();return t.map(function(t){return e(t)})}(t.coordinates),e}var b=function(t){if(!t)throw new Error("geojson is required");switch(t.type){case"Feature":return d(t);case"FeatureCollection":return e=t,n={type:"FeatureCollection"},Object.keys(e).forEach(function(t){switch(t){case"type":case"features":return;default:n[t]=e[t]}}),n.features=e.features.map(d),n;case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return y(t);default:throw new Error("unknown GeoJSON type")}var e,n};function w(t,n,e){if(!f(e=e||{}))throw new Error("options is invalid");var r=e.mutate;if(!t)throw new Error("geojson is required");return Array.isArray(t)&&h(t[0])?t=("mercator"===n?C:E)(t):(!0!==r&&(t=b(t)),x(t,function(t){var e=("mercator"===n?C:E)(t);t[0]=e[0],t[1]=e[1]})),t}function C(t){var e,n=Math.PI/180,r=20037508.342789244,i=[6378137*(Math.abs(t[0])<=180?t[0]:t[0]-360*((e=t[0])<0?-1:0<e?1:0))*n,6378137*Math.log(Math.tan(.25*Math.PI+.5*t[1]*n))];return i[0]>r&&(i[0]=r),i[0]<-r&&(i[0]=-r),i[1]>r&&(i[1]=r),i[1]<-r&&(i[1]=-r),i}function E(t){var e=180/Math.PI;return[t[0]*e/6378137,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/6378137)))*e]}function P(){return new O}function O(){this.reset()}O.prototype={constructor:O,reset:function(){this.s=this.t=0},add:function(t){S(T,t,this.t),S(this,T.s,this.s),this.s?this.t+=T.t:this.s=T.t},valueOf:function(){return this.s}};var T=new O;function S(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var N=1e-6,A=Math.PI,I=A/2,L=A/4,M=2*A,D=180/A,R=A/180,j=Math.abs,k=Math.atan,F=Math.atan2,B=Math.cos,G=(Math.ceil,Math.exp),z=(Math.floor,Math.log),U=(Math.pow,Math.sin),V=(Math.sign,Math.sqrt),H=Math.tan;function q(t){return 1<t?0:t<-1?A:Math.acos(t)}function W(t){return 1<t?I:t<-1?-I:Math.asin(t)}function Y(){}function X(t,e){t&&Z.hasOwnProperty(t.type)&&Z[t.type](t,e)}var J={Feature:function(t,e){X(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)X(n[r].geometry,e)}},Z={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){K(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)K(n[r],e,0)},Polygon:function(t,e){$(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)$(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)X(n[r],e)}};function K(t,e,n){var r,i=-1,o=t.length-n;for(e.lineStart();++i<o;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function $(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)K(t[n],e,1);e.polygonEnd()}var Q=function(t,e){t&&J.hasOwnProperty(t.type)?J[t.type](t,e):X(t,e)};P(),P();function tt(t){return[F(t[1],t[0]),W(t[2])]}function et(t){var e=t[0],n=t[1],r=B(n);return[r*B(e),r*U(e),U(n)]}function nt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function rt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function it(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function ot(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function at(t){var e=V(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}P();var st=function(n,r){function t(t,e){return t=n(t,e),r(t[0],t[1])}return n.invert&&r.invert&&(t.invert=function(t,e){return(t=r.invert(t,e))&&n.invert(t[0],t[1])}),t};function lt(t,e){return[A<t?t-M:t<-A?t+M:t,e]}function ut(t,e,n){return(t%=M)?e||n?st(pt(t),ht(e,n)):pt(t):e||n?ht(e,n):lt}function ct(n){return function(t,e){return[A<(t+=n)?t-M:t<-A?t+M:t,e]}}function pt(t){var e=ct(t);return e.invert=ct(-t),e}function ht(t,e){var s=B(t),l=U(t),u=B(e),c=U(e);function n(t,e){var n=B(e),r=B(t)*n,i=U(t)*n,o=U(e),a=o*s+r*l;return[F(i*u-a*c,r*s-o*l),W(a*u+i*c)]}return n.invert=function(t,e){var n=B(e),r=B(t)*n,i=U(t)*n,o=U(e),a=o*u-i*c;return[F(i*u+o*c,r*s+a*l),W(a*s-r*l)]},n}lt.invert=lt;function ft(t,e,n,r,i,o){if(n){var a=B(e),s=U(e),l=r*n;null==i?(i=e+r*M,o=e-l/2):(i=dt(a,i),o=dt(a,o),(0<r?i<o:o<i)&&(i+=r*M));for(var u,c=i;0<r?o<c:c<o;c-=l)u=tt([a,-s*B(c),-s*U(c)]),t.point(u[0],u[1])}}function dt(t,e){(e=et(e))[0]-=t,at(e);var n=q(-e[1]);return((-e[2]<0?-n:n)+M-N)%M}function yt(t,e){return j(t[0]-e[0])<N&&j(t[1]-e[1])<N}var gt=function(){var n,e=[];return{point:function(t,e){n.push([t,e])},lineStart:function(){e.push(n=[])},lineEnd:Y,rejoin:function(){1<e.length&&e.push(e.pop().concat(e.shift()))},result:function(){var t=e;return e=[],n=null,t}}},_t=function(t,e,n,r,i,o){var a=t[0],s=t[1],l=0,u=1,c=e[0]-a,p=e[1]-s,h=n-a;if(c||!(0<h)){if(h/=c,c<0){if(h<l)return;h<u&&(u=h)}else if(0<c){if(u<h)return;l<h&&(l=h)}if(h=i-a,c||!(h<0)){if(h/=c,c<0){if(u<h)return;l<h&&(l=h)}else if(0<c){if(h<l)return;h<u&&(u=h)}if(h=r-s,p||!(0<h)){if(h/=p,p<0){if(h<l)return;h<u&&(u=h)}else if(0<p){if(u<h)return;l<h&&(l=h)}if(h=o-s,p||!(h<0)){if(h/=p,p<0){if(u<h)return;l<h&&(l=h)}else if(0<p){if(h<l)return;h<u&&(u=h)}return 0<l&&(t[0]=a+l*c,t[1]=s+l*p),u<1&&(e[0]=a+u*c,e[1]=s+u*p),!0}}}}};function mt(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var vt=function(t,e,n,r,o){var a,i,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],i=t[e];if(yt(r,i)){for(o.lineStart(),a=0;a<e;++a)o.point((r=t[a])[0],r[1]);o.lineEnd()}else s.push(n=new mt(r,t,null,!0)),l.push(n.o=new mt(r,null,n,!1)),s.push(n=new mt(i,t,null,!1)),l.push(n.o=new mt(i,null,n,!0))}}),s.length){for(l.sort(e),bt(s),bt(l),a=0,i=l.length;a<i;++a)l[a].e=n=!n;for(var u,c,p=s[0];;){for(var h=p,f=!0;h.v;)if((h=h.n)===p)return;u=h.z,o.lineStart();do{if(h.v=h.o.v=!0,h.e){if(f)for(a=0,i=u.length;a<i;++a)o.point((c=u[a])[0],c[1]);else r(h.x,h.n.x,1,o);h=h.n}else{if(f)for(u=h.p.z,a=u.length-1;0<=a;--a)o.point((c=u[a])[0],c[1]);else r(h.x,h.p.x,-1,o);h=h.p}u=(h=h.o).z,f=!f}while(!h.v);o.lineEnd()}}};function bt(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function wt(t,e){return t<e?-1:e<t?1:e<=t?0:NaN}var xt,Ct;1===(xt=wt).length&&(Ct=xt,xt=function(t,e){return wt(Ct(t),e)});var Et=Array.prototype;Et.slice,Et.map,Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var Pt=function(t){for(var e,n,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(n=new Array(a);0<=--i;)for(e=(r=t[i]).length;0<=--e;)n[--a]=r[e];return n};var Ot=1e9,Tt=-Ot;function St(_,m,v,b){function w(t,e){return _<=t&&t<=v&&m<=e&&e<=b}function x(t,e,n,r){var i=0,o=0;if(null==t||(i=a(t,n))!==(o=a(e,n))||s(t,e)<0^0<n)for(;r.point(0===i||3===i?_:v,1<i?b:m),(i=(i+n+4)%4)!==o;);else r.point(e[0],e[1])}function a(t,e){return j(t[0]-_)<N?0<e?0:3:j(t[0]-v)<N?0<e?2:1:j(t[1]-m)<N?0<e?1:0:0<e?3:2}function C(t,e){return s(t.x,e.x)}function s(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(r){var i,p,o,a,s,l,u,c,h,f,d,y=r,t=gt(),e={point:n,lineStart:function(){e.point=g,p&&p.push(o=[]);f=!0,h=!1,u=c=NaN},lineEnd:function(){i&&(g(a,s),l&&h&&t.rejoin(),i.push(t.result()));e.point=n,h&&y.lineEnd()},polygonStart:function(){y=t,i=[],p=[],d=!0},polygonEnd:function(){var t=function(){for(var t=0,e=0,n=p.length;e<n;++e)for(var r,i,o=p[e],a=1,s=o.length,l=o[0],u=l[0],c=l[1];a<s;++a)r=u,i=c,l=o[a],u=l[0],c=l[1],i<=b?b<c&&(c-i)*(_-r)<(u-r)*(b-i)&&++t:c<=b&&(u-r)*(b-i)<(c-i)*(_-r)&&--t;return t}(),e=d&&t,n=(i=Pt(i)).length;(e||n)&&(r.polygonStart(),e&&(r.lineStart(),x(null,null,1,r),r.lineEnd()),n&&vt(i,C,t,x,r),r.polygonEnd());y=r,i=p=o=null}};function n(t,e){w(t,e)&&y.point(t,e)}function g(t,e){var n,r,i=w(t,e);p&&o.push([t,e]),f?(a=t,s=e,f=!1,(l=i)&&(y.lineStart(),y.point(t,e))):i&&h?y.point(t,e):(n=[u=Math.max(Tt,Math.min(Ot,u)),c=Math.max(Tt,Math.min(Ot,c))],r=[t=Math.max(Tt,Math.min(Ot,t)),e=Math.max(Tt,Math.min(Ot,e))],_t(n,r,_,m,v,b)?(h||(y.lineStart(),y.point(n[0],n[1])),y.point(r[0],r[1]),i||y.lineEnd(),d=!1):i&&(y.lineStart(),y.point(t,e),d=!1)),u=t,c=e,h=i}return e}}function It(t,e){var n=e[0],r=e[1],i=[U(n),-B(n),0],o=0,a=0;At.reset();for(var s=0,l=t.length;s<l;++s)if(c=(u=t[s]).length)for(var u,c,p=u[c-1],h=p[0],f=p[1]/2+L,d=U(f),y=B(f),g=0;g<c;++g,h=w,d=C,y=E,p=b){var _,m,v,b=u[g],w=b[0],x=b[1]/2+L,C=U(x),E=B(x),P=w-h,O=0<=P?1:-1,T=O*P,S=A<T,I=d*C;At.add(F(I*O*U(T),y*E+I*B(T))),o+=S?P+O*M:P,S^n<=h^n<=w&&(at(_=rt(et(p),et(b))),at(m=rt(i,_)),((v=(S^0<=P?-1:1)*W(m[2]))<r||r===v&&(_[0]||_[1]))&&(a+=S^0<=P?1:-1))}return(o<-N||o<N&&At<-N)^1&a}var At=P();P();var Lt=function(t){return t};P(),P();var Nt=1/0,Mt=Nt,Dt=-Nt,Rt=Dt;var jt={point:function(t,e){t<Nt&&(Nt=t);Dt<t&&(Dt=t);e<Mt&&(Mt=e);Rt<e&&(Rt=e)},lineStart:Y,lineEnd:Y,polygonStart:Y,polygonEnd:Y,result:function(){var t=[[Nt,Mt],[Dt,Rt]];return Dt=Rt=-(Mt=Nt=1/0),t}};P();function kt(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}kt(4.5);function Ft(m,v,b,w){return function(r,s){var l,u,c,i=v(s),e=r.invert(w[0],w[1]),p=gt(),h=v(p),f=!1,n={point:o,lineStart:a,lineEnd:d,polygonStart:function(){n.point=y,n.lineStart=g,n.lineEnd=_,u=[],l=[]},polygonEnd:function(){n.point=o,n.lineStart=a,n.lineEnd=d,u=Pt(u);var t=It(l,e);u.length?(f||(s.polygonStart(),f=!0),vt(u,Gt,t,b,s)):t&&(f||(s.polygonStart(),f=!0),s.lineStart(),b(null,null,1,s),s.lineEnd()),f&&(s.polygonEnd(),f=!1),u=l=null},sphere:function(){s.polygonStart(),s.lineStart(),b(null,null,1,s),s.lineEnd(),s.polygonEnd()}};function o(t,e){var n=r(t,e);m(t=n[0],e=n[1])&&s.point(t,e)}function t(t,e){var n=r(t,e);i.point(n[0],n[1])}function a(){n.point=t,i.lineStart()}function d(){n.point=o,i.lineEnd()}function y(t,e){c.push([t,e]);var n=r(t,e);h.point(n[0],n[1])}function g(){h.lineStart(),c=[]}function _(){y(c[0][0],c[0][1]),h.lineEnd();var t,e,n,r,i=h.clean(),o=p.result(),a=o.length;if(c.pop(),l.push(c),c=null,a)if(1&i){if(0<(e=(n=o[0]).length-1)){for(f||(s.polygonStart(),f=!0),s.lineStart(),t=0;t<e;++t)s.point((r=n[t])[0],r[1]);s.lineEnd()}}else 1<a&&2&i&&o.push(o.pop().concat(o.shift())),u.push(o.filter(Bt))}return n}}function Bt(t){return 1<t.length}function Gt(t,e){return((t=t.x)[0]<0?t[1]-I-N:I-t[1])-((e=e.x)[0]<0?e[1]-I-N:I-e[1])}var zt=Ft(function(){return 1},function(p){var h,f=NaN,d=NaN,y=NaN;return{lineStart:function(){p.lineStart(),h=1},point:function(t,e){var n,r,i,o,a,s,l,u=0<t?A:-A,c=j(t-f);j(c-A)<N?(p.point(f,d=0<(d+e)/2?I:-I),p.point(y,d),p.lineEnd(),p.lineStart(),p.point(u,d),p.point(t,d),h=0):y!==u&&A<=c&&(j(f-y)<N&&(f-=y*N),j(t-u)<N&&(t-=u*N),r=d,o=e,l=U((n=f)-(i=t)),d=j(l)>N?k((U(r)*(s=B(o))*U(i)-U(o)*(a=B(r))*U(n))/(a*s*l)):(r+o)/2,p.point(y,d),p.lineEnd(),p.lineStart(),p.point(u,d),h=0),p.point(f=t,d=e),y=u},lineEnd:function(){p.lineEnd(),f=d=NaN},clean:function(){return 2-h}}},function(t,e,n,r){var i;{var o;null==t?(i=n*I,r.point(-A,i),r.point(0,i),r.point(A,i),r.point(A,0),r.point(A,-i),r.point(0,-i),r.point(-A,-i),r.point(-A,0),r.point(-A,i)):j(t[0]-e[0])>N?(o=t[0]<e[0]?A:-A,i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)):r.point(e[0],e[1])}},[-A,-I]);var Ut=function(i,o){var O=B(i),f=0<O,d=j(O)>N;function y(t,e){return B(t)*B(e)>O}function g(t,e,n){var r=[1,0,0],i=rt(et(t),et(e)),o=nt(i,i),a=i[0],s=o-a*a;if(!s)return!n&&t;var l=O*o/s,u=-O*a/s,c=rt(r,i),p=ot(r,l);it(p,ot(i,u));var h=c,f=nt(p,h),d=nt(h,h),y=f*f-d*(nt(p,p)-1);if(!(y<0)){var g=V(y),_=ot(h,(-f-g)/d);if(it(_,p),_=tt(_),!n)return _;var m,v=t[0],b=e[0],w=t[1],x=e[1];b<v&&(m=v,v=b,b=m);var C=b-v,E=j(C-A)<N;if(!E&&x<w&&(m=w,w=x,x=m),E||C<N?E?0<w+x^_[1]<(j(_[0]-v)<N?w:x):w<=_[1]&&_[1]<=x:A<C^(v<=_[0]&&_[0]<=b)){var P=ot(h,(-f+g)/d);return it(P,p),[_,tt(P)]}}}function _(t,e){var n=f?i:A-i,r=0;return t<-n?r|=1:n<t&&(r|=2),e<-n?r|=4:n<e&&(r|=8),r}return Ft(y,function(s){var l,u,c,p,h;return{lineStart:function(){p=c=!1,h=1},point:function(t,e){var n,r,i=[t,e],o=y(t,e),a=f?o?0:_(t,e):o?_(t+(t<0?A:-A),e):0;!l&&(p=c=o)&&s.lineStart(),o!==c&&((n=g(l,i))&&!yt(l,n)&&!yt(i,n)||(i[0]+=N,i[1]+=N,o=y(i[0],i[1]))),o!==c?(h=0,o?(s.lineStart(),n=g(i,l),s.point(n[0],n[1])):(n=g(l,i),s.point(n[0],n[1]),s.lineEnd()),l=n):d&&l&&f^o&&(a&u||!(r=g(i,l,!0))||(h=0,f?(s.lineStart(),s.point(r[0][0],r[0][1]),s.point(r[1][0],r[1][1]),s.lineEnd()):(s.point(r[1][0],r[1][1]),s.lineEnd(),s.lineStart(),s.point(r[0][0],r[0][1])))),!o||l&&yt(l,i)||s.point(i[0],i[1]),l=i,c=o,u=a},lineEnd:function(){c&&s.lineEnd(),l=null},clean:function(){return h|(p&&c)<<1}}},function(t,e,n,r){ft(r,i,o,n,t,e)},f?[0,-i]:[-A,i-A])};function Vt(r){return function(t){var e=new Ht;for(var n in r)e[n]=r[n];return e.stream=t,e}}function Ht(){}function qt(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=o&&t.clipExtent(null),Q(n,t.stream(jt));var a=jt.result(),s=Math.min(r/(a[1][0]-a[0][0]),i/(a[1][1]-a[0][1])),l=+e[0][0]+(r-s*(a[1][0]+a[0][0]))/2,u=+e[0][1]+(i-s*(a[1][1]+a[0][1]))/2;return null!=o&&t.clipExtent(o),t.scale(150*s).translate([l,u])}function Wt(t,e,n){return qt(t,[[0,0],e],n)}Ht.prototype={constructor:Ht,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Yt=B(30*R),Xt=function(t,e){return+e?(I=t,A=e,function(i){var n,r,o,a,s,l,u,c,p,h,f,d,y={point:t,lineStart:e,lineEnd:_,polygonStart:function(){i.polygonStart(),y.lineStart=m},polygonEnd:function(){i.polygonEnd(),y.lineStart=e}};function t(t,e){t=I(t,e),i.point(t[0],t[1])}function e(){c=NaN,y.point=g,i.lineStart()}function g(t,e){var n=et([t,e]),r=I(t,e);L(c,p,u,h,f,d,c=r[0],p=r[1],u=t,h=n[0],f=n[1],d=n[2],16,i),i.point(c,p)}function _(){y.point=t,i.lineEnd()}function m(){e(),y.point=v,y.lineEnd=b}function v(t,e){g(n=t,e),r=c,o=p,a=h,s=f,l=d,y.point=g}function b(){L(c,p,u,h,f,d,r,o,n,a,s,l,16,i),y.lineEnd=_,_()}return y}):(n=t,Vt({point:function(t,e){t=n(t,e),this.stream.point(t[0],t[1])}}));var n,I,A;function L(t,e,n,r,i,o,a,s,l,u,c,p,h,f){var d,y,g,_,m,v,b,w,x,C,E,P,O=a-t,T=s-e,S=O*O+T*T;4*A<S&&h--&&(g=o+p,m=W(g/=_=V((d=r+u)*d+(y=i+c)*y+g*g)),v=j(j(g)-1)<N||j(n-l)<N?(n+l)/2:F(y,d),w=(b=I(v,m))[0],x=b[1],(A<(P=T*(C=w-t)-O*(E=x-e))*P/S||.3<j((O*C+T*E)/S-.5)||r*u+i*c+o*p<Yt)&&(L(t,e,n,r,i,o,w,x,v,d/=_,y/=_,g,h,f),f.point(w,x),L(w,x,v,d,y,g,a,s,l,u,c,p,h,f)))}};var Jt=Vt({point:function(t,e){this.stream.point(t*R,e*R)}});function Zt(t){return Kt(function(){return t})()}function Kt(t){var n,r,i,e,o,a,s,l,u,c,p=150,h=480,f=250,d=0,y=0,g=0,_=0,m=0,v=null,b=zt,w=null,x=Lt,C=.5,E=Xt(T,C);function P(t){return[(t=o(t[0]*R,t[1]*R))[0]*p+r,i-t[1]*p]}function O(t){return(t=o.invert((t[0]-r)/p,(i-t[1])/p))&&[t[0]*D,t[1]*D]}function T(t,e){return[(t=n(t,e))[0]*p+r,i-t[1]*p]}function S(){o=st(e=ut(g,_,m),n);var t=n(d,y);return r=h-t[0]*p,i=f+t[1]*p,I()}function I(){return u=c=null,P}return P.stream=function(t){return u&&c===t?u:u=Jt(b(e,E(x(c=t))))},P.clipAngle=function(t){return arguments.length?(b=+t?Ut(v=t*R,6*R):(v=null,zt),I()):v*D},P.clipExtent=function(t){return arguments.length?(x=null==t?(w=a=s=l=null,Lt):St(w=+t[0][0],a=+t[0][1],s=+t[1][0],l=+t[1][1]),I()):null==w?null:[[w,a],[s,l]]},P.scale=function(t){return arguments.length?(p=+t,S()):p},P.translate=function(t){return arguments.length?(h=+t[0],f=+t[1],S()):[h,f]},P.center=function(t){return arguments.length?(d=t[0]%360*R,y=t[1]%360*R,S()):[d*D,y*D]},P.rotate=function(t){return arguments.length?(g=t[0]%360*R,_=t[1]%360*R,m=2<t.length?t[2]%360*R:0,S()):[g*D,_*D,m*D]},P.precision=function(t){return arguments.length?(E=Xt(T,C=t*t),I()):V(C)},P.fitExtent=function(t,e){return qt(P,t,e)},P.fitSize=function(t,e){return Wt(P,t,e)},function(){return n=t.apply(this,arguments),P.invert=n.invert&&O,S()}}function $t(o){return function(t,e){var n=B(t),r=B(e),i=o(n*r);return[i*r*U(t),i*U(e)]}}function Qt(a){return function(t,e){var n=V(t*t+e*e),r=a(n),i=U(r),o=B(r);return[F(t*i,n*o),W(n&&e*i/n)]}}var te=$t(function(t){return V(2/(1+t))});te.invert=Qt(function(t){return 2*W(t/2)});var ee=$t(function(t){return(t=q(t))&&t/U(t)});ee.invert=Qt(function(t){return t});function ne(t,e){return[t,z(H((I+e)/2))]}ne.invert=function(t,e){return[t,2*k(G(e))-I]};function re(r){var i,o,a,s=Zt(r),e=s.center,l=s.scale,n=s.translate,u=s.clipExtent,c=null;function p(){var e,t=A*l(),n=s((e=ut((e=s.rotate())[0]*R,e[1]*R,2<e.length?e[2]*R:0),function(t){return(t=e.invert(t[0]*R,t[1]*R))[0]*=D,t[1]*=D,t}([0,0])));return u(null==c?[[n[0]-t,n[1]-t],[n[0]+t,n[1]+t]]:r===ne?[[Math.max(n[0]-t,c),i],[Math.min(n[0]+t,o),a]]:[[c,Math.max(n[1]-t,i)],[o,Math.min(n[1]+t,a)]])}return s.scale=function(t){return arguments.length?(l(t),p()):l()},s.translate=function(t){return arguments.length?(n(t),p()):n()},s.center=function(t){return arguments.length?(e(t),p()):e()},s.clipExtent=function(t){return arguments.length?(null==t?c=i=o=a=null:(c=+t[0][0],i=+t[0][1],o=+t[1][0],a=+t[1][1]),p()):null==c?null:[[c,i],[o,a]]},p()}Qt(k);Qt(W);Qt(function(t){return 2*k(t)});function ie(t,e){return[z(H((I+e)/2)),-t]}ie.invert=function(t,e){return[-e,2*k(G(t))-I]};var oe=function(){var t=re(ie),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?n([t[0],t[1],2<t.length?t[2]+90:90]):[(t=n())[0],t[1],t[2]-90]},n([0,0,90]).scale(159.155)},ae=6371008.8,se={meters:ae,metres:ae,millimeters:1e3*ae,millimetres:1e3*ae,centimeters:100*ae,centimetres:100*ae,kilometers:ae/1e3,kilometres:ae/1e3,miles:ae/1609.344,nauticalmiles:ae/1852,inches:39.37*ae,yards:ae/1.0936,feet:3.28084*ae,radians:1,degrees:ae/111325};function le(t,e,n){if(!fe(n=n||{}))throw new Error("options is invalid");var r=n.bbox,i=n.id;if(void 0===t)throw new Error("geometry is required");if(e&&e.constructor!==Object)throw new Error("properties must be an Object");r&&de(r),i&&ye(i);var o={type:"Feature"};return i&&(o.id=i),r&&(o.bbox=r),o.properties=e||{},o.geometry=t,o}function ue(t,e){if(!fe(e=e||{}))throw new Error("options is invalid");var n=e.bbox,r=e.id;if(!t)throw new Error("No features passed");if(!Array.isArray(t))throw new Error("features must be an Array");n&&de(n),r&&ye(r);var i={type:"FeatureCollection"};return r&&(i.id=r),n&&(i.bbox=n),i.features=t,i}function ce(t,e){if(null==t)throw new Error("radians is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=se[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t*n}function pe(t,e){if(null==t)throw new Error("distance is required");if(e&&"string"!=typeof e)throw new Error("units must be a string");var n=se[e||"kilometers"];if(!n)throw new Error(e+" units is invalid");return t/n}function he(t){return!isNaN(t)&&null!==t&&!Array.isArray(t)}function fe(t){return t&&t.constructor===Object}function de(t){if(!t)throw new Error("bbox is required");if(!Array.isArray(t))throw new Error("bbox must be an Array");if(4!==t.length&&6!==t.length)throw new Error("bbox must be an Array of 4 or 6 numbers");t.forEach(function(t){if(!he(t))throw new Error("bbox must only contain numbers")})}function ye(t){if(!t)throw new Error("id is required");if(-1===["string","number"].indexOf(g()(t)))throw new Error("id must be a number or a string")}function ge(t,n,r,i){var e=t.properties||{},o="Feature"===t.type?t.geometry:t;if("GeometryCollection"===o.type){var a=[];return _(t,function(t){var e=ge(t,n,r,i);e&&a.push(e)}),ue(a)}var s,l=m(t),u=50<l[1]&&50<l[3],c=u?{type:o.type,coordinates:function e(t,n){if("object"!==g()(t[0]))return n(t);return t.map(function(t){return e(t,n)})}(o.coordinates,_e(o))}:w(o,"mercator",s),p=(new v.GeoJSONReader).read(c),h=ce(pe(n,r),"meters"),f=v.BufferOp.bufferOp(p,h);if(!function t(e){if(Array.isArray(e[0]))return t(e[0]);return isNaN(e[0])}((f=(new v.GeoJSONWriter).write(f)).coordinates)){var d,y=u?{type:f.type,coordinates:function e(t,n){if("object"!==g()(t[0]))return n.invert(t);return t.map(function(t){return e(t,n)})}(f.coordinates,_e(o))}:w(f,"wgs84",d);return y.geometry?y:le(y,e)}}function _e(t){var e=p(t).geometry.coordinates.reverse(),n=e.map(function(t){return-t});return oe().center(e).rotate(n).scale(ae)}e.default=function(t,n,e){var r=(e=e||{}).units,i=e.steps||64;if(!t)throw new Error("geojson is required");if("object"!==g()(e))throw new Error("options must be an object");if("number"!=typeof i)throw new Error("steps must be an number");if(void 0===n)throw new Error("radius is required");if(i<=0)throw new Error("steps must be greater than 0");i=i||64,r=r||"kilometers";var o=[];switch(t.type){case"GeometryCollection":return _(t,function(t){var e=ge(t,n,r,i);e&&o.push(e)}),ue(o);case"FeatureCollection":return a(t,function(t){var e=ge(t,n,r,i);e&&a(e,function(t){t&&o.push(t)})}),ue(o)}return ge(t,n,r,i)}},,function(t,e,n){"use strict";n.r(e),n.d(e,"getValue",function(){return le}),n.d(e,"_colorWithOpacity",function(){return ce}),n.d(e,"_filterCache",function(){return E}),n.d(e,"_evaluateFilter",function(){return ue}),n.d(e,"_fromTemplate",function(){return pe}),n.d(e,"_getValue",function(){return le}),n.d(e,"_functionCache",function(){return x});var r=n(154),f=n.n(r),i=n(244),o=n.n(i),Yt=n(73),Xt=n(53),Jt=n(56),Zt=n(157),Kt=n(246),$t=n(100),Qt=n(58),a=["type","source","source-layer","minzoom","maxzoom","filter","layout"];var g=function(t){t=t.slice();for(var e=Object.create(null),n=0;n<t.length;n++)e[t[n].id]=t[n];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=function(t,e){var n={};for(var r in t)"ref"!==r&&(n[r]=t[r]);return a.forEach(function(t){t in e&&(n[t]=e[t])}),n}(t[r],e[t[r].ref]));return t};var d=n(72),s=n(245),te=n.n(s),l=n(35),u=n(47),c=n(18);function ee(t){return t*Math.PI/180}var _=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();var p=Array(256).join(" ");function ne(t,e){if(.05<=e){for(var n="",r=t.split("\n"),i=p.slice(0,Math.round(e/.1)),o=0,a=r.length;o<a;++o)0<o&&(n+="\n"),n+=r[o].split("").join(i);return n}return t}var re=document.createElement("CANVAS").getContext("2d");function ie(t,e){return re.measureText(t).width+(t.length-1)*e}var oe={};c.o&&Object(l.a)(c.o,u.a.CLEAR,function(){oe={}});var y=d.d.isFunction,m=d.d.convertFunction,v=d.b.isExpression,h=d.b.createPropertyExpression,ae={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},b=function(t,e){var n=h(t,e);if("error"===n.result)throw new Error(n.value.map(function(t){return"".concat(t.key,": ").concat(t.message)}).join(", "));return n.value},se={},w={zoom:0},x={};function le(t,e,n,r,i){return C.apply(this,arguments)}function C(){return(C=o()(f.a.mark(function t(e,n,r,i,o){var a,s,l,u,c,p,h;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=window.v8,s=e.id,x[s]||(x[s]={}),(l=x[s])[r]||(u=(e[n]||se)[r],c=a["".concat(n,"_").concat(e.type)][r],void 0===u&&(u=c.default),!(p=v(u))&&y(u)&&(u=m(u,c),p=!0),p?(h=b(u,c),l[r]=h.evaluate.bind(h)):("color"==c.type&&(u=d.a.parse(u)),l[r]=function(){return u})),w.zoom=i,t.abrupt("return",l[r](w,o));case 7:case"end":return t.stop()}},t)}))).apply(this,arguments)}var E={};function ue(t,e,n,r){return t in E||(E[t]=Object(d.c)(e)),w.zoom=r,E[t].filter(w,n)}function ce(t,e){if(t){if(0===t.a||0===e)return;var n=t.a;return e=void 0===e?1:e,"rgba("+Math.round(255*t.r/n)+","+Math.round(255*t.g/n)+","+Math.round(255*t.b/n)+","+n*e+")"}return t}var P=/^([^]*)\{(.*)\}([^]*)$/;function pe(t,e){var n,r;do{(r=t.match(P))&&(n=e[r[2]]||"",t=r[1]+n+r[3])}while(r);return t}e.default=function(t,e){var jt,kt,n,Ft=2<arguments.length&&void 0!==arguments[2]?arguments[2]:_,Bt=3<arguments.length?arguments[3]:void 0,r=4<arguments.length?arguments[4]:void 0,Gt=5<arguments.length?arguments[5]:void 0;if("string"==typeof t&&(t=JSON.parse(t)),8!=t.version)throw new Error("glStyle version 8 required.");r&&((n=new Image).crossOrigin="anonymous",n.onload=function(){kt=[(jt=n).width,n.height],n.onload=null},n.src=r);for(var i,o=g(t.layers),zt={},a=[],s=0,l=o.length;s<l;++s)for(var u=o[s],c=u.id,p=0;p<e.length;p++){var h=e[p];if("string"==typeof h&&u.source==h||-1!==h.indexOf(c)){var f=u["source-layer"];if(!i){i=u.source;var d=t.sources[i];if(!d)continue;var y=d.type;if("vector"!==y&&"geojson"!==y)throw new Error('Source "'.concat(i,'" is not of type "vector" or "geojson", but "').concat(y,'"'))}(zt[f]||(zt[f]=[])).push({layer:u,index:s}),a.push(c)}delete x[c],delete E[c]}var Ut=new Jt.a,Vt=new Xt.a,Ht={},qt={},Wt=[];return function(t,e){var n=t.getProperties(),r=zt[n.layer];if(r){for(var i=e+1,o=ae[t.getGeometry().getType()],a={properties:n,type:o},s=-1,l=(Ft[i],0),u=r.length;l<u;++l){var c=r[l],p=c.layer,h=p.id,f=p.layout||se,d=p.paint||se;if(!("none"===f.visibility||"minzoom"in p&&i<p.minzoom||"maxzoom"in p&&i>=p.maxzoom)){var y=p.filter;if(!y||ue(h,y,a,i)){var g,_,m,v,b,w,x,C=void 0,E=void 0,P=void 0,O=void 0,T=void 0,S=void 0,I=c.index;3==o&&"fill"==p.type&&(E=le(p,"paint","fill-opacity",i,a),"fill-pattern"in d?(g=le(p,"paint","fill-pattern",i,a))&&(_=pe(g,n),jt&&Bt&&Bt[_]&&((S=Wt[++s])&&S.getFill()&&!S.getStroke()&&!S.getText()||(S=Wt[s]=new Yt.a({fill:new Xt.a})),P=S.getFill(),S.setZIndex(I),(v=qt[m=_+"."+E])||(b=Bt[_],(w=document.createElement("canvas")).width=b.width,w.height=b.height,(x=w.getContext("2d")).globalAlpha=E,x.drawImage(jt,b.x,b.y,b.width,b.height,0,0,b.width,b.height),v=x.createPattern(w,"repeat"),qt[m]=v),P.setColor(v))):(C=ce(le(p,"paint","fill-color",i,a),E))&&("fill-outline-color"in d&&(T=ce(le(p,"paint","fill-outline-color",i,a),E)),T=T||C,(S=Wt[++s])&&S.getFill()&&S.getStroke()&&!S.getText()||(S=Wt[s]=new Yt.a({fill:new Xt.a,stroke:new Jt.a})),(P=S.getFill()).setColor(C),(O=S.getStroke()).setColor(T),O.setWidth(1),S.setZIndex(I))),1!=o&&"line"==p.type&&function(){C=!("line-pattern"in d)&&"line-color"in d?ce(le(p,"paint","line-color",i,a),le(p,"paint","line-opacity",i,a)):void 0;var e=le(p,"paint","line-width",i,a);C&&0<e&&((S=Wt[++s])&&S.getStroke()&&!S.getFill()&&!S.getText()||(S=Wt[s]=new Yt.a({stroke:new Jt.a})),(O=S.getStroke()).setLineCap(le(p,"layout","line-cap",i,a)),O.setLineJoin(le(p,"layout","line-join",i,a)),O.setMiterLimit(le(p,"layout","line-miter-limit",i,a)),O.setColor(C),O.setWidth(e),O.setLineDash(d["line-dasharray"]?le(p,"paint","line-dasharray",i,a).map(function(t){return t*e}):null),S.setZIndex(I))}();var A,L,N,M,D,R,j=!1,k=null,F=0,B=void 0,G=void 0;if((1==o||2==o)&&"icon-image"in f){var z=le(p,"layout","icon-image",i,a);if(z){A=pe(z,n);var U=void 0;if(jt&&Bt&&Bt[A]){var V=le(p,"layout","icon-rotation-alignment",i,a);if(2==o){var H=t.getGeometry();if(H.getFlatMidpoint){var q=H.getExtent();if(150<Math.sqrt(Math.max(Math.pow((q[2]-q[0])/8,2),Math.pow((q[3]-q[1])/8,2)))){var W=H.getFlatMidpoint(),U=new Qt.a(W);if("line"===le(p,"layout","symbol-placement",i,a)&&"map"===V)for(var Y=H.getStride(),X=H.getFlatCoordinates(),J=0,Z=X.length-Y;J<Z;J+=Y){var K=X[J],$=X[J+1],Q=X[J+Y],tt=X[J+Y+1],et=Math.min(K,Q),nt=Math.min($,tt),rt=Math.max(K,Q),it=Math.max($,tt);if(W[0]>=et&&W[0]<=rt&&W[1]>=nt&&W[1]<=it){F=Math.atan2($-tt,Q-K);break}}}}}if(2!==o||U){(S=Wt[++s])&&S.getImage()&&!S.getFill()&&!S.getStroke()||(S=Wt[s]=new Yt.a),S.setGeometry(U);var ot=le(p,"layout","icon-size",i,a),at=void 0!==d["icon-color"]?le(p,"paint","icon-color",i,a):null,st=A+"."+ot;if(null!==at&&(st+="."+at),!(B=Ht[st])){var lt=Bt[A];if(null!==at){C=ce(at,1);var ut=document.createElement("canvas");ut.width=lt.width,ut.height=lt.height;var ct=ut.getContext("2d");ct.drawImage(jt,lt.x,lt.y,lt.width,lt.height,0,0,lt.width,lt.height);for(var pt=ct.getImageData(0,0,ut.width,ut.height),ht=0,ft=pt.data.length;ht<ft;ht+=4)pt.data[ht]=C[0],pt.data[ht+1]=C[1],pt.data[ht+2]=C[2];ct.putImageData(pt,0,0),B=Ht[st]=new Zt.a({img:ut,imgSize:[ut.width,ut.height],scale:ot/lt.pixelRatio})}else B=Ht[st]=new Zt.a({img:jt,imgSize:kt,size:[lt.width,lt.height],offset:[lt.x,lt.y],rotateWithView:"map"===V,scale:ot/lt.pixelRatio})}B.setRotation(F+ee(le(p,"layout","icon-rotate",i,a))),B.setOpacity(le(p,"paint","icon-opacity",i,a)),S.setImage(B),k=S.getText(),S.setText(void 0),S.setZIndex(99999-I),G=!(j=!0)}else G=!0}}}1==o&&"circle-radius"in d&&((S=Wt[++s])&&S.getImage()&&!S.getFill()&&!S.getStroke()||(S=Wt[s]=new Yt.a),L=le(p,"paint","circle-radius",i,a),N=ce(le(p,"paint","circle-stroke-color",i,a),le(p,"paint","circle-stroke-opacity",i,a)),M=ce(le(p,"paint","circle-color",i,a),le(p,"paint","circle-opacity",i,a)),D=le(p,"paint","circle-stroke-width",i,a),B=(B=Ht[R=L+"."+N+"."+M+"."+D])||(Ht[R]=new $t.a({radius:L,stroke:N&&0<D?new Jt.a({width:D,color:N}):void 0,fill:M?new Xt.a({color:M}):void 0})),S.setImage(B),k=S.getText(),S.setText(void 0),S.setGeometry(void 0),S.setZIndex(99999-I),j=!0);var dt,yt,gt,_t,mt,vt,bt,wt,xt,Ct,Et,Pt,Ot,Tt,St,It,At,Lt,Nt,Mt,Dt,Rt=void 0;"text-field"in f&&(Rt=pe(le(p,"layout","text-field",i,a).toString(),n),E=le(p,"paint","text-opacity",i,a)),Rt&&E&&!G&&(j||((S=Wt[++s])&&S.getText()&&!S.getFill()&&!S.getStroke()||(S=Wt[s]=new Yt.a),S.setImage(void 0),S.setGeometry(void 0)),S.getText()||S.setText(k||new Kt.a({padding:[2,2,2,2]})),k=S.getText(),dt=Math.floor(le(p,"layout","text-size",i,a)/1.5),yt=le(p,"layout","text-font",i,a),gt=le(p,"layout","text-line-height",i,a),_t=te()(Gt?Gt(yt):yt,dt,gt).replace("400","200"),"uppercase"==(mt=f["text-transform"])?Rt=Rt.toUpperCase():"lowercase"==mt&&(Rt=Rt.toLowerCase()),vt=le(p,"layout","text-max-width",i,a),bt=le(p,"layout","text-letter-spacing",i,a),wt=2==o?ne(Rt,bt):function(t,e,n,r){var i=n+","+e+","+t+","+r,o=oe[i];if(!o){var a=t.split(" ");if(1<a.length){re.font=e;for(var s=re.measureText("M").width*n,l="",u=[],c=0,p=a.length;c<p;++c)var h=a[c],f=l+(l?" ":"")+h,l=ie(f,r)<=s?f:(l&&u.push(l),h);l&&u.push(l);for(var d=0,y=u.length;d<y;++d){var g,_,m=u[d];ie(m,r)<.35*s&&(g=0<d?ie(u[d-1],r):1/0,_=d<y-1?ie(u[d+1],r):1/0,u.splice(d,1),g<_?(u[d-1]+=" "+m,--d):u[d]=m+" "+u[d],--y)}for(var v=0,b=u.length-1;v<b;++v){var w,x,C=u[v],E=u[v+1];ie(C,r)>.7*s&&ie(E,r)<.6*s&&(ie(x=(w=C.split(" ")).pop(),r)<.2*s&&(u[v]=w.join(" "),u[v+1]=x+" "+E),--b)}o=u.join("\n")}else o=t;o=ne(o,r),oe[i]=o}return o}(Rt,_t,vt,bt),k.setText(wt),k.setFont(_t),k.setRotation(ee(le(p,"layout","text-rotate",i,a))),xt=le(p,"layout","text-anchor",i,a),Ct=j||1==o?"point":le(p,"layout","symbol-placement",i,a),k.setPlacement(Ct),Et=le(p,"paint","text-halo-width",i,a),Pt=le(p,"layout","text-offset",i,a),Ot=le(p,"paint","text-translate",i,a),St=Tt=0,"point"==Ct?(It="center",-1!==xt.indexOf("left")?(It="left",St=Et):-1!==xt.indexOf("right")&&(It="right",St=-Et),k.setTextAlign(It)):(k.setMaxAngle(ee(le(p,"layout","text-max-angle",i,a))),k.setTextAlign()),At="middle",0==xt.indexOf("bottom")?(At="bottom",Tt=-Et-.5*(gt-1)*dt):0==xt.indexOf("top")&&(At="top",Tt=Et+.5*(gt-1)*dt),k.setTextBaseline(At),k.setOffsetX(Pt[0]*dt+St+Ot[0]),k.setOffsetY(Pt[1]*dt+Tt+Ot[1]),Vt.setColor(ce(le(p,"paint","text-color",i,a),E)),k.setFill(Vt),(Lt=ce(le(p,"paint","text-halo-color",i,a),E))?(Ut.setColor(Lt),Et*=2,Nt=.5*dt,Ut.setWidth(Et<=Nt?Et:Nt),k.setStroke(Ut)):k.setStroke(void 0),(Mt=le(p,"layout","text-padding",i,a))!==(Dt=k.getPadding())[0]&&(Dt[0]=Dt[1]=Dt[2]=Dt[3]=Mt),S.setZIndex(99999-I))}}}return-1<s?(Wt.length=s+1,Wt):void 0}}}}])});
